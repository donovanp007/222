(()=>{var e={};e.id=974,e.ids=[974],e.modules={1932:e=>{"use strict";e.exports=require("url")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5230:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>dH});var a=r(13755),n=r(74110),i=r.t(n,2),s=r(32076);let o=(0,s.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),l=(0,s.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),c=(0,s.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),d=(0,s.A)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),u=(0,s.A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),h=(0,s.A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),m=(0,s.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),p=(0,s.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),f=(0,s.A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),g=(0,s.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var x=r(54045),y=r(90044);function v({className:e,type:t,...r}){return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,y.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var b=r(88995),w=r(43386);let N=(0,r(19776).F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function j({className:e,variant:t,asChild:r=!1,...n}){let i=r?w.DX:"span";return(0,a.jsx)(i,{"data-slot":"badge",className:(0,y.cn)(N({variant:t}),e),...n})}let A=(0,s.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);function S(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),!1===r||!a.defaultPrevented)return t?.(a)}}var k=r(26695);function C(e,t=[]){let r=[],i=()=>{let t=r.map(e=>n.createContext(e));return function(r){let a=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return i.scopeName=e,[function(t,i){let s=n.createContext(i),o=r.length;r=[...r,i];let l=t=>{let{scope:r,children:i,...l}=t,c=r?.[e]?.[o]||s,d=n.useMemo(()=>l,Object.values(l));return(0,a.jsx)(c.Provider,{value:d,children:i})};return l.displayName=t+"Provider",[l,function(r,a){let l=a?.[e]?.[o]||s,c=n.useContext(l);if(c)return c;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:a})=>{let n=r(e)[`__scope${a}`];return{...t,...n}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(i,...t)]}var L=globalThis?.document?n.useLayoutEffect:()=>{},P=i[" useId ".trim().toString()]||(()=>void 0),_=0;function D(e){let[t,r]=n.useState(P());return L(()=>{e||r(e=>e??String(_++))},[e]),e||(t?`radix-${t}`:"")}var I=i[" useInsertionEffect ".trim().toString()]||L;function R({prop:e,defaultProp:t,onChange:r=()=>{},caller:a}){let[i,s,o]=function({defaultProp:e,onChange:t}){let[r,a]=n.useState(e),i=n.useRef(r),s=n.useRef(t);return I(()=>{s.current=t},[t]),n.useEffect(()=>{i.current!==r&&(s.current?.(r),i.current=r)},[r,i]),[r,a,s]}({defaultProp:t,onChange:r}),l=void 0!==e,c=l?e:i;{let t=n.useRef(void 0!==e);n.useEffect(()=>{let e=t.current;if(e!==l){let t=l?"controlled":"uncontrolled";console.warn(`${a} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=l},[l,a])}return[c,n.useCallback(t=>{if(l){let r="function"==typeof t?t(e):t;r!==e&&o.current?.(r)}else s(t)},[l,e,s,o])]}Symbol("RADIX:SYNC_STATE");var E=r(99523),T=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,w.TL)(`Primitive.${t}`),i=n.forwardRef((e,n)=>{let{asChild:i,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(i?r:t,{...s,ref:n})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function M(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}var F="dismissableLayer.update",O=n.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),B=n.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,u=n.useContext(O),[h,m]=n.useState(null),p=h?.ownerDocument??globalThis?.document,[,f]=n.useState({}),g=(0,k.s)(t,e=>m(e)),x=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(y),b=h?x.indexOf(h):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,N=b>=v,j=function(e,t=globalThis?.document){let r=M(e),a=n.useRef(!1),i=n.useRef(()=>{});return n.useEffect(()=>{let e=e=>{if(e.target&&!a.current){let a=function(){z("dismissableLayer.pointerDownOutside",r,n,{discrete:!0})},n={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=a,t.addEventListener("click",i.current,{once:!0})):a()}else t.removeEventListener("click",i.current);a.current=!1},n=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(n),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}(e=>{let t=e.target,r=[...u.branches].some(e=>e.contains(t));N&&!r&&(s?.(e),l?.(e),e.defaultPrevented||c?.())},p),A=function(e,t=globalThis?.document){let r=M(e),a=n.useRef(!1);return n.useEffect(()=>{let e=e=>{e.target&&!a.current&&z("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}(e=>{let t=e.target;![...u.branches].some(e=>e.contains(t))&&(o?.(e),l?.(e),e.defaultPrevented||c?.())},p);return!function(e,t=globalThis?.document){let r=M(e);n.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{b===u.layers.size-1&&(i?.(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},p),n.useEffect(()=>{if(h)return r&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(s2=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),q(),()=>{r&&1===u.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=s2)}},[h,p,r,u]),n.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),q())},[h,u]),n.useEffect(()=>{let e=()=>f({});return document.addEventListener(F,e),()=>document.removeEventListener(F,e)},[]),(0,a.jsx)(T.div,{...d,ref:g,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:S(e.onFocusCapture,A.onFocusCapture),onBlurCapture:S(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:S(e.onPointerDownCapture,j.onPointerDownCapture)})});function q(){let e=new CustomEvent(F);document.dispatchEvent(e)}function z(e,t,r,{discrete:a}){let n=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});if(t&&n.addEventListener(e,t,{once:!0}),a)n&&E.flushSync(()=>n.dispatchEvent(i));else n.dispatchEvent(i)}B.displayName="DismissableLayer",n.forwardRef((e,t)=>{let r=n.useContext(O),i=n.useRef(null),s=(0,k.s)(t,i);return n.useEffect(()=>{let e=i.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,a.jsx)(T.div,{...e,ref:s})}).displayName="DismissableLayerBranch";var U="focusScope.autoFocusOnMount",$="focusScope.autoFocusOnUnmount",H={bubbles:!1,cancelable:!0},W=n.forwardRef((e,t)=>{let{loop:r=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=e,[c,d]=n.useState(null),u=M(s),h=M(o),m=n.useRef(null),p=(0,k.s)(t,e=>d(e)),f=n.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;n.useEffect(()=>{if(i){let e=function(e){if(f.paused||!c)return;let t=e.target;c.contains(t)?m.current=t:Z(m.current,{select:!0})},t=function(e){if(f.paused||!c)return;let t=e.relatedTarget;null!==t&&(c.contains(t)||Z(m.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&Z(c)});return c&&r.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[i,c,f.paused]),n.useEffect(()=>{if(c){Y.add(f);let e=document.activeElement;if(!c.contains(e)){let t=new CustomEvent(U,H);c.addEventListener(U,u),c.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let a of e)if(Z(a,{select:t}),document.activeElement!==r)return}(V(c).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&Z(c))}return()=>{c.removeEventListener(U,u),setTimeout(()=>{let t=new CustomEvent($,H);c.addEventListener($,h),c.dispatchEvent(t),t.defaultPrevented||Z(e??document.body,{select:!0}),c.removeEventListener($,h),Y.remove(f)},0)}}},[c,u,h,f]);let g=n.useCallback(e=>{if(!r&&!i||f.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){let t=e.currentTarget,[n,i]=function(e){let t=V(e);return[G(t,e),G(t.reverse(),e)]}(t);n&&i?e.shiftKey||a!==i?e.shiftKey&&a===n&&(e.preventDefault(),r&&Z(i,{select:!0})):(e.preventDefault(),r&&Z(n,{select:!0})):a===t&&e.preventDefault()}},[r,i,f.paused]);return(0,a.jsx)(T.div,{tabIndex:-1,...l,ref:p,onKeyDown:g})});function V(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function G(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function Z(e,{select:t=!1}={}){if(e&&e.focus){var r;let a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}W.displayName="FocusScope";var Y=function(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),(e=K(e,t)).unshift(t)},remove(t){e=K(e,t),e[0]?.resume()}}}();function K(e,t){let r=[...e],a=r.indexOf(t);return -1!==a&&r.splice(a,1),r}var X=n.forwardRef((e,t)=>{let{container:r,...i}=e,[s,o]=n.useState(!1);L(()=>o(!0),[]);let l=r||s&&globalThis?.document?.body;return l?E.createPortal((0,a.jsx)(T.div,{...i,ref:t}),l):null});X.displayName="Portal";var J=e=>{let{present:t,children:r}=e,a=function(e){var t,r;let[a,i]=n.useState(),s=n.useRef(null),o=n.useRef(e),l=n.useRef("none"),[c,d]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},n.useReducer((e,t)=>r[e][t]??e,t));return n.useEffect(()=>{let e=Q(s.current);l.current="mounted"===c?e:"none"},[c]),L(()=>{let t=s.current,r=o.current;if(r!==e){let a=l.current,n=Q(t);e?d("MOUNT"):"none"===n||t?.display==="none"?d("UNMOUNT"):r&&a!==n?d("ANIMATION_OUT"):d("UNMOUNT"),o.current=e}},[e,d]),L(()=>{if(a){let e,t=a.ownerDocument.defaultView??window,r=r=>{let n=Q(s.current).includes(r.animationName);if(r.target===a&&n&&(d("ANIMATION_END"),!o.current)){let r=a.style.animationFillMode;a.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=r)})}},n=e=>{e.target===a&&(l.current=Q(s.current))};return a.addEventListener("animationstart",n),a.addEventListener("animationcancel",r),a.addEventListener("animationend",r),()=>{t.clearTimeout(e),a.removeEventListener("animationstart",n),a.removeEventListener("animationcancel",r),a.removeEventListener("animationend",r)}}d("ANIMATION_END")},[a,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:n.useCallback(e=>{s.current=e?getComputedStyle(e):null,i(e)},[])}}(t),i="function"==typeof r?r({present:a.isPresent}):n.Children.only(r),s=(0,k.s)(a.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(i));return"function"==typeof r||a.isPresent?n.cloneElement(i,{ref:s}):null};function Q(e){return e?.animationName||"none"}J.displayName="Presence";var ee=0;function et(){n.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??er()),document.body.insertAdjacentElement("beforeend",e[1]??er()),ee++,()=>{1===ee&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ee--}},[])}function er(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ea=function(){return(ea=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function en(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}Object.create;Object.create;var ei=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),es="width-before-scroll-bar";function eo(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var el="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,ec=new WeakMap;function ed(e){return e}var eu=function(e){void 0===e&&(e={});var t,r,a,n,i=(t=null,void 0===r&&(r=ed),a=[],n=!1,{read:function(){if(n)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:null},useMedium:function(e){var t=r(e,n);return a.push(t),function(){a=a.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(n=!0;a.length;){var t=a;a=[],t.forEach(e)}a={push:function(t){return e(t)},filter:function(){return a}}},assignMedium:function(e){n=!0;var t=[];if(a.length){var r=a;a=[],r.forEach(e),t=a}var i=function(){var r=t;t=[],r.forEach(e)},s=function(){return Promise.resolve().then(i)};s(),a={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),a}}}});return i.options=ea({async:!0,ssr:!1},e),i}(),eh=function(){},em=n.forwardRef(function(e,t){var r,a,i,s,o=n.useRef(null),l=n.useState({onScrollCapture:eh,onWheelCapture:eh,onTouchMoveCapture:eh}),c=l[0],d=l[1],u=e.forwardProps,h=e.children,m=e.className,p=e.removeScrollBar,f=e.enabled,g=e.shards,x=e.sideCar,y=e.noRelative,v=e.noIsolation,b=e.inert,w=e.allowPinchZoom,N=e.as,j=e.gapMode,A=en(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=(r=[o,t],a=function(e){return r.forEach(function(t){return eo(t,e)})},(i=(0,n.useState)(function(){return{value:null,callback:a,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=a,s=i.facade,el(function(){var e=ec.get(s);if(e){var t=new Set(e),a=new Set(r),n=s.current;t.forEach(function(e){a.has(e)||eo(e,null)}),a.forEach(function(e){t.has(e)||eo(e,n)})}ec.set(s,r)},[r]),s),k=ea(ea({},A),c);return n.createElement(n.Fragment,null,f&&n.createElement(x,{sideCar:eu,removeScrollBar:p,shards:g,noRelative:y,noIsolation:v,inert:b,setCallbacks:d,allowPinchZoom:!!w,lockRef:o,gapMode:j}),u?n.cloneElement(n.Children.only(h),ea(ea({},k),{ref:S})):n.createElement(void 0===N?"div":N,ea({},k,{className:m,ref:S}),h))});em.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},em.classNames={fullWidth:es,zeroRight:ei};var ep=function(e){var t=e.sideCar,r=en(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw Error("Sidecar medium not found");return n.createElement(a,ea({},r))};ep.isSideCarExport=!0;var ef=function(){var e=0,t=null;return{add:function(a){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=s5||r.nc;return t&&e.setAttribute("nonce",t),e}())){var n,i;(n=t).styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a)),i=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(i)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eg=function(){var e=ef();return function(t,r){n.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},ex=function(){var e=eg();return function(t){return e(t.styles,t.dynamic),null}},ey={left:0,top:0,right:0,gap:0},ev=function(e){return parseInt(e||"",10)||0},eb=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],a=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[ev(r),ev(a),ev(n)]},ew=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return ey;var t=eb(e),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},eN=ex(),ej="data-scroll-locked",eA=function(e,t,r,a){var n=e.left,i=e.top,s=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(a,";\n   padding-right: ").concat(o,"px ").concat(a,";\n  }\n  body[").concat(ej,"] {\n    overflow: hidden ").concat(a,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(a,";"),"margin"===r&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(a,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(ei," {\n    right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(es," {\n    margin-right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(ei," .").concat(ei," {\n    right: 0 ").concat(a,";\n  }\n  \n  .").concat(es," .").concat(es," {\n    margin-right: 0 ").concat(a,";\n  }\n  \n  body[").concat(ej,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},eS=function(){var e=parseInt(document.body.getAttribute(ej)||"0",10);return isFinite(e)?e:0},ek=function(){n.useEffect(function(){return document.body.setAttribute(ej,(eS()+1).toString()),function(){var e=eS()-1;e<=0?document.body.removeAttribute(ej):document.body.setAttribute(ej,e.toString())}},[])},eC=function(e){var t=e.noRelative,r=e.noImportant,a=e.gapMode,i=void 0===a?"margin":a;ek();var s=n.useMemo(function(){return ew(i)},[i]);return n.createElement(eN,{styles:eA(s,!t,i,r?"":"!important")})},eL=!1;if("undefined"!=typeof window)try{var eP=Object.defineProperty({},"passive",{get:function(){return eL=!0,!0}});window.addEventListener("test",eP,eP),window.removeEventListener("test",eP,eP)}catch(e){eL=!1}var e_=!!eL&&{passive:!1},eD=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},eI=function(e,t){var r=t.ownerDocument,a=t;do{if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&(a=a.host),eR(e,a)){var n=eE(e,a);if(n[1]>n[2])return!0}a=a.parentNode}while(a&&a!==r.body);return!1},eR=function(e,t){return"v"===e?eD(t,"overflowY"):eD(t,"overflowX")},eE=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},eT=function(e,t,r,a,n){var i,s=(i=window.getComputedStyle(t).direction,"h"===e&&"rtl"===i?-1:1),o=s*a,l=r.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{if(!l)break;var p=eE(e,l),f=p[0],g=p[1]-p[2]-s*f;(f||g)&&eR(e,l)&&(h+=g,m+=f);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return u&&(n&&1>Math.abs(h)||!n&&o>h)?d=!0:!u&&(n&&1>Math.abs(m)||!n&&-o>m)&&(d=!0),d},eM=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eF=function(e){return[e.deltaX,e.deltaY]},eO=function(e){return e&&"current"in e?e.current:e},eB=0,eq=[];let ez=(s1=function(e){var t=n.useRef([]),r=n.useRef([0,0]),a=n.useRef(),i=n.useState(eB++)[0],s=n.useState(ex)[0],o=n.useRef(e);n.useEffect(function(){o.current=e},[e]),n.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(function(e,t,r){if(r||2==arguments.length)for(var a,n=0,i=t.length;n<i;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(eO),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=n.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var n,i=eM(e),s=r.current,l="deltaX"in e?e.deltaX:s[0]-i[0],c="deltaY"in e?e.deltaY:s[1]-i[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=eI(u,d);if(!h)return!0;if(h?n=u:(n="v"===u?"h":"v",h=eI(u,d)),!h)return!1;if(!a.current&&"changedTouches"in e&&(l||c)&&(a.current=n),!n)return!0;var m=a.current||n;return eT(m,t,e,"h"===m?l:c,!0)},[]),c=n.useCallback(function(e){if(eq.length&&eq[eq.length-1]===s){var r="deltaY"in e?eF(e):eM(e),a=t.current.filter(function(t){var a;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(a=t.delta,a[0]===r[0]&&a[1]===r[1])})[0];if(a&&a.should){e.cancelable&&e.preventDefault();return}if(!a){var n=(o.current.shards||[]).map(eO).filter(Boolean).filter(function(t){return t.contains(e.target)});(n.length>0?l(e,n[0]):!o.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),d=n.useCallback(function(e,r,a,n){var i={name:e,delta:r,target:a,should:n,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(a)};t.current.push(i),setTimeout(function(){t.current=t.current.filter(function(e){return e!==i})},1)},[]),u=n.useCallback(function(e){r.current=eM(e),a.current=void 0},[]),h=n.useCallback(function(t){d(t.type,eF(t),t.target,l(t,e.lockRef.current))},[]),m=n.useCallback(function(t){d(t.type,eM(t),t.target,l(t,e.lockRef.current))},[]);n.useEffect(function(){return eq.push(s),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,e_),document.addEventListener("touchmove",c,e_),document.addEventListener("touchstart",u,e_),function(){eq=eq.filter(function(e){return e!==s}),document.removeEventListener("wheel",c,e_),document.removeEventListener("touchmove",c,e_),document.removeEventListener("touchstart",u,e_)}},[]);var p=e.removeScrollBar,f=e.inert;return n.createElement(n.Fragment,null,f?n.createElement(s,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,p?n.createElement(eC,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},eu.useMedium(s1),ep);var eU=n.forwardRef(function(e,t){return n.createElement(em,ea({},e,{ref:t,sideCar:ez}))});eU.classNames=em.classNames;var e$=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},eH=new WeakMap,eW=new WeakMap,eV={},eG=0,eZ=function(e){return e&&(e.host||eZ(e.parentNode))},eY=function(e,t,r,a){var n=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=eZ(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});eV[r]||(eV[r]=new WeakMap);var i=eV[r],s=[],o=new Set,l=new Set(n),c=function(e){!e||o.has(e)||(o.add(e),c(e.parentNode))};n.forEach(c);var d=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(a),n=null!==t&&"false"!==t,l=(eH.get(e)||0)+1,c=(i.get(e)||0)+1;eH.set(e,l),i.set(e,c),s.push(e),1===l&&n&&eW.set(e,!0),1===c&&e.setAttribute(r,"true"),n||e.setAttribute(a,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return d(t),o.clear(),eG++,function(){s.forEach(function(e){var t=eH.get(e)-1,n=i.get(e)-1;eH.set(e,t),i.set(e,n),t||(eW.has(e)||e.removeAttribute(a),eW.delete(e)),n||e.removeAttribute(r)}),--eG||(eH=new WeakMap,eH=new WeakMap,eW=new WeakMap,eV={})}},eK=function(e,t,r){void 0===r&&(r="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),n=t||e$(e);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live], script"))),eY(a,n,r,"aria-hidden")):function(){return null}},eX="Dialog",[eJ,eQ]=C(eX),[e0,e1]=eJ(eX),e2=e=>{let{__scopeDialog:t,children:r,open:i,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,c=n.useRef(null),d=n.useRef(null),[u,h]=R({prop:i,defaultProp:s??!1,onChange:o,caller:eX});return(0,a.jsx)(e0,{scope:t,triggerRef:c,contentRef:d,contentId:D(),titleId:D(),descriptionId:D(),open:u,onOpenChange:h,onOpenToggle:n.useCallback(()=>h(e=>!e),[h]),modal:l,children:r})};e2.displayName=eX;var e5="DialogTrigger",e4=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e1(e5,r),s=(0,k.s)(t,i.triggerRef);return(0,a.jsx)(T.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":tm(i.open),...n,ref:s,onClick:S(e.onClick,i.onOpenToggle)})});e4.displayName=e5;var e3="DialogPortal",[e6,e8]=eJ(e3,{forceMount:void 0}),e7=e=>{let{__scopeDialog:t,forceMount:r,children:i,container:s}=e,o=e1(e3,t);return(0,a.jsx)(e6,{scope:t,forceMount:r,children:n.Children.map(i,e=>(0,a.jsx)(J,{present:r||o.open,children:(0,a.jsx)(X,{asChild:!0,container:s,children:e})}))})};e7.displayName=e3;var e9="DialogOverlay",te=n.forwardRef((e,t)=>{let r=e8(e9,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=e1(e9,e.__scopeDialog);return s.modal?(0,a.jsx)(J,{present:n||s.open,children:(0,a.jsx)(tr,{...i,ref:t})}):null});te.displayName=e9;var tt=(0,w.TL)("DialogOverlay.RemoveScroll"),tr=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e1(e9,r);return(0,a.jsx)(eU,{as:tt,allowPinchZoom:!0,shards:[i.contentRef],children:(0,a.jsx)(T.div,{"data-state":tm(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),ta="DialogContent",tn=n.forwardRef((e,t)=>{let r=e8(ta,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=e1(ta,e.__scopeDialog);return(0,a.jsx)(J,{present:n||s.open,children:s.modal?(0,a.jsx)(ti,{...i,ref:t}):(0,a.jsx)(ts,{...i,ref:t})})});tn.displayName=ta;var ti=n.forwardRef((e,t)=>{let r=e1(ta,e.__scopeDialog),i=n.useRef(null),s=(0,k.s)(t,r.contentRef,i);return n.useEffect(()=>{let e=i.current;if(e)return eK(e)},[]),(0,a.jsx)(to,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:S(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:S(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:S(e.onFocusOutside,e=>e.preventDefault())})}),ts=n.forwardRef((e,t)=>{let r=e1(ta,e.__scopeDialog),i=n.useRef(!1),s=n.useRef(!1);return(0,a.jsx)(to,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(i.current||r.triggerRef.current?.focus(),t.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),to=n.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=e,c=e1(ta,r),d=n.useRef(null),u=(0,k.s)(t,d);return et(),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,a.jsx)(B,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":tm(c.open),...l,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tx,{titleId:c.titleId}),(0,a.jsx)(ty,{contentRef:d,descriptionId:c.descriptionId})]})]})}),tl="DialogTitle",tc=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e1(tl,r);return(0,a.jsx)(T.h2,{id:i.titleId,...n,ref:t})});tc.displayName=tl;var td="DialogDescription";n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e1(td,r);return(0,a.jsx)(T.p,{id:i.descriptionId,...n,ref:t})}).displayName=td;var tu="DialogClose",th=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e1(tu,r);return(0,a.jsx)(T.button,{type:"button",...n,ref:t,onClick:S(e.onClick,()=>i.onOpenChange(!1))})});function tm(e){return e?"open":"closed"}th.displayName=tu;var tp="DialogTitleWarning",[tf,tg]=function(e,t){let r=n.createContext(t),i=e=>{let{children:t,...i}=e,s=n.useMemo(()=>i,Object.values(i));return(0,a.jsx)(r.Provider,{value:s,children:t})};return i.displayName=e+"Provider",[i,function(a){let i=n.useContext(r);if(i)return i;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}(tp,{contentName:ta,titleName:tl,docsSlug:"dialog"}),tx=({titleId:e})=>{let t=tg(tp),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return n.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},ty=({contentRef:e,descriptionId:t})=>{let r=tg("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return n.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null};function tv({...e}){return(0,a.jsx)(e2,{"data-slot":"dialog",...e})}function tb({...e}){return(0,a.jsx)(e4,{"data-slot":"dialog-trigger",...e})}function tw({...e}){return(0,a.jsx)(e7,{"data-slot":"dialog-portal",...e})}function tN({className:e,...t}){return(0,a.jsx)(te,{"data-slot":"dialog-overlay",className:(0,y.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function tj({className:e,children:t,showCloseButton:r=!0,...n}){return(0,a.jsxs)(tw,{"data-slot":"dialog-portal",children:[(0,a.jsx)(tN,{}),(0,a.jsxs)(tn,{"data-slot":"dialog-content",className:(0,y.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,r&&(0,a.jsxs)(th,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(m,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function tA({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,y.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function tS({className:e,...t}){return(0,a.jsx)(tc,{"data-slot":"dialog-title",className:(0,y.cn)("text-lg leading-none font-semibold",e),...t})}var tk=n.forwardRef((e,t)=>(0,a.jsx)(T.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function tC({className:e,...t}){return(0,a.jsx)(tk,{"data-slot":"label",className:(0,y.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function tL({className:e,...t}){return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,y.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function tP({children:e,onPatientCreated:t}){let[r,i]=(0,n.useState)(!1),[s,l]=(0,n.useState)({name:"",age:"",contact:"",notes:""}),[c,d]=(0,n.useState)(!1),u=(e,t)=>{l(r=>({...r,[e]:t}))},h=async e=>{if(e.preventDefault(),!s.name.trim()||!s.age.trim())return;d(!0),await new Promise(e=>setTimeout(e,500));let r=s.name.trim().split(" "),a=r[0],n=r.slice(1).join(" ")||a;t({id:Math.random().toString(36).substr(2,9),name:a,surname:n,age:parseInt(s.age),contact:s.contact.trim()||void 0,createdAt:new Date,sessionCount:0}),l({name:"",age:"",contact:"",notes:""}),d(!1),i(!1)},m=s.name.trim()&&s.age.trim()&&!isNaN(Number(s.age));return(0,a.jsxs)(tv,{open:r,onOpenChange:i,children:[(0,a.jsx)(tb,{asChild:!0,children:e}),(0,a.jsxs)(tj,{className:"sm:max-w-md bg-white border-gray-200",children:[(0,a.jsx)(tA,{className:"space-y-3",children:(0,a.jsxs)(tS,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(o,{className:"w-4 h-4 text-blue-600"})}),"New Patient"]})}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-6 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"Full Name *"}),(0,a.jsx)(v,{id:"name",type:"text",placeholder:"Enter patient's full name",value:s.name,onChange:e=>u("name",e.target.value),className:"bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500 transition-colors",autoFocus:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"age",className:"text-sm font-medium text-gray-700",children:"Age *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(v,{id:"age",type:"number",placeholder:"0",min:"0",max:"150",value:s.age,onChange:e=>u("age",e.target.value),className:"pl-10 bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500 transition-colors"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"contact",className:"text-sm font-medium text-gray-700",children:"Contact Number"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(v,{id:"contact",type:"tel",placeholder:"+27 82 123 4567",value:s.contact,onChange:e=>u("contact",e.target.value),className:"pl-10 bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500 transition-colors"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"notes",className:"text-sm font-medium text-gray-700",children:"Notes (Optional)"}),(0,a.jsx)(tL,{id:"notes",placeholder:"Any additional notes about the patient...",value:s.notes,onChange:e=>u("notes",e.target.value),className:"bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500 transition-colors min-h-[80px] resize-none"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(b.$,{type:"button",variant:"outline",onClick:()=>i(!1),className:"flex-1 border-gray-200 text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)(b.$,{type:"submit",disabled:!m||c,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):"Create Patient"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"* Required fields"})]})]})}tk.displayName="Label";let t_=(0,s.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function tD({patient:e,open:t,onOpenChange:r,onPatientUpdated:i}){let[s,o]=(0,n.useState)({name:"",surname:"",age:"",contact:"",notes:""}),[l,c]=(0,n.useState)(!1),d=(e,t)=>{o(r=>({...r,[e]:t}))},u=async t=>{t.preventDefault(),e&&s.name.trim()&&s.age.trim()&&(c(!0),await new Promise(e=>setTimeout(e,500)),i({...e,name:s.name.trim(),surname:s.surname.trim()||s.name.trim(),age:parseInt(s.age),contact:s.contact.trim()||void 0}),c(!1),r(!1))},h=s.name.trim()&&s.age.trim()&&!isNaN(Number(s.age));return e?(0,a.jsx)(tv,{open:t,onOpenChange:r,children:(0,a.jsxs)(tj,{className:"sm:max-w-md bg-white border-gray-200",children:[(0,a.jsx)(tA,{className:"space-y-3",children:(0,a.jsxs)(tS,{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(t_,{className:"w-4 h-4 text-blue-600"})}),"Edit Patient"]})}),(0,a.jsxs)("form",{onSubmit:u,className:"space-y-6 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"First Name *"}),(0,a.jsx)(v,{id:"name",type:"text",placeholder:"Enter patient's first name",value:s.name,onChange:e=>d("name",e.target.value),className:"bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500 transition-colors",autoFocus:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"surname",className:"text-sm font-medium text-gray-700",children:"Surname"}),(0,a.jsx)(v,{id:"surname",type:"text",placeholder:"Enter patient's surname",value:s.surname,onChange:e=>d("surname",e.target.value),className:"bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500 transition-colors"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"age",className:"text-sm font-medium text-gray-700",children:"Age *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(v,{id:"age",type:"number",placeholder:"0",min:"0",max:"150",value:s.age,onChange:e=>d("age",e.target.value),className:"pl-10 bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500 transition-colors"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"contact",className:"text-sm font-medium text-gray-700",children:"Contact Number"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(v,{id:"contact",type:"tel",placeholder:"+27 82 123 4567",value:s.contact,onChange:e=>d("contact",e.target.value),className:"pl-10 bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500 transition-colors"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(b.$,{type:"button",variant:"outline",onClick:()=>r(!1),className:"flex-1 border-gray-200 text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)(b.$,{type:"submit",disabled:!h||l,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):"Update Patient"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"* Required fields"})]})}):null}let tI=(0,s.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),tR=(0,s.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),tE=(0,s.A)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),tT=(0,s.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),tM=(0,s.A)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);var tF=r(81061);let tO=(0,s.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),tB=(0,s.A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),tq=(0,s.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),tz=(0,s.A)("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),tU=(0,s.A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),t$=(0,s.A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),tH=(0,s.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),tW=(0,s.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),tV=(0,s.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var tG=r(87838);let tZ=(0,s.A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),tY={"whisper-1":6e-6,"gpt-3.5-turbo":2e-6,"gpt-4":.03/1e3},tK="ai-medic-scribe-api-usage",tX="ai-medic-scribe-api-calls";class tJ{static getInstance(){return tJ.instance||(tJ.instance=new tJ),tJ.instance}getStoredUsage(){let e=localStorage.getItem(tK);if(e){let t=JSON.parse(e);return{...t,lastReset:new Date(t.lastReset)}}return{transcriptionTokens:0,categorizationTokens:0,totalCost:0,requestCount:0,lastReset:new Date}}saveUsage(e){localStorage.setItem(tK,JSON.stringify(e))}getStoredCalls(){let e=localStorage.getItem(tX);return e?JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)})):[]}saveCalls(e){let t=e.slice(-100);localStorage.setItem(tX,JSON.stringify(t))}trackApiCall(e,t,r){let a=r*tY[t],n=this.getStoredUsage(),i=this.getStoredCalls();"transcription"===e?n.transcriptionTokens+=r:n.categorizationTokens+=r,n.totalCost+=a,n.requestCount+=1;let s={type:e,model:t,tokens:r,cost:a,timestamp:new Date};i.push(s),this.saveUsage(n),this.saveCalls(i)}getUsageStats(){let e=this.getStoredUsage(),t=this.getStoredCalls(),r=new Date,a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),n=new Date(a);n.setDate(n.getDate()-n.getDay());let i=t.filter(e=>e.timestamp>=a),s=t.filter(e=>e.timestamp>=n),o=i.reduce((e,t)=>e+t.cost,0),l=s.reduce((e,t)=>e+t.cost,0),c=t.filter(e=>"transcription"===e.type).reduce((e,t)=>e+t.cost,0),d=t.filter(e=>"categorization"===e.type).reduce((e,t)=>e+t.cost,0);return{current:e,todaysCost:o,thisWeeksCost:l,recentCalls:t.slice(-10),costBreakdown:{transcription:c,categorization:d}}}resetUsage(){let e={transcriptionTokens:0,categorizationTokens:0,totalCost:0,requestCount:0,lastReset:new Date};this.saveUsage(e),this.saveCalls([])}estimateTranscriptionCost(e){return 150*Math.ceil(e.size/102400)*tY["whisper-1"]}estimateCategorizationCost(e){return(Math.ceil(.25*e)+500)*tY["gpt-3.5-turbo"]}checkDailyLimit(e){return this.getUsageStats().todaysCost<e}checkWeeklyLimit(e){return this.getUsageStats().thisWeeksCost<e}}let tQ=e=>{let t=tJ.getInstance(),r=Math.ceil(e.size/102400);t.trackApiCall("transcription","whisper-1",150*r)},t0=e=>{let t=tJ.getInstance(),r=Math.ceil(.25*e)+500;t.trackApiCall("categorization","gpt-3.5-turbo",r)},t1=()=>tJ.getInstance().getUsageStats(),t2=()=>{tJ.getInstance().resetUsage()};function t5(){let e,[t,r]=(0,n.useState)(t1()),[i,s]=(0,n.useState)(!1),o=()=>{r(t1())},l=e=>`R${(18.5*e).toFixed(4)}`;return(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tq,{className:"w-5 h-5 text-blue-600"}),"API Usage & Costs"]}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",onClick:o,className:"h-8 w-8 p-0",children:(0,a.jsx)(tG.A,{className:"w-4 h-4"})})]})}),(0,a.jsxs)(x.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tZ,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Today's Cost"})]}),(0,a.jsxs)("div",{className:`text-lg font-bold ${((e,t=5)=>{let r=e/t*100;return r>=90?"text-red-600":r>=70?"text-orange-600":r>=50?"text-yellow-600":"text-green-600"})(t.todaysCost)}`,children:[l(t.todaysCost),(0,a.jsxs)("div",{className:"text-xs text-gray-500 font-normal",children:[(e=t.todaysCost,`$${e.toFixed(4)}`)," USD"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tT,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Requests"})]}),(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[t.current.requestCount,(0,a.jsx)("div",{className:"text-xs text-gray-500 font-normal",children:"Total requests"})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"This Week"}),(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:l(t.thisWeeksCost)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Transcription:"}),(0,a.jsx)("span",{className:"font-medium",children:l(t.costBreakdown.transcription)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"AI Analysis:"}),(0,a.jsx)("span",{className:"font-medium",children:l(t.costBreakdown.categorization)})]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-blue-700 text-sm font-medium mb-2",children:[(0,a.jsx)(tF.A,{className:"w-4 h-4"}),"Cost-Effective Usage Tips"]}),(0,a.jsxs)("div",{className:"text-xs text-blue-600 space-y-1",children:[(0,a.jsx)("p",{children:"• Using GPT-3.5-turbo saves 90% vs GPT-4"}),(0,a.jsx)("p",{children:"• Shorter recordings = lower transcription costs"}),(0,a.jsx)("p",{children:"• Basic categorization available offline as fallback"}),(0,a.jsx)("p",{children:"• Recommended daily limit: R90 (≈$5 USD)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(b.$,{variant:"ghost",size:"sm",onClick:()=>s(!i),className:"text-xs mb-3",children:[i?"Hide":"Show"," Recent Activity"]}),i&&t.recentCalls.length>0&&(0,a.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:t.recentCalls.slice().reverse().map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs bg-gray-50 rounded p-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{className:"capitalize",children:e.type}),(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:e.model})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{children:l(e.cost)}),(0,a.jsx)("div",{className:"text-gray-500",children:e.timestamp.toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit"})})]})]},t))})]}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsx)(b.$,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to reset usage statistics? This cannot be undone.")&&(t2(),o())},className:"text-red-600 hover:text-red-700 hover:bg-red-50 w-full",children:"Reset Usage Statistics"})})]})]})}let t4="ai-medic-scribe-openai-key",t3="ai-medic-scribe-ai-model",t6=[{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",cost:"R0.037/1K tokens",description:"Fast, cost-effective (Recommended for SA)"},{value:"gpt-4",label:"GPT-4",cost:"R0.555/1K tokens",description:"Most accurate but expensive"},{value:"gpt-4-turbo",label:"GPT-4 Turbo",cost:"R0.185/1K tokens",description:"Balanced accuracy and cost"}];function t8(){let[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(!1),[s,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)("gpt-3.5-turbo"),[h,m]=(0,n.useState)(!1),p=async()=>{if(!e.trim())return void alert("Please enter a valid API key");c(!0);try{if((await fetch("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${e.trim()}`}})).ok)localStorage.setItem(t4,e.trim()),localStorage.setItem(t3,d),o(!0),alert("API settings saved and validated successfully!");else throw Error("Invalid API key")}catch(e){console.error("API key validation failed:",e),alert("Invalid API key. Please check and try again.")}finally{c(!1)}};return(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(tU,{className:"w-5 h-5 text-blue-600"}),"OpenAI API Configuration"]})}),(0,a.jsxs)(x.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"apiKey",className:"text-sm font-medium text-gray-700",children:"OpenAI API Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(t$,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(v,{id:"apiKey",type:r?"text":"password",placeholder:"sk-...",value:e,onChange:e=>{t(e.target.value),o(!1)},className:"pl-10 pr-10 bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-blue-500"}),(0,a.jsx)(b.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(!r),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 h-6 w-6",children:r?(0,a.jsx)(tH,{className:"w-3 h-3"}):(0,a.jsx)(tW,{className:"w-3 h-3"})})]}),(0,a.jsx)(b.$,{onClick:p,disabled:!e.trim()||l,className:"bg-blue-500 hover:bg-blue-600 disabled:opacity-50",children:l?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Validating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tV,{className:"w-4 h-4 mr-2"}),"Save"]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),s?(0,a.jsx)(j,{className:"bg-green-100 text-green-700 border-green-200",children:"API Key Configured"}):(0,a.jsx)(j,{variant:"outline",className:"text-gray-600",children:"Not Configured"})]}),s&&(0,a.jsx)(b.$,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to remove the stored API settings?")&&(localStorage.removeItem(t4),localStorage.removeItem(t3),t(""),u("gpt-3.5-turbo"),o(!1))},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Clear"})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsxs)(b.$,{variant:"ghost",size:"sm",onClick:()=>m(!h),className:"text-xs mb-3",children:[h?"Hide":"Show"," Advanced Settings"]}),h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(tC,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,a.jsx)(tz,{className:"w-4 h-4"}),"AI Model Selection"]}),(0,a.jsx)("div",{className:"space-y-2",children:t6.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"aiModel",value:e.value,checked:d===e.value,onChange:e=>u(e.target.value),className:"text-blue-600"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.label}),(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:e.cost})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},e.value))}),(0,a.jsxs)("div",{className:"text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded p-2",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"For SA users:"})," GPT-3.5 Turbo is recommended for cost-effectiveness"]})]}),(0,a.jsx)(t5,{})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsx)("p",{children:"• Your API key is stored locally in your browser and never sent to our servers"}),(0,a.jsx)("p",{children:"• You can get your API key from the OpenAI platform dashboard"}),(0,a.jsx)("p",{children:"• The key is required for transcription functionality"})]})]})]})}let t7=()=>null,t9=()=>"gpt-3.5-turbo";async function re(e,t){let r=t7();if(!r)return[];let a=`
Analyze this medical transcription for clinical risk factors relevant to South African healthcare:

Patient Age: ${t.age}
Transcription: "${e}"

Identify specific risk factors considering:
1. South African disease prevalence (TB, HIV, diabetes, hypertension)
2. Social determinants of health
3. Medication-related risks
4. Age-specific considerations

Return JSON array of risk factors:
[
  {
    "factor": "Risk factor name",
    "category": "cardiovascular|metabolic|infectious|respiratory|neurological|other",
    "severity": "low|moderate|high|critical",
    "description": "Detailed description",
    "recommendations": ["rec1", "rec2"],
    "evidence": ["evidence1", "evidence2"]
  }
]
`;try{let e=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({model:t9(),messages:[{role:"user",content:a}],temperature:.1,max_tokens:1500})});if(e.ok){let t=await e.json();return JSON.parse(t.choices[0].message.content)}}catch(e){console.error("AI risk factor identification failed:",e)}return[]}function rt(e,t){return e.some(e=>e.content.toLowerCase().includes(t.toLowerCase())||e.diagnosis?.some(e=>e.toLowerCase().includes(t.toLowerCase())))}let rr={symptoms:["pain","ache","hurt","sore","tender","burning","sharp","dull","throbbing","nausea","vomiting","fever","chills","sweating","fatigue","tired","weak","headache","migraine","dizziness","dizzy","lightheaded","faint","cough","shortness of breath","difficulty breathing","wheezing","chest tightness","rash","itching","swelling","numbness","tingling","cramping","constipation","diarrhea","bloating","heartburn","indigestion","blurred vision","double vision","hearing loss","tinnitus","ear pain","joint pain","muscle pain","back pain","neck pain","stiffness","sleep problems","insomnia","anxiety","depression","mood changes","weight loss","weight gain","appetite loss","increased appetite","palpitations","irregular heartbeat","chest pain","syncope","presyncope"],diagnosis:["diagnosis","diagnosed with","condition","disease","disorder","syndrome","infection","bacterial","viral","fungal","inflammation","inflammatory","acute","chronic","suspected","confirmed","probable","possible","hypertension","diabetes","asthma","pneumonia","bronchitis","sinusitis","arthritis","osteoporosis","fracture","sprain","strain","laceration","gastritis","ulcer","reflux","IBS","UTI","kidney stones","migraine","tension headache","anxiety disorder","depression","hyperlipidemia","hypothyroidism","hyperthyroidism","anemia","malignancy","benign","tumor","mass","nodule","cyst"],treatment:["prescribe","prescribed","medication","medicine","drug","tablet","capsule","mg","grams","ml","dose","dosage","twice daily","once daily","three times","antibiotic","pain killer","analgesic","anti-inflammatory","steroid","surgery","operation","procedure","treatment","therapy","rehabilitation","physical therapy","occupational therapy","counseling","psychotherapy","lifestyle changes","diet","exercise","rest","ice","heat","compression","referral","specialist","consultation","second opinion","injection","infusion","IV","topical","ointment","cream","gel","inhaler","nebulizer","oxygen","CPAP","splint","cast","brace","aspirin","paracetamol","ibuprofen","warfarin","metformin","lisinopril","amlodipine","atorvastatin","omeprazole","losartan","simvastatin","salbutamol","prednisolone","amoxicillin","doxycycline","furosemide"],medications:["tablet","capsule","syrup","injection","drops","cream","ointment","mg","mcg","ml","units","dose","twice daily","bd","once daily","od","three times daily","tds","four times daily","qds","prn","stat","aspirin","paracetamol","acetaminophen","ibuprofen","diclofenac","warfarin","heparin","metformin","insulin","glimepiride","lisinopril","enalapril","amlodipine","nifedipine","atenolol","atorvastatin","simvastatin","omeprazole","lansoprazole","ranitidine","salbutamol","beclomethasone","prednisolone","hydrocortisone","amoxicillin","doxycycline","ciprofloxacin","azithromycin","furosemide","hydrochlorothiazide","spironolactone"],medical_devices:["stethoscope","blood pressure cuff","thermometer","pulse oximeter","ECG machine","defibrillator","pacemaker","insulin pump","hearing aid","CPAP machine","ventilator","oxygen concentrator","nebulizer","inhaler","spacer device","peak flow meter","glucometer","blood glucose monitor","wheelchair","walker","crutches","compression stockings","tens unit","ultrasound","X-ray machine","MRI scanner","CT scanner","catheter","stent","prosthesis","orthotic device","brace","splint"],procedures:["blood test","urine test","ECG","EKG","echocardiogram","stress test","X-ray","ultrasound","CT scan","MRI scan","mammogram","colonoscopy","endoscopy","biopsy","surgery","operation","angioplasty","bypass","catheterization","dialysis","chemotherapy","radiotherapy","physiotherapy","occupational therapy","vaccination","immunization","injection","infusion","transfusion","intubation","tracheostomy","appendectomy","cholecystectomy","hysterectomy","arthroscopy","lumbar puncture","bone marrow biopsy","skin graft","wound suturing"],vitals:["blood pressure","BP","systolic","diastolic","mmHg","heart rate","HR","pulse","beats per minute","bpm","rhythm","temperature","temp","fever","celsius","fahrenheit","degrees","respiratory rate","RR","breathing rate","breaths per minute","oxygen saturation","O2 sat","SpO2","pulse ox","weight","kg","pounds","lbs","BMI","body mass index","height","cm","inches","feet","tall","short"],history:["history","previous","past","prior","family history","medical history","surgical history","allergies","allergic to","adverse reaction","current medications","taking","on medication","chronic condition","hospitalization","hospital","admission","surgery","operation","mother","father","sibling","parent","grandparent","family member","genetic","hereditary","runs in family","family history of","smoking","alcohol","drugs","substance use","social history"],examination:["examination","exam","inspect","inspection","observe","observation","palpation","palpate","feel","touch","pressure","auscultation","listen","heart sounds","lung sounds","bowel sounds","percussion","tap","dull","resonant","tympanic","normal","abnormal","unremarkable","remarkable","significant","tender","non-tender","soft","firm","hard","enlarged","swollen","symmetrical","asymmetrical","equal","unequal","bilateral","clear","cloudy","red","pale","cyanotic","jaundiced","range of motion","ROM","flexibility","strength","weakness","reflexes","sensation","numbness","tingling","coordination"],plan:["plan","follow-up","return","come back","schedule","appointment","next visit","recheck","monitor","watch","observe","track","continue","stop","discontinue","increase","decrease","adjust","lab work","blood test","urine test","X-ray","MRI","CT scan","ultrasound","EKG","ECG","stress test","colonoscopy","mammogram","education","instruct","teach","explain","discuss","counsel","warning signs","red flags","when to call","emergency","urgent","prognosis","outlook","expected","recovery","healing"]},ra={exactKeywordMatch:3,partialKeywordMatch:2,contextualClues:1};async function rn(e,t){let r=t7();if(!r)throw Error("OpenAI API key not configured");let a=function(e,t){let r=t.sections.map(e=>`- ${e.title} (${e.type}): ${e.placeholder}`).join("\n");return`
You are a medical AI assistant specializing in clinical documentation. Analyze the following medical transcription and categorize the content into the appropriate template sections. Also provide relevant ICD-10 codes where applicable.

Transcription to analyze:
"${e}"

Template sections available:
${r}

Instructions:
1. Carefully read the transcription and identify medical content
2. Categorize each relevant piece of information into the most appropriate section
3. For symptoms and diagnoses, include relevant ICD-10 codes with descriptions
4. Maintain the exact wording from the transcription when possible
5. Only include content that clearly belongs to a section
6. Provide a confidence score (0-1) for each categorization
7. Create a brief summary of the key medical points

Return your response as a JSON object with this exact structure:
{
  "categorizations": [
    {
      "sectionId": "section_id_from_template",
      "content": "extracted content from transcription",
      "confidence": 0.95,
      "icd10Codes": [
        {
          "code": "R50.9",
          "description": "Fever, unspecified"
        }
      ]
    }
  ],
  "summary": "Brief summary of key medical findings and recommendations"
}

Notes:
- Only include icd10Codes for sections related to symptoms, diagnoses, or conditions
- Use the most specific ICD-10 codes available
- Confidence should reflect how certain you are about the categorization
- Preserve medical terminology and exact phrases from the original transcription
- If no relevant content is found for a section, don't include it in the response
`}(e,t),n=t9();try{let t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({model:n,messages:[{role:"user",content:a}],temperature:.1,max_tokens:"gpt-3.5-turbo"===n?1500:2e3})});if(!t.ok)throw Error(`OpenAI API error: ${t.statusText}`);let i=await t.json(),s=JSON.parse(i.choices[0].message.content);return t0(e.length),s}catch(e){throw console.error("AI categorization failed:",e),e}}let ri=(0,s.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),rs=(0,s.A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),ro=(0,s.A)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var rl=r(42189);function rc(e,[t,r]){return Math.min(r,Math.max(t,e))}function rd(e){let t=e+"CollectionProvider",[r,i]=C(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),l=e=>{let{scope:t,children:r}=e,i=n.useRef(null),o=n.useRef(new Map).current;return(0,a.jsx)(s,{scope:t,itemMap:o,collectionRef:i,children:r})};l.displayName=t;let c=e+"CollectionSlot",d=(0,w.TL)(c),u=n.forwardRef((e,t)=>{let{scope:r,children:n}=e,i=o(c,r),s=(0,k.s)(t,i.collectionRef);return(0,a.jsx)(d,{ref:s,children:n})});u.displayName=c;let h=e+"CollectionItemSlot",m="data-radix-collection-item",p=(0,w.TL)(h),f=n.forwardRef((e,t)=>{let{scope:r,children:i,...s}=e,l=n.useRef(null),c=(0,k.s)(t,l),d=o(h,r);return n.useEffect(()=>(d.itemMap.set(l,{ref:l,...s}),()=>void d.itemMap.delete(l))),(0,a.jsx)(p,{...{[m]:""},ref:c,children:i})});return f.displayName=h,[{Provider:l,Slot:u,ItemSlot:f},function(t){let r=o(e+"CollectionConsumer",t);return n.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${m}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},i]}var ru=new WeakMap;function rh(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);let r=function(e,t){let r=e.length,a=rm(t),n=a>=0?a:r+a;return n<0||n>=r?-1:n}(e,t);return -1===r?void 0:e[r]}function rm(e){return e!=e||0===e?0:Math.trunc(e)}var rp=n.createContext(void 0);function rf(e){let t=n.useContext(rp);return e||t||"ltr"}let rg=["top","right","bottom","left"],rx=Math.min,ry=Math.max,rv=Math.round,rb=Math.floor,rw=e=>({x:e,y:e}),rN={left:"right",right:"left",bottom:"top",top:"bottom"},rj={start:"end",end:"start"};function rA(e,t){return"function"==typeof e?e(t):e}function rS(e){return e.split("-")[0]}function rk(e){return e.split("-")[1]}function rC(e){return"x"===e?"y":"x"}function rL(e){return"y"===e?"height":"width"}let rP=new Set(["top","bottom"]);function r_(e){return rP.has(rS(e))?"y":"x"}function rD(e){return e.replace(/start|end/g,e=>rj[e])}let rI=["left","right"],rR=["right","left"],rE=["top","bottom"],rT=["bottom","top"];function rM(e){return e.replace(/left|right|bottom|top/g,e=>rN[e])}function rF(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function rO(e){let{x:t,y:r,width:a,height:n}=e;return{width:a,height:n,top:r,left:t,right:t+a,bottom:r+n,x:t,y:r}}function rB(e,t,r){let a,{reference:n,floating:i}=e,s=r_(t),o=rC(r_(t)),l=rL(o),c=rS(t),d="y"===s,u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,m=n[l]/2-i[l]/2;switch(c){case"top":a={x:u,y:n.y-i.height};break;case"bottom":a={x:u,y:n.y+n.height};break;case"right":a={x:n.x+n.width,y:h};break;case"left":a={x:n.x-i.width,y:h};break;default:a={x:n.x,y:n.y}}switch(rk(t)){case"start":a[o]-=m*(r&&d?-1:1);break;case"end":a[o]+=m*(r&&d?-1:1)}return a}let rq=async(e,t,r)=>{let{placement:a="bottom",strategy:n="absolute",middleware:i=[],platform:s}=r,o=i.filter(Boolean),l=await (null==s.isRTL?void 0:s.isRTL(t)),c=await s.getElementRects({reference:e,floating:t,strategy:n}),{x:d,y:u}=rB(c,a,l),h=a,m={},p=0;for(let r=0;r<o.length;r++){let{name:i,fn:f}=o[r],{x:g,y:x,data:y,reset:v}=await f({x:d,y:u,initialPlacement:a,placement:h,strategy:n,middlewareData:m,rects:c,platform:s,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,m={...m,[i]:{...m[i],...y}},v&&p<=50&&(p++,"object"==typeof v&&(v.placement&&(h=v.placement),v.rects&&(c=!0===v.rects?await s.getElementRects({reference:e,floating:t,strategy:n}):v.rects),{x:d,y:u}=rB(c,h,l)),r=-1)}return{x:d,y:u,placement:h,strategy:n,middlewareData:m}};async function rz(e,t){var r;void 0===t&&(t={});let{x:a,y:n,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=rA(t,e),p=rF(m),f=o[h?"floating"===u?"reference":"floating":u],g=rO(await i.getClippingRect({element:null==(r=await (null==i.isElement?void 0:i.isElement(f)))||r?f:f.contextElement||await (null==i.getDocumentElement?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:a,y:n,width:s.floating.width,height:s.floating.height}:s.reference,y=await (null==i.getOffsetParent?void 0:i.getOffsetParent(o.floating)),v=await (null==i.isElement?void 0:i.isElement(y))&&await (null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},b=rO(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:y,strategy:l}):x);return{top:(g.top-b.top+p.top)/v.y,bottom:(b.bottom-g.bottom+p.bottom)/v.y,left:(g.left-b.left+p.left)/v.x,right:(b.right-g.right+p.right)/v.x}}function rU(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function r$(e){return rg.some(t=>e[t]>=0)}let rH=new Set(["left","top"]);async function rW(e,t){let{placement:r,platform:a,elements:n}=e,i=await (null==a.isRTL?void 0:a.isRTL(n.floating)),s=rS(r),o=rk(r),l="y"===r_(r),c=rH.has(s)?-1:1,d=i&&l?-1:1,u=rA(t,e),{mainAxis:h,crossAxis:m,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(m="end"===o?-1*p:p),l?{x:m*d,y:h*c}:{x:h*c,y:m*d}}function rV(){return"undefined"!=typeof window}function rG(e){return rK(e)?(e.nodeName||"").toLowerCase():"#document"}function rZ(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function rY(e){var t;return null==(t=(rK(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function rK(e){return!!rV()&&(e instanceof Node||e instanceof rZ(e).Node)}function rX(e){return!!rV()&&(e instanceof Element||e instanceof rZ(e).Element)}function rJ(e){return!!rV()&&(e instanceof HTMLElement||e instanceof rZ(e).HTMLElement)}function rQ(e){return!!rV()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof rZ(e).ShadowRoot)}let r0=new Set(["inline","contents"]);function r1(e){let{overflow:t,overflowX:r,overflowY:a,display:n}=ar(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!r0.has(n)}let r2=new Set(["table","td","th"]),r5=[":popover-open",":modal"];function r4(e){return r5.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let r3=["transform","translate","scale","rotate","perspective"],r6=["transform","translate","scale","rotate","perspective","filter"],r8=["paint","layout","strict","content"];function r7(e){let t=r9(),r=rX(e)?ar(e):e;return r3.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||r6.some(e=>(r.willChange||"").includes(e))||r8.some(e=>(r.contain||"").includes(e))}function r9(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let ae=new Set(["html","body","#document"]);function at(e){return ae.has(rG(e))}function ar(e){return rZ(e).getComputedStyle(e)}function aa(e){return rX(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function an(e){if("html"===rG(e))return e;let t=e.assignedSlot||e.parentNode||rQ(e)&&e.host||rY(e);return rQ(t)?t.host:t}function ai(e,t,r){var a;void 0===t&&(t=[]),void 0===r&&(r=!0);let n=function e(t){let r=an(t);return at(r)?t.ownerDocument?t.ownerDocument.body:t.body:rJ(r)&&r1(r)?r:e(r)}(e),i=n===(null==(a=e.ownerDocument)?void 0:a.body),s=rZ(n);if(i){let e=as(s);return t.concat(s,s.visualViewport||[],r1(n)?n:[],e&&r?ai(e):[])}return t.concat(n,ai(n,[],r))}function as(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ao(e){let t=ar(e),r=parseFloat(t.width)||0,a=parseFloat(t.height)||0,n=rJ(e),i=n?e.offsetWidth:r,s=n?e.offsetHeight:a,o=rv(r)!==i||rv(a)!==s;return o&&(r=i,a=s),{width:r,height:a,$:o}}function al(e){return rX(e)?e:e.contextElement}function ac(e){let t=al(e);if(!rJ(t))return rw(1);let r=t.getBoundingClientRect(),{width:a,height:n,$:i}=ao(t),s=(i?rv(r.width):r.width)/a,o=(i?rv(r.height):r.height)/n;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}let ad=rw(0);function au(e){let t=rZ(e);return r9()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ad}function ah(e,t,r,a){var n;void 0===t&&(t=!1),void 0===r&&(r=!1);let i=e.getBoundingClientRect(),s=al(e),o=rw(1);t&&(a?rX(a)&&(o=ac(a)):o=ac(e));let l=(void 0===(n=r)&&(n=!1),a&&(!n||a===rZ(s))&&n)?au(s):rw(0),c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){let e=rZ(s),t=a&&rX(a)?rZ(a):a,r=e,n=as(r);for(;n&&a&&t!==r;){let e=ac(n),t=n.getBoundingClientRect(),a=ar(n),i=t.left+(n.clientLeft+parseFloat(a.paddingLeft))*e.x,s=t.top+(n.clientTop+parseFloat(a.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,h*=e.y,c+=i,d+=s,n=as(r=rZ(n))}}return rO({width:u,height:h,x:c,y:d})}function am(e,t){let r=aa(e).scrollLeft;return t?t.left+r:ah(rY(e)).left+r}function ap(e,t,r){void 0===r&&(r=!1);let a=e.getBoundingClientRect();return{x:a.left+t.scrollLeft-(r?0:am(e,a)),y:a.top+t.scrollTop}}let af=new Set(["absolute","fixed"]);function ag(e,t,r){let a;if("viewport"===t)a=function(e,t){let r=rZ(e),a=rY(e),n=r.visualViewport,i=a.clientWidth,s=a.clientHeight,o=0,l=0;if(n){i=n.width,s=n.height;let e=r9();(!e||e&&"fixed"===t)&&(o=n.offsetLeft,l=n.offsetTop)}return{width:i,height:s,x:o,y:l}}(e,r);else if("document"===t)a=function(e){let t=rY(e),r=aa(e),a=e.ownerDocument.body,n=ry(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),i=ry(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight),s=-r.scrollLeft+am(e),o=-r.scrollTop;return"rtl"===ar(a).direction&&(s+=ry(t.clientWidth,a.clientWidth)-n),{width:n,height:i,x:s,y:o}}(rY(e));else if(rX(t))a=function(e,t){let r=ah(e,!0,"fixed"===t),a=r.top+e.clientTop,n=r.left+e.clientLeft,i=rJ(e)?ac(e):rw(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y;return{width:s,height:o,x:n*i.x,y:a*i.y}}(t,r);else{let r=au(e);a={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return rO(a)}function ax(e){return"static"===ar(e).position}function ay(e,t){if(!rJ(e)||"fixed"===ar(e).position)return null;if(t)return t(e);let r=e.offsetParent;return rY(e)===r&&(r=r.ownerDocument.body),r}function av(e,t){var r;let a=rZ(e);if(r4(e))return a;if(!rJ(e)){let t=an(e);for(;t&&!at(t);){if(rX(t)&&!ax(t))return t;t=an(t)}return a}let n=ay(e,t);for(;n&&(r=n,r2.has(rG(r)))&&ax(n);)n=ay(n,t);return n&&at(n)&&ax(n)&&!r7(n)?a:n||function(e){let t=an(e);for(;rJ(t)&&!at(t);){if(r7(t))return t;if(r4(t))break;t=an(t)}return null}(e)||a}let ab=async function(e){let t=this.getOffsetParent||av,r=this.getDimensions,a=await r(e.floating);return{reference:function(e,t,r){let a=rJ(t),n=rY(t),i="fixed"===r,s=ah(e,!0,i,t),o={scrollLeft:0,scrollTop:0},l=rw(0);if(a||!a&&!i)if(("body"!==rG(t)||r1(n))&&(o=aa(t)),a){let e=ah(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&(l.x=am(n));i&&!a&&n&&(l.x=am(n));let c=!n||a||i?rw(0):ap(n,o);return{x:s.left+o.scrollLeft-l.x-c.x,y:s.top+o.scrollTop-l.y-c.y,width:s.width,height:s.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},aw={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:a,strategy:n}=e,i="fixed"===n,s=rY(a),o=!!t&&r4(t.floating);if(a===s||o&&i)return r;let l={scrollLeft:0,scrollTop:0},c=rw(1),d=rw(0),u=rJ(a);if((u||!u&&!i)&&(("body"!==rG(a)||r1(s))&&(l=aa(a)),rJ(a))){let e=ah(a);c=ac(a),d.x=e.x+a.clientLeft,d.y=e.y+a.clientTop}let h=!s||u||i?rw(0):ap(s,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:r.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:rY,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:a,strategy:n}=e,i=[..."clippingAncestors"===r?r4(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let a=ai(e,[],!1).filter(e=>rX(e)&&"body"!==rG(e)),n=null,i="fixed"===ar(e).position,s=i?an(e):e;for(;rX(s)&&!at(s);){let t=ar(s),r=r7(s);r||"fixed"!==t.position||(n=null),(i?!r&&!n:!r&&"static"===t.position&&!!n&&af.has(n.position)||r1(s)&&!r&&function e(t,r){let a=an(t);return!(a===r||!rX(a)||at(a))&&("fixed"===ar(a).position||e(a,r))}(e,s))?a=a.filter(e=>e!==s):n=t,s=an(s)}return t.set(e,a),a}(t,this._c):[].concat(r),a],s=i[0],o=i.reduce((e,r)=>{let a=ag(t,r,n);return e.top=ry(a.top,e.top),e.right=rx(a.right,e.right),e.bottom=rx(a.bottom,e.bottom),e.left=ry(a.left,e.left),e},ag(t,s,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:av,getElementRects:ab,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=ao(e);return{width:t,height:r}},getScale:ac,isElement:rX,isRTL:function(e){return"rtl"===ar(e).direction}};function aN(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let aj=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:a,placement:n,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=rA(e,t)||{};if(null==c)return{};let u=rF(d),h={x:r,y:a},m=rC(r_(n)),p=rL(m),f=await s.getDimensions(c),g="y"===m,x=g?"clientHeight":"clientWidth",y=i.reference[p]+i.reference[m]-h[m]-i.floating[p],v=h[m]-i.reference[m],b=await (null==s.getOffsetParent?void 0:s.getOffsetParent(c)),w=b?b[x]:0;w&&await (null==s.isElement?void 0:s.isElement(b))||(w=o.floating[x]||i.floating[p]);let N=w/2-f[p]/2-1,j=rx(u[g?"top":"left"],N),A=rx(u[g?"bottom":"right"],N),S=w-f[p]-A,k=w/2-f[p]/2+(y/2-v/2),C=ry(j,rx(k,S)),L=!l.arrow&&null!=rk(n)&&k!==C&&i.reference[p]/2-(k<j?j:A)-f[p]/2<0,P=L?k<j?k-j:k-S:0;return{[m]:h[m]+P,data:{[m]:C,centerOffset:k-C-P,...L&&{alignmentOffset:P}},reset:L}}}),aA=(e,t,r)=>{let a=new Map,n={platform:aw,...r},i={...n.platform,_c:a};return rq(e,t,{...n,platform:i})};var aS="undefined"!=typeof document?n.useLayoutEffect:function(){};function ak(e,t){let r,a,n;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(a=r;0!=a--;)if(!ak(e[a],t[a]))return!1;return!0}if((r=(n=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(a=r;0!=a--;)if(!({}).hasOwnProperty.call(t,n[a]))return!1;for(a=r;0!=a--;){let r=n[a];if(("_owner"!==r||!e.$$typeof)&&!ak(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function aC(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function aL(e,t){let r=aC(e);return Math.round(t*r)/r}function aP(e){let t=n.useRef(e);return aS(()=>{t.current=e}),t}let a_=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:a}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?aj({element:r.current,padding:a}).fn(t):{}:r?aj({element:r,padding:a}).fn(t):{}}}),aD=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,a;let{x:n,y:i,placement:s,middlewareData:o}=t,l=await rW(t,e);return s===(null==(r=o.offset)?void 0:r.placement)&&null!=(a=o.arrow)&&a.alignmentOffset?{}:{x:n+l.x,y:i+l.y,data:{...l,placement:s}}}}}(e),options:[e,t]}),aI=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:a,placement:n}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=rA(e,t),c={x:r,y:a},d=await rz(t,l),u=r_(rS(n)),h=rC(u),m=c[h],p=c[u];if(i){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",r=m+d[e],a=m-d[t];m=ry(r,rx(m,a))}if(s){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",r=p+d[e],a=p-d[t];p=ry(r,rx(p,a))}let f=o.fn({...t,[h]:m,[u]:p});return{...f,data:{x:f.x-r,y:f.y-a,enabled:{[h]:i,[u]:s}}}}}}(e),options:[e,t]}),aR=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:a,placement:n,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=rA(e,t),d={x:r,y:a},u=r_(n),h=rC(u),m=d[h],p=d[u],f=rA(o,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){let e="y"===h?"height":"width",t=i.reference[h]-i.floating[e]+g.mainAxis,r=i.reference[h]+i.reference[e]-g.mainAxis;m<t?m=t:m>r&&(m=r)}if(c){var x,y;let e="y"===h?"width":"height",t=rH.has(rS(n)),r=i.reference[u]-i.floating[e]+(t&&(null==(x=s.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),a=i.reference[u]+i.reference[e]+(t?0:(null==(y=s.offset)?void 0:y[u])||0)-(t?g.crossAxis:0);p<r?p=r:p>a&&(p=a)}return{[h]:m,[u]:p}}}}(e),options:[e,t]}),aE=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,a,n,i,s;let{placement:o,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:h}=t,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...v}=rA(e,t);if(null!=(r=l.arrow)&&r.alignmentOffset)return{};let b=rS(o),w=r_(d),N=rS(d)===d,j=await (null==u.isRTL?void 0:u.isRTL(h.floating)),A=f||(N||!y?[rM(d)]:function(e){let t=rM(e);return[rD(e),t,rD(t)]}(d)),S="none"!==x;!f&&S&&A.push(...function(e,t,r,a){let n=rk(e),i=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?rR:rI;return t?rI:rR;case"left":case"right":return t?rE:rT;default:return[]}}(rS(e),"start"===r,a);return n&&(i=i.map(e=>e+"-"+n),t&&(i=i.concat(i.map(rD)))),i}(d,y,x,j));let k=[d,...A],C=await rz(t,v),L=[],P=(null==(a=l.flip)?void 0:a.overflows)||[];if(m&&L.push(C[b]),p){let e=function(e,t,r){void 0===r&&(r=!1);let a=rk(e),n=rC(r_(e)),i=rL(n),s="x"===n?a===(r?"end":"start")?"right":"left":"start"===a?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=rM(s)),[s,rM(s)]}(o,c,j);L.push(C[e[0]],C[e[1]])}if(P=[...P,{placement:o,overflows:L}],!L.every(e=>e<=0)){let e=((null==(n=l.flip)?void 0:n.index)||0)+1,t=k[e];if(t&&("alignment"!==p||w===r_(t)||P.every(e=>e.overflows[0]>0&&r_(e.placement)===w)))return{data:{index:e,overflows:P},reset:{placement:t}};let r=null==(i=P.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!r)switch(g){case"bestFit":{let e=null==(s=P.filter(e=>{if(S){let t=r_(e.placement);return t===w||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:s[0];e&&(r=e);break}case"initialPlacement":r=d}if(o!==r)return{reset:{placement:r}}}return{}}}}(e),options:[e,t]}),aT=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,a;let n,i,{placement:s,rects:o,platform:l,elements:c}=t,{apply:d=()=>{},...u}=rA(e,t),h=await rz(t,u),m=rS(s),p=rk(s),f="y"===r_(s),{width:g,height:x}=o.floating;"top"===m||"bottom"===m?(n=m,i=p===(await (null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(i=m,n="end"===p?"top":"bottom");let y=x-h.top-h.bottom,v=g-h.left-h.right,b=rx(x-h[n],y),w=rx(g-h[i],v),N=!t.middlewareData.shift,j=b,A=w;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(A=v),null!=(a=t.middlewareData.shift)&&a.enabled.y&&(j=y),N&&!p){let e=ry(h.left,0),t=ry(h.right,0),r=ry(h.top,0),a=ry(h.bottom,0);f?A=g-2*(0!==e||0!==t?e+t:ry(h.left,h.right)):j=x-2*(0!==r||0!==a?r+a:ry(h.top,h.bottom))}await d({...t,availableWidth:A,availableHeight:j});let S=await l.getDimensions(c.floating);return g!==S.width||x!==S.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),aM=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:a="referenceHidden",...n}=rA(e,t);switch(a){case"referenceHidden":{let e=rU(await rz(t,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:r$(e)}}}case"escaped":{let e=rU(await rz(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:r$(e)}}}default:return{}}}}}(e),options:[e,t]}),aF=(e,t)=>({...a_(e),options:[e,t]});var aO=n.forwardRef((e,t)=>{let{children:r,width:n=10,height:i=5,...s}=e;return(0,a.jsx)(T.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,a.jsx)("polygon",{points:"0,0 30,0 15,10"})})});aO.displayName="Arrow";var aB="Popper",[aq,az]=C(aB),[aU,a$]=aq(aB),aH=e=>{let{__scopePopper:t,children:r}=e,[i,s]=n.useState(null);return(0,a.jsx)(aU,{scope:t,anchor:i,onAnchorChange:s,children:r})};aH.displayName=aB;var aW="PopperAnchor",aV=n.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:i,...s}=e,o=a$(aW,r),l=n.useRef(null),c=(0,k.s)(t,l);return n.useEffect(()=>{o.onAnchorChange(i?.current||l.current)}),i?null:(0,a.jsx)(T.div,{...s,ref:c})});aV.displayName=aW;var aG="PopperContent",[aZ,aY]=aq(aG),aK=n.forwardRef((e,t)=>{let{__scopePopper:r,side:i="bottom",sideOffset:s=0,align:o="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:g,...x}=e,y=a$(aG,r),[v,b]=n.useState(null),w=(0,k.s)(t,e=>b(e)),[N,j]=n.useState(null),A=function(e){let[t,r]=n.useState(void 0);return L(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let a,n;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,n=t.blockSize}else a=e.offsetWidth,n=e.offsetHeight;r({width:a,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(N),S=A?.width??0,C=A?.height??0,P="number"==typeof h?h:{top:0,right:0,bottom:0,left:0,...h},_=Array.isArray(u)?u:[u],D=_.length>0,I={padding:P,boundary:_.filter(a0),altBoundary:D},{refs:R,floatingStyles:F,placement:O,isPositioned:B,middlewareData:q}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=n.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=n.useState(a);ak(m,a)||p(a);let[f,g]=n.useState(null),[x,y]=n.useState(null),v=n.useCallback(e=>{e!==j.current&&(j.current=e,g(e))},[]),b=n.useCallback(e=>{e!==A.current&&(A.current=e,y(e))},[]),w=s||f,N=o||x,j=n.useRef(null),A=n.useRef(null),S=n.useRef(u),k=null!=c,C=aP(c),L=aP(i),P=aP(d),_=n.useCallback(()=>{if(!j.current||!A.current)return;let e={placement:t,strategy:r,middleware:m};L.current&&(e.platform=L.current),aA(j.current,A.current,e).then(e=>{let t={...e,isPositioned:!1!==P.current};D.current&&!ak(S.current,t)&&(S.current=t,E.flushSync(()=>{h(t)}))})},[m,t,r,L,P]);aS(()=>{!1===d&&S.current.isPositioned&&(S.current.isPositioned=!1,h(e=>({...e,isPositioned:!1})))},[d]);let D=n.useRef(!1);aS(()=>(D.current=!0,()=>{D.current=!1}),[]),aS(()=>{if(w&&(j.current=w),N&&(A.current=N),w&&N){if(C.current)return C.current(w,N,_);_()}},[w,N,_,C,k]);let I=n.useMemo(()=>({reference:j,floating:A,setReference:v,setFloating:b}),[v,b]),R=n.useMemo(()=>({reference:w,floating:N}),[w,N]),T=n.useMemo(()=>{let e={position:r,left:0,top:0};if(!R.floating)return e;let t=aL(R.floating,u.x),a=aL(R.floating,u.y);return l?{...e,transform:"translate("+t+"px, "+a+"px)",...aC(R.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:a}},[r,l,R.floating,u.x,u.y]);return n.useMemo(()=>({...u,update:_,refs:I,elements:R,floatingStyles:T}),[u,_,I,R,T])}({strategy:"fixed",placement:i+("center"!==o?"-"+o:""),whileElementsMounted:(...e)=>(function(e,t,r,a){let n;void 0===a&&(a={});let{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=a,d=al(e),u=i||s?[...d?ai(d):[],...ai(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});let h=d&&l?function(e,t){let r,a=null,n=rY(e);function i(){var e;clearTimeout(r),null==(e=a)||e.disconnect(),a=null}return!function s(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),i();let c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:m}=c;if(o||t(),!h||!m)return;let p=rb(u),f=rb(n.clientWidth-(d+h)),g={rootMargin:-p+"px "+-f+"px "+-rb(n.clientHeight-(u+m))+"px "+-rb(d)+"px",threshold:ry(0,rx(1,l))||1},x=!0;function y(t){let a=t[0].intersectionRatio;if(a!==l){if(!x)return s();a?s(!1,a):r=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==a||aN(c,e.getBoundingClientRect())||s(),x=!1}try{a=new IntersectionObserver(y,{...g,root:n.ownerDocument})}catch(e){a=new IntersectionObserver(y,g)}a.observe(e)}(!0),i}(d,r):null,m=-1,p=null;o&&(p=new ResizeObserver(e=>{let[a]=e;a&&a.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let f=c?ah(e):null;return c&&function t(){let a=ah(e);f&&!aN(f,a)&&r(),f=a,n=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,c&&cancelAnimationFrame(n)}})(...e,{animationFrame:"always"===f}),elements:{reference:y.anchor},middleware:[aD({mainAxis:s+C,alignmentAxis:l}),d&&aI({mainAxis:!0,crossAxis:!1,limiter:"partial"===m?aR():void 0,...I}),d&&aE({...I}),aT({...I,apply:({elements:e,rects:t,availableWidth:r,availableHeight:a})=>{let{width:n,height:i}=t.reference,s=e.floating.style;s.setProperty("--radix-popper-available-width",`${r}px`),s.setProperty("--radix-popper-available-height",`${a}px`),s.setProperty("--radix-popper-anchor-width",`${n}px`),s.setProperty("--radix-popper-anchor-height",`${i}px`)}}),N&&aF({element:N,padding:c}),a1({arrowWidth:S,arrowHeight:C}),p&&aM({strategy:"referenceHidden",...I})]}),[z,U]=a2(O),$=M(g);L(()=>{B&&$?.()},[B,$]);let H=q.arrow?.x,W=q.arrow?.y,V=q.arrow?.centerOffset!==0,[G,Z]=n.useState();return L(()=>{v&&Z(window.getComputedStyle(v).zIndex)},[v]),(0,a.jsx)("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:B?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[q.transformOrigin?.x,q.transformOrigin?.y].join(" "),...q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,a.jsx)(aZ,{scope:r,placedSide:z,onArrowChange:j,arrowX:H,arrowY:W,shouldHideArrow:V,children:(0,a.jsx)(T.div,{"data-side":z,"data-align":U,...x,ref:w,style:{...x.style,animation:B?void 0:"none"}})})})});aK.displayName=aG;var aX="PopperArrow",aJ={top:"bottom",right:"left",bottom:"top",left:"right"},aQ=n.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,i=aY(aX,r),s=aJ[i.placedSide];return(0,a.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,a.jsx)(aO,{...n,ref:t,style:{...n.style,display:"block"}})})});function a0(e){return null!==e}aQ.displayName=aX;var a1=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:a,middlewareData:n}=t,i=n.arrow?.centerOffset!==0,s=i?0:e.arrowWidth,o=i?0:e.arrowHeight,[l,c]=a2(r),d={start:"0%",center:"50%",end:"100%"}[c],u=(n.arrow?.x??0)+s/2,h=(n.arrow?.y??0)+o/2,m="",p="";return"bottom"===l?(m=i?d:`${u}px`,p=`${-o}px`):"top"===l?(m=i?d:`${u}px`,p=`${a.floating.height+o}px`):"right"===l?(m=`${-o}px`,p=i?d:`${h}px`):"left"===l&&(m=`${a.floating.width+o}px`,p=i?d:`${h}px`),{data:{x:m,y:p}}}});function a2(e){let[t,r="center"]=e.split("-");return[t,r]}var a5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});n.forwardRef((e,t)=>(0,a.jsx)(T.span,{...e,ref:t,style:{...a5,...e.style}})).displayName="VisuallyHidden";var a4=[" ","Enter","ArrowUp","ArrowDown"],a3=[" ","Enter"],a6="Select",[a8,a7,a9]=rd(a6),[ne,nt]=C(a6,[a9,az]),nr=az(),[na,nn]=ne(a6),[ni,ns]=ne(a6),no=e=>{let{__scopeSelect:t,children:r,open:i,defaultOpen:s,onOpenChange:o,value:l,defaultValue:c,onValueChange:d,dir:u,name:h,autoComplete:m,disabled:p,required:f,form:g}=e,x=nr(t),[y,v]=n.useState(null),[b,w]=n.useState(null),[N,j]=n.useState(!1),A=rf(u),[S,k]=R({prop:i,defaultProp:s??!1,onChange:o,caller:a6}),[C,L]=R({prop:l,defaultProp:c,onChange:d,caller:a6}),P=n.useRef(null),_=!y||g||!!y.closest("form"),[I,E]=n.useState(new Set),T=Array.from(I).map(e=>e.props.value).join(";");return(0,a.jsx)(aH,{...x,children:(0,a.jsxs)(na,{required:f,scope:t,trigger:y,onTriggerChange:v,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:N,onValueNodeHasChildrenChange:j,contentId:D(),value:C,onValueChange:L,open:S,onOpenChange:k,dir:A,triggerPointerDownPosRef:P,disabled:p,children:[(0,a.jsx)(a8.Provider,{scope:t,children:(0,a.jsx)(ni,{scope:e.__scopeSelect,onNativeOptionAdd:n.useCallback(e=>{E(t=>new Set(t).add(e))},[]),onNativeOptionRemove:n.useCallback(e=>{E(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:r})}),_?(0,a.jsxs)(nV,{"aria-hidden":!0,required:f,tabIndex:-1,name:h,autoComplete:m,value:C,onChange:e=>L(e.target.value),disabled:p,form:g,children:[void 0===C?(0,a.jsx)("option",{value:""}):null,Array.from(I)]},T):null]})})};no.displayName=a6;var nl="SelectTrigger",nc=n.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:i=!1,...s}=e,o=nr(r),l=nn(nl,r),c=l.disabled||i,d=(0,k.s)(t,l.onTriggerChange),u=a7(r),h=n.useRef("touch"),[m,p,f]=nZ(e=>{let t=u().filter(e=>!e.disabled),r=t.find(e=>e.value===l.value),a=nY(t,e,r);void 0!==a&&l.onValueChange(a.value)}),g=e=>{c||(l.onOpenChange(!0),f()),e&&(l.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,a.jsx)(aV,{asChild:!0,...o,children:(0,a.jsx)(T.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":nG(l.value)?"":void 0,...s,ref:d,onClick:S(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&g(e)}),onPointerDown:S(s.onPointerDown,e=>{h.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:S(s.onKeyDown,e=>{let t=""!==m.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),(!t||" "!==e.key)&&a4.includes(e.key)&&(g(),e.preventDefault())})})})});nc.displayName=nl;var nd="SelectValue",nu=n.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,children:s,placeholder:o="",...l}=e,c=nn(nd,r),{onValueNodeHasChildrenChange:d}=c,u=void 0!==s,h=(0,k.s)(t,c.onValueNodeChange);return L(()=>{d(u)},[d,u]),(0,a.jsx)(T.span,{...l,ref:h,style:{pointerEvents:"none"},children:nG(c.value)?(0,a.jsx)(a.Fragment,{children:o}):s})});nu.displayName=nd;var nh=n.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...i}=e;return(0,a.jsx)(T.span,{"aria-hidden":!0,...i,ref:t,children:n||"▼"})});nh.displayName="SelectIcon";var nm=e=>(0,a.jsx)(X,{asChild:!0,...e});nm.displayName="SelectPortal";var np="SelectContent",nf=n.forwardRef((e,t)=>{let r=nn(np,e.__scopeSelect),[i,s]=n.useState();return(L(()=>{s(new DocumentFragment)},[]),r.open)?(0,a.jsx)(nv,{...e,ref:t}):i?E.createPortal((0,a.jsx)(ng,{scope:e.__scopeSelect,children:(0,a.jsx)(a8.Slot,{scope:e.__scopeSelect,children:(0,a.jsx)("div",{children:e.children})})}),i):null});nf.displayName=np;var[ng,nx]=ne(np),ny=(0,w.TL)("SelectContent.RemoveScroll"),nv=n.forwardRef((e,t)=>{let{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:y,...v}=e,b=nn(np,r),[w,N]=n.useState(null),[j,A]=n.useState(null),C=(0,k.s)(t,e=>N(e)),[L,P]=n.useState(null),[_,D]=n.useState(null),I=a7(r),[R,E]=n.useState(!1),T=n.useRef(!1);n.useEffect(()=>{if(w)return eK(w)},[w]),et();let M=n.useCallback(e=>{let[t,...r]=I().map(e=>e.ref.current),[a]=r.slice(-1),n=document.activeElement;for(let r of e)if(r===n||(r?.scrollIntoView({block:"nearest"}),r===t&&j&&(j.scrollTop=0),r===a&&j&&(j.scrollTop=j.scrollHeight),r?.focus(),document.activeElement!==n))return},[I,j]),F=n.useCallback(()=>M([L,w]),[M,L,w]);n.useEffect(()=>{R&&F()},[R,F]);let{onOpenChange:O,triggerPointerDownPosRef:q}=b;n.useEffect(()=>{if(w){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(q.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(q.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():w.contains(r.target)||O(!1),document.removeEventListener("pointermove",t),q.current=null};return null!==q.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[w,O,q]),n.useEffect(()=>{let e=()=>O(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[O]);let[z,U]=nZ(e=>{let t=I().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),a=nY(t,e,r);a&&setTimeout(()=>a.ref.current.focus())}),$=n.useCallback((e,t,r)=>{let a=!T.current&&!r;(void 0!==b.value&&b.value===t||a)&&(P(e),a&&(T.current=!0))},[b.value]),H=n.useCallback(()=>w?.focus(),[w]),V=n.useCallback((e,t,r)=>{let a=!T.current&&!r;(void 0!==b.value&&b.value===t||a)&&D(e)},[b.value]),G="popper"===i?nw:nb,Z=G===nw?{side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:y}:{};return(0,a.jsx)(ng,{scope:r,content:w,viewport:j,onViewportChange:A,itemRefCallback:$,selectedItem:L,onItemLeave:H,itemTextRefCallback:V,focusSelectedItem:F,selectedItemText:_,position:i,isPositioned:R,searchRef:z,children:(0,a.jsx)(eU,{as:ny,allowPinchZoom:!0,children:(0,a.jsx)(W,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:S(s,e=>{b.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,a.jsx)(B,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:(0,a.jsx)(G,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault(),...v,...Z,onPlaced:()=>E(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:S(v.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||U(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=I().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,a=t.indexOf(r);t=t.slice(a+1)}setTimeout(()=>M(t)),e.preventDefault()}})})})})})})});nv.displayName="SelectContentImpl";var nb=n.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:i,...s}=e,o=nn(np,r),l=nx(np,r),[c,d]=n.useState(null),[u,h]=n.useState(null),m=(0,k.s)(t,e=>h(e)),p=a7(r),f=n.useRef(!1),g=n.useRef(!0),{viewport:x,selectedItem:y,selectedItemText:v,focusSelectedItem:b}=l,w=n.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&u&&x&&y&&v){let e=o.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),r=o.valueNode.getBoundingClientRect(),a=v.getBoundingClientRect();if("rtl"!==o.dir){let n=a.left-t.left,i=r.left-n,s=e.left-i,o=e.width+s,l=Math.max(o,t.width),d=rc(i,[10,Math.max(10,window.innerWidth-10-l)]);c.style.minWidth=o+"px",c.style.left=d+"px"}else{let n=t.right-a.right,i=window.innerWidth-r.right-n,s=window.innerWidth-e.right-i,o=e.width+s,l=Math.max(o,t.width),d=rc(i,[10,Math.max(10,window.innerWidth-10-l)]);c.style.minWidth=o+"px",c.style.right=d+"px"}let n=p(),s=window.innerHeight-20,l=x.scrollHeight,d=window.getComputedStyle(u),h=parseInt(d.borderTopWidth,10),m=parseInt(d.paddingTop,10),g=parseInt(d.borderBottomWidth,10),b=h+m+l+parseInt(d.paddingBottom,10)+g,w=Math.min(5*y.offsetHeight,b),N=window.getComputedStyle(x),j=parseInt(N.paddingTop,10),A=parseInt(N.paddingBottom,10),S=e.top+e.height/2-10,k=y.offsetHeight/2,C=h+m+(y.offsetTop+k);if(C<=S){let e=n.length>0&&y===n[n.length-1].ref.current;c.style.bottom="0px";let t=Math.max(s-S,k+(e?A:0)+(u.clientHeight-x.offsetTop-x.offsetHeight)+g);c.style.height=C+t+"px"}else{let e=n.length>0&&y===n[0].ref.current;c.style.top="0px";let t=Math.max(S,h+x.offsetTop+(e?j:0)+k);c.style.height=t+(b-C)+"px",x.scrollTop=C-S+x.offsetTop}c.style.margin="10px 0",c.style.minHeight=w+"px",c.style.maxHeight=s+"px",i?.(),requestAnimationFrame(()=>f.current=!0)}},[p,o.trigger,o.valueNode,c,u,x,y,v,o.dir,i]);L(()=>w(),[w]);let[N,j]=n.useState();L(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);let A=n.useCallback(e=>{e&&!0===g.current&&(w(),b?.(),g.current=!1)},[w,b]);return(0,a.jsx)(nN,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:f,onScrollButtonChange:A,children:(0,a.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:(0,a.jsx)(T.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});nb.displayName="SelectItemAlignedPosition";var nw=n.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:i=10,...s}=e,o=nr(r);return(0,a.jsx)(aK,{...o,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});nw.displayName="SelectPopperPosition";var[nN,nj]=ne(np,{}),nA="SelectViewport",nS=n.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:i,...s}=e,o=nx(nA,r),l=nj(nA,r),c=(0,k.s)(t,o.onViewportChange),d=n.useRef(0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),(0,a.jsx)(a8.Slot,{scope:r,children:(0,a.jsx)(T.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:S(s.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:a}=l;if(a?.current&&r){let e=Math.abs(d.current-t.scrollTop);if(e>0){let a=window.innerHeight-20,n=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(n<a){let i=n+e,s=Math.min(a,i),o=i-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=o>0?o:0,r.style.justifyContent="flex-end")}}}d.current=t.scrollTop})})})]})});nS.displayName=nA;var nk="SelectGroup",[nC,nL]=ne(nk);n.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=D();return(0,a.jsx)(nC,{scope:r,id:i,children:(0,a.jsx)(T.div,{role:"group","aria-labelledby":i,...n,ref:t})})}).displayName=nk;var nP="SelectLabel",n_=n.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=nL(nP,r);return(0,a.jsx)(T.div,{id:i.id,...n,ref:t})});n_.displayName=nP;var nD="SelectItem",[nI,nR]=ne(nD),nE=n.forwardRef((e,t)=>{let{__scopeSelect:r,value:i,disabled:s=!1,textValue:o,...l}=e,c=nn(nD,r),d=nx(nD,r),u=c.value===i,[h,m]=n.useState(o??""),[p,f]=n.useState(!1),g=(0,k.s)(t,e=>d.itemRefCallback?.(e,i,s)),x=D(),y=n.useRef("touch"),v=()=>{s||(c.onValueChange(i),c.onOpenChange(!1))};if(""===i)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,a.jsx)(nI,{scope:r,value:i,disabled:s,textId:x,isSelected:u,onItemTextChange:n.useCallback(e=>{m(t=>t||(e?.textContent??"").trim())},[]),children:(0,a.jsx)(a8.ItemSlot,{scope:r,value:i,disabled:s,textValue:h,children:(0,a.jsx)(T.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:g,onFocus:S(l.onFocus,()=>f(!0)),onBlur:S(l.onBlur,()=>f(!1)),onClick:S(l.onClick,()=>{"mouse"!==y.current&&v()}),onPointerUp:S(l.onPointerUp,()=>{"mouse"===y.current&&v()}),onPointerDown:S(l.onPointerDown,e=>{y.current=e.pointerType}),onPointerMove:S(l.onPointerMove,e=>{y.current=e.pointerType,s?d.onItemLeave?.():"mouse"===y.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:S(l.onPointerLeave,e=>{e.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:S(l.onKeyDown,e=>{(d.searchRef?.current===""||" "!==e.key)&&(a3.includes(e.key)&&v()," "===e.key&&e.preventDefault())})})})})});nE.displayName=nD;var nT="SelectItemText",nM=n.forwardRef((e,t)=>{let{__scopeSelect:r,className:i,style:s,...o}=e,l=nn(nT,r),c=nx(nT,r),d=nR(nT,r),u=ns(nT,r),[h,m]=n.useState(null),p=(0,k.s)(t,e=>m(e),d.onItemTextChange,e=>c.itemTextRefCallback?.(e,d.value,d.disabled)),f=h?.textContent,g=n.useMemo(()=>(0,a.jsx)("option",{value:d.value,disabled:d.disabled,children:f},d.value),[d.disabled,d.value,f]),{onNativeOptionAdd:x,onNativeOptionRemove:y}=u;return L(()=>(x(g),()=>y(g)),[x,y,g]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.span,{id:d.textId,...o,ref:p}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?E.createPortal(o.children,l.valueNode):null]})});nM.displayName=nT;var nF="SelectItemIndicator",nO=n.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return nR(nF,r).isSelected?(0,a.jsx)(T.span,{"aria-hidden":!0,...n,ref:t}):null});nO.displayName=nF;var nB="SelectScrollUpButton",nq=n.forwardRef((e,t)=>{let r=nx(nB,e.__scopeSelect),i=nj(nB,e.__scopeSelect),[s,o]=n.useState(!1),l=(0,k.s)(t,i.onScrollButtonChange);return L(()=>{if(r.viewport&&r.isPositioned){let e=function(){o(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),s?(0,a.jsx)(n$,{...e,ref:l,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});nq.displayName=nB;var nz="SelectScrollDownButton",nU=n.forwardRef((e,t)=>{let r=nx(nz,e.__scopeSelect),i=nj(nz,e.__scopeSelect),[s,o]=n.useState(!1),l=(0,k.s)(t,i.onScrollButtonChange);return L(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;o(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),s?(0,a.jsx)(n$,{...e,ref:l,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});nU.displayName=nz;var n$=n.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:i,...s}=e,o=nx("SelectScrollButton",r),l=n.useRef(null),c=a7(r),d=n.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return n.useEffect(()=>()=>d(),[d]),L(()=>{let e=c().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[c]),(0,a.jsx)(T.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:S(s.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(i,50))}),onPointerMove:S(s.onPointerMove,()=>{o.onItemLeave?.(),null===l.current&&(l.current=window.setInterval(i,50))}),onPointerLeave:S(s.onPointerLeave,()=>{d()})})}),nH=n.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,a.jsx)(T.div,{"aria-hidden":!0,...n,ref:t})});nH.displayName="SelectSeparator";var nW="SelectArrow";n.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=nr(r),s=nn(nW,r),o=nx(nW,r);return s.open&&"popper"===o.position?(0,a.jsx)(aQ,{...i,...n,ref:t}):null}).displayName=nW;var nV=n.forwardRef(({__scopeSelect:e,value:t,...r},i)=>{let s=n.useRef(null),o=(0,k.s)(i,s),l=function(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(t);return n.useEffect(()=>{let e=s.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(l!==t&&r){let a=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(a)}},[l,t]),(0,a.jsx)(T.select,{...r,style:{...a5,...r.style},ref:o,defaultValue:t})});function nG(e){return""===e||void 0===e}function nZ(e){let t=M(e),r=n.useRef(""),a=n.useRef(0),i=n.useCallback(e=>{let n=r.current+e;t(n),function e(t){r.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout(()=>e(""),1e3))}(n)},[t]),s=n.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,i,s]}function nY(e,t,r){var a,n;let i=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=r?e.indexOf(r):-1,o=(a=e,n=Math.max(s,0),a.map((e,t)=>a[(n+t)%a.length]));1===i.length&&(o=o.filter(e=>e!==r));let l=o.find(e=>e.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}nV.displayName="SelectBubbleInput";let nK=(0,s.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),nX=(0,s.A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),nJ=(0,s.A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),nQ=n.forwardRef(({className:e,children:t,...r},n)=>(0,a.jsxs)(nc,{ref:n,className:(0,y.cn)("flex h-10 w-full items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,a.jsx)(nh,{asChild:!0,children:(0,a.jsx)(nK,{className:"h-4 w-4 opacity-50"})})]}));nQ.displayName=nc.displayName;let n0=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(nq,{ref:r,className:(0,y.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(nX,{className:"h-4 w-4"})}));n0.displayName=nq.displayName;let n1=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(nU,{ref:r,className:(0,y.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(nK,{className:"h-4 w-4"})}));n1.displayName=nU.displayName;let n2=n.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>(0,a.jsx)(nm,{children:(0,a.jsxs)(nf,{ref:i,className:(0,y.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[(0,a.jsx)(n0,{}),(0,a.jsx)(nS,{className:(0,y.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(n1,{})]})}));n2.displayName=nf.displayName,n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(n_,{ref:r,className:(0,y.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=n_.displayName;let n5=n.forwardRef(({className:e,children:t,...r},n)=>(0,a.jsxs)(nE,{ref:n,className:(0,y.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(nO,{children:(0,a.jsx)(nJ,{className:"h-4 w-4"})})}),(0,a.jsx)(nM,{children:t})]}));n5.displayName=nE.displayName,n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(nH,{ref:r,className:(0,y.cn)("-mx-1 my-1 h-px bg-gray-100",e),...t})).displayName=nH.displayName;var n4="rovingFocusGroup.onEntryFocus",n3={bubbles:!1,cancelable:!0},n6="RovingFocusGroup",[n8,n7,n9]=rd(n6),[ie,it]=C(n6,[n9]),[ir,ia]=ie(n6),ii=n.forwardRef((e,t)=>(0,a.jsx)(n8.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(n8.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(is,{...e,ref:t})})}));ii.displayName=n6;var is=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:i,loop:s=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...m}=e,p=n.useRef(null),f=(0,k.s)(t,p),g=rf(o),[x,y]=R({prop:l,defaultProp:c??null,onChange:d,caller:n6}),[v,b]=n.useState(!1),w=M(u),N=n7(r),j=n.useRef(!1),[A,C]=n.useState(0);return n.useEffect(()=>{let e=p.current;if(e)return e.addEventListener(n4,w),()=>e.removeEventListener(n4,w)},[w]),(0,a.jsx)(ir,{scope:r,orientation:i,dir:g,loop:s,currentTabStopId:x,onItemFocus:n.useCallback(e=>y(e),[y]),onItemShiftTab:n.useCallback(()=>b(!0),[]),onFocusableItemAdd:n.useCallback(()=>C(e=>e+1),[]),onFocusableItemRemove:n.useCallback(()=>C(e=>e-1),[]),children:(0,a.jsx)(T.div,{tabIndex:v||0===A?-1:0,"data-orientation":i,...m,ref:f,style:{outline:"none",...e.style},onMouseDown:S(e.onMouseDown,()=>{j.current=!0}),onFocus:S(e.onFocus,e=>{let t=!j.current;if(e.target===e.currentTarget&&t&&!v){let t=new CustomEvent(n4,n3);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=N().filter(e=>e.focusable);id([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),h)}}j.current=!1}),onBlur:S(e.onBlur,()=>b(!1))})})}),io="RovingFocusGroupItem",il=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:i=!0,active:s=!1,tabStopId:o,children:l,...c}=e,d=D(),u=o||d,h=ia(io,r),m=h.currentTabStopId===u,p=n7(r),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:x}=h;return n.useEffect(()=>{if(i)return f(),()=>g()},[i,f,g]),(0,a.jsx)(n8.ItemSlot,{scope:r,id:u,focusable:i,active:s,children:(0,a.jsx)(T.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...c,ref:t,onMouseDown:S(e.onMouseDown,e=>{i?h.onItemFocus(u):e.preventDefault()}),onFocus:S(e.onFocus,()=>h.onItemFocus(u)),onKeyDown:S(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void h.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var a;let n=(a=e.key,"rtl"!==r?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return ic[n]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let a=r.indexOf(e.currentTarget);r=h.loop?function(e,t){return e.map((r,a)=>e[(t+a)%e.length])}(r,a+1):r.slice(a+1)}setTimeout(()=>id(r))}}),children:"function"==typeof l?l({isCurrentTabStop:m,hasTabStop:null!=x}):l})})});il.displayName=io;var ic={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function id(e,t=!1){let r=document.activeElement;for(let a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}var iu="Tabs",[ih,im]=C(iu,[it]),ip=it(),[ig,ix]=ih(iu),iy=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=rf(l),[h,m]=R({prop:n,onChange:i,defaultProp:s??"",caller:iu});return(0,a.jsx)(ig,{scope:r,baseId:D(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:(0,a.jsx)(T.div,{dir:u,"data-orientation":o,...d,ref:t})})});iy.displayName=iu;var iv="TabsList",ib=n.forwardRef((e,t)=>{let{__scopeTabs:r,loop:n=!0,...i}=e,s=ix(iv,r),o=ip(r);return(0,a.jsx)(ii,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:(0,a.jsx)(T.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});ib.displayName=iv;var iw="TabsTrigger",iN=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,o=ix(iw,r),l=ip(r),c=iS(o.baseId,n),d=ik(o.baseId,n),u=n===o.value;return(0,a.jsx)(il,{asChild:!0,...l,focusable:!i,active:u,children:(0,a.jsx)(T.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:t,onMouseDown:S(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(n)}),onKeyDown:S(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(n)}),onFocus:S(e.onFocus,()=>{let e="manual"!==o.activationMode;u||i||!e||o.onValueChange(n)})})})});iN.displayName=iw;var ij="TabsContent",iA=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,forceMount:s,children:o,...l}=e,c=ix(ij,r),d=iS(c.baseId,i),u=ik(c.baseId,i),h=i===c.value,m=n.useRef(h);return n.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(J,{present:s||h,children:({present:r})=>(0,a.jsx)(T.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:u,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&o})})});function iS(e,t){return`${e}-trigger-${t}`}function ik(e,t){return`${e}-content-${t}`}iA.displayName=ij;let iC=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(ib,{ref:r,className:(0,y.cn)("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500",e),...t}));iC.displayName=ib.displayName;let iL=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(iN,{ref:r,className:(0,y.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-gray-950 data-[state=active]:shadow-sm",e),...t}));iL.displayName=iN.displayName;let iP=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(iA,{ref:r,className:(0,y.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",e),...t}));iP.displayName=iA.displayName;let i_=(0,s.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),iD=(0,s.A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),iI=(0,s.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),iR=(0,s.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),iE=(0,s.A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),iT=(0,s.A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);class iM{constructor(){this.templates=new Map,this.messages=new Map,this.campaigns=new Map,this.practiceInfo=this.getDefaultPracticeInfo(),this.initializeDefaultTemplates(),this.loadFromStorage()}getDefaultPracticeInfo(){return{practiceName:"Medical Practice",doctorName:"Dr. Practitioner",practiceNumber:"MP001",contactEmail:"info@medicalpractice.co.za",contactPhone:"+27 11 123 4567",address:"Medical Centre, Johannesburg, South Africa"}}initializeDefaultTemplates(){[{id:"appointment-reminder",name:"Appointment Reminder",category:"appointment",subject:"Appointment Reminder - {{appointmentDate}}",body:`Dear {{patientName}},

This is a friendly reminder of your upcoming appointment:

📅 Date: {{appointmentDate}}
⏰ Time: {{appointmentTime}}
🏥 Location: {{practiceAddress}}
👨‍⚕️ Doctor: {{doctorName}}

Please note:
• Arrive 15 minutes early for check-in
• Bring your medical aid card and ID
• Bring a list of current medications
• Contact us if you need to reschedule

If you need to cancel or reschedule, please call us at {{practicePhone}} at least 24 hours in advance.

Kind regards,
{{practiceName}}
📞 {{practicePhone}}
📧 {{practiceEmail}}

This email contains confidential medical information. If you received this in error, please delete it immediately.`,variables:[{key:"patientName",label:"Patient Name",type:"text",required:!0},{key:"appointmentDate",label:"Appointment Date",type:"date",required:!0},{key:"appointmentTime",label:"Appointment Time",type:"text",required:!0},{key:"doctorName",label:"Doctor Name",type:"text",required:!0},{key:"practiceAddress",label:"Practice Address",type:"text",required:!1},{key:"practicePhone",label:"Practice Phone",type:"text",required:!1},{key:"practiceEmail",label:"Practice Email",type:"text",required:!1},{key:"practiceName",label:"Practice Name",type:"text",required:!1}],isDefault:!0,createdAt:new Date,updatedAt:new Date,usage:{totalSent:0,lastUsed:null,successRate:0}},{id:"test-results",name:"Test Results Available",category:"results",subject:"Your Test Results are Ready - {{testType}}",body:`Dear {{patientName}},

Your recent test results are now available:

🧪 Test: {{testType}}
📅 Date Taken: {{testDate}}
📋 Status: {{resultStatus}}

{{#if normalResults}}
Good news! Your results are within normal limits.
{{else}}
Please schedule a follow-up appointment to discuss your results.
{{/if}}

Next Steps:
{{nextSteps}}

{{#if requiresFollowUp}}
⚠️ Important: Please schedule a follow-up appointment within {{followUpTimeframe}} to discuss these results.
{{/if}}

You can view your complete results by:
• Visiting our practice
• Calling us at {{practicePhone}}
• Logging into your patient portal (if available)

Please do not hesitate to contact us if you have any questions or concerns.

Best regards,
Dr. {{doctorName}}
{{practiceName}}

📞 {{practicePhone}}
📧 {{practiceEmail}}

Confidentiality Notice: This email contains confidential medical information protected by patient privacy laws.`,variables:[{key:"patientName",label:"Patient Name",type:"text",required:!0},{key:"testType",label:"Test Type",type:"text",required:!0},{key:"testDate",label:"Test Date",type:"date",required:!0},{key:"resultStatus",label:"Result Status",type:"select",required:!0,options:["Normal","Abnormal","Pending","Requires Follow-up"]},{key:"nextSteps",label:"Next Steps",type:"text",required:!1},{key:"requiresFollowUp",label:"Requires Follow-up",type:"select",required:!1,options:["Yes","No"]},{key:"followUpTimeframe",label:"Follow-up Timeframe",type:"text",required:!1},{key:"doctorName",label:"Doctor Name",type:"text",required:!0}],isDefault:!0,createdAt:new Date,updatedAt:new Date,usage:{totalSent:0,lastUsed:null,successRate:0}},{id:"referral-letter",name:"Specialist Referral",category:"referral",subject:"Specialist Referral - {{patientName}} to {{specialistName}}",body:`Dear Dr. {{specialistName}},

RE: {{patientName}} (DOB: {{patientDOB}})

I am referring the above patient for your specialist opinion and management.

Clinical Summary:
{{clinicalSummary}}

Reason for Referral:
{{referralReason}}

Current Medications:
{{currentMedications}}

Relevant Investigations:
{{relevantInvestigations}}

Urgency: {{urgency}}

{{#if urgentReferral}}
⚠️ This is an urgent referral. Please prioritize this patient for the earliest available appointment.
{{/if}}

I would appreciate your assessment and recommendations for ongoing management. Please keep me informed of your findings and treatment plan.

The patient has been advised to contact your rooms directly to schedule an appointment. Their contact details are:
📞 {{patientPhone}}
📧 {{patientEmail}}

Thank you for your assistance with this patient's care.

Kind regards,

Dr. {{referringDoctor}}
{{practiceName}}
Practice Number: {{practiceNumber}}
📞 {{practicePhone}}
📧 {{practiceEmail}}

Attachments: {{attachmentList}}`,variables:[{key:"patientName",label:"Patient Name",type:"text",required:!0},{key:"patientDOB",label:"Patient Date of Birth",type:"date",required:!0},{key:"specialistName",label:"Specialist Name",type:"text",required:!0},{key:"clinicalSummary",label:"Clinical Summary",type:"text",required:!0},{key:"referralReason",label:"Reason for Referral",type:"text",required:!0},{key:"currentMedications",label:"Current Medications",type:"text",required:!1},{key:"relevantInvestigations",label:"Relevant Investigations",type:"text",required:!1},{key:"urgency",label:"Urgency",type:"select",required:!0,options:["Routine","Soon (2-4 weeks)","Urgent (1 week)","Emergency (immediate)"]},{key:"patientPhone",label:"Patient Phone",type:"text",required:!1},{key:"patientEmail",label:"Patient Email",type:"text",required:!1},{key:"referringDoctor",label:"Referring Doctor",type:"text",required:!0}],isDefault:!0,createdAt:new Date,updatedAt:new Date,usage:{totalSent:0,lastUsed:null,successRate:0}},{id:"follow-up-care",name:"Follow-up Care Instructions",category:"follow-up",subject:"Follow-up Care Instructions - {{patientName}}",body:`Dear {{patientName}},

Thank you for your visit today. Here are your follow-up care instructions:

Diagnosis/Condition:
{{diagnosis}}

Treatment Provided:
{{treatmentProvided}}

Home Care Instructions:
{{homeInstructions}}

Medications:
{{medications}}

⚠️ Warning Signs - Contact us immediately if you experience:
{{warningSigns}}

Follow-up Appointment:
{{#if followUpRequired}}
Please schedule a follow-up appointment in {{followUpTimeframe}}.
{{/if}}

Additional Resources:
{{additionalResources}}

Remember:
• Take medications as prescribed
• Follow all instructions carefully
• Don't hesitate to contact us with questions
• Keep all follow-up appointments

Emergency Contact:
If you experience severe symptoms or emergency warning signs, please:
🚨 Call emergency services: 10177 or 112
🏥 Go to the nearest emergency department
📞 Contact our after-hours service: {{afterHoursNumber}}

Get Well Soon!

Dr. {{doctorName}}
{{practiceName}}
📞 {{practicePhone}}
📧 {{practiceEmail}}`,variables:[{key:"patientName",label:"Patient Name",type:"text",required:!0},{key:"diagnosis",label:"Diagnosis/Condition",type:"text",required:!0},{key:"treatmentProvided",label:"Treatment Provided",type:"text",required:!0},{key:"homeInstructions",label:"Home Care Instructions",type:"text",required:!0},{key:"medications",label:"Medications",type:"text",required:!1},{key:"warningSigns",label:"Warning Signs",type:"text",required:!0},{key:"followUpTimeframe",label:"Follow-up Timeframe",type:"text",required:!1},{key:"additionalResources",label:"Additional Resources",type:"text",required:!1},{key:"afterHoursNumber",label:"After Hours Number",type:"text",required:!1},{key:"doctorName",label:"Doctor Name",type:"text",required:!0}],isDefault:!0,createdAt:new Date,updatedAt:new Date,usage:{totalSent:0,lastUsed:null,successRate:0}},{id:"general-communication",name:"General Communication",category:"general",subject:"{{subject}}",body:`Dear {{patientName}},

{{messageContent}}

{{#if actionRequired}}
Action Required:
{{actionDetails}}
{{/if}}

{{#if appointmentNeeded}}
Please contact our practice to schedule an appointment:
📞 {{practicePhone}}
📧 {{practiceEmail}}
{{/if}}

Best regards,
{{senderName}}
{{practiceName}}

Contact Information:
📞 {{practicePhone}}
📧 {{practiceEmail}}
🏥 {{practiceAddress}}

Confidentiality Notice: This communication contains confidential medical information.`,variables:[{key:"patientName",label:"Patient Name",type:"text",required:!0},{key:"subject",label:"Email Subject",type:"text",required:!0},{key:"messageContent",label:"Message Content",type:"text",required:!0},{key:"actionRequired",label:"Action Required",type:"select",required:!1,options:["Yes","No"]},{key:"actionDetails",label:"Action Details",type:"text",required:!1},{key:"appointmentNeeded",label:"Appointment Needed",type:"select",required:!1,options:["Yes","No"]},{key:"senderName",label:"Sender Name",type:"text",required:!0}],isDefault:!0,createdAt:new Date,updatedAt:new Date,usage:{totalSent:0,lastUsed:null,successRate:0}}].forEach(e=>{this.templates.set(e.id,e)})}getTemplates(){return Array.from(this.templates.values())}getTemplatesByCategory(e){return Array.from(this.templates.values()).filter(t=>t.category===e)}getTemplate(e){return this.templates.get(e)||null}createTemplate(e){let t=this.generateId(),r={...e,id:t,createdAt:new Date,updatedAt:new Date,usage:{totalSent:0,lastUsed:null,successRate:0}};return this.templates.set(t,r),this.saveToStorage(),t}updateTemplate(e,t){let r=this.templates.get(e);return!!r&&(this.templates.set(e,{...r,...t,updatedAt:new Date}),this.saveToStorage(),!0)}deleteTemplate(e){let t=this.templates.delete(e);return t&&this.saveToStorage(),t}composeMessage(e,t,r,a={}){let n=this.getTemplate(e);if(!n)throw Error("Template not found");let i=this.processTemplate(n.subject,{...r,...this.getPatientVariables(t),...this.getPracticeVariables()}),s=this.processTemplate(n.body,{...r,...this.getPatientVariables(t),...this.getPracticeVariables()}),o=this.generateId(),l={id:o,to:[t.email||""],subject:i,body:s,attachments:[],templateId:e,patientId:t.id,priority:"normal",category:n.category,status:"draft",securityLevel:"standard",requiresReadReceipt:!1,metadata:{practiceInfo:this.practiceInfo,patientConsent:this.getPatientConsent(t),auditTrail:[{timestamp:new Date,action:"Message composed",userId:"current_user",ipAddress:"localhost",details:`Message composed using template: ${n.name}`}],deliveryTracking:{attempts:0,lastAttempt:new Date,deliveryStatus:"pending",readStatus:"unread"},complianceFlags:this.checkCompliance(t,n.category)},createdAt:new Date,updatedAt:new Date,...a};return this.messages.set(o,l),l}processTemplate(e,t){let r=e;return Object.entries(t).forEach(([e,t])=>{let a=RegExp(`{{${e}}}`,"g");r=r.replace(a,t||"")}),r=r.replace(/{{#if\s+(\w+)}}([\s\S]*?){{\/if}}/g,(e,r,a)=>t[r]&&"no"!==t[r].toLowerCase()?a:"")}getPatientVariables(e){return{patientName:e.name,patientEmail:e.email||"",patientPhone:e.phoneNumber||"",patientDOB:e.dateOfBirth||"",patientId:e.id}}getPracticeVariables(){return{practiceName:this.practiceInfo.practiceName,doctorName:this.practiceInfo.doctorName,practiceNumber:this.practiceInfo.practiceNumber,practiceEmail:this.practiceInfo.contactEmail,practicePhone:this.practiceInfo.contactPhone,practiceAddress:this.practiceInfo.address}}saveMessage(e){e.updatedAt=new Date,this.messages.set(e.id,e),this.saveToStorage()}getMessage(e){return this.messages.get(e)||null}getMessages(){return Array.from(this.messages.values())}getMessagesByPatient(e){return Array.from(this.messages.values()).filter(t=>t.patientId===e)}getMessagesByStatus(e){return Array.from(this.messages.values()).filter(t=>t.status===e)}addAttachment(e,t){let r=this.getMessage(e);if(!r)return!1;let a={id:this.generateId(),name:t.name,type:t.mimeType,size:t.size,url:t.url,isEncrypted:t.isEncrypted,medicalFileId:t.id};return r.attachments.push(a),this.saveMessage(r),!0}removeAttachment(e,t){let r=this.getMessage(e);return!!r&&(r.attachments=r.attachments.filter(e=>e.id!==t),this.saveMessage(r),!0)}async sendMessage(e){let t=this.getMessage(e);if(!t||!this.validateMessage(t))return!1;try{t.status="sending",this.saveMessage(t),await new Promise(e=>setTimeout(e,2e3));let e=Math.random()>.1;if(e){if(t.status="sent",t.sentDate=new Date,t.metadata.deliveryTracking.deliveryStatus="delivered",t.metadata.deliveryTracking.attempts+=1,t.templateId){let e=this.getTemplate(t.templateId);e&&(e.usage.totalSent+=1,e.usage.lastUsed=new Date,this.updateTemplate(e.id,e))}}else t.status="failed",t.metadata.deliveryTracking.deliveryStatus="failed",t.metadata.deliveryTracking.errorMessage="SMTP server error";return this.saveMessage(t),e}catch(e){return t.status="failed",this.saveMessage(t),!1}}scheduleMessage(e,t){let r=this.getMessage(e);return!!r&&(r.scheduledDate=t,r.status="scheduled",this.saveMessage(r),!0)}validateMessage(e){return!(!e.to.length||!e.subject.trim()||!e.body.trim()||!e.metadata.patientConsent.hasEmailConsent||e.metadata.complianceFlags.some(e=>"violation"===e.status))}getPatientConsent(e){return{hasEmailConsent:!0,consentDate:new Date,consentType:"explicit",canReceiveResults:!0,canReceiveAppointments:!0,canReceiveGeneral:!0}}checkCompliance(e,t){let r=[];return r.push({type:"POPIA",status:"compliant",description:"Patient has provided explicit consent for email communication"}),"results"===t&&r.push({type:"CUSTOM",status:"warning",description:"Contains medical test results - ensure patient consent for electronic delivery"}),r}generateId(){return`email_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}saveToStorage(){try{let e={templates:Array.from(this.templates.entries()),messages:Array.from(this.messages.entries()),practiceInfo:this.practiceInfo};localStorage.setItem("emailService",JSON.stringify(e))}catch(e){console.error("Failed to save email service data:",e)}}loadFromStorage(){try{let e=localStorage.getItem("emailService");if(e){let t=JSON.parse(e);this.templates=new Map(t.templates||[]),this.messages=new Map(t.messages||[]),this.practiceInfo={...this.practiceInfo,...t.practiceInfo}}}catch(e){console.error("Failed to load email service data:",e)}}updatePracticeInfo(e){this.practiceInfo={...this.practiceInfo,...e},this.saveToStorage()}getPracticeInfo(){return{...this.practiceInfo}}getEmailAnalytics(){let e=this.getMessages(),t=e.filter(e=>"sent"===e.status).length,r=e.length;return{totalSent:t,successRate:r>0?t/r*100:0,templateUsage:Array.from(this.templates.values()).map(e=>({templateId:e.id,name:e.name,usage:e.usage.totalSent})),monthlyStats:[{month:"Jan 2024",sent:45,delivered:42},{month:"Feb 2024",sent:52,delivered:50},{month:"Mar 2024",sent:38,delivered:36}]}}}let iF=new iM;function iO({patient:e,initialTemplate:t,attachedFiles:r=[],onSend:i,onSave:s,onClose:l}){let[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[m,f]=(0,n.useState)({}),[g,y]=(0,n.useState)([]),[w,N]=(0,n.useState)(""),[A,S]=(0,n.useState)(!1),[k,C]=(0,n.useState)(!1),[L,P]=(0,n.useState)(""),[_,D]=(0,n.useState)(""),[I,R]=(0,n.useState)(!1),[E,T]=(0,n.useState)("compose"),[M,F]=(0,n.useState)(null),O=iF.getTemplates(),B=e=>{let t={};e.variables.forEach(e=>{t[e.key]=e.defaultValue||""}),f(t)},q=e=>{d(e),B(e)},z=(e,t)=>{f(r=>({...r,[e]:t}))},U=()=>{w&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w)&&(y(e=>[...e,w]),N(""))},$=e=>{y(t=>t.filter(t=>t!==e))},H=async()=>{if(u){R(!0);try{await iF.sendMessage(u.id)?(i?.(u),l?.()):F("Failed to send email. Please try again.")}catch(e){F("Error sending email. Please check your connection.")}finally{R(!1)}}},W=e=>{switch(e.type){case"image":return(0,a.jsx)(i_,{className:"w-4 h-4"});case"video":return(0,a.jsx)(iD,{className:"w-4 h-4"});case"audio":return(0,a.jsx)(tM,{className:"w-4 h-4"});default:return(0,a.jsx)(tO,{className:"w-4 h-4"})}},V=e=>{switch(e){case"appointment":return"\uD83D\uDCC5";case"follow-up":return"\uD83D\uDD04";case"results":return"\uD83E\uDDEA";case"referral":return"\uD83D\uDCC4";case"emergency":return"\uD83D\uDEA8";default:return"\uD83D\uDCE7"}};return(0,a.jsxs)(x.Zp,{className:"w-full max-w-4xl",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(rl.A,{className:"w-5 h-5"}),"Email Composer",e&&(0,a.jsx)(j,{variant:"outline",className:"ml-2",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[u&&(0,a.jsxs)(j,{className:`text-xs ${"encrypted"===u.securityLevel?"bg-green-600":"confidential"===u.securityLevel?"bg-red-600":"bg-blue-600"}`,children:[(0,a.jsx)(iI,{className:"w-3 h-3 mr-1"}),u.securityLevel]}),(0,a.jsx)(b.$,{variant:"outline",size:"sm",onClick:l,children:"Close"})]})]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsxs)(iy,{value:E,onValueChange:T,children:[(0,a.jsxs)(iC,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(iL,{value:"compose",children:"Compose"}),(0,a.jsx)(iL,{value:"templates",children:"Templates"}),(0,a.jsx)(iL,{value:"preview",children:"Preview"}),(0,a.jsx)(iL,{value:"attachments",children:"Attachments"})]}),(0,a.jsxs)(iP,{value:"compose",className:"space-y-6",children:[!c&&(0,a.jsx)(x.Zp,{className:"border-dashed",children:(0,a.jsxs)(x.Wu,{className:"p-6 text-center",children:[(0,a.jsx)(tO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Template"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Choose an email template to get started"}),(0,a.jsx)(b.$,{onClick:()=>T("templates"),children:"Browse Templates"})]})}),c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(x.Zp,{className:"bg-blue-50 border-blue-200",children:(0,a.jsx)(x.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:V(c.category)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:c.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:c.category})]})]}),(0,a.jsx)(b.$,{variant:"outline",size:"sm",onClick:()=>d(null),children:"Change Template"})]})})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Recipients"}),(0,a.jsxs)("div",{className:"space-y-2",children:[e?.contact&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:e.contact}),(0,a.jsx)(j,{className:"text-xs bg-green-100 text-green-800",children:"Primary"})]}),g.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(rl.A,{className:"w-4 h-4 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm",children:e}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>$(e),className:"w-6 h-6 p-0 text-red-600",children:(0,a.jsx)(tR,{className:"w-3 h-3"})})]},t)),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v,{placeholder:"Add recipient email...",value:w,onChange:e=>N(e.target.value),onKeyPress:e=>"Enter"===e.key&&U(),className:"flex-1"}),(0,a.jsx)(b.$,{onClick:U,size:"sm",children:"Add"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Template Variables"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.variables.map(e=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-1",children:[e.label,e.required&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),"select"===e.type?(0,a.jsxs)("select",{value:m[e.key]||"",onChange:t=>z(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsxs)("option",{value:"",children:["Select ",e.label]}),e.options?.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}):"date"===e.type?(0,a.jsx)(v,{type:"date",value:m[e.key]||"",onChange:t=>z(e.key,t.target.value)}):(0,a.jsx)(tL,{placeholder:e.description||`Enter ${e.label}`,value:m[e.key]||"",onChange:t=>z(e.key,t.target.value),rows:e.key.includes("Content")||e.key.includes("Instructions")?4:2}),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.key))})]}),M&&(0,a.jsx)(x.Zp,{className:"bg-red-50 border-red-200",children:(0,a.jsx)(x.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,a.jsx)(tF.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:M})]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(b.$,{onClick:()=>S(!0),variant:"outline",disabled:!u,children:[(0,a.jsx)(tW,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,a.jsxs)(b.$,{onClick:()=>{u&&(iF.saveMessage(u),s?.(u))},variant:"outline",disabled:!u,children:[(0,a.jsx)(tV,{className:"w-4 h-4 mr-2"}),"Save Draft"]}),(0,a.jsxs)(b.$,{onClick:()=>C(!0),variant:"outline",disabled:!u,children:[(0,a.jsx)(p,{className:"w-4 h-4 mr-2"}),"Schedule"]})]}),(0,a.jsxs)(b.$,{onClick:H,disabled:!u||I||!u.to.length,className:"bg-blue-600 hover:bg-blue-700",children:[I?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,a.jsx)(ri,{className:"w-4 h-4 mr-2"}),I?"Sending...":"Send Email"]})]})]})]}),(0,a.jsx)(iP,{value:"templates",className:"space-y-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map(e=>(0,a.jsx)(x.Zp,{className:`cursor-pointer transition-all ${c?.id===e.id?"ring-2 ring-blue-500 border-blue-200":"hover:border-gray-300"}`,onClick:()=>q(e),children:(0,a.jsxs)(x.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:V(e.category)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 capitalize mb-2",children:e.category}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 line-clamp-2",children:[e.body.substring(0,100),"..."]})]})]}),e.isDefault&&(0,a.jsx)(j,{className:"text-xs bg-green-100 text-green-800",children:"Default"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.variables.length," variables"]}),(0,a.jsxs)("span",{children:[e.usage.totalSent," sent"]})]}),c?.id===e.id&&(0,a.jsx)(iR,{className:"w-4 h-4 text-blue-600"})]})]})},e.id))})}),(0,a.jsx)(iP,{value:"preview",className:"space-y-4",children:u?(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(x.ZB,{className:"text-base",children:"Email Preview"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(j,{className:`text-xs ${"urgent"===u.priority?"bg-red-600":"high"===u.priority?"bg-orange-600":"bg-blue-600"}`,children:[u.priority," priority"]})})]})}),(0,a.jsxs)(x.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"To:"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:u.to.join(", ")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Subject:"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:u.subject})]})]}),(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 font-sans",children:u.body})}),u.attachments.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),(0,a.jsx)("div",{className:"space-y-1",children:u.attachments.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(iE,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:"text-gray-500",children:["(",(e.size/1024/1024).toFixed(1)," MB)"]})]},e.id))})]})]})]}):(0,a.jsx)(x.Zp,{className:"border-dashed",children:(0,a.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,a.jsx)(tW,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Preview Available"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Compose an email to see the preview"})]})})}),(0,a.jsxs)(iP,{value:"attachments",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Email Attachments"}),(0,a.jsxs)(j,{variant:"outline",className:"text-xs",children:[r.length," files"]})]}),r.length>0?(0,a.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,a.jsx)(x.Zp,{children:(0,a.jsx)(x.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:W(e)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:[(e.size/1024/1024).toFixed(1)," MB"]}),(0,a.jsx)("span",{className:"capitalize",children:e.type}),(0,a.jsx)(j,{className:`text-xs ${"clinical-photo"===e.category?"bg-blue-100 text-blue-800":"lab-result"===e.category?"bg-green-100 text-green-800":"prescription"===e.category?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:e.category})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.isEncrypted&&(0,a.jsx)(iI,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",children:(0,a.jsx)(iT,{className:"w-4 h-4"})})]})]})})},e.id))}):(0,a.jsx)(x.Zp,{className:"border-dashed",children:(0,a.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,a.jsx)(iE,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Attachments"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Files will appear here when attached"})]})})]})]}),(0,a.jsx)(tv,{open:k,onOpenChange:C,children:(0,a.jsxs)(tj,{children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Schedule Email"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Date"}),(0,a.jsx)(v,{type:"date",value:L,onChange:e=>P(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Time"}),(0,a.jsx)(v,{type:"time",value:_,onChange:e=>D(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(b.$,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,a.jsx)(b.$,{onClick:()=>{if(!u||!L||!_)return;let e=new Date(`${L}T${_}`);iF.scheduleMessage(u.id,e)&&(C(!1),s?.(u))},children:"Schedule Email"})]})]})]})})]})]})}var iB=r(10962),iq=r.n(iB),iz=(0,require("module").createRequire)("/");try{iz("worker_threads").Worker}catch(e){}var iU=Uint8Array,i$=Uint16Array,iH=Int32Array,iW=new iU([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iV=new iU([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),iG=new iU([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iZ=function(e,t){for(var r=new i$(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var n=new iH(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)n[i]=i-r[a]<<5|a;return{b:r,r:n}},iY=iZ(iW,2),iK=iY.b,iX=iY.r;iK[28]=258,iX[258]=28;for(var iJ=iZ(iV,0),iQ=iJ.b,i0=iJ.r,i1=new i$(32768),i2=0;i2<32768;++i2){var i5=(43690&i2)>>1|(21845&i2)<<1;i5=(61680&(i5=(52428&i5)>>2|(13107&i5)<<2))>>4|(3855&i5)<<4,i1[i2]=((65280&i5)>>8|(255&i5)<<8)>>1}for(var i4=function(e,t,r){for(var a,n=e.length,i=0,s=new i$(t);i<n;++i)e[i]&&++s[e[i]-1];var o=new i$(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;if(r){a=new i$(1<<t);var l=15-t;for(i=0;i<n;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],u=o[e[i]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)a[i1[u]>>l]=c}else for(i=0,a=new i$(n);i<n;++i)e[i]&&(a[i]=i1[o[e[i]-1]++]>>15-e[i]);return a},i3=new iU(288),i2=0;i2<144;++i2)i3[i2]=8;for(var i2=144;i2<256;++i2)i3[i2]=9;for(var i2=256;i2<280;++i2)i3[i2]=7;for(var i2=280;i2<288;++i2)i3[i2]=8;for(var i6=new iU(32),i2=0;i2<32;++i2)i6[i2]=5;var i8=i4(i3,9,0),i7=i4(i3,9,1),i9=i4(i6,5,0),se=i4(i6,5,1),st=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},sr=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(7&t)&r},sa=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},sn=function(e){return(e+7)/8|0},si=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new iU(e.subarray(t,r))},ss=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],so=function(e,t,r){var a=Error(t||ss[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,so),!r)throw a;return a},sl=function(e,t,r,a){var n=e.length,i=a?a.length:0;if(!n||t.f&&!t.l)return r||new iU(0);var s=!r,o=s||2!=t.i,l=t.i;s&&(r=new iU(3*n));var c=function(e){var t=r.length;if(e>t){var a=new iU(Math.max(2*t,e));a.set(r),r=a}},d=t.f||0,u=t.p||0,h=t.b||0,m=t.l,p=t.d,f=t.m,g=t.n,x=8*n;do{if(!m){d=sr(e,u,1);var y=sr(e,u+1,3);if(u+=3,y)if(1==y)m=i7,p=se,f=9,g=5;else if(2==y){var v=sr(e,u,31)+257,b=sr(e,u+10,15)+4,w=v+sr(e,u+5,31)+1;u+=14;for(var N=new iU(w),j=new iU(19),A=0;A<b;++A)j[iG[A]]=sr(e,u+3*A,7);u+=3*b;for(var S=st(j),k=(1<<S)-1,C=i4(j,S,1),A=0;A<w;){var L=C[sr(e,u,k)];u+=15&L;var P=L>>4;if(P<16)N[A++]=P;else{var _=0,D=0;for(16==P?(D=3+sr(e,u,3),u+=2,_=N[A-1]):17==P?(D=3+sr(e,u,7),u+=3):18==P&&(D=11+sr(e,u,127),u+=7);D--;)N[A++]=_}}var I=N.subarray(0,v),R=N.subarray(v);f=st(I),g=st(R),m=i4(I,f,1),p=i4(R,g,1)}else so(1);else{var P=sn(u)+4,E=e[P-4]|e[P-3]<<8,T=P+E;if(T>n){l&&so(0);break}o&&c(h+E),r.set(e.subarray(P,T),h),t.b=h+=E,t.p=u=8*T,t.f=d;continue}if(u>x){l&&so(0);break}}o&&c(h+131072);for(var M=(1<<f)-1,F=(1<<g)-1,O=u;;O=u){var _=m[sa(e,u)&M],B=_>>4;if((u+=15&_)>x){l&&so(0);break}if(_||so(2),B<256)r[h++]=B;else if(256==B){O=u,m=null;break}else{var q=B-254;if(B>264){var A=B-257,z=iW[A];q=sr(e,u,(1<<z)-1)+iK[A],u+=z}var U=p[sa(e,u)&F],$=U>>4;U||so(3),u+=15&U;var R=iQ[$];if($>3){var z=iV[$];R+=sa(e,u)&(1<<z)-1,u+=z}if(u>x){l&&so(0);break}o&&c(h+131072);var H=h+q;if(h<R){var W=i-R,V=Math.min(R,H);for(W+h<0&&so(3);h<V;++h)r[h]=a[W+h]}for(;h<H;++h)r[h]=r[h-R]}}t.l=m,t.p=O,t.b=h,t.f=d,m&&(d=1,t.m=f,t.d=p,t.n=g)}while(!d);return h!=r.length&&s?si(r,0,h):r.subarray(0,h)},sc=function(e,t,r){r<<=7&t;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},sd=function(e,t,r){r<<=7&t;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},su=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var n=r.length,i=r.slice();if(!n)return{t:sy,l:0};if(1==n){var s=new iU(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,d=1,u=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=n-1;)o=r[r[c].f<r[u].f?c++:u++],l=r[c!=d&&r[c].f<r[u].f?c++:u++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=i[0].s,a=1;a<n;++a)i[a].s>h&&(h=i[a].s);var m=new i$(h+1),p=sh(r[d-1],m,0);if(p>t){var a=0,f=0,g=p-t,x=1<<g;for(i.sort(function(e,t){return m[t.s]-m[e.s]||e.f-t.f});a<n;++a){var y=i[a].s;if(m[y]>t)f+=x-(1<<p-m[y]),m[y]=t;else break}for(f>>=g;f>0;){var v=i[a].s;m[v]<t?f-=1<<t-m[v]++-1:++a}for(;a>=0&&f;--a){var b=i[a].s;m[b]==t&&(--m[b],++f)}p=t}return{t:new iU(m),l:p}},sh=function(e,t,r){return -1==e.s?Math.max(sh(e.l,t,r+1),sh(e.r,t,r+1)):t[e.s]=r},sm=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new i$(++t),a=0,n=e[0],i=1,s=function(e){r[a++]=e},o=1;o<=t;++o)if(e[o]==n&&o!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(n),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(n);i=1,n=e[o]}return{c:r.subarray(0,a),n:t}},sp=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},sf=function(e,t,r){var a=r.length,n=sn(t+2);e[n]=255&a,e[n+1]=a>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var i=0;i<a;++i)e[n+i+4]=r[i];return(n+4+a)*8},sg=function(e,t,r,a,n,i,s,o,l,c,d){sc(t,d++,r),++n[256];for(var u,h,m,p,f=su(n,15),g=f.t,x=f.l,y=su(i,15),v=y.t,b=y.l,w=sm(g),N=w.c,j=w.n,A=sm(v),S=A.c,k=A.n,C=new i$(19),L=0;L<N.length;++L)++C[31&N[L]];for(var L=0;L<S.length;++L)++C[31&S[L]];for(var P=su(C,7),_=P.t,D=P.l,I=19;I>4&&!_[iG[I-1]];--I);var R=c+5<<3,E=sp(n,i3)+sp(i,i6)+s,T=sp(n,g)+sp(i,v)+s+14+3*I+sp(C,_)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&R<=E&&R<=T)return sf(t,d,e.subarray(l,l+c));if(sc(t,d,1+(T<E)),d+=2,T<E){u=i4(g,x,0),h=g,m=i4(v,b,0),p=v;var M=i4(_,D,0);sc(t,d,j-257),sc(t,d+5,k-1),sc(t,d+10,I-4),d+=14;for(var L=0;L<I;++L)sc(t,d+3*L,_[iG[L]]);d+=3*I;for(var F=[N,S],O=0;O<2;++O)for(var B=F[O],L=0;L<B.length;++L){var q=31&B[L];sc(t,d,M[q]),d+=_[q],q>15&&(sc(t,d,B[L]>>5&127),d+=B[L]>>12)}}else u=i8,h=i3,m=i9,p=i6;for(var L=0;L<o;++L){var z=a[L];if(z>255){var q=z>>18&31;sd(t,d,u[q+257]),d+=h[q+257],q>7&&(sc(t,d,z>>23&31),d+=iW[q]);var U=31&z;sd(t,d,m[U]),d+=p[U],U>3&&(sd(t,d,z>>5&8191),d+=iV[U])}else sd(t,d,u[z]),d+=h[z]}return sd(t,d,u[256]),d+h[256]},sx=new iH([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),sy=new iU(0),sv=function(e,t,r,a,n,i){var s=i.z||e.length,o=new iU(a+s+5*(1+Math.ceil(s/7e3))+n),l=o.subarray(a,o.length-n),c=i.l,d=7&(i.r||0);if(t){d&&(l[0]=i.r>>3);for(var u=sx[t-1],h=u>>13,m=8191&u,p=(1<<r)-1,f=i.p||new i$(32768),g=i.h||new i$(p+1),x=Math.ceil(r/3),y=2*x,v=function(t){return(e[t]^e[t+1]<<x^e[t+2]<<y)&p},b=new iH(25e3),w=new i$(288),N=new i$(32),j=0,A=0,S=i.i||0,k=0,C=i.w||0,L=0;S+2<s;++S){var P=v(S),_=32767&S,D=g[P];if(f[_]=D,g[P]=_,C<=S){var I=s-S;if((j>7e3||k>24576)&&(I>423||!c)){d=sg(e,l,0,b,w,N,A,k,L,S-L,d),k=j=A=0,L=S;for(var R=0;R<286;++R)w[R]=0;for(var R=0;R<30;++R)N[R]=0}var E=2,T=0,M=m,F=_-D&32767;if(I>2&&P==v(S-F))for(var O=Math.min(h,I)-1,B=Math.min(32767,S),q=Math.min(258,I);F<=B&&--M&&_!=D;){if(e[S+E]==e[S+E-F]){for(var z=0;z<q&&e[S+z]==e[S+z-F];++z);if(z>E){if(E=z,T=F,z>O)break;for(var U=Math.min(F,z-2),$=0,R=0;R<U;++R){var H=S-F+R&32767,W=f[H],V=H-W&32767;V>$&&($=V,D=H)}}}D=f[_=D],F+=_-D&32767}if(T){b[k++]=0x10000000|iX[E]<<18|i0[T];var G=31&iX[E],Z=31&i0[T];A+=iW[G]+iV[Z],++w[257+G],++N[Z],C=S+E,++j}else b[k++]=e[S],++w[e[S]]}}for(S=Math.max(S,C);S<s;++S)b[k++]=e[S],++w[e[S]];d=sg(e,l,c,b,w,N,A,k,L,S-L,d),c||(i.r=7&d|l[d/8|0]<<3,d-=7,i.h=g,i.p=f,i.i=S,i.w=C)}else{for(var S=i.w||0;S<s+c;S+=65535){var Y=S+65535;Y>=s&&(l[d/8|0]=c,Y=s),d=sf(l,d+1,e.subarray(S,Y))}i.i=s}return si(o,0,a+sn(d)+n)},sb=function(){var e=-1;return{p:function(t){for(var r=e,a=0;a<t.length;++a)r=null[255&r^t[a]]^r>>>8;e=r},d:function(){return~e}}},sw=function(){var e=1,t=0;return{p:function(r){for(var a=e,n=t,i=0|r.length,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)n+=a+=r[s];a=(65535&a)+15*(a>>16),n=(65535&n)+15*(n>>16)}e=a,t=n},d:function(){return e%=65521,t%=65521,(255&e)<<24|(65280&e)<<8|(255&t)<<8|t>>8}}},sN=function(e,t,r,a,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new iU(i.length+e.length);s.set(i),s.set(e,i.length),e=s,n.w=i.length}return sv(e,null==t.level?6:t.level,null==t.mem?n.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,a,n)},sj=function(e,t){var r={};for(var a in e)r[a]=e[a];for(var a in t)r[a]=t[a];return r},sA=function(e,t,r){for(var a=e(),n=e.toString(),i=n.slice(n.indexOf("[")+1,n.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<a.length;++s){var o=a[s],l=i[s];if("function"==typeof o){t+=";"+l+"=";var c=o.toString();if(o.prototype)if(-1!=c.indexOf("[native code]")){var d=c.indexOf(" ",8)+1;t+=c.slice(d,c.indexOf("(",d))}else for(var u in t+=c,o.prototype)t+=";"+l+".prototype."+u+"="+o.prototype[u].toString();else t+=c}else r[l]=o}return t},sS=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},sk=function(e,t,r,a){if(!null[r]){for(var n="",i={},s=e.length-1,o=0;o<s;++o)n=sA(e[o],n,i);null[r]={c:sA(e[s],n,i),e:i}}var l=sj({},null[r].e);return(null)(null[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,l,sS(l),a)},sC=function(){return[iU,i$,iH,iW,iV,iG,iK,iQ,i7,se,i1,ss,i4,st,sr,sa,sn,si,so,sl,sU,sL,sP]},sL=function(e){return postMessage(e,[e.buffer])},sP=function(e){return e&&{out:e.size&&new iU(e.size),dictionary:e.dictionary}},s_=function(e,t,r,a,n,i){var s=sk(r,a,n,function(e,t){s.terminate(),i(e,t)});return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}},sD=function(e,t){return e[t]|e[t+1]<<8},sI=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},sR=function(e,t){return sI(e,t)+0x100000000*sI(e,t+4)},sE=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},sT=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:2*(9==t.level),e[9]=3,0!=t.mtime&&sE(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var a=0;a<=r.length;++a)e[a+10]=r.charCodeAt(a)}},sM=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&so(6,"invalid gzip data");var t=e[3],r=10;4&t&&(r+=(e[10]|e[11]<<8)+2);for(var a=(t>>3&1)+(t>>4&1);a>0;a-=!e[r++]);return r+(2&t)},sF=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},sO=function(e){return 10+(e.filename?e.filename.length+1:0)},sB=function(e,t){var r=t.level;if(e[0]=120,e[1]=(0==r?0:r<6?1:9==r?3:2)<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=sw();a.p(t.dictionary),sE(e,2,a.d())}},sq=function(e,t){return((15&e[0])!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&so(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&so(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function sz(e,t){return sN(e,t||{},0,0)}function sU(e,t){return sl(e,{i:2},t&&t.out,t&&t.dictionary)}function s$(e,t){t||(t={});var r=sw();r.p(e);var a=sN(e,t,t.dictionary?6:2,4);return sB(a,t),sE(a,a.length-4,r.d()),a}var sH="undefined"!=typeof TextEncoder&&new TextEncoder,sW="undefined"!=typeof TextDecoder&&new TextDecoder;try{sW.decode(sy,{stream:!0})}catch(e){}var sV=function(e){for(var t="",r=0;;){var a=e[r++],n=(a>127)+(a>223)+(a>239);if(r+n>e.length)return{s:t,r:si(e,r-1)};n?3==n?t+=String.fromCharCode(55296|(a=((15&a)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536)>>10,56320|1023&a):1&n?t+=String.fromCharCode((31&a)<<6|63&e[r++]):t+=String.fromCharCode((15&a)<<12|(63&e[r++])<<6|63&e[r++]):t+=String.fromCharCode(a)}},sG=function(e,t){for(;1!=sD(e,t);t+=4+sD(e,t+2));return[sR(e,t+12),sR(e,t+4),sR(e,t+20)]},sZ=function(e){var t=0;if(e)for(var r in e){var a=e[r].length;a>65535&&so(9),t+=a+4}return t},sY=("function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout,function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}());function sK(){sY.console&&"function"==typeof sY.console.log&&sY.console.log.apply(sY.console,arguments)}var sX={log:sK,warn:function(e){sY.console&&("function"==typeof sY.console.warn?sY.console.warn.apply(sY.console,arguments):sK.call(null,arguments))},error:function(e){sY.console&&("function"==typeof sY.console.error?sY.console.error.apply(sY.console,arguments):sK(e))}};function sJ(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){s6(a.response,t,r)},a.onerror=function(){sX.error("could not download file")},a.send()}function sQ(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function s0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s1,s2,s5,s4,s3,s6=sY.saveAs||("object"!==("undefined"==typeof window?"undefined":iq()(window))||window!==sY?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=sY.URL||sY.webkitURL,n=document.createElement("a");n.download=t=t||e.name||"download",n.rel="noopener","string"==typeof e?(n.href=e,n.origin!==location.origin?sQ(n.href)?sJ(e,t,r):s0(n,n.target="_blank"):s0(n)):(n.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){s0(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download","string"==typeof e)if(sQ(e))sJ(e,t,r);else{var a,n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){s0(n)})}else navigator.msSaveOrOpenBlob((void 0===(a=r)?a={autoBom:!1}:"object"!==iq()(a)&&(sX.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return sJ(e,t,r);var n="application/octet-stream"===e.type,i=/constructor/i.test(sY.HTMLElement)||sY.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||n&&i)&&"object"===("undefined"==typeof FileReader?"undefined":iq()(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},o.readAsDataURL(e)}else{var l=sY.URL||sY.webkitURL,c=l.createObjectURL(e);a?a.location=c:location.href=c,a=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function s8(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=({aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"})[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],a=0;a<r.length;a++){var n=r[a].re,i=r[a].process,s=n.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r}}function s7(e,t){var r=e[0],a=e[1],n=e[2],i=e[3];r=oe(r,a,n,i,t[0],7,-0x28955b88),i=oe(i,r,a,n,t[1],12,-0x173848aa),n=oe(n,i,r,a,t[2],17,0x242070db),a=oe(a,n,i,r,t[3],22,-0x3e423112),r=oe(r,a,n,i,t[4],7,-0xa83f051),i=oe(i,r,a,n,t[5],12,0x4787c62a),n=oe(n,i,r,a,t[6],17,-0x57cfb9ed),a=oe(a,n,i,r,t[7],22,-0x2b96aff),r=oe(r,a,n,i,t[8],7,0x698098d8),i=oe(i,r,a,n,t[9],12,-0x74bb0851),n=oe(n,i,r,a,t[10],17,-42063),a=oe(a,n,i,r,t[11],22,-0x76a32842),r=oe(r,a,n,i,t[12],7,0x6b901122),i=oe(i,r,a,n,t[13],12,-0x2678e6d),n=oe(n,i,r,a,t[14],17,-0x5986bc72),r=ot(r,a=oe(a,n,i,r,t[15],22,0x49b40821),n,i,t[1],5,-0x9e1da9e),i=ot(i,r,a,n,t[6],9,-0x3fbf4cc0),n=ot(n,i,r,a,t[11],14,0x265e5a51),a=ot(a,n,i,r,t[0],20,-0x16493856),r=ot(r,a,n,i,t[5],5,-0x29d0efa3),i=ot(i,r,a,n,t[10],9,0x2441453),n=ot(n,i,r,a,t[15],14,-0x275e197f),a=ot(a,n,i,r,t[4],20,-0x182c0438),r=ot(r,a,n,i,t[9],5,0x21e1cde6),i=ot(i,r,a,n,t[14],9,-0x3cc8f82a),n=ot(n,i,r,a,t[3],14,-0xb2af279),a=ot(a,n,i,r,t[8],20,0x455a14ed),r=ot(r,a,n,i,t[13],5,-0x561c16fb),i=ot(i,r,a,n,t[2],9,-0x3105c08),n=ot(n,i,r,a,t[7],14,0x676f02d9),r=or(r,a=ot(a,n,i,r,t[12],20,-0x72d5b376),n,i,t[5],4,-378558),i=or(i,r,a,n,t[8],11,-0x788e097f),n=or(n,i,r,a,t[11],16,0x6d9d6122),a=or(a,n,i,r,t[14],23,-0x21ac7f4),r=or(r,a,n,i,t[1],4,-0x5b4115bc),i=or(i,r,a,n,t[4],11,0x4bdecfa9),n=or(n,i,r,a,t[7],16,-0x944b4a0),a=or(a,n,i,r,t[10],23,-0x41404390),r=or(r,a,n,i,t[13],4,0x289b7ec6),i=or(i,r,a,n,t[0],11,-0x155ed806),n=or(n,i,r,a,t[3],16,-0x2b10cf7b),a=or(a,n,i,r,t[6],23,0x4881d05),r=or(r,a,n,i,t[9],4,-0x262b2fc7),i=or(i,r,a,n,t[12],11,-0x1924661b),n=or(n,i,r,a,t[15],16,0x1fa27cf8),r=oa(r,a=or(a,n,i,r,t[2],23,-0x3b53a99b),n,i,t[0],6,-0xbd6ddbc),i=oa(i,r,a,n,t[7],10,0x432aff97),n=oa(n,i,r,a,t[14],15,-0x546bdc59),a=oa(a,n,i,r,t[5],21,-0x36c5fc7),r=oa(r,a,n,i,t[12],6,0x655b59c3),i=oa(i,r,a,n,t[3],10,-0x70f3336e),n=oa(n,i,r,a,t[10],15,-1051523),a=oa(a,n,i,r,t[1],21,-0x7a7ba22f),r=oa(r,a,n,i,t[8],6,0x6fa87e4f),i=oa(i,r,a,n,t[15],10,-0x1d31920),n=oa(n,i,r,a,t[6],15,-0x5cfebcec),a=oa(a,n,i,r,t[13],21,0x4e0811a1),r=oa(r,a,n,i,t[4],6,-0x8ac817e),i=oa(i,r,a,n,t[11],10,-0x42c50dcb),n=oa(n,i,r,a,t[2],15,0x2ad7d2bb),a=oa(a,n,i,r,t[9],21,-0x14792c6f),e[0]=oc(r,e[0]),e[1]=oc(a,e[1]),e[2]=oc(n,e[2]),e[3]=oc(i,e[3])}function s9(e,t,r,a,n,i){return t=oc(oc(t,e),oc(a,i)),oc(t<<n|t>>>32-n,r)}function oe(e,t,r,a,n,i,s){return s9(t&r|~t&a,e,t,n,i,s)}function ot(e,t,r,a,n,i,s){return s9(t&a|r&~a,e,t,n,i,s)}function or(e,t,r,a,n,i,s){return s9(t^r^a,e,t,n,i,s)}function oa(e,t,r,a,n,i,s){return s9(r^(t|~a),e,t,n,i,s)}function on(e){var t,r=e.length,a=[0x67452301,-0x10325477,-0x67452302,0x10325476];for(t=64;t<=e.length;t+=64)s7(a,function(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(s7(a,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,s7(a,n),a}s4=sY.atob.bind(sY),s3=sY.btoa.bind(sY);var oi="0123456789abcdef".split("");function os(e){return String.fromCharCode(255&e,(65280&e)>>8,(0xff0000&e)>>16,(0xff000000&e)>>24)}function oo(e){return on(e).map(os).join("")}var ol="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=function(e){for(var t="",r=0;r<4;r++)t+=oi[e>>8*r+4&15]+oi[e>>8*r&15];return t}(e[t]);return e.join("")}(on("hello"));function oc(e,t){if(ol){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t|0}function od(e,t){if(e!==r){for(var r,a,n=Array(1+(256/e.length|0)+1).join(e),i=[],s=0;s<256;s++)i[s]=s;var o=0;for(s=0;s<256;s++){var l=i[s];o=(o+l+n.charCodeAt(s))%256,i[s]=i[o],i[o]=l}r=e,a=i}else i=a;var c=t.length,d=0,u=0,h="";for(s=0;s<c;s++)u=(u+(l=i[d=(d+1)%256]))%256,i[d]=i[u],i[u]=l,n=i[(i[d]+i[u])%256],h+=String.fromCharCode(t.charCodeAt(s)^n);return h}var ou={print:4,modify:8,copy:16,"annot-forms":32};function oh(e,t,r,a){this.v=1,this.r=2;var n=192;e.forEach(function(e){if(void 0!==ou.perm)throw Error("Invalid permission: "+e);n+=ou[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var i=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^n)),this.encryptionKey=oo(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=od(this.encryptionKey,this.padding)}function om(e){if(/[^\u0000-\u00ff]/.test(e))throw Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var n=e.charCodeAt(a);n<33||35===n||37===n||40===n||41===n||47===n||60===n||62===n||91===n||93===n||123===n||125===n||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=e[a]}return t}function op(e){if("object"!==iq()(e))throw Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,a){if(a=a||!1,"string"!=typeof e||"function"!=typeof r||"boolean"!=typeof a)throw Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var n=Math.random().toString(35);return t[e][n]=[r,!!a],n},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],0===Object.keys(t[r]).length&&delete t[r],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[r]){var s=t[r][i];try{s[0].apply(e,a)}catch(e){sY.console&&sX.error("jsPDF PubSub Error",e.message,e)}s[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function of(e){if(!(this instanceof of))return new of(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function og(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ox(e,t,r,a,n){if(!(this instanceof ox))return new ox(e,t,r,a,n);this.type="axial"===e?2:3,this.coords=t,this.colors=r,og.call(this,a,n)}function oy(e,t,r,a,n){if(!(this instanceof oy))return new oy(e,t,r,a,n);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,og.call(this,a,n)}function ov(e){var t,r="string"==typeof arguments[0]?arguments[0]:"p",a=arguments[1],n=arguments[2],i=arguments[3],s=[],o=1,l=16,c="S",d=null;"object"===iq()(e=e||{})&&(r=e.orientation,a=e.unit||a,n=e.format||n,i=e.compress||e.compressPdf||i,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),s=e.filters||(!0===i?["FlateEncode"]:s),a=a||"mm",r=(""+(r||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=op;var p="1.3",f=m.__private__.getPdfVersion=function(){return p};m.__private__.setPdfVersion=function(e){p=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return g};var x=m.__private__.getPageFormat=function(e){return g[e]};n=n||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},v=y.COMPAT;function b(){this.saveGraphicsState(),X(new eD(eh,0,0,-eh,0,ra()*eh).toString()+" cm"),this.setFontSize(this.getFontSize()/eh),c="n",v=y.ADVANCED}function w(){this.restoreGraphicsState(),c="S",v=y.COMPAT}var N=m.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};m.advancedAPI=function(e){var t=v===y.COMPAT;return t&&b.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},m.compatAPI=function(e){var t=v===y.ADVANCED;return t&&w.call(this),"function"!=typeof e||(e(this),t&&b.call(this)),this},m.isAdvancedAPI=function(){return v===y.ADVANCED};var j,A=function(e){if(v!==y.ADVANCED)throw Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=m.roundToPrecision=m.__private__.roundToPrecision=function(e,r){var a=t||r;if(isNaN(e)||isNaN(a))throw Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(a).replace(/0+$/,"")};j=m.hpf=m.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.hpf");return S(e,l)}:"smart"===l?function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.hpf");return S(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.hpf");return S(e,16)};var k=m.f2=m.__private__.f2=function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.f2");return S(e,2)},C=m.__private__.f3=function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.f3");return S(e,3)},L=m.scale=m.__private__.scale=function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.scale");return v===y.COMPAT?e*eh:v===y.ADVANCED?e:void 0},P=function(e){return L(v===y.COMPAT?ra()-e:v===y.ADVANCED?e:void 0)};m.__private__.setPrecision=m.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var _,D="00000000000000000000000000000000",I=m.__private__.getFileId=function(){return D},R=m.__private__.setFileId=function(e){return D=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():D.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(tw=new oh(d.userPermissions,d.userPassword,d.ownerPassword,D)),D};m.setFileId=function(e){return R(e),this},m.getFileId=function(){return I()};var E=m.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),r=Math.floor(Math.abs(t/60)),a=Math.abs(t%60),n=[t<0?"+":"-",B(r),"'",B(a),"'"].join("");return["D:",e.getFullYear(),B(e.getMonth()+1),B(e.getDate()),B(e.getHours()),B(e.getMinutes()),B(e.getSeconds()),n].join("")},T=m.__private__.convertPDFDateToDate=function(e){return new Date(parseInt(e.substr(2,4),10),parseInt(e.substr(6,2),10)-1,parseInt(e.substr(8,2),10),parseInt(e.substr(10,2),10),parseInt(e.substr(12,2),10),parseInt(e.substr(14,2),10),0)},M=m.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=E(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return _=t},F=m.__private__.getCreationDate=function(e){var t=_;return"jsDate"===e&&(t=T(_)),t};m.setCreationDate=function(e){return M(e),this},m.getCreationDate=function(e){return F(e)};var O,B=m.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},q=m.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},z=0,U=[],$=[],H=0,W=[],V=[],G=!1,Z=$,Y=function(){z=0,H=0,$=[],U=[],W=[],eB=eM(),eq=eM()};m.__private__.setCustomOutputDestination=function(e){G=!0,Z=e};var K=function(e){G||(Z=e)};m.__private__.resetCustomOutputDestination=function(){G=!1,Z=$};var X=m.__private__.out=function(e){return e=e.toString(),H+=e.length+1,Z.push(e),Z},J=m.__private__.write=function(e){return X(1==arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Q=m.__private__.getArrayBuffer=function(e){for(var t=e.length,r=new ArrayBuffer(t),a=new Uint8Array(r);t--;)a[t]=e.charCodeAt(t);return r},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ee};var et=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(e){return et=v===y.ADVANCED?e/eh:e,this};var er,ea=m.__private__.getFontSize=m.getFontSize=function(){return v===y.COMPAT?et:et*eh},en=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(e){return en=e,this},m.__private__.getR2L=m.getR2L=function(){return en};var ei,es=m.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))er=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');er=e}else er=parseInt(e,10)};m.__private__.getZoomMode=function(){return er};var eo,el=m.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ei=e};m.__private__.getPageMode=function(){return ei};var ec=m.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');eo=e};m.__private__.getLayoutMode=function(){return eo},m.__private__.setDisplayMode=m.setDisplayMode=function(e,t,r){return es(e),ec(t),el(r),this};var ed={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ed).indexOf(e))throw Error("Invalid argument passed to jsPDF.getDocumentProperty");return ed[e]},m.__private__.getDocumentProperties=function(){return ed},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(e){for(var t in ed)ed.hasOwnProperty(t)&&e[t]&&(ed[t]=e[t]);return this},m.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ed).indexOf(e))throw Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ed[e]=t};var eu,eh,em,ep,ef,eg={},ex={},ey=[],ev={},eb={},ew={},eN={},ej=null,eA=0,eS=[],ek=new op(m),eC=e.hotfixes||[],eL={},eP={},e_=[],eD=function e(t,r,a,n,i,s){if(!(this instanceof e))return new e(t,r,a,n,i,s);isNaN(t)&&(t=1),isNaN(r)&&(r=0),isNaN(a)&&(a=0),isNaN(n)&&(n=1),isNaN(i)&&(i=0),isNaN(s)&&(s=0),this._matrix=[t,r,a,n,i,s]};Object.defineProperty(eD.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(eD.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(eD.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(eD.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(eD.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(eD.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(eD.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(eD.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(eD.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(eD.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(eD.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(eD.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(eD.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(eD.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(eD.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(eD.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),eD.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(e)},eD.prototype.multiply=function(e){return new eD(e.sx*this.sx+e.shy*this.shx,e.sx*this.shy+e.shy*this.sy,e.shx*this.sx+e.sy*this.shx,e.shx*this.shy+e.sy*this.sy,e.tx*this.sx+e.ty*this.shx+this.tx,e.tx*this.shy+e.ty*this.sy+this.ty)},eD.prototype.decompose=function(){var e=this.sx,t=this.shy,r=this.shx,a=this.sy,n=this.tx,i=this.ty,s=Math.sqrt(e*e+t*t),o=(e/=s)*r+(t/=s)*a,l=Math.sqrt((r-=e*o)*r+(a-=t*o)*a);return o/=l,e*(a/=l)<t*(r/=l)&&(e=-e,t=-t,o=-o,s=-s),{scale:new eD(s,0,0,l,0,0),translate:new eD(1,0,0,1,n,i),rotate:new eD(e,t,-t,e,0,0),skew:new eD(1,0,o,1,0,0)}},eD.prototype.toString=function(e){return this.join(" ")},eD.prototype.inversed=function(){var e=this.sx,t=this.shy,r=this.shx,a=this.sy,n=this.tx,i=this.ty,s=1/(e*a-t*r),o=a*s,l=-t*s,c=-r*s,d=e*s;return new eD(o,l,c,d,-o*n-c*i,-l*n-d*i)},eD.prototype.applyToPoint=function(e){return new t3(e.x*this.sx+e.y*this.shx+this.tx,e.x*this.shy+e.y*this.sy+this.ty)},eD.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),r=this.applyToPoint(new t3(e.x+e.w,e.y+e.h));return new t6(t.x,t.y,r.x-t.x,r.y-t.y)},eD.prototype.clone=function(){return new eD(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},m.Matrix=eD;var eI=m.matrixMult=function(e,t){return t.multiply(e)},eR=new eD(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=eR;var eE=function(e,t){if(!eb[e]){var r=(t instanceof ox?"Sh":"P")+(Object.keys(ev).length+1).toString(10);t.id=r,eb[e]=r,ev[r]=t,ek.publish("addPattern",t)}};m.ShadingPattern=ox,m.TilingPattern=oy,m.addShadingPattern=function(e,t){return A("addShadingPattern()"),eE(e,t),this},m.beginTilingPattern=function(e){A("beginTilingPattern()"),t7(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},m.endTilingPattern=function(e,t){A("endTilingPattern()"),t.stream=V[O].join("\n"),eE(e,t),ek.publish("endTilingPattern",t),e_.pop().restore()};var eT=m.__private__.newObject=function(){var e=eM();return eF(e,!0),e},eM=m.__private__.newObjectDeferred=function(){return U[++z]=function(){return H},z},eF=function(e,t){return t="boolean"==typeof t&&t,U[e]=H,t&&X(e+" 0 obj"),e},eO=m.__private__.newAdditionalObject=function(){var e={objId:eM(),content:""};return W.push(e),e},eB=eM(),eq=eM(),ez=m.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5===t.length&&("k"===t[4]||"K"===t[4])&&(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var r=parseFloat(t[0]);t=[r,r,r,"r"]}for(var a="#",n=0;n<3;n++)a+=("0"+Math.floor(255*parseFloat(t[n])).toString(16)).slice(-2);return a},eU=m.__private__.encodeColorString=function(e){"string"==typeof e&&(e={ch1:e});var t,r=e.ch1,a=e.ch2,n=e.ch3,i=e.ch4,s="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof r&&"#"!==r.charAt(0)){var o=new s8(r);if(o.ok)r=o.toHex();else if(!/^\d*\.?\d*$/.test(r))throw Error('Invalid color "'+r+'" passed to jsPDF.encodeColorString.')}if("string"==typeof r&&/^#[0-9A-Fa-f]{3}$/.test(r)&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var l=parseInt(r.substr(1),16);r=l>>16&255,a=l>>8&255,n=255&l}if(void 0===a||void 0===i&&r===a&&a===n)t="string"==typeof r?r+" "+s[0]:2===e.precision?k(r/255)+" "+s[0]:C(r/255)+" "+s[0];else if(void 0===i||"object"===iq()(i)){if(i&&!isNaN(i.a)&&0===i.a)return["1.","1.","1.",s[1]].join(" ");t="string"==typeof r?[r,a,n,s[1]].join(" "):2===e.precision?[k(r/255),k(a/255),k(n/255),s[1]].join(" "):[C(r/255),C(a/255),C(n/255),s[1]].join(" ")}else t="string"==typeof r?[r,a,n,i,s[2]].join(" "):2===e.precision?[k(r),k(a),k(n),k(i),s[2]].join(" "):[C(r),C(a),C(n),C(i),s[2]].join(" ");return t},e$=m.__private__.getFilters=function(){return s},eH=m.__private__.putStream=function(e){var t=(e=e||{}).data||"",r=e.filters||e$(),a=e.alreadyAppliedFilters||[],n=e.addLength1||!1,i=t.length,s=e.objectId,o=function(e){return e};if(null!==d&&void 0===s)throw Error("ObjectId must be passed to putStream for file encryption");null!==d&&(o=tw.encryptor(s,0));var l={};!0===r&&(r=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==ov.API.processDataByFilters?ov.API.processDataByFilters(t,r):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(a)?a.join(" "):a.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===n&&c.push({key:"Length1",value:i})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var m=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)m.push("null");m.push(c[h].value),c[h].value="["+m.join(" ")+"]"}}X("<<");for(var f=0;f<c.length;f++)X("/"+c[f].key+" "+c[f].value);X(">>"),0!==l.data.length&&(X("stream"),X(o(l.data)),X("endstream"))},eW=m.__private__.putPage=function(e){var t=e.number,r=e.data,a=e.objId,n=e.contentsObjId;eF(a,!0),X("<</Type /Page"),X("/Parent "+e.rootDictionaryObjId+" 0 R"),X("/Resources "+e.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(j(e.mediaBox.bottomLeftX))+" "+parseFloat(j(e.mediaBox.bottomLeftY))+" "+j(e.mediaBox.topRightX)+" "+j(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&X("/CropBox ["+j(e.cropBox.bottomLeftX)+" "+j(e.cropBox.bottomLeftY)+" "+j(e.cropBox.topRightX)+" "+j(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&X("/BleedBox ["+j(e.bleedBox.bottomLeftX)+" "+j(e.bleedBox.bottomLeftY)+" "+j(e.bleedBox.topRightX)+" "+j(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&X("/TrimBox ["+j(e.trimBox.bottomLeftX)+" "+j(e.trimBox.bottomLeftY)+" "+j(e.trimBox.topRightX)+" "+j(e.trimBox.topRightY)+"]"),null!==e.artBox&&X("/ArtBox ["+j(e.artBox.bottomLeftX)+" "+j(e.artBox.bottomLeftY)+" "+j(e.artBox.topRightX)+" "+j(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&X("/UserUnit "+e.userUnit),ek.publish("putPage",{objId:a,pageContext:eS[t],pageNumber:t,page:r}),X("/Contents "+n+" 0 R"),X(">>"),X("endobj");var i=r.join("\n");return v===y.ADVANCED&&(i+="\nQ"),eF(n,!0),eH({data:i,filters:e$(),objectId:n}),X("endobj"),a},eV=m.__private__.putPages=function(){var e,t,r=[];for(e=1;e<=eA;e++)eS[e].objId=eM(),eS[e].contentsObjId=eM();for(e=1;e<=eA;e++)r.push(eW({number:e,data:V[e],objId:eS[e].objId,contentsObjId:eS[e].contentsObjId,mediaBox:eS[e].mediaBox,cropBox:eS[e].cropBox,bleedBox:eS[e].bleedBox,trimBox:eS[e].trimBox,artBox:eS[e].artBox,userUnit:eS[e].userUnit,rootDictionaryObjId:eB,resourceDictionaryObjId:eq}));eF(eB,!0),X("<</Type /Pages");var a="/Kids [";for(t=0;t<eA;t++)a+=r[t]+" 0 R ";X(a+"]"),X("/Count "+eA),X(">>"),X("endobj"),ek.publish("postPutPages")},eG=function(e){ek.publish("putFont",{font:e,out:X,newObject:eT,putStream:eH}),!0!==e.isAlreadyPutted&&(e.objectNumber=eT(),X("<<"),X("/Type /Font"),X("/BaseFont /"+om(e.postScriptName)),X("/Subtype /Type1"),"string"==typeof e.encoding&&X("/Encoding /"+e.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},eZ=function(){for(var e in eg)eg.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&eG(eg[e])},eY=function(e){e.objectNumber=eT();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[j(e.x),j(e.y),j(e.x+e.width),j(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),eH({data:e.pages[1].join("\n"),additionalKeyValues:t,objectId:e.objectNumber}),X("endobj")},eK=function(){for(var e in eL)eL.hasOwnProperty(e)&&eY(eL[e])},eX=function(e,t){var r,a=[],n=1/(t-1);for(r=0;r<1;r+=n)a.push(r);if(a.push(1),0!=e[0].offset){var i={offset:0,color:e[0].color};e.unshift(i)}if(1!=e[e.length-1].offset){var s={offset:1,color:e[e.length-1].color};e.push(s)}for(var o="",l=0,c=0;c<a.length;c++){for(r=a[c];r>e[l+1].offset;)l++;var d=e[l].offset,u=(r-d)/(e[l+1].offset-d),h=e[l].color,m=e[l+1].color;o+=q(Math.round((1-u)*h[0]+u*m[0]).toString(16))+q(Math.round((1-u)*h[1]+u*m[1]).toString(16))+q(Math.round((1-u)*h[2]+u*m[2]).toString(16))}return o.trim()},eJ=function(e,t){t||(t=21);var r=eT(),a=eX(e.colors,t),n=[];n.push({key:"FunctionType",value:"0"}),n.push({key:"Domain",value:"[0.0 1.0]"}),n.push({key:"Size",value:"["+t+"]"}),n.push({key:"BitsPerSample",value:"8"}),n.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),n.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),eH({data:a,additionalKeyValues:n,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:r}),X("endobj"),e.objectNumber=eT(),X("<< /ShadingType "+e.type),X("/ColorSpace /DeviceRGB");var i="/Coords ["+j(parseFloat(e.coords[0]))+" "+j(parseFloat(e.coords[1]))+" ";2===e.type?i+=j(parseFloat(e.coords[2]))+" "+j(parseFloat(e.coords[3])):i+=j(parseFloat(e.coords[2]))+" "+j(parseFloat(e.coords[3]))+" "+j(parseFloat(e.coords[4]))+" "+j(parseFloat(e.coords[5])),X(i+="]"),e.matrix&&X("/Matrix ["+e.matrix.toString()+"]"),X("/Function "+r+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},eQ=function(e,t){var r=eM(),a=eT();t.push({resourcesOid:r,objectOid:a}),e.objectNumber=a;var n=[];n.push({key:"Type",value:"/Pattern"}),n.push({key:"PatternType",value:"1"}),n.push({key:"PaintType",value:"1"}),n.push({key:"TilingType",value:"1"}),n.push({key:"BBox",value:"["+e.boundingBox.map(j).join(" ")+"]"}),n.push({key:"XStep",value:j(e.xStep)}),n.push({key:"YStep",value:j(e.yStep)}),n.push({key:"Resources",value:r+" 0 R"}),e.matrix&&n.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),eH({data:e.stream,additionalKeyValues:n,objectId:e.objectNumber}),X("endobj")},e0=function(e){var t;for(t in ev)ev.hasOwnProperty(t)&&(ev[t]instanceof ox?eJ(ev[t]):ev[t]instanceof oy&&eQ(ev[t],e))},e1=function(e){for(var t in e.objectNumber=eT(),X("<<"),e)switch(t){case"opacity":X("/ca "+k(e[t]));break;case"stroke-opacity":X("/CA "+k(e[t]))}X(">>"),X("endobj")},e2=function(){var e;for(e in ew)ew.hasOwnProperty(e)&&e1(ew[e])},e5=function(){for(var e in X("/XObject <<"),eL)eL.hasOwnProperty(e)&&eL[e].objectNumber>=0&&X("/"+e+" "+eL[e].objectNumber+" 0 R");ek.publish("putXobjectDict"),X(">>")},e4=function(){tw.oid=eT(),X("<<"),X("/Filter /Standard"),X("/V "+tw.v),X("/R "+tw.r),X("/U <"+tw.toHexString(tw.U)+">"),X("/O <"+tw.toHexString(tw.O)+">"),X("/P "+tw.P),X(">>"),X("endobj")},e3=function(){for(var e in X("/Font <<"),eg)eg.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&X("/"+e+" "+eg[e].objectNumber+" 0 R");X(">>")},e6=function(){if(Object.keys(ev).length>0){for(var e in X("/Shading <<"),ev)ev.hasOwnProperty(e)&&ev[e]instanceof ox&&ev[e].objectNumber>=0&&X("/"+e+" "+ev[e].objectNumber+" 0 R");ek.publish("putShadingPatternDict"),X(">>")}},e8=function(e){if(Object.keys(ev).length>0){for(var t in X("/Pattern <<"),ev)ev.hasOwnProperty(t)&&ev[t]instanceof m.TilingPattern&&ev[t].objectNumber>=0&&ev[t].objectNumber<e&&X("/"+t+" "+ev[t].objectNumber+" 0 R");ek.publish("putTilingPatternDict"),X(">>")}},e7=function(){if(Object.keys(ew).length>0){var e;for(e in X("/ExtGState <<"),ew)ew.hasOwnProperty(e)&&ew[e].objectNumber>=0&&X("/"+e+" "+ew[e].objectNumber+" 0 R");ek.publish("putGStateDict"),X(">>")}},e9=function(e){eF(e.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),e3(),e6(),e8(e.objectOid),e7(),e5(),X(">>"),X("endobj")},te=function(){var e=[];eZ(),e2(),eK(),e0(e),ek.publish("putResources"),e.forEach(e9),e9({resourcesOid:eq,objectOid:Number.MAX_SAFE_INTEGER}),ek.publish("postPutResources")},tt=function(){ek.publish("putAdditionalObjects");for(var e=0;e<W.length;e++){var t=W[e];eF(t.objId,!0),X(t.content),X("endobj")}ek.publish("postPutAdditionalObjects")},tr=function(e){ex[e.fontName]=ex[e.fontName]||{},ex[e.fontName][e.fontStyle]=e.id},ta=function(e,t,r,a,n){var i={id:"F"+(Object.keys(eg).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:r,encoding:a,isStandardFont:n||!1,metadata:{}};return ek.publish("addFont",{font:i,instance:this}),eg[i.id]=i,tr(i),i.id},tn=function(e,t){var r,a,n,i,s,o,l,c,d;if(n=(t=t||{}).sourceEncoding||"Unicode",s=t.outputEncoding,(t.autoencode||s)&&eg[eu].metadata&&eg[eu].metadata[n]&&eg[eu].metadata[n].encoding&&(i=eg[eu].metadata[n].encoding,!s&&eg[eu].encoding&&(s=eg[eu].encoding),!s&&i.codePages&&(s=i.codePages[0]),"string"==typeof s&&(s=i[s]),s)){for(l=!1,o=[],r=0,a=e.length;r<a;r++)(c=s[e.charCodeAt(r)])?o.push(String.fromCharCode(c)):o.push(e[r]),o[r].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(r=e.length;void 0===l&&0!==r;)e.charCodeAt(r-1)>>8&&(l=!0),r--;if(!l)return e;for(o=t.noBOM?[]:[254,255],r=0,a=e.length;r<a;r++){if((d=(c=e.charCodeAt(r))>>8)>>8)throw Error("Character at position "+r+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)},ti=m.__private__.pdfEscape=m.pdfEscape=function(e,t){return tn(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ts=m.__private__.beginPage=function(e){V[++eA]=[],eS[eA]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},tc(eA),K(V[O])},to=function(e,t){var a,i,s;switch(r=t||r,"string"==typeof e&&Array.isArray(a=x(e.toLowerCase()))&&(i=a[0],s=a[1]),Array.isArray(e)&&(i=e[0]*eh,s=e[1]*eh),isNaN(i)&&(i=n[0],s=n[1]),(i>14400||s>14400)&&(sX.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),i=Math.min(14400,i),s=Math.min(14400,s)),n=[i,s],r.substr(0,1)){case"l":s>i&&(n=[s,i]);break;case"p":i>s&&(n=[s,i])}ts(n),tU(tq),X(tK),0!==t2&&X(t2+" J"),0!==t5&&X(t5+" j"),ek.publish("addPage",{pageNumber:eA})},tl=function(e){e>0&&e<=eA&&(V.splice(e,1),eS.splice(e,1),eA--,O>eA&&(O=eA),this.setPage(O))},tc=function(e){e>0&&e<=eA&&(O=e)},td=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return V.length-1},tu=function(e,t,r){var a,n=void 0;return r=r||{},e=void 0!==e?e:eg[eu].fontName,t=void 0!==t?t:eg[eu].fontStyle,void 0!==ex[a=e.toLowerCase()]&&void 0!==ex[a][t]?n=ex[a][t]:void 0!==ex[e]&&void 0!==ex[e][t]?n=ex[e][t]:!1===r.disableWarning&&sX.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),n||r.noFallback||null==(n=ex.times[t])&&(n=ex.times.normal),n},th=m.__private__.putInfo=function(){var e=eT(),t=function(e){return e};for(var r in null!==d&&(t=tw.encryptor(e,0)),X("<<"),X("/Producer ("+ti(t("jsPDF "+ov.version))+")"),ed)ed.hasOwnProperty(r)&&ed[r]&&X("/"+r.substr(0,1).toUpperCase()+r.substr(1)+" ("+ti(t(ed[r]))+")");X("/CreationDate ("+ti(t(_))+")"),X(">>"),X("endobj")},tm=m.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||eB;switch(eT(),X("<<"),X("/Type /Catalog"),X("/Pages "+t+" 0 R"),er||(er="fullwidth"),er){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var r=""+er;"%"===r.substr(r.length-1)&&(er=parseInt(er)/100),"number"==typeof er&&X("/OpenAction [3 0 R /XYZ null null "+k(er)+"]")}switch(eo||(eo="continuous"),eo){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}ei&&X("/PageMode /"+ei),ek.publish("putCatalog"),X(">>"),X("endobj")},tp=m.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(z+1)),X("/Root "+z+" 0 R"),X("/Info "+(z-1)+" 0 R"),null!==d&&X("/Encrypt "+tw.oid+" 0 R"),X("/ID [ <"+D+"> <"+D+"> ]"),X(">>")},tf=m.__private__.putHeader=function(){X("%PDF-"+p),X("%\xba\xdf\xac\xe0")},tg=m.__private__.putXRef=function(){var e="0000000000";X("xref"),X("0 "+(z+1)),X("0000000000 65535 f ");for(var t=1;t<=z;t++)"function"==typeof U[t]?X((e+U[t]()).slice(-10)+" 00000 n "):void 0!==U[t]?X((e+U[t]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},tx=m.__private__.buildDocument=function(){Y(),K($),ek.publish("buildDocument"),tf(),eV(),tt(),te(),null!==d&&e4(),th(),tm();var e=H;return tg(),tp(),X("startxref"),X(""+e),X("%%EOF"),K(V[O]),$.join("\n")},ty=m.__private__.getBlob=function(e){return new Blob([Q(e)],{type:"application/pdf"})},tv=m.output=m.__private__.output=((tO=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return tx();case"save":m.save(t.filename);break;case"arraybuffer":return Q(tx());case"blob":return ty(tx());case"bloburi":case"bloburl":if(void 0!==sY.URL&&"function"==typeof sY.URL.createObjectURL)return sY.URL&&sY.URL.createObjectURL(ty(tx()))||void 0;sX.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var r="",a=tx();try{r=s3(a)}catch(e){r=s3(unescape(encodeURIComponent(a)))}return"data:application/pdf;filename="+t.filename+";base64,"+r;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(sY)){var n="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",i=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(n=t.pdfObjectUrl,i="");var s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+n+'"'+i+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=sY.open();return null!==o&&o.document.write(s),o}throw Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(sY)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=sY.open();if(null!==c){c.document.write(l);var d=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return c}throw Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(sY))throw Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=sY.open();if(null!==h&&(h.document.write(u),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return sY.document.location.href=this.output("datauristring",t);default:return null}}).foo=function(){try{return tO.apply(this,arguments)}catch(r){var e=r.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+r.message;if(!sY.console)throw Error(t);sY.console.error(t,r),sY.alert&&alert(t)}},tO.foo.bar=tO,tO.foo),tb=function(e){return!0===Array.isArray(eC)&&eC.indexOf(e)>-1};switch(a){case"pt":eh=1;break;case"mm":eh=72/25.4;break;case"cm":eh=72/2.54;break;case"in":eh=72;break;case"px":eh=1==tb("px_scaling")?.75:96/72;break;case"pc":case"em":eh=12;break;case"ex":eh=6;break;default:if("number"!=typeof a)throw Error("Invalid unit: "+a);eh=a}var tw=null;M(),R();var tN=m.__private__.getPageInfo=m.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:eS[e].objId,pageNumber:e,pageContext:eS[e]}},tj=m.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in eS)if(eS[t].objId===e)break;return tN(t)},tA=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:eS[O].objId,pageNumber:O,pageContext:eS[O]}};m.addPage=function(){return to.apply(this,arguments),this},m.setPage=function(){return tc.apply(this,arguments),K.call(this,V[O]),this},m.insertPage=function(e){return this.addPage(),this.movePage(O,e),this},m.movePage=function(e,t){var r,a;if(e>t){r=V[e],a=eS[e];for(var n=e;n>t;n--)V[n]=V[n-1],eS[n]=eS[n-1];V[t]=r,eS[t]=a,this.setPage(t)}else if(e<t){r=V[e],a=eS[e];for(var i=e;i<t;i++)V[i]=V[i+1],eS[i]=eS[i+1];V[t]=r,eS[t]=a,this.setPage(t)}return this},m.deletePage=function(){return tl.apply(this,arguments),this},m.__private__.text=m.text=function(e,t,r,a,n){var i,s,o,l,c,d,u,m,p,f=(a=a||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof r||Array.isArray(r))){var g=r;r=t,t=e,e=g}if(arguments[3]instanceof eD==!1?(o=arguments[4],l=arguments[5],"object"===iq()(u=arguments[3])&&null!==u||("string"==typeof o&&(l=o,o=null),"string"==typeof u&&(l=u,u=null),"number"==typeof u&&(o=u,u=null),a={flags:u,angle:o,align:l})):(A("The transform parameter of text() with a Matrix value"),p=n),isNaN(t)||isNaN(r)||null==e)throw Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var x="",b=!1,w="number"==typeof a.lineHeightFactor?a.lineHeightFactor:tB,N=f.internal.scaleFactor;function S(e){for(var t,r=e.concat(),a=[],n=r.length;n--;)"string"==typeof(t=r.shift())?a.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?a.push(t[0]):a.push([t[0],t[1],t[2]]);return a}function k(e,t){var r;if("string"==typeof e)r=t(e)[0];else if(Array.isArray(e)){for(var a,n,i=e.concat(),s=[],o=i.length;o--;)"string"==typeof(a=i.shift())?s.push(t(a)[0]):Array.isArray(a)&&"string"==typeof a[0]&&s.push([(n=t(a[0],a[1],a[2]))[0],n[1],n[2]]);r=s}return r}var C=!1,P=!0;if("string"==typeof e)C=!0;else if(Array.isArray(e)){var _=e.concat();s=[];for(var D,I=_.length;I--;)("string"!=typeof(D=_.shift())||Array.isArray(D)&&"string"!=typeof D[0])&&(P=!1);C=P}if(!1===C)throw Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var R=et/f.internal.scaleFactor,E=R*(w-1);switch(a.baseline){case"bottom":r-=E;break;case"top":r+=R-E;break;case"hanging":r+=R-2*E;break;case"middle":r+=R/2-E}if((d=a.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(f.splitTextToSize(t,d))},[]))),i={text:e,x:t,y:r,options:a,mutex:{pdfEscape:ti,activeFontKey:eu,fonts:eg,activeFontSize:et}},ek.publish("preProcessText",i),e=i.text,o=(a=i.options).angle,p instanceof eD==!1&&o&&"number"==typeof o){o*=Math.PI/180,0===a.rotationDirection&&(o=-o),v===y.ADVANCED&&(o=-o);var T=Math.cos(o),M=Math.sin(o);p=new eD(T,M,-M,T,0,0)}else o&&o instanceof eD&&(p=o);v!==y.ADVANCED||p||(p=eR),void 0!==(c=a.charSpace||t0)&&(x+=j(L(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(m=a.horizontalScale)&&(x+=j(100*m)+" Tz\n"),a.lang;var F=-1,O=void 0!==a.renderingMode?a.renderingMode:a.stroke,B=f.internal.getCurrentPageInfo().pageContext;switch(O){case 0:case!1:case"fill":F=0;break;case 1:case!0:case"stroke":F=1;break;case 2:case"fillThenStroke":F=2;break;case 3:case"invisible":F=3;break;case 4:case"fillAndAddForClipping":F=4;break;case 5:case"strokeAndAddPathForClipping":F=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":F=6;break;case 7:case"addToPathForClipping":F=7}var q=void 0!==B.usedRenderingMode?B.usedRenderingMode:-1;-1!==F?x+=F+" Tr\n":-1!==q&&(x+="0 Tr\n"),-1!==F&&(B.usedRenderingMode=F),l=a.align||"left";var z,U=et*w,$=f.internal.pageSize.getWidth(),H=eg[eu];c=a.charSpace||t0,d=a.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},a.flags);var W=[],V=function(e){return f.getStringUnitWidth(e,{font:H,charSpace:c,fontSize:et,doKerning:!1})*et/N};if("[object Array]"===Object.prototype.toString.call(e)){s=S(e),"left"!==l&&(z=s.map(V));var G,Z,Y=0;if("right"===l){t-=z[0],e=[],I=s.length;for(var K=0;K<I;K++)0===K?(Z=tV(t),G=tG(r)):(Z=L(Y-z[K]),G=-U),e.push([s[K],Z,G]),Y=z[K]}else if("center"===l){t-=z[0]/2,e=[],I=s.length;for(var J=0;J<I;J++)0===J?(Z=tV(t),G=tG(r)):(Z=L((Y-z[J])/2),G=-U),e.push([s[J],Z,G]),Y=z[J]}else if("left"===l){e=[],I=s.length;for(var Q=0;Q<I;Q++)e.push(s[Q])}else if("justify"===l&&"Identity-H"===H.encoding){e=[],I=s.length,d=0!==d?d:$;for(var ee=0,er=0;er<I;er++)if(G=0===er?tG(r):-U,Z=0===er?tV(t):ee,er<I-1){var ea=L((d-z[er])/(s[er].split(" ").length-1)),ei=s[er].split(" ");e.push([ei[0]+" ",Z,G]),ee=0;for(var es=1;es<ei.length;es++){var eo=(V(ei[es-1]+" "+ei[es])-V(ei[es]))*N+ea;es==ei.length-1?e.push([ei[es],eo,0]):e.push([ei[es]+" ",eo,0]),ee-=eo}}else e.push([s[er],Z,G]);e.push(["",ee,0])}else{if("justify"!==l)throw Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],I=s.length,d=0!==d?d:$,er=0;er<I;er++)G=0===er?tG(r):-U,Z=0===er?tV(t):0,er<I-1?W.push(j(L((d-z[er])/(s[er].split(" ").length-1)))):W.push(0),e.push([s[er],Z,G])}}!0===("boolean"==typeof a.R2L?a.R2L:en)&&(e=k(e,function(e,t,r){return[e.split("").reverse().join(""),t,r]})),i={text:e,x:t,y:r,options:a,mutex:{pdfEscape:ti,activeFontKey:eu,fonts:eg,activeFontSize:et}},ek.publish("postProcessText",i),e=i.text,b=i.mutex.isHex||!1;var el=eg[eu].encoding;"WinAnsiEncoding"!==el&&"StandardEncoding"!==el||(e=k(e,function(e,t,r){var n;return[ti(e.split("	").join(Array(a.TabLen||9).join(" ")),u),t,r]})),s=S(e),e=[];for(var ec,ed,eh,em=+!!Array.isArray(s[0]),ep="",ef=function(e,t,r){var n="";return r instanceof eD?(r="number"==typeof a.angle?eI(r,new eD(1,0,0,1,e,t)):eI(new eD(1,0,0,1,e,t),r),v===y.ADVANCED&&(r=eI(new eD(1,0,0,-1,0,0),r)),n=r.join(" ")+" Tm\n"):n=j(e)+" "+j(t)+" Td\n",n},ex=0;ex<s.length;ex++){switch(ep="",em){case 1:eh=(b?"<":"(")+s[ex][0]+(b?">":")"),ec=parseFloat(s[ex][1]),ed=parseFloat(s[ex][2]);break;case 0:eh=(b?"<":"(")+s[ex]+(b?">":")"),ec=tV(t),ed=tG(r)}void 0!==W&&void 0!==W[ex]&&(ep=W[ex]+" Tw\n"),0===ex?e.push(ep+ef(ec,ed,p)+eh):0===em?e.push(ep+eh):1===em&&e.push(ep+ef(ec,ed,p)+eh)}e=(0===em?e.join(" Tj\nT* "):e.join(" Tj\n"))+" Tj\n";var ey="BT\n/";return ey+=eu+" "+et+" Tf\n",ey+=j(et*w)+" TL\n",ey+=tJ+"\n",ey+=x,ey+=e,X(ey+="ET"),h[eu]=!0,f};var tS=m.__private__.clip=m.clip=function(e){return X("evenodd"===e?"W*":"W"),this};m.clipEvenOdd=function(){return tS("evenodd")},m.__private__.discardPath=m.discardPath=function(){return X("n"),this};var tk=m.__private__.isValidStyle=function(e){var t=!1;return -1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(e){return tk(e)&&(c=e),this};var tC=m.__private__.getStyle=m.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},tL=m.close=function(){return X("h"),this};m.stroke=function(){return X("S"),this},m.fill=function(e){return tP("f",e),this},m.fillEvenOdd=function(e){return tP("f*",e),this},m.fillStroke=function(e){return tP("B",e),this},m.fillStrokeEvenOdd=function(e){return tP("B*",e),this};var tP=function(e,t){"object"===iq()(t)?tI(t,e):X(e)},t_=function(e){null===e||v===y.ADVANCED&&void 0===e||X(e=tC(e))};function tD(e,t,r,a,n){var i=new oy(t||this.boundingBox,r||this.xStep,a||this.yStep,this.gState,n||this.matrix);return i.stream=this.stream,eE(e+"$$"+this.cloneIndex+++"$$",i),i}var tI=function(e,t){var r=eb[e.key],a=ev[r];if(a instanceof ox)X("q"),X(tR(t)),a.gState&&m.setGState(a.gState),X(e.matrix.toString()+" cm"),X("/"+r+" sh"),X("Q");else if(a instanceof oy){var n=new eD(1,0,0,-1,0,ra());e.matrix&&(n=n.multiply(e.matrix||eR),r=tD.call(a,e.key,e.boundingBox,e.xStep,e.yStep,n).id),X("q"),X("/Pattern cs"),X("/"+r+" scn"),a.gState&&m.setGState(a.gState),X(t),X("Q")}},tR=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},tE=m.moveTo=function(e,t){return X(j(L(e))+" "+j(P(t))+" m"),this},tT=m.lineTo=function(e,t){return X(j(L(e))+" "+j(P(t))+" l"),this},tM=m.curveTo=function(e,t,r,a,n,i){return X([j(L(e)),j(P(t)),j(L(r)),j(P(a)),j(L(n)),j(P(i)),"c"].join(" ")),this};m.__private__.line=m.line=function(e,t,r,a,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a)||!tk(n))throw Error("Invalid arguments passed to jsPDF.line");return v===y.COMPAT?this.lines([[r-e,a-t]],e,t,[1,1],n||"S"):this.lines([[r-e,a-t]],e,t,[1,1]).stroke()},m.__private__.lines=m.lines=function(e,t,r,a,n,i){var s,o,l,c,d,u,h,m,p,f,g,x;if("number"==typeof e&&(x=r,r=t,t=e,e=x),a=a||[1,1],i=i||!1,isNaN(t)||isNaN(r)||!Array.isArray(e)||!Array.isArray(a)||!tk(n)||"boolean"!=typeof i)throw Error("Invalid arguments passed to jsPDF.lines");for(tE(t,r),s=a[0],o=a[1],c=e.length,f=t,g=r,l=0;l<c;l++)2===(d=e[l]).length?tT(f=d[0]*s+f,g=d[1]*o+g):(u=d[0]*s+f,h=d[1]*o+g,m=d[2]*s+f,p=d[3]*o+g,tM(u,h,m,p,f=d[4]*s+f,g=d[5]*o+g));return i&&tL(),t_(n),this},m.path=function(e){for(var t=0;t<e.length;t++){var r=e[t],a=r.c;switch(r.op){case"m":tE(a[0],a[1]);break;case"l":tT(a[0],a[1]);break;case"c":tM.apply(this,a);break;case"h":tL()}}return this},m.__private__.rect=m.rect=function(e,t,r,a,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a)||!tk(n))throw Error("Invalid arguments passed to jsPDF.rect");return v===y.COMPAT&&(a=-a),X([j(L(e)),j(P(t)),j(L(r)),j(L(a)),"re"].join(" ")),t_(n),this},m.__private__.triangle=m.triangle=function(e,t,r,a,n,i,s){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a)||isNaN(n)||isNaN(i)||!tk(s))throw Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[r-e,a-t],[n-r,i-a],[e-n,t-i]],e,t,[1,1],s,!0),this},m.__private__.roundedRect=m.roundedRect=function(e,t,r,a,n,i,s){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a)||isNaN(n)||isNaN(i)||!tk(s))throw Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return n=Math.min(n,.5*r),i=Math.min(i,.5*a),this.lines([[r-2*n,0],[n*o,0,n,i-i*o,n,i],[0,a-2*i],[0,i*o,-n*o,i,-n,i],[2*n-r,0],[-n*o,0,-n,-i*o,-n,-i],[0,2*i-a],[0,-i*o,n*o,-i,n,-i]],e+n,t,[1,1],s,!0),this},m.__private__.ellipse=m.ellipse=function(e,t,r,a,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a)||!tk(n))throw Error("Invalid arguments passed to jsPDF.ellipse");var i=4/3*(Math.SQRT2-1)*r,s=4/3*(Math.SQRT2-1)*a;return tE(e+r,t),tM(e+r,t-s,e+i,t-a,e,t-a),tM(e-i,t-a,e-r,t-s,e-r,t),tM(e-r,t+s,e-i,t+a,e,t+a),tM(e+i,t+a,e+r,t+s,e+r,t),t_(n),this},m.__private__.circle=m.circle=function(e,t,r,a){if(isNaN(e)||isNaN(t)||isNaN(r)||!tk(a))throw Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,r,r,a)},m.setFont=function(e,t,r){return r&&(t=N(t,r)),eu=tu(e,t,{disableWarning:!1}),this};var tF=m.__private__.getFont=m.getFont=function(){return eg[tu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var e,t,r={};for(e in ex)if(ex.hasOwnProperty(e))for(t in r[e]=[],ex[e])ex[e].hasOwnProperty(t)&&r[e].push(t);return r},m.addFont=function(e,t,r,a,n){var i=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==i.indexOf(arguments[3])?n=arguments[3]:arguments[3]&&-1==i.indexOf(arguments[3])&&(r=N(r,a)),n=n||"Identity-H",ta.call(this,e,t,r,n)};var tO,tB,tq=e.lineWidth||.200025,tz=m.__private__.getLineWidth=m.getLineWidth=function(){return tq},tU=m.__private__.setLineWidth=m.setLineWidth=function(e){return tq=e,X(j(L(e))+" w"),this};m.__private__.setLineDash=ov.API.setLineDash=ov.API.setLineDashPattern=function(e,t){if(e=e||[],isNaN(t=t||0)||!Array.isArray(e))throw Error("Invalid arguments passed to jsPDF.setLineDash");return X("["+(e=e.map(function(e){return j(L(e))}).join(" "))+"] "+(t=j(L(t)))+" d"),this};var t$=m.__private__.getLineHeight=m.getLineHeight=function(){return et*tB};m.__private__.getLineHeight=m.getLineHeight=function(){return et*tB};var tH=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(tB=e),this},tW=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return tB};tH(e.lineHeight);var tV=m.__private__.getHorizontalCoordinate=function(e){return L(e)},tG=m.__private__.getVerticalCoordinate=function(e){return v===y.ADVANCED?e:eS[O].mediaBox.topRightY-eS[O].mediaBox.bottomLeftY-L(e)},tZ=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(e){return j(tV(e))},tY=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(e){return j(tG(e))},tK=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ez(tK)},m.__private__.setStrokeColor=m.setDrawColor=function(e,t,r,a){return X(tK=eU({ch1:e,ch2:t,ch3:r,ch4:a,pdfColorType:"draw",precision:2})),this};var tX=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ez(tX)},m.__private__.setFillColor=m.setFillColor=function(e,t,r,a){return X(tX=eU({ch1:e,ch2:t,ch3:r,ch4:a,pdfColorType:"fill",precision:2})),this};var tJ=e.textColor||"0 g",tQ=m.__private__.getTextColor=m.getTextColor=function(){return ez(tJ)};m.__private__.setTextColor=m.setTextColor=function(e,t,r,a){return tJ=eU({ch1:e,ch2:t,ch3:r,ch4:a,pdfColorType:"text",precision:3}),this};var t0=e.charSpace,t1=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(t0||0)};m.__private__.setCharSpace=m.setCharSpace=function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.setCharSpace");return t0=e,this};var t2=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(e){var t=m.CapJoinStyles[e];if(void 0===t)throw Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return t2=t,X(t+" J"),this};var t5=0;m.__private__.setLineJoin=m.setLineJoin=function(e){var t=m.CapJoinStyles[e];if(void 0===t)throw Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return t5=t,X(t+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(e){if(isNaN(e=e||0))throw Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(j(L(e))+" M"),this},m.GState=of,m.setGState=function(e){(e="string"==typeof e?ew[eN[e]]:t4(null,e)).equals(ej)||(X("/"+e.id+" gs"),ej=e)};var t4=function(e,t){if(!e||!eN[e]){var r=!1;for(var a in ew)if(ew.hasOwnProperty(a)&&ew[a].equals(t)){r=!0;break}if(r)t=ew[a];else{var n="GS"+(Object.keys(ew).length+1).toString(10);ew[n]=t,t.id=n}return e&&(eN[e]=t.id),ek.publish("addGState",t),t}};m.addGState=function(e,t){return t4(e,t),this},m.saveGraphicsState=function(){return X("q"),ey.push({key:eu,size:et,color:tJ}),this},m.restoreGraphicsState=function(){X("Q");var e=ey.pop();return eu=e.key,et=e.size,tJ=e.color,ej=null,this},m.setCurrentTransformationMatrix=function(e){return X(e.toString()+" cm"),this},m.comment=function(e){return X("#"+e),this};var t3=function(e,t){var r=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var a=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var n="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return n},set:function(e){n=e.toString()}}),this},t6=function(e,t,r,a){t3.call(this,e,t),this.type="rect";var n=r||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var i=a||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}}),this},t8=function(){this.page=eA,this.currentPage=O,this.pages=V.slice(0),this.pagesContext=eS.slice(0),this.x=em,this.y=ep,this.matrix=ef,this.width=rt(O),this.height=ra(O),this.outputDestination=Z,this.id="",this.objectNumber=-1};t8.prototype.restore=function(){eA=this.page,O=this.currentPage,eS=this.pagesContext,V=this.pages,em=this.x,ep=this.y,ef=this.matrix,rr(O,this.width),rn(O,this.height),Z=this.outputDestination};var t7=function(e,t,r,a,n){e_.push(new t8),eA=O=0,V=[],em=e,ep=t,ef=n,ts([r,a])},t9=function(e){if(eP[e])e_.pop().restore();else{var t=new t8,r="Xo"+(Object.keys(eL).length+1).toString(10);t.id=r,eP[e]=r,eL[r]=t,ek.publish("addFormObject",t),e_.pop().restore()}};for(var re in m.beginFormObject=function(e,t,r,a,n){return t7(e,t,r,a,n),this},m.endFormObject=function(e){return t9(e),this},m.doFormObject=function(e,t){var r=eL[eP[e]];return X("q"),X(t.toString()+" cm"),X("/"+r.id+" Do"),X("Q"),this},m.getFormObject=function(e){var t=eL[eP[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},m.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(s6(ty(tx()),e),"function"==typeof s6.unload&&sY.setTimeout&&setTimeout(s6.unload,911),this):new Promise(function(t,r){try{var a=s6(ty(tx()),e);"function"==typeof s6.unload&&sY.setTimeout&&setTimeout(s6.unload,911),t(a)}catch(e){r(e.message)}})},ov.API)ov.API.hasOwnProperty(re)&&("events"===re&&ov.API.events.length?function(e,t){var r,a,n;for(n=t.length-1;-1!==n;n--)r=t[n][0],a=t[n][1],e.subscribe.apply(e,[r].concat("function"==typeof a?[a]:a))}(ek,ov.API.events):m[re]=ov.API[re]);var rt=m.getPageWidth=function(e){return(eS[e=e||O].mediaBox.topRightX-eS[e].mediaBox.bottomLeftX)/eh},rr=m.setPageWidth=function(e,t){eS[e].mediaBox.topRightX=t*eh+eS[e].mediaBox.bottomLeftX},ra=m.getPageHeight=function(e){return(eS[e=e||O].mediaBox.topRightY-eS[e].mediaBox.bottomLeftY)/eh},rn=m.setPageHeight=function(e,t){eS[e].mediaBox.topRightY=t*eh+eS[e].mediaBox.bottomLeftY};return m.internal={pdfEscape:ti,getStyle:tC,getFont:tF,getFontSize:ea,getCharSpace:t1,getTextColor:tQ,getLineHeight:t$,getLineHeightFactor:tW,getLineWidth:tz,write:J,getHorizontalCoordinate:tV,getVerticalCoordinate:tG,getCoordinateString:tZ,getVerticalCoordinateString:tY,collections:{},newObject:eT,newAdditionalObject:eO,newObjectDeferred:eM,newObjectDeferredBegin:eF,getFilters:e$,putStream:eH,events:ek,scaleFactor:eh,pageSize:{getWidth:function(){return rt(O)},setWidth:function(e){rr(O,e)},getHeight:function(){return ra(O)},setHeight:function(e){rn(O,e)}},encryptionOptions:d,encryption:tw,getEncryptor:function(e){return null!==d?tw.encryptor(e,0):function(e){return e}},output:tv,getNumberOfPages:td,pages:V,out:X,f2:k,f3:C,getPageInfo:tN,getPageInfoByObjId:tj,getCurrentPageInfo:tA,getPDFVersion:f,Point:t3,Rectangle:t6,Matrix:eD,hasHotfix:tb},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return rt(O)},set:function(e){rr(O,e)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ra(O)},set:function(e){rn(O,e)},enumerable:!0,configurable:!0}),(function(e){for(var t=0,r=ee.length;t<r;t++){var a=ta.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===u&&(h[a]=!0);var n=e[t][0].split("-");tr({id:a,fontName:n[0],fontStyle:n[1]||""})}ek.publish("addFonts",{fonts:eg,dictionary:ex})}).call(m,ee),eu="F1",to(n,r),ek.publish("initialized"),m}oh.prototype.lsbFirstWord=function(e){return String.fromCharCode((0|e)&255,e>>8&255,e>>16&255,e>>24&255)},oh.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},oh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},oh.prototype.processOwnerPassword=function(e,t){return od(oo(t).substr(0,5),e)},oh.prototype.encryptor=function(e,t){var r=oo(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return od(r,e)}},of.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||iq()(e)!==iq()(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&0>r.indexOf(t)&&a--;return 0===a},ov.API={events:[]},ov.version="3.0.1";var ob=ov.API,ow=1,oN=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oj=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},oA=function(e){return e.toFixed(2)},oS=function(e){return e.toFixed(5)};ob.__acroform__={};var ok=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},oC=function(e){return e*ow},oL=function(e){var t=new oV,r=o6.internal.getHeight(e)||0;return t.BBox=[0,0,Number(oA(o6.internal.getWidth(e)||0)),Number(oA(r))],t},oP=ob.__acroform__.setBit=function(e,t){if(t=t||0,isNaN(e=e||0)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},o_=ob.__acroform__.clearBit=function(e,t){if(t=t||0,isNaN(e=e||0)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},oD=ob.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return+(0!=(e&1<<t))},oI=ob.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return oD(e,t-1)},oR=ob.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return oP(e,t-1)},oE=ob.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return o_(e,t-1)},oT=ob.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,n=e[0],i=e[1],s=e[2],o=e[3],l={};return l.lowerLeft_X=r(n)||0,l.lowerLeft_Y=a(i+o)||0,l.upperRight_X=r(n+s)||0,l.upperRight_Y=a(i)||0,[Number(oA(l.lowerLeft_X)),Number(oA(l.lowerLeft_Y)),Number(oA(l.upperRight_X)),Number(oA(l.upperRight_Y))]},oM=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=oF(e,r),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+oA(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=oL(e);return i.scope=e.scope,i.stream=t.join("\n"),i}},oF=function(e,t){var r=0===e.fontSize?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},n=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(e){return e.split("\n")}):n.map(function(e){return[e]});var i=r,s=o6.internal.getHeight(e)||0;s=s<0?-s:s;var o=o6.internal.getWidth(e)||0;o=o<0?-o:o,i++;e:for(;i>0;){t="";var l,c,d=oO("3",e,--i).height,u=e.multiline?s-i:(s-d)/2,h=u+=2,m=0,p=0,f=0;if(i<=0){t="(...) Tj\n",t+="% Width of Text: "+oO(t,e,i=12).width+", FieldWidth:"+o+"\n";break}for(var g="",x=0,y=0;y<n.length;y++)if(n.hasOwnProperty(y)){var v=!1;if(1!==n[y].length&&f!==n[y].length-1){if((d+2)*(x+2)+2>s)continue e;g+=n[y][f],v=!0,p=y,y--}else{g=" "==(g+=n[y][f]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var b,w,N=parseInt(y),j=(b=g,w=i,N+1<n.length&&oO(b+" "+n[N+1][0],e,w).width<=o-4),A=y>=n.length-1;if(j&&!A){g+=" ",f=0;continue}if(j||A){if(A)p=N;else if(e.multiline&&(d+2)*(x+2)+2>s)continue e}else{if(!e.multiline||(d+2)*(x+2)+2>s)continue e;p=N}}for(var S="",k=m;k<=p;k++){var C=n[k];if(e.multiline){if(k===p){S+=C[f]+" ",f=(f+1)%C.length;continue}if(k===m){S+=C[C.length-1]+" ";continue}}S+=C[0]+" "}switch(c=oO(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,e,i).width,e.textAlign){case"right":l=o-c-2;break;case"center":l=(o-c)/2;break;default:l=2}t+=oA(l)+" "+oA(h)+" Td\n",t+="("+oN(S)+") Tj\n",t+=-oA(l)+" 0 Td\n",h=-(i+2),c=0,m=v?p:p+1,x++,g=""}break}return a.text=t,a.fontSize=i,a},oO=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},oB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},oq=function(e,t){var r={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===r.type&&e.object===r.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},oz=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),"object"===iq()(a)&&"function"==typeof a.putStream&&a.putStream(),delete e[r]}},oU=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(oZ.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(oB)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw Error("Exception while creating AcroformDictionary");ow=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new oG,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];a.objId=void 0,a.hasAnnotation&&oq(a,e)}}),e.internal.events.subscribe("putCatalog",function(){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var r=!e;for(var a in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(a)){var n=e[a],i=[],s=n.Rect;if(n.Rect&&(n.Rect=oT(n.Rect,t)),t.internal.newObjectDeferredBegin(n.objId,!0),n.DA=o6.createDefaultAppearanceStream(n),"object"===iq()(n)&&"function"==typeof n.getKeyValueListForStream&&(i=n.getKeyValueListForStream()),n.Rect=s,n.hasAppearanceStream&&!n.appearanceStreamContent){var o=oM(n);i.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(n.appearanceStreamContent){var l="";for(var c in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(c)){var d=n.appearanceStreamContent[c];if(l+="/"+c+" <<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var u=d[a];"function"==typeof u&&(u=u.call(t,n)),l+="/"+a+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=d)&&(u=u.call(t,n)),l+="/"+a+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);l+=">>"}i.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:i,objectId:n.objId}),t.internal.out("endobj")}r&&oz(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},o$=ob.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(e){return e};if(Array.isArray(e)){for(var n="[",i=0;i<e.length;i++)switch(0!==i&&(n+=" "),iq()(e[i])){case"boolean":case"number":case"object":n+=e[i].toString();break;case"string":"/"!==e[i].substr(0,1)?(void 0!==t&&r&&(a=r.internal.getEncryptor(t)),n+="("+oN(a(e[i].toString()))+")"):n+=e[i].toString()}return n+"]"}throw Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},oH=function(e,t,r){var a=function(e){return e};return void 0!==t&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+oN(a(e))+")"},oW=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};oW.prototype.toString=function(){return this.objId+" 0 R"},oW.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},oW.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var r in t)if(!1===Object.getOwnPropertyDescriptor(this,t[r]).configurable){var a=t[r],n=this[a];n&&(Array.isArray(n)?e.push({key:a,value:o$(n,this.objId,this.scope)}):n instanceof oW?(n.scope=this.scope,e.push({key:a,value:n.objId+" 0 R"})):"function"!=typeof n&&e.push({key:a,value:n}))}return e};var oV=function(){oW.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};ok(oV,oW);var oG=function(){oW.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+oN(t(e))+")"}},set:function(t){e=t}})};ok(oG,oW);var oZ=function e(){oW.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!oI(t,3)},set:function(e){!0==!!e?this.F=oR(t,3):this.F=oE(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){if(isNaN(e))throw Error('Invalid value "'+e+'" for attribute Ff supplied.');r=e}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==a.length)return a},set:function(e){a=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(e){a[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(e){a[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(e){a[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(e){a[3]=e}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=e;break;default:throw Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof o2)return;i="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+oN(t(i))+")"},set:function(e){i=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/ow:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof o2||this instanceof o4))return oH(u,this.objId,this.scope)},set:function(e){u=e=e.toString()}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof oQ==!1?oH(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof oQ==!1?"("===e.substr(0,1)?oj(e.substr(1,e.length-2)):oj(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof oQ==!0?oj(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof oQ==!0?"/"+e:e}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof oQ==!1?oH(m,this.objId,this.scope):m},set:function(e){e=e.toString(),m=this instanceof oQ==!1?"("===e.substr(0,1)?oj(e.substr(1,e.length-2)):oj(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof oQ==!0?oj(m.substr(1,m.length-1)):m},set:function(e){e=e.toString(),m=this instanceof oQ==!0?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){f=e=!!e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,1)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,1):this.Ff=oE(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,2)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,2):this.Ff=oE(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,3)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,3):this.Ff=oE(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};ok(oZ,oW);var oY=function(){oZ.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return o$(t,this.objId,this.scope)},set:function(e){var r;r=[],"string"==typeof e&&(r=function(e,t,r){r||(r=1);for(var a,n=[];a=t.exec(e);)n.push(a[r]);return n}(e,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,18)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,18):this.Ff=oE(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,19)},set:function(e){!0===this.combo&&(!0==!!e?this.Ff=oR(this.Ff,19):this.Ff=oE(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,20)},set:function(e){!0==!!e?(this.Ff=oR(this.Ff,20),t.sort()):this.Ff=oE(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,22)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,22):this.Ff=oE(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,23)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,23):this.Ff=oE(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,27)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,27):this.Ff=oE(this.Ff,27)}}),this.hasAppearanceStream=!1};ok(oY,oZ);var oK=function(){oY.call(this),this.fontName="helvetica",this.combo=!1};ok(oK,oY);var oX=function(){oK.call(this),this.combo=!0};ok(oX,oK);var oJ=function(){oX.call(this),this.edit=!0};ok(oJ,oX);var oQ=function(){oZ.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,15)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,15):this.Ff=oE(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,16)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,16):this.Ff=oE(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,17)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,17):this.Ff=oE(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,26)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,26):this.Ff=oE(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var r,a=[];for(r in a.push("<<"),t)a.push("/"+r+" ("+oN(e(t[r]))+")");return a.push(">>"),a.join("\n")}},set:function(e){"object"===iq()(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};ok(oQ,oZ);var o0=function(){oQ.call(this),this.pushButton=!0};ok(o0,oQ);var o1=function(){oQ.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};ok(o1,oQ);var o2=function(){oZ.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var e,t,r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,r=[];for(t in r.push("<<"),a)r.push("/"+t+" ("+oN(e(a[t]))+")");return r.push(">>"),r.join("\n")},set:function(e){"object"===iq()(e)&&(a=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(e){"string"==typeof e&&(a.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=o6.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ok(o2,oZ),o1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},o1.prototype.createOption=function(e){var t=new o2;return t.Parent=this,t.optionName=e,this.Kids.push(t),o8.call(this.scope,t),t};var o5=function(){oQ.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=o6.CheckBox.createAppearanceStream()};ok(o5,oQ);var o4=function(){oZ.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,13)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,13):this.Ff=oE(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,21)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,21):this.Ff=oE(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,23)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,23):this.Ff=oE(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,24)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,24):this.Ff=oE(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,25)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,25):this.Ff=oE(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,26)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,26):this.Ff=oE(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ok(o4,oZ);var o3=function(){o4.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!oI(this.Ff,14)},set:function(e){!0==!!e?this.Ff=oR(this.Ff,14):this.Ff=oE(this.Ff,14)}}),this.password=!0};ok(o3,o4);var o6={CheckBox:{createAppearanceStream:function(){return{N:{On:o6.CheckBox.YesNormal},D:{On:o6.CheckBox.YesPushDown,Off:o6.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=oL(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=oF(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+oA(o6.internal.getWidth(e))+" "+oA(o6.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+oA(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join("\n"),t},YesNormal:function(e){var t=oL(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),n=[],i=o6.internal.getHeight(e),s=o6.internal.getWidth(e),o=oF(e,e.caption);return n.push("1 g"),n.push("0 0 "+oA(s)+" "+oA(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+oA(s-1)+" "+oA(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+oA(o.fontSize)+" Tf "+a),n.push(o.text),n.push("ET"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=oL(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+oA(o6.internal.getWidth(e))+" "+oA(o6.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:o6.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=o6.RadioButton.Circle.YesNormal,t.D[e]=o6.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=oL(e);t.scope=e.scope;var r=[],a=o6.internal.getWidth(e)<=o6.internal.getHeight(e)?o6.internal.getWidth(e)/4:o6.internal.getHeight(e)/4,n=Number(((a=Number((.9*a).toFixed(5)))*o6.internal.Bezier_C).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+oS(o6.internal.getWidth(e)/2)+" "+oS(o6.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+n+" "+n+" "+a+" 0 "+a+" c"),r.push("-"+n+" "+a+" -"+a+" "+n+" -"+a+" 0 c"),r.push("-"+a+" -"+n+" -"+n+" -"+a+" 0 -"+a+" c"),r.push(n+" -"+a+" "+a+" -"+n+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=oL(e);t.scope=e.scope;var r=[],a=o6.internal.getWidth(e)<=o6.internal.getHeight(e)?o6.internal.getWidth(e)/4:o6.internal.getHeight(e)/4,n=Number((2*(a=Number((.9*a).toFixed(5)))).toFixed(5)),i=Number((n*o6.internal.Bezier_C).toFixed(5)),s=Number((a*o6.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+oS(o6.internal.getWidth(e)/2)+" "+oS(o6.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+oS(o6.internal.getWidth(e)/2)+" "+oS(o6.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=oL(e);t.scope=e.scope;var r=[],a=o6.internal.getWidth(e)<=o6.internal.getHeight(e)?o6.internal.getWidth(e)/4:o6.internal.getHeight(e)/4,n=Number((2*(a=Number((.9*a).toFixed(5)))).toFixed(5)),i=Number((n*o6.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+oS(o6.internal.getWidth(e)/2)+" "+oS(o6.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:o6.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=o6.RadioButton.Cross.YesNormal,t.D[e]=o6.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=oL(e);t.scope=e.scope;var r=[],a=o6.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+oA(o6.internal.getWidth(e)-2)+" "+oA(o6.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(oA(a.x1.x)+" "+oA(a.x1.y)+" m"),r.push(oA(a.x2.x)+" "+oA(a.x2.y)+" l"),r.push(oA(a.x4.x)+" "+oA(a.x4.y)+" m"),r.push(oA(a.x3.x)+" "+oA(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=oL(e);t.scope=e.scope;var r=o6.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+oA(o6.internal.getWidth(e))+" "+oA(o6.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+oA(o6.internal.getWidth(e)-2)+" "+oA(o6.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(oA(r.x1.x)+" "+oA(r.x1.y)+" m"),a.push(oA(r.x2.x)+" "+oA(r.x2.y)+" l"),a.push(oA(r.x4.x)+" "+oA(r.x4.y)+" m"),a.push(oA(r.x3.x)+" "+oA(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=oL(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+oA(o6.internal.getWidth(e))+" "+oA(o6.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};o6.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=o6.internal.getWidth(e),r=o6.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},o6.internal.getWidth=function(e){var t=0;return"object"===iq()(e)&&(t=oC(e.Rect[2])),t},o6.internal.getHeight=function(e){var t=0;return"object"===iq()(e)&&(t=oC(e.Rect[3])),t};var o8=ob.addField=function(e){if(oU(this,e),!(e instanceof oZ))throw Error("Invalid argument passed to jsPDF.addField.");return e.scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};function o7(e){return e.reduce(function(e,t,r){return e[t]=r,e},{})}ob.AcroFormChoiceField=oY,ob.AcroFormListBox=oK,ob.AcroFormComboBox=oX,ob.AcroFormEditBox=oJ,ob.AcroFormButton=oQ,ob.AcroFormPushButton=o0,ob.AcroFormRadioButton=o1,ob.AcroFormCheckBox=o5,ob.AcroFormTextField=o4,ob.AcroFormPasswordField=o3,ob.AcroFormAppearance=o6,ob.AcroForm={ChoiceField:oY,ListBox:oK,ComboBox:oX,EditBox:oJ,Button:oQ,PushButton:o0,RadioButton:o1,CheckBox:o5,TextField:o4,PasswordField:o3,Appearance:o6},ov.AcroForm={ChoiceField:oY,ListBox:oK,ComboBox:oX,EditBox:oJ,Button:oQ,PushButton:o0,RadioButton:o1,CheckBox:o5,TextField:o4,PasswordField:o3,Appearance:o6},ov.AcroForm,function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(e,a){var n,i,s,o,l,c=t;if("RGBA"===(a=a||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(N(e))for(l in r)for(s=r[l],n=0;n<s.length;n+=1){for(o=!0,i=0;i<s[n].length;i+=1)if(void 0!==s[n][i]&&s[n][i]!==e[i]){o=!1;break}if(!0===o){c=l;break}}else for(l in r)for(s=r[l],n=0;n<s.length;n+=1){for(o=!0,i=0;i<s[n].length;i+=1)if(void 0!==s[n][i]&&s[n][i]!==e.charCodeAt(i)){o=!1;break}if(!0===o){c=l;break}}return c===t&&a!==t&&(c=a),c},n=function e(t){for(var r=this.internal.write,a=this.internal.putStream,n=(0,this.internal.getFilters)();-1!==n.indexOf("FlateEncode");)n.splice(n.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var i=[];if(i.push({key:"Type",value:"/XObject"}),i.push({key:"Subtype",value:"/Image"}),i.push({key:"Width",value:t.width}),i.push({key:"Height",value:t.height}),t.colorSpace===g.INDEXED?i.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(i.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===g.DEVICE_CMYK&&i.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),i.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&i.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var s="",o=0,l=t.transparency.length;o<l;o++)s+=t.transparency[o]+" "+t.transparency[o]+" ";i.push({key:"Mask",value:"["+s+"]"})}void 0!==t.sMask&&i.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(a({data:t.data,additionalKeyValues:i,alreadyAppliedFilters:c,objectId:t.objectId}),r("endobj"),"sMask"in t&&void 0!==t.sMask){var d="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===g.INDEXED){var h=this.internal.newObject();a({data:A(new Uint8Array(t.palette)),objectId:h}),r("endobj")}},i=function(){var e=this.internal.collections.addImage_images;for(var t in e)n.call(this,e[t])},s=function(){var e,t=this.internal.collections.addImage_images,r=this.internal.write;for(var a in t)r("/I"+(e=t[a]).index,e.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var e=this.internal.collections.addImage_images;return o.call(this),e},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(t){return"function"==typeof e["process"+t.toUpperCase()]},u=function(e){return"object"===iq()(e)&&1===e.nodeType},h=function(t,r){if("IMG"===t.nodeName&&t.hasAttribute("src")){var a,n=""+t.getAttribute("src");if(0===n.indexOf("data:image/"))return s4(unescape(n).split("base64,").pop());var i=e.loadFile(n,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);switch(r){case"PNG":a="image/png";break;case"WEBP":a="image/webp";break;default:a="image/jpeg"}return s4(t.toDataURL(a,1).split("base64,").pop())}},m=function(e){var t=this.internal.collections.addImage_images;if(t){for(var r in t)if(e===t[r].alias)return t[r]}},p=function(e,t,r){return e||t||(e=-96,t=-96),e<0&&(e=-1*r.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*r.height*72/t/this.internal.scaleFactor),0===e&&(e=t*r.width/r.height),0===t&&(t=e*r.height/r.width),[e,t]},f=function(e,t,r,a,n,i){var s=p.call(this,r,a,n),o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=l.call(this);if(r=s[0],a=s[1],d[n.index]=n,i)var u=Math.cos(i*=Math.PI/180),h=Math.sin(i),m=function(e){return e.toFixed(4)},f=[m(u),m(h),m(-1*h),m(u),0,0,"cm"];this.internal.write("q"),i?(this.internal.write([1,"0","0",1,o(e),c(t+a),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([o(r),"0","0",o(a),"0","0","cm"].join(" "))):this.internal.write([o(r),"0","0",o(a),o(e),c(t+a),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write("1 0 0 -1 0 0 cm"),this.internal.write("/I"+n.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,r,a=0;if("string"==typeof e)for(r=e.length,t=0;t<r;t++)a=(a<<5)-a+e.charCodeAt(t)|0;else if(N(e))for(r=e.byteLength/2,t=0;t<r;t++)a=(a<<5)-a+e[t]|0;return a},v=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},b=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e||!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null},w=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return w()&&e instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(e){return w()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},j=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,r=new Uint8Array(t),a=0;a<t;a++)r[a]=e.charCodeAt(a);return r},A=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",r=N(e)?e:new Uint8Array(e),a=0;a<r.length;a+=8192)t+=String.fromCharCode.apply(null,r.subarray(a,a+8192));return t};e.addImage=function(){if("number"==typeof arguments[1]?(r=t,a=arguments[1],n=arguments[2],i=arguments[3],s=arguments[4],l=arguments[5],c=arguments[6],d=arguments[7]):(r=arguments[1],a=arguments[2],n=arguments[3],i=arguments[4],s=arguments[5],l=arguments[6],c=arguments[7],d=arguments[8]),"object"===iq()(e=arguments[0])&&!u(e)&&"imageData"in e){var e,r,a,n,i,s,l,c,d,h=e;e=h.imageData,r=h.format||r||t,a=h.x||a||0,n=h.y||n||0,i=h.w||h.width||i,s=h.h||h.height||s,l=h.alias||l,c=h.compression||c,d=h.rotation||h.angle||d}var m=this.internal.getFilters();if(void 0===c&&-1!==m.indexOf("FlateEncode")&&(c="SLOW"),isNaN(a)||isNaN(n))throw Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var p=S.call(this,e,r,l,c);return f.call(this,a,n,i,s,p,d),this};var S=function(r,n,i,s){if("string"==typeof r&&a(r)===t){var o,l,p,f,g,v=k(r=unescape(r),!1);(""!==v||void 0!==(v=e.loadFile(r,!0)))&&(r=v)}if(u(r)&&(r=h(r,n)),!d(n=a(r,n)))throw Error("addImage does not support files of type '"+n+"', please ensure that a plugin for '"+n+"' support is added.");if((null==(p=i)||0===p.length)&&(i="string"==typeof(f=r)||N(f)?y(f):N(f.data)?y(f.data):null),(o=m.call(this,i))||(w()&&(r instanceof Uint8Array||"RGBA"===n||(l=r,r=j(r))),o=this["process"+n.toUpperCase()](r,c.call(this),i,((g=s)&&"string"==typeof g&&(g=g.toUpperCase()),g in e.image_compression?g:x.NONE),l)),!o)throw Error("An unknown error occurred whilst processing the image.");return o},k=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var r,a,n="";if("string"==typeof e){a=null!=(r=b(e))?r:e;try{n=s4(a)}catch(e){if(t)throw v(a)?Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return n};e.getImageProperties=function(r){var n,i,s="";if(u(r)&&(r=h(r)),"string"==typeof r&&a(r)===t&&(""===(s=k(r,!1))&&(s=e.loadFile(r)||""),r=s),!d(i=a(r)))throw Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(!w()||r instanceof Uint8Array||(r=j(r)),!(n=this["process"+i.toUpperCase()](r)))throw Error("An unknown error occurred whilst processing the image");return n.fileType=i,n}}(ov.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};ov.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var r,a,n,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((r=l[d]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){r=l[u];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),x=r.title||"Note";p.content=n="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+h(g(r.contents))+")"+(" /Popup "+f.objId)+" 0 R"+(" /P "+o.objId)+" 0 R"+(" /T ("+h(g(x)))+") >>";var y=p.objId+" 0 R";n="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+y,r.open&&(n+=" /Open true"),f.content=n+=" >>",this.internal.write(p.objId,"0 R",f.objId,"0 R");break;case"freetext":a="/Rect ["+i(r.bounds.x)+" "+s(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var v=r.color||"#000000";n="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(r.contents))+")"+(" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v)+") /Border [0 0 0] >>",this.internal.write(n);break;case"link":if(r.options.name){var b=this.annotations._nameMap[r.options.name];r.options.pageNumber=b.page,r.options.top=b.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",n="",r.options.url)n="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(n="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":n+=" /Fit]";break;case"FitH":n+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,n+=" /FitV "+r.options.left+"]";break;default:var w=s(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),n+=" /XYZ "+r.options.left+" "+w+" "+r.options.zoom+"]"}""!=n&&(n+=" >>",this.internal.write(n))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,r,a,n){var i=this.internal.getCurrentPageInfo(),s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;i.pageContext.annotations.push({finalBounds:{x:s(e),y:o(t),w:s(e+r),h:o(t+a)},options:n,type:"link"})},e.textWithLink=function(e,t,r,a){var n,i,s=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;return void 0!==a.maxWidth?(i=a.maxWidth,n=Math.ceil(o*this.splitTextToSize(e,i).length)):(i=s,n=o),this.text(e,t,r,a),r+=.2*o,"center"===a.align&&(t-=s/2),"right"===a.align&&(t-=s),this.link(t,r-o,i,n,a),s},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(ov.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},s=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return s(e)&&n.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return s(e)&&i(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,a=r,n="",i=0;for(t=0;t<e.length;t+=1)void 0!==a[e.charCodeAt(t)]?(i++,"number"==typeof(a=a[e.charCodeAt(t)])&&(n+=String.fromCharCode(a),a=r,i=0),t===e.length-1&&(a=r,n+=e.charAt(t-(i-1)),t-=i-1,i=0)):(a=r,n+=e.charAt(t-i),t-=i,i=0);return n};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==a[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,r){return s(e)?!1===i(e)?-1:!c(e)||!s(t)&&!s(r)||!s(r)&&o(t)||o(e)&&!s(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&s(t)&&!o(t)&&s(r)&&c(r)?3:o(e)||!s(r)?1:2:-1},m=function(e){var r=0,a=0,n=0,i="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(r=0;r<c.length;r+=1){for(d.push(""),a=0;a<c[r].length;a+=1)i=c[r][a],o=c[r][a-1],l=c[r][a+1],s(i)?(n=h(i,o,l),d[r]+=-1!==n?String.fromCharCode(t[i.charCodeAt(0)][n]):i):d[r]+=i;d[r]=u(d[r])}return d.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,r=[];if(Array.isArray(t)){var a=0;for(r=[],a=0;a<t.length;a+=1)Array.isArray(t[a])?r.push([m(t[a][0]),t[a][1],t[a][2]]):r.push([m(t[a])]);e=r}else e=m(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(ov.API),ov.API.autoPrint=function(e){var t;return((e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(e){r=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(e){a=e}});var n={};Object.defineProperty(this,"style",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var r;if("2d"!==(e=e||"2d"))return null;for(r in t)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=t[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ov.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var r=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var a=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var n=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var i=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(e){s=e}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return a.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){a.call(this);var r=(t=t||{}).fontSize||this.getFontSize(),n=t.font||this.getFont(),i=t.scaleFactor||this.internal.scaleFactor,s=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)s<(l=this.getStringUnitWidth(e[u],{font:n})*r)&&(s=l);return 0!==s&&(o=e.length),{w:s/=i,h:Math.max((o*r*this.getLineHeightFactor()-r*(this.getLineHeightFactor()-1))/i,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){e=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var e,n=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==n.lineNumber&&(n.lineNumber===e.lineNumber?(e.x=(n.x||0)+(n.width||0),e.y=n.y||0):n.y+n.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=n.y+n.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===r?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,r,l,c,d){if(a.call(this),!l)throw Error("No data for PDF table.");var u,h,m,p,f=[],g=[],x=[],y={},v={},b=[],w=[],N=(d=d||{}).autoSize||!1,j=!1!==d.printHeaders,A=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,S=d.margins||Object.assign({width:this.getPageWidth()},t),k="number"==typeof d.padding?d.padding:3,C=d.headerBackgroundColor||"#c8c8c8",L=d.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=A,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=C,this.internal.__cell__.headerTextColor=L,this.setFontSize(A),null==c)g=f=Object.keys(l[0]),x=f.map(function(){return"left"});else if(Array.isArray(c)&&"object"===iq()(c[0]))for(f=c.map(function(e){return e.name}),g=c.map(function(e){return e.prompt||e.name||""}),x=c.map(function(e){return e.align||"left"}),u=0;u<c.length;u+=1)v[c[u].name]=c[u].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(g=f=c,x=f.map(function(){return"left"}));if(N||Array.isArray(c)&&"string"==typeof c[0])for(u=0;u<f.length;u+=1){for(y[p=f[u]]=l.map(function(e){return e[p]}),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(g[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=y[p],this.setFont(void 0,"normal"),m=0;m<h.length;m+=1)b.push(this.getTextDimensions(h[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);v[p]=Math.max.apply(null,b)+k+k,b=[]}if(j){var P={};for(u=0;u<f.length;u+=1)P[f[u]]={},P[f[u]].text=g[u],P[f[u]].align=x[u];var _=o.call(this,P,v);w=f.map(function(t){return new i(e,r,v[t],_,P[t].text,void 0,P[t].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var D=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(u=0;u<l.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:l[u]},this);var I=o.call(this,l[u],v);for(m=0;m<f.length;m+=1){var R=l[u][f[m]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:m,data:R},this),s.call(this,new i(e,r,v[f[m]],I,R,u+2,D[f[m]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=r,this};var o=function(e,t){var r=this.internal.__cell__.padding,a=this.internal.__cell__.table_font_size,n=this.internal.scaleFactor;return Object.keys(e).map(function(a){var n=e[a];return this.splitTextToSize(n.hasOwnProperty("text")?n.text:n,t[a]-r-r)},this).map(function(e){return this.getLineHeightFactor()*e.length*a/n+r+r},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){a.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw Error("Property tableHeaderRow does not exist.");if(r=!0,"function"==typeof this.internal.__cell__.headerFunction){var n,o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){n=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(n.y=this.internal.__cell__.margins.top||0,l.push(n)),n.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,n),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),r=!1}}(ov.API);var o9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},le=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],lt=o7(le),lr=[100,200,300,400,500,600,700,800,900],la=o7(lr);function ln(e){var t,r,a,n=e.family.replace(/"|'/g,"").toLowerCase(),i=o9[t=(t=e.style)||"normal"]?t:"normal",s=(r=e.weight)?"number"==typeof r?r>=100&&r<=900&&r%100==0?r:400:/^\d00$/.test(r)?parseInt(r):"bold"===r?700:400:400,o="number"==typeof lt[a=(a=e.stretch)||"normal"]?a:"normal";return{family:n,style:i,weight:s,stretch:o,src:e.src||[],ref:e.ref||{name:n,style:[o,i,s].join(" ")}}}function li(e,t,r,a){var n;for(n=r;n>=0&&n<t.length;n+=a)if(e[t[n]])return e[t[n]];for(n=r;n>=0&&n<t.length;n-=a)if(e[t[n]])return e[t[n]]}var ls={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lo={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ll(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function lc(e){return e.trimLeft()}var ld,lu,lh,lm=["times"];!function(e){var t,r,a,n,i,s,o,l,c,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new s,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new s,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}}),Object.defineProperty(this,"pdf",{get:function(){return e}});var t=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return t},set:function(e){t=!!e}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=!!e}});var a=0;Object.defineProperty(this,"posX",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}});var n=0;Object.defineProperty(this,"posY",{get:function(){return n},set:function(e){isNaN(e)||(n=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=[,,,,])[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var o=[];Object.defineProperty(this,"pageBreaks",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof d&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var l=[];Object.defineProperty(this,"ctxStack",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var u=null,m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(e){u=null,m=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var r=t[1];t[2];var a=t[3],n=t[4];t[5];var i=t[6],s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(n)[2];n="px"===s?Math.floor(parseFloat(n)*this.pdf.internal.scaleFactor):"em"===s?Math.floor(parseFloat(n)*this.pdf.getFontSize()):Math.floor(parseFloat(n)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(n);var o=function(e){var t,r,a=[],n=e.trim();if(""===n)return lm;if(n in lo)return[lo[n]];for(;""!==n;){switch(r=null,t=(n=lc(n)).charAt(0)){case'"':case"'":r=function(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}(n.substring(1),t);break;default:r=function(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}(n)}if(null===r||(a.push(r[0]),""!==(n=lc(r[1]))&&","!==n.charAt(0)))return lm;n=n.replace(/^,/,"")}return a}(i);if(this.fontFaces){var l=function(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",n=Object.assign({},ls,r.genericFontFamilies||{}),i=null,s=null,o=0;o<t.length;++o)if(n[(i=ln(t[o])).family]&&(i.family=n[i.family]),e.hasOwnProperty(i.family)){s=e[i.family];break}if(!(s=s||e[a]))throw Error("Could not find a font-family for the rule '"+ll(i)+"' and default family '"+a+"'.");if(s=function(e,t){if(t[e])return t[e];var r=lt[e],a=r<=lt.normal?-1:1,n=li(t,le,r,a);if(!n)throw Error("Could not find a matching font-stretch value for "+e);return n}(i.stretch,s),s=function(e,t){if(t[e])return t[e];for(var r=o9[e],a=0;a<r.length;++a)if(t[r[a]])return t[r[a]];throw Error("Could not find a matching font-style for "+e)}(i.style,s),!(s=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var r=li(t,lr,la[e],e<400?-1:1);if(!r)throw Error("Could not find a matching font-weight for value "+e);return r}(i.weight,s)))throw Error("Failed to resolve a font for the rule '"+ll(i)+"'.");return s}(function(e,t){if(null===u){var r,a;u=function(e){for(var t={},r=0;r<e.length;++r){var a=ln(e[r]),n=a.family,i=a.stretch,s=a.style,o=a.weight;t[n]=t[n]||{},t[n][i]=t[n][i]||{},t[n][i][s]=t[n][i][s]||{},t[n][i][s][o]=a}return t}((r=e.getFontList(),a=[],Object.keys(r).forEach(function(e){r[e].forEach(function(t){var r=null;switch(t){case"bold":r={family:e,weight:"bold"};break;case"italic":r={family:e,style:"italic"};break;case"bolditalic":r={family:e,weight:"bold",style:"italic"};break;case"":case"normal":r={family:e}}null!==r&&(r.ref={name:e,style:t},a.push(r))})}),a).concat(t))}return u}(this.pdf,this.fontFaces),o.map(function(e){return{family:e,stretch:"normal",weight:a,style:r}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===a||parseInt(a,10)>=700||"bold"===r)&&(c="bold"),"italic"===r&&(c+="italic"),0===c.length&&(c="normal");for(var d="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},m=0;m<o.length;m++){if(void 0!==this.pdf.internal.getFont(o[m],c,{noFallback:!0,disableWarning:!0})){d=o[m];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[m],"bold",{noFallback:!0,disableWarning:!0}))d=o[m],c="bold";else if(void 0!==this.pdf.internal.getFont(o[m],"normal",{noFallback:!0,disableWarning:!0})){d=o[m],c="normal";break}}if(""===d){for(var p=0;p<o.length;p++)if(h[o[p]]){d=h[o[p]];break}}d=""===d?"Times":d,this.pdf.setFont(d,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=!!e}})};u.prototype.setLineDash=function(e){this.lineDash=e},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){b.call(this,"fill",!1)},u.prototype.stroke=function(){b.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw sX.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.moveTo");var r=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"mt",x:r.x,y:r.y}),this.ctx.lastPoint=new s(e,t)},u.prototype.closePath=function(){var e=new s(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===iq()(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new s(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw sX.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.lineTo");var r=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"lt",x:r.x,y:r.y}),this.ctx.lastPoint=new s(r.x,r.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,r,a){if(isNaN(r)||isNaN(a)||isNaN(e)||isNaN(t))throw sX.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var n=this.ctx.transform.applyToPoint(new s(r,a)),i=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"qct",x1:i.x,y1:i.y,x:n.x,y:n.y}),this.ctx.lastPoint=new s(n.x,n.y)},u.prototype.bezierCurveTo=function(e,t,r,a,n,i){if(isNaN(n)||isNaN(i)||isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a))throw sX.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new s(n,i)),l=this.ctx.transform.applyToPoint(new s(e,t)),c=this.ctx.transform.applyToPoint(new s(r,a));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new s(o.x,o.y)},u.prototype.arc=function(e,t,r,a,n,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a)||isNaN(n))throw sX.error("jsPDF.context2d.arc: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.arc");if(i=!!i,!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new s(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new s(0,r)),c=this.ctx.transform.applyToPoint(new s(0,0));r=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(n-a)>=2*Math.PI&&(a=0,n=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:r,startAngle:a,endAngle:n,counterclockwise:i})},u.prototype.arcTo=function(e,t,r,a,n){throw Error("arcTo not implemented.")},u.prototype.rect=function(e,t,r,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a))throw sX.error("jsPDF.context2d.rect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+a),this.lineTo(e,t+a),this.lineTo(e,t),this.lineTo(e+r,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,r,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a))throw sX.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var n={};"butt"!==this.lineCap&&(n.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(n.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,r,a),this.fill(),n.hasOwnProperty("lineCap")&&(this.lineCap=n.lineCap),n.hasOwnProperty("lineJoin")&&(this.lineJoin=n.lineJoin)}},u.prototype.strokeRect=function(e,t,r,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a))throw sX.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,r,a),this.stroke())},u.prototype.clearRect=function(e,t,r,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a))throw sX.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,r,a))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var a=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=a}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw Error("toDataUrl not implemented.")};var h=function(e){var t,r,a,n;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,r=0,a=0,n=0;else{var i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==i)t=parseInt(i[1]),r=parseInt(i[2]),a=parseInt(i[3]),n=1;else if(null!==(i=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(i[1]),r=parseInt(i[2]),a=parseInt(i[3]),n=parseFloat(i[4]);else{if(n=1,"string"==typeof e&&"#"!==e.charAt(0)){var s=new s8(e);e=s.ok?s.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,r=e.substring(2,3),r+=r,a=e.substring(3,4),a+=a):(t=e.substring(1,3),r=e.substring(3,5),a=e.substring(5,7)),t=parseInt(t,16),r=parseInt(r,16),a=parseInt(a,16)}}return{r:t,g:r,b:a,a:n,style:e}},m=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return!!(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,r,a){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw sX.error("jsPDF.context2d.fillText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.fillText");if(a=isNaN(a)?void 0:a,!m.call(this)){var n=E(this.ctx.transform.rotation);L.call(this,{text:e,x:t,y:r,scale:this.ctx.transform.scaleX,angle:n,align:this.textAlign,maxWidth:a})}},u.prototype.strokeText=function(e,t,r,a){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw sX.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){a=isNaN(a)?void 0:a;var n=E(this.ctx.transform.rotation);L.call(this,{text:e,x:t,y:r,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:n,align:this.textAlign,maxWidth:a})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw sX.error("jsPDF.context2d.measureText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,r=this.pdf.internal.scaleFactor,a=t.internal.getFontSize(),n=t.getStringUnitWidth(e)*a/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:n*=Math.round(96*r/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw sX.error("jsPDF.context2d.scale: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.scale");var r=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(r)},u.prototype.rotate=function(e){if(isNaN(e))throw sX.error("jsPDF.context2d.rotate: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw sX.error("jsPDF.context2d.translate: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.translate");var r=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(r)},u.prototype.transform=function(e,t,r,a,n,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(a)||isNaN(n)||isNaN(i))throw sX.error("jsPDF.context2d.transform: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new l(e,t,r,a,n,i);this.ctx.transform=this.ctx.transform.multiply(s)},u.prototype.setTransform=function(e,t,r,a,n,i){e=isNaN(e)?1:e,t=isNaN(t)?0:t,r=isNaN(r)?0:r,a=isNaN(a)?1:a,n=isNaN(n)?0:n,i=isNaN(i)?0:i,this.ctx.transform=new l(e,t,r,a,n,i)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(e,t,r,a,n,i,s,c,d){var u=this.pdf.getImageProperties(e),h=1,m=1,p=1,x=1;void 0!==a&&void 0!==c&&(p=c/a,x=d/n,h=u.width/a*c/a,m=u.height/n*d/n),void 0===i&&(i=t,s=r,t=0,r=0),void 0!==a&&void 0===c&&(c=a,d=n),void 0===a&&void 0===c&&(c=u.width,d=u.height);for(var b,N=this.ctx.transform.decompose(),j=E(N.rotate.shx),A=new l,S=(A=(A=(A=A.multiply(N.translate)).multiply(N.skew)).multiply(N.scale)).applyToRectangle(new o(i-t*p,s-r*x,a*h,n*m)),k=g.call(this,S),C=[],L=0;L<k.length;L+=1)-1===C.indexOf(k[L])&&C.push(k[L]);if(v(C),this.autoPaging)for(var P=C[0],_=C[C.length-1],D=P;D<_+1;D++){this.pdf.setPage(D);var I=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],R=1===D?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===D?0:T+(D-2)*M;if(0!==this.ctx.clip_path.length){var O=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(b,this.posX+this.margin[3],-F+R+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=O}var B=JSON.parse(JSON.stringify(S));B=y([B],this.posX+this.margin[3],-F+R+this.ctx.prevPageLastElemOffset)[0];var q=(D>P||D<_)&&f.call(this);q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,M,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,j),q&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",S.x,S.y,S.w,S.h,null,null,j)};var g=function(e,t,r){var a=[];t=t||this.pdf.internal.pageSize.width,r=r||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var n=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":a.push(Math.floor((e.y+n)/r)+1);break;case"arc":a.push(Math.floor((e.y+n-e.radius)/r)+1),a.push(Math.floor((e.y+n+e.radius)/r)+1);break;case"qct":var i=T(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);a.push(Math.floor((i.y+n)/r)+1),a.push(Math.floor((i.y+i.h+n)/r)+1);break;case"bct":var s=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);a.push(Math.floor((s.y+n)/r)+1),a.push(Math.floor((s.y+s.h+n)/r)+1);break;case"rect":a.push(Math.floor((e.y+n)/r)+1),a.push(Math.floor((e.y+e.h+n)/r)+1)}for(var o=0;o<a.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<a[o];)x.call(this);return a},x=function(){var e=this.fillStyle,t=this.strokeStyle,r=this.font,a=this.lineCap,n=this.lineWidth,i=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=r,this.lineCap=a,this.lineWidth=n,this.lineJoin=i},y=function(e,t,r){for(var a=0;a<e.length;a++)switch(e[a].type){case"bct":e[a].x2+=t,e[a].y2+=r;case"qct":e[a].x1+=t,e[a].y1+=r;default:e[a].x+=t,e[a].y+=r}return e},v=function(e){return e.sort(function(e,t){return e-t})},b=function(e,t){for(var r,a,n=this.fillStyle,i=this.strokeStyle,s=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],m=0;m<u.length;m++)if(void 0!==u[m].x)for(var p=g.call(this,u[m]),b=0;b<p.length;b+=1)-1===h.indexOf(p[b])&&h.push(p[b]);for(var N=0;N<h.length;N++)for(;this.pdf.internal.getNumberOfPages()<h[N];)x.call(this);if(v(h),this.autoPaging)for(var j=h[0],A=h[h.length-1],S=j;S<A+1;S++){this.pdf.setPage(S),this.fillStyle=n,this.strokeStyle=i,this.lineCap=s,this.lineWidth=l,this.lineJoin=c;var k=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],C=1===S?this.posY+this.margin[0]:this.margin[0],L=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_=1===S?0:L+(S-2)*P;if(0!==this.ctx.clip_path.length){var D=this.path;r=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(r,this.posX+this.margin[3],-_+C+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=D}if(a=JSON.parse(JSON.stringify(d)),this.path=y(a,this.posX+this.margin[3],-_+C+this.ctx.prevPageLastElemOffset),!1===t||0===S){var I=(S>j||S<A)&&f.call(this);I&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,P,null).clip().discardPath()),w.call(this,e,t),I&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=o;this.path=d},w=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!m.call(this))){for(var r,a,n=[],i=this.path,s=0;s<i.length;s++){var o=i[s];switch(o.type){case"begin":n.push({begin:!0});break;case"close":n.push({close:!0});break;case"mt":n.push({start:o,deltas:[],abs:[]});break;case"lt":var l=n.length;if(i[s-1]&&!isNaN(i[s-1].x)&&(r=[o.x-i[s-1].x,o.y-i[s-1].y],l>0)){for(;l>=0;l--)if(!0!==n[l-1].close&&!0!==n[l-1].begin){n[l-1].deltas.push(r),n[l-1].abs.push(o);break}}break;case"bct":r=[o.x1-i[s-1].x,o.y1-i[s-1].y,o.x2-i[s-1].x,o.y2-i[s-1].y,o.x-i[s-1].x,o.y-i[s-1].y],n[n.length-1].deltas.push(r);break;case"qct":var c=i[s-1].x+2/3*(o.x1-i[s-1].x),d=i[s-1].y+2/3*(o.y1-i[s-1].y),u=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),f=o.x,g=o.y;r=[c-i[s-1].x,d-i[s-1].y,u-i[s-1].x,h-i[s-1].y,f-i[s-1].x,g-i[s-1].y],n[n.length-1].deltas.push(r);break;case"arc":n.push({deltas:[],abs:[],arc:!0}),Array.isArray(n[n.length-1].abs)&&n[n.length-1].abs.push(o)}}a=t?null:"stroke"===e?"stroke":"fill";for(var x=!1,y=0;y<n.length;y++)if(n[y].arc)for(var v=n[y].abs,b=0;b<v.length;b++){var w=v[b];"arc"===w.type?A.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,t,!x):P.call(this,w.x,w.y),x=!0}else if(!0===n[y].close)this.pdf.internal.out("h"),x=!1;else if(!0!==n[y].begin){var N=n[y].start.x,j=n[y].start.y;_.call(this,n[y].deltas,N,j),x=!0}a&&S.call(this,a),t&&k.call(this)}},N=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,r=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-r;case"top":return e+t-r;case"hanging":return e+t-2*r;case"middle":return e+t/2-r;default:return e}},j=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(e,t,r,a,n,i,s,o,l){for(var c=I.call(this,r,a,n,i),d=0;d<c.length;d++){var u=c[d];0===d&&(l?C.call(this,u.x1+e,u.y1+t):P.call(this,u.x1+e,u.y1+t)),D.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?k.call(this):S.call(this,s)},S=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(e,t){this.pdf.internal.out(r(e)+" "+a(t)+" m")},L=function(e){switch(e.align){case"right":case"end":d="right";break;case"center":d="center";break;default:d="left"}var t=this.pdf.getTextDimensions(e.text),r=N.call(this,e.y),a=j.call(this,r)-t.h,n=this.ctx.transform.applyToPoint(new s(e.x,r)),i=this.ctx.transform.decompose(),c=new l;c=(c=(c=c.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var d,u,h,m,p=this.ctx.transform.applyToRectangle(new o(e.x,r,t.w,t.h)),x=c.applyToRectangle(new o(e.x,a,t.w,t.h)),b=g.call(this,x),A=[],S=0;S<b.length;S+=1)-1===A.indexOf(b[S])&&A.push(b[S]);if(v(A),this.autoPaging)for(var k=A[0],C=A[A.length-1],L=k;L<C+1;L++){this.pdf.setPage(L);var P=1===L?this.posY+this.margin[0]:this.margin[0],_=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],D=this.pdf.internal.pageSize.height-this.margin[2],I=D-this.margin[0],R=this.pdf.internal.pageSize.width-this.margin[1],E=R-this.margin[3],T=1===L?0:_+(L-2)*I;if(0!==this.ctx.clip_path.length){var M=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(u,this.posX+this.margin[3],-1*T+P),w.call(this,"fill",!0),this.path=M}var F=y([JSON.parse(JSON.stringify(x))],this.posX+this.margin[3],-T+P+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale);var O="text"!==this.autoPaging;if(O||F.y+F.h<=D){if(O||F.y>=P&&F.x<=R){var B=O?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||R-F.x)[0],q=y([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-T+P+this.ctx.prevPageLastElemOffset)[0],z=O&&(L>k||L<C)&&f.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],E,I,null).clip().discardPath()),this.pdf.text(B,q.x,q.y,{angle:e.angle,align:d,renderingMode:e.renderingMode}),z&&this.pdf.restoreGraphicsState()}}else F.y<D&&(this.ctx.prevPageLastElemOffset+=D-F.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale),this.pdf.text(e.text,n.x+this.posX,n.y+this.posY,{angle:e.angle,align:d,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)},P=function(e,t,n,i){n=n||0,i=i||0,this.pdf.internal.out(r(e+n)+" "+a(t+i)+" l")},_=function(e,t,r){return this.pdf.lines(e,t,r,null,null)},D=function(e,r,a,s,o,l,c,d){this.pdf.internal.out([t(n(a+e)),t(i(s+r)),t(n(o+e)),t(i(l+r)),t(n(c+e)),t(i(d+r)),"c"].join(" "))},I=function(e,t,r,a){for(var n=2*Math.PI,i=Math.PI/2;t>r;)t-=n;var s=Math.abs(r-t);s<n&&a&&(s=n-s);for(var o=[],l=a?-1:1,c=t;s>1e-5;){var d=c+l*Math.min(s,i);o.push(R.call(this,e,c,d)),s-=Math.abs(d-c),c=d}return o},R=function(e,t,r){var a=(r-t)/2,n=e*Math.cos(a),i=e*Math.sin(a),s=-i,o=n*n+s*s,l=o+n*n+s*i,c=4/3*(Math.sqrt(2*o*l)-l)/(n*i-s*n),d=n-c*s,u=s+c*n,h=-u,m=a+t,p=Math.cos(m),f=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:d*p-u*f,y2:d*f+u*p,x3:d*p-h*f,y3:d*f+h*p,x4:e*Math.cos(r),y4:e*Math.sin(r)}},E=function(e){return 180*e/Math.PI},T=function(e,t,r,a,n,i){var s=e+.5*(r-e),l=t+.5*(a-t),c=n+.5*(r-n),d=i+.5*(a-i),u=Math.min(e,n,s,c),h=Math.min(t,i,l,d);return new o(u,h,Math.max(e,n,s,c)-u,Math.max(t,i,l,d)-h)},M=function(e,t,r,a,n,i,s,l){var c,d,u,h,m,p,f,g,x,y,v,b,w,N,j=r-e,A=a-t,S=n-r,k=i-a,C=s-n,L=l-i;for(d=0;d<41;d++)x=(f=(u=e+(c=d/40)*j)+c*((m=r+c*S)-u))+c*(m+c*(n+c*C-m)-f),y=(g=(h=t+c*A)+c*((p=a+c*k)-h))+c*(p+c*(i+c*L-p)-g),0==d?(v=x,b=y,w=x,N=y):(v=Math.min(v,x),b=Math.min(b,y),w=Math.max(w,x),N=Math.max(N,y));return new o(Math.round(v),Math.round(b),Math.round(w-v),Math.round(N-b))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==e&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=e)}}}(ov.API),function(e){var t=function(e){var t,r,a,n,i,s,o,l,c,d;for(/[^\x00-\xFF]/.test(e),r=[],a=0,n=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;n>a;a+=4)0!==(i=(e.charCodeAt(a)<<24)+(e.charCodeAt(a+1)<<16)+(e.charCodeAt(a+2)<<8)+e.charCodeAt(a+3))?(s=(i=((i=((i=((i=(i-(d=i%85))/85)-(c=i%85))/85)-(l=i%85))/85)-(o=i%85))/85)%85,r.push(s+33,o+33,l+33,c+33,d+33)):r.push(122);return function(e,t){for(var r=t;r>0;r--)e.pop()}(r,t.length),String.fromCharCode.apply(String,r)+"~>"},r=function(e){var t,r,a,n,i,s=String,o="length",l="charCodeAt",c="slice",d="replace";for(e[c](-2),e=e[c](0,-2)[d](/\s/g,"")[d]("z","!!!!!"),a=[],n=0,i=(e+=t="uuuuu"[c](e[o]%5||5))[o];i>n;n+=5)r=0x31c84b1*(e[l](n)-33)+614125*(e[l](n+1)-33)+7225*(e[l](n+2)-33)+85*(e[l](n+3)-33)+(e[l](n+4)-33),a.push(255&r>>24,255&r>>16,255&r>>8,255&r);return function(e,t){for(var r=t;r>0;r--)e.pop()}(a,t[o]),s.fromCharCode.apply(s,a)},a=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var r="",a=0;a<e.length;a+=2)r+=String.fromCharCode("0x"+(e[a]+e[a+1]));return r},n=function(e){for(var t=new Uint8Array(e.length),r=e.length;r--;)t[r]=e.charCodeAt(r);return e=(t=s$(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,i){var s=0,o=e||"",l=[];for("string"==typeof(i=i||[])&&(i=[i]),s=0;s<i.length;s+=1)switch(i[s]){case"ASCII85Decode":case"/ASCII85Decode":o=r(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=a(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=n(o),l.push("/FlateDecode");break;default:throw Error('The filter: "'+i[s]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(ov.API),function(e){e.loadFile=function(e,t,r){var a=t,n=r;a=!1!==a,n="function"==typeof n?n:function(){};var i=void 0;try{i=function(e,t,r){var a=new XMLHttpRequest,n=0,i=function(e){var t=e.length,r=[],a=String.fromCharCode;for(n=0;n<t;n+=1)r.push(a(255&e.charCodeAt(n)));return r.join("")};if(a.open("GET",e,!t),a.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(a.onload=function(){200===a.status?r(i(this.responseText)):r(void 0)}),a.send(null),t&&200===a.status)return i(a.responseText)}(e,a,n)}catch(e){}return i},e.loadImageFile=e.loadFile}(ov.API),function(e){function t(){return(sY.html2canvas?Promise.resolve(sY.html2canvas):r.e(664).then(r.bind(r,22664))).catch(function(e){return Promise.reject(Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function a(){return(sY.DOMPurify?Promise.resolve(sY.DOMPurify):r.e(722).then(r.bind(r,67722))).catch(function(e){return Promise.reject(Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var n=function(e){var t=iq()(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var r=document.createElement(e);for(var a in t.className&&(r.className=t.className),t.innerHTML&&t.dompurify&&(r.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)r.style[a]=t.style[a];return r},s=function e(t){var r=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),a=e.convert(Promise.resolve(),r);return(a=a.setProgress(1,e,1,[e])).set(t)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(e,t){return e.__proto__=t||s.prototype,e},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(n(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(a).then(function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},s.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,r){for(var a=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),n=t.firstChild;n;n=n.nextSibling)!0!==r&&1===n.nodeType&&"SCRIPT"===n.nodeName||a.appendChild(e(n,r));return 1===t.nodeType&&("CANVAS"===t.nodeName?(a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(a.value=t.value),a.addEventListener("load",function(){a.scrollTop=t.scrollTop,a.scrollLeft=t.scrollLeft},!0)),a}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,r=this.opt.fontFaces,a=Object.assign({async:!0,allowTaint:!0,scale:"number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete a.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=r,r)for(var n=0;n<r.length;++n){var i=r[n],s=i.src.find(function(e){return"truetype"===e.format});s&&t.addFont(s.url,i.ref.name,i.ref.style)}return a.windowHeight=a.windowHeight||0,a.windowHeight=0==a.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight,t.context2d.save(!0),e(this.prop.container,a)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(e,t,r){return"img"===(r=r||"pdf").toLowerCase()||"image"===r.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},s.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},s.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},s.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(e){if("object"!==n(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in s.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},s.prototype.get=function(e,t){return this.then(function(){var r=e in s.template.prop?this.prop[e]:this.opt[e];return t?t(r):r})},s.prototype.setMargin=function(e){return this.then(function(){switch(n(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},s.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||ov.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},s.prototype.setProgress=function(e,t,r,a){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=r&&(this.progress.n=r),null!=a&&(this.progress.stack=a),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(e,t,r,a){return this.setProgress(e?this.progress.val+e:null,t||null,r?this.progress.n+r:null,a?this.progress.stack.concat(a):null)},s.prototype.then=function(e,t){var r=this;return this.thenCore(e,t,function(e,t){return r.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return r.updateProgress(null,e),t}).then(e,t).then(function(e){return r.updateProgress(1),e})})},s.prototype.thenCore=function(e,t,r){r=r||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var a=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),n=r.call(a,e,t);return s.convert(n,this.__proto__)},s.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},s.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},s.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return s.convert(t,this)},s.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},s.prototype.error=function(e){return this.then(function(){throw Error(e)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ov.getPageSize=function(e,t,r){if("object"===iq()(e)){var a=e;e=a.orientation,t=a.unit||t,r=a.format||r}t=t||"mm",r=r||"a4",e=(""+(e||"P")).toLowerCase();var n,i=(""+r).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":n=1;break;case"mm":n=72/25.4;break;case"cm":n=72/2.54;break;case"in":n=72;break;case"px":n=.75;break;case"pc":case"em":n=12;break;case"ex":n=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(s.hasOwnProperty(i))l=s[i][1]/n,c=s[i][0]/n;else try{l=r[1],c=r[0]}catch(e){throw Error("Invalid format: "+r)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:n,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(ln):null;var r=new s(t);return t.worker?r:r.from(e).doCallback()}}(ov.API),ov.API.addJS=function(e){return lh=e,this.internal.events.subscribe("postPutResources",function(){ld=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ld+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),lu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+lh+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==ld&&void 0!==lu&&this.internal.out("/Names <</JavaScript "+ld+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=this.outline.render().split(/\r\n/),a=0;a<r.length;a++){var n=r[a],i=e.exec(n);if(null!=i){var s=i[1];this.internal.newObjectDeferredBegin(s,!1)}this.internal.write(n)}if(this.outline.createNamedDestinations){var o=this.internal.pages.length,l=[];for(a=0;a<o;a++){var c=this.internal.newObject();l.push(c);var d=this.internal.getPageInfo(a+1);this.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var u=this.internal.newObject();for(this.internal.write("<< /Names [ "),a=0;a<l.length;a++)this.internal.write("(page_"+(a+1)+")"+l[a]+" 0 R");this.internal.write(" ] >>","endobj"),t=this.internal.newObject(),this.internal.write("<< /Dests "+u+" 0 R"),this.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,r){var a={title:t,options:r,children:[]};return null==e&&(e=this.root),e.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var r=0;r<t.children.length;r++)this.genIds_r(t.children[r])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<t.children.length;a++){var n=t.children[a];this.objStart(n),this.line("/Title "+this.makeString(n.title)),this.line("/Parent "+this.makeRef(t)),a>0&&this.line("/Prev "+this.makeRef(t.children[a-1])),a<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[a+1])),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1])));var i=this.count=this.count_r({count:0},n);if(i>0&&this.line("/Count "+i),n.options&&n.options.pageNumber){var s=e.internal.getPageInfo(n.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var r=0;r<t.children.length;r++)e.count++,this.count_r(e,t.children[r]);return e.count}}])}(ov.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,r,a,n,i,s){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=i||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var r,a=256*e.charCodeAt(4)+e.charCodeAt(5),n=e.length,i={width:0,height:0,numcomponents:1},s=4;s<n;s+=2){if(s+=a,-1!==t.indexOf(e.charCodeAt(s+1))){r=256*e.charCodeAt(s+5)+e.charCodeAt(s+6),i={width:256*e.charCodeAt(s+7)+e.charCodeAt(s+8),height:r,numcomponents:e.charCodeAt(s+9)};break}a=256*e.charCodeAt(s+2)+e.charCodeAt(s+3)}return i}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:s,bitsPerComponent:8,filter:l,index:r,alias:a}}return c}}(ov.API);var lp,lf,lg,lx,ly,lv=function(){function e(e){var t,r,a,n,i,s,o,l,c,d,u,h,m,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(t=this.readUInt32(),c=(function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},i=this.readUInt16(),n=this.readUInt16()||100,s.delay=1e3*i/n,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=s?s.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(a=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>a)throw Error("More transparent colors than palette size");if((d=a-this.transparency.indexed.length)>0)for(m=0;0<=d?m<d:m>d;0<=d?++m:--m)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(u=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,u.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,u.slice(o+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,r=this.colors+ +!!this.hasAlphaChannel,this.pixelBitlength=this.bits*r,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file")}}e.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},e.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.decodePixels=function(e){var t,r,a=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*a),i=0,s=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function o(t,r,o,l){var c,d,u,h,m,p,f,g,x,y,v,b,w,N,j,A,S,k,C,L,P,_=Math.ceil((s.width-t)/o),D=Math.ceil((s.height-r)/l),I=s.width==_&&s.height==D;for(N=a*_,b=I?n:new Uint8Array(N*D),p=e.length,w=0,d=0;w<D&&i<p;){switch(e[i++]){case 0:for(h=S=0;S<N;h=S+=1)b[d++]=e[i++];break;case 1:for(h=k=0;k<N;h=k+=1)c=e[i++],m=h<a?0:b[d-a],b[d++]=(c+m)%256;break;case 2:for(h=C=0;C<N;h=C+=1)c=e[i++],u=(h-h%a)/a,j=w&&b[(w-1)*N+u*a+h%a],b[d++]=(j+c)%256;break;case 3:for(h=L=0;L<N;h=L+=1)c=e[i++],u=(h-h%a)/a,m=h<a?0:b[d-a],j=w&&b[(w-1)*N+u*a+h%a],b[d++]=(c+Math.floor((m+j)/2))%256;break;case 4:for(h=P=0;P<N;h=P+=1)c=e[i++],u=(h-h%a)/a,m=h<a?0:b[d-a],0===w?j=A=0:(j=b[(w-1)*N+u*a+h%a],A=u&&b[(w-1)*N+(u-1)*a+h%a]),g=Math.abs((f=m+j-A)-m),y=Math.abs(f-j),v=Math.abs(f-A),x=g<=y&&g<=v?m:y<=v?j:A,b[d++]=(c+x)%256;break;default:throw Error("Invalid filter algorithm: "+e[i-1])}if(!I){var R=((r+w*l)*s.width+t)*a,E=w*N;for(h=0;h<_;h+=1){for(var T=0;T<a;T+=1)n[R++]=b[E++];R+=(o-1)*a}}w++}}return e=sl((t=e).subarray(sq(t,void 0),-4),{i:2},r&&r.out,r&&r.dictionary),1==s.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},e.prototype.decodePalette=function(){var e,t,r,a,n,i,s,o,l;for(r=this.palette,n=new Uint8Array(((i=this.transparency.indexed||[]).length||0)+r.length),a=0,e=0,t=s=0,o=r.length;s<o;t=s+=3)n[a++]=r[t],n[a++]=r[t+1],n[a++]=r[t+2],n[a++]=null!=(l=i[e++])?l:255;return n},e.prototype.copyToImageData=function(e,t){var r,a,n,i,s,o,l,c,d,u,h;if(a=this.colors,d=null,r=this.hasAlphaChannel,this.palette.length&&(d=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),a=4,r=!0),c=(n=e.data||e).length,s=d||t,i=o=0,1===a)for(;i<c;)l=d?4*t[i/4]:o,u=s[l++],n[i++]=u,n[i++]=u,n[i++]=u,n[i++]=r?s[l++]:255,o=l;else for(;i<c;)l=d?4*t[i/4]:o,n[i++]=s[l++],n[i++]=s[l++],n[i++]=s[l++],n[i++]=r?s[l++]:255,o=l},e.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var t,r,a,n=function(){if("[object Window]"===Object.prototype.toString.call(sY)){try{a=(r=sY.document.createElement("canvas")).getContext("2d")}catch(e){return!1}return!0}return!1};return n(),t=function(e){var t;if(!0===n())return a.width=e.width,a.height=e.height,a.clearRect(0,0,e.width,e.height),a.putImageData(e,0,0),(t=new Image).src=r.toDataURL(),t;throw Error("This method requires a Browser with Canvas-capability.")},e.prototype.decodeFrames=function(e){var r,a,n,i,s,o,l,c;if(this.animation){for(c=[],a=s=0,o=(l=this.animation.frames).length;s<o;a=++s)r=l[a],n=e.createImageData(r.width,r.height),i=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(n,i),r.imageData=n,c.push(r.image=t(n));return c}},e.prototype.renderFrame=function(e,t){var r,a,n;return r=(a=this.animation.frames)[t],n=a[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?e.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&e.putImageData(n.imageData,n.xOffset,n.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},e.prototype.animate=function(e){var t,r,a,n,i,s,o=this;return r=0,n=(s=this.animation).numFrames,a=s.frames,i=s.numPlays,(t=function(){var s,l;if(l=a[s=r++%n],o.renderFrame(e,s),n>1&&r/n<i)return o.animation._timeout=setTimeout(t,l.delay)})()},e.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},e.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},e}();function lb(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,n=e[t++],i=1<<(7&n)+1;e[t++],e[t++];var s=null,o=null;n>>7&&(s=t,o=i,t+=3*i);var l=!0,c=[],d=0,u=null,h=0,m=null;for(this.width=r,this.height=a;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((f=e[t++])>=0))throw Error("Invalid block size");if(0===f)break;t+=f}break;case 249:if(4!==e[t++]||0!==e[t+4])throw Error("Invalid graphics extension block.");var p=e[t++];d=e[t++]|e[t++]<<8,u=e[t++],0==(1&p)&&(u=null),h=p>>2&7,t++;break;case 254:for(;;){if(!((f=e[t++])>=0))throw Error("Invalid block size");if(0===f)break;t+=f}break;default:throw Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var f,g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++],w=b>>6&1,N=1<<(7&b)+1,j=s,A=o,S=!1;b>>7&&(S=!0,j=t,A=N,t+=3*N);var k=t;for(t++;;){if(!((f=e[t++])>=0))throw Error("Invalid block size");if(0===f)break;t+=f}c.push({x:g,y:x,width:y,height:v,has_local_palette:S,palette_offset:j,palette_size:A,data_offset:k,data_length:t-k,transparent_index:u,interlaced:!!w,delay:d,disposal:h});break;case 59:l=!1;break;default:throw Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return m},this.frameInfo=function(e){if(e<0||e>=c.length)throw Error("Frame index out of range.");return c[e]},this.decodeAndBlitFrameBGRA=function(t,a){var n=this.frameInfo(t),i=n.width*n.height,s=new Uint8Array(i);lw(e,n.data_offset,s,i);var o=n.palette_offset,l=n.transparent_index;null===l&&(l=256);var c=n.width,d=r-c,u=c,h=4*(n.y*r+n.x),m=4*((n.y+n.height)*r+n.x),p=h,f=4*d;!0===n.interlaced&&(f+=4*r*7);for(var g=8,x=0,y=s.length;x<y;++x){var v=s[x];if(0===u&&(u=c,(p+=f)>=m&&(f=4*d+4*r*(g-1),p=h+(c+d)*(g<<1),g>>=1)),v===l)p+=4;else{var b=e[o+3*v],w=e[o+3*v+1],N=e[o+3*v+2];a[p++]=N,a[p++]=w,a[p++]=b,a[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,a){var n=this.frameInfo(t),i=n.width*n.height,s=new Uint8Array(i);lw(e,n.data_offset,s,i);var o=n.palette_offset,l=n.transparent_index;null===l&&(l=256);var c=n.width,d=r-c,u=c,h=4*(n.y*r+n.x),m=4*((n.y+n.height)*r+n.x),p=h,f=4*d;!0===n.interlaced&&(f+=4*r*7);for(var g=8,x=0,y=s.length;x<y;++x){var v=s[x];if(0===u&&(u=c,(p+=f)>=m&&(f=4*d+4*r*(g-1),p=h+(c+d)*(g<<1),g>>=1)),v===l)p+=4;else{var b=e[o+3*v],w=e[o+3*v+1],N=e[o+3*v+2];a[p++]=b,a[p++]=w,a[p++]=N,a[p++]=255}--u}}}function lw(e,t,r,a){for(var n=e[t++],i=1<<n,s=i+1,o=s+1,l=n+1,c=(1<<l)-1,d=0,u=0,h=0,m=e[t++],p=new Int32Array(4096),f=null;;){for(;d<16&&0!==m;)u|=e[t++]<<d,d+=8,1===m?m=e[t++]:--m;if(d<l)break;var g=u&c;if(u>>=l,d-=l,g!==i){if(g===s)break;for(var x=g<o?g:f,y=0,v=x;v>i;)v=p[v]>>8,++y;var b=v;if(h+y+ +(x!==g)>a)return void sX.log("Warning, gif stream longer than expected.");r[h++]=b;var w=h+=y;for(x!==g&&(r[h++]=b),v=x;y--;)v=p[v],r[--w]=255&v,v>>=8;null!==f&&o<4096&&(p[o++]=f<<8|b,o>=c+1&&l<12&&(++l,c=c<<1|1)),f=g}else o=s+1,c=(1<<(l=n+1))-1,f=null}return h!==a&&sX.log("Warning, gif stream shorter than expected."),r}function lN(e){var t,r,a,n,i,s=Math.floor,o=Array(64),l=Array(64),c=Array(64),d=Array(64),u=Array(65535),h=Array(65535),m=Array(64),p=Array(64),f=[],g=0,x=7,y=Array(64),v=Array(64),b=Array(64),w=Array(256),N=Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(e,t){for(var r=0,a=0,n=[],i=1;i<=16;i++){for(var s=1;s<=e[i];s++)n[t[a]]=[],n[t[a]][0]=r,n[t[a]][1]=i,a++,r++;r*=2}return n}function R(e){for(var t=e[0],r=e[1]-1;r>=0;)t&1<<r&&(g|=1<<x),r--,--x<0&&(255==g?(E(255),E(0)):E(g),x=7,g=0)}function E(e){f.push(e)}function T(e){E(e>>8&255),E(255&e)}function M(e,t,r,a,n){for(var i,s=n[0],o=n[240],l=function(e,t){var r,a,n,i,s,o,l,c,d,u,h=0;for(d=0;d<8;++d){r=e[h],a=e[h+1],n=e[h+2],i=e[h+3],s=e[h+4],o=e[h+5],l=e[h+6];var p=r+(c=e[h+7]),f=r-c,g=a+l,x=a-l,y=n+o,v=n-o,b=i+s,w=i-s,N=p+b,j=p-b,A=g+y,S=g-y;e[h]=N+A,e[h+4]=N-A;var k=.707106781*(S+j);e[h+2]=j+k,e[h+6]=j-k;var C=.382683433*((N=w+v)-(S=x+f)),L=.5411961*N+C,P=1.306562965*S+C,_=.707106781*(A=v+x),D=f+_,I=f-_;e[h+5]=I+L,e[h+3]=I-L,e[h+1]=D+P,e[h+7]=D-P,h+=8}for(h=0,d=0;d<8;++d){r=e[h],a=e[h+8],n=e[h+16],i=e[h+24],s=e[h+32],o=e[h+40],l=e[h+48];var R=r+(c=e[h+56]),E=r-c,T=a+l,M=a-l,F=n+o,O=n-o,B=i+s,q=i-s,z=R+B,U=R-B,$=T+F,H=T-F;e[h]=z+$,e[h+32]=z-$;var W=.707106781*(H+U);e[h+16]=U+W,e[h+48]=U-W;var V=.382683433*((z=q+O)-(H=M+E)),G=.5411961*z+V,Z=1.306562965*H+V,Y=.707106781*($=O+M),K=E+Y,X=E-Y;e[h+40]=X+G,e[h+24]=X-G,e[h+8]=K+Z,e[h+56]=K-Z,h++}for(d=0;d<64;++d)u=e[d]*t[d],m[d]=u>0?u+.5|0:u-.5|0;return m}(e,t),c=0;c<64;++c)p[j[c]]=l[c];var d=p[0]-r;r=p[0],0==d?R(a[0]):(R(a[h[i=32767+d]]),R(u[i]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return R(s),r;for(var g,x=1;x<=f;){for(var y=x;0==p[x]&&x<=f;)++x;var v=x-y;if(v>=16){g=v>>4;for(var b=1;b<=g;++b)R(o);v&=15}R(n[(v<<4)+h[i=32767+p[x]]]),R(u[i]),x++}return 63!=f&&R(s),r}function F(e){i!=(e=Math.min(Math.max(e,1),100))&&(!function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var a=s((t[r]*e+50)/100);a=Math.min(Math.max(a,1),255),o[j[r]]=a}for(var n=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var u=s((n[i]*e+50)/100);u=Math.min(Math.max(u,1),255),l[j[i]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],m=0,p=0;p<8;p++)for(var f=0;f<8;f++)c[m]=1/(o[j[m]]*h[p]*h[f]*8),d[m]=1/(l[j[m]]*h[p]*h[f]*8),m++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),i=e)}this.encode=function(e,i){i&&F(i),f=[],g=0,x=7,T(65496),T(65504),T(16),E(74),E(70),E(73),E(70),E(0),E(1),E(1),E(0),T(1),T(1),E(0),E(0),function(){T(65499),T(132),E(0);for(var e=0;e<64;e++)E(o[e]);E(1);for(var t=0;t<64;t++)E(l[t])}(),m=e.width,p=e.height,T(65472),T(17),E(8),T(p),T(m),E(3),E(1),E(17),E(0),E(2),E(17),E(1),E(3),E(17),E(1),function(){T(65476),T(418),E(0);for(var e=0;e<16;e++)E(A[e+1]);for(var t=0;t<=11;t++)E(S[t]);E(16);for(var r=0;r<16;r++)E(k[r+1]);for(var a=0;a<=161;a++)E(C[a]);E(1);for(var n=0;n<16;n++)E(L[n+1]);for(var i=0;i<=11;i++)E(P[i]);E(17);for(var s=0;s<16;s++)E(_[s+1]);for(var o=0;o<=161;o++)E(D[o])}(),T(65498),T(12),E(3),E(1),E(0),E(2),E(17),E(3),E(17),E(0),E(63),E(0);var s=0,u=0,h=0;g=0,x=7,this.encode.displayName="_encode_";for(var m,p,w,j,I,O,B,q,z,U,$,H=e.data,W=e.width,V=e.height,G=4*W,Z=0;Z<V;){for(w=0;w<G;){for(B=G*Z+w,z=-1,U=0,$=0;$<64;$++)q=B+(U=$>>3)*G+(z=4*(7&$)),Z+U>=V&&(q-=G*(Z+1+U-V)),w+z>=G&&(q-=w+z-G+4),j=H[q++],I=H[q++],O=H[q++],y[$]=(N[j]+N[I+256|0]+N[O+512|0]>>16)-128,v[$]=(N[j+768|0]+N[I+1024|0]+N[O+1280|0]>>16)-128,b[$]=(N[j+1280|0]+N[I+1536|0]+N[O+1792|0]>>16)-128;s=M(y,c,s,t,a),u=M(v,d,u,r,n),h=M(b,d,h,r,n),w+=32}Z+=8}if(x>=0){var Y=[];Y[1]=x+1,Y[0]=(1<<x+1)-1,R(Y)}return T(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=I(A,S),r=I(L,P),a=I(k,C),n=I(_,D),function(){for(var e=1,t=2,r=1;r<=15;r++){for(var a=e;a<t;a++)h[32767+a]=r,u[32767+a]=[],u[32767+a][1]=r,u[32767+a][0]=a;for(var n=-(t-1);n<=-e;n++)h[32767+n]=r,u[32767+n]=[],u[32767+n][1]=r,u[32767+n][0]=t-1+n;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)N[e]=19595*e,N[e+256|0]=38470*e,N[e+512|0]=7471*e+32768,N[e+768|0]=-11059*e,N[e+1024|0]=-21709*e,N[e+1280|0]=32768*e+8421375,N[e+1536|0]=-27439*e,N[e+1792|0]=-5329*e}(),F(e)}function lj(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function lA(e){function t(e){if(!e)throw Error("assert :P")}function r(e,t,r){for(var a=0;4>a;a++)if(e[t+a]!=r.charCodeAt(a))return!0;return!1}function a(e,t,r,a,n){for(var i=0;i<n;i++)e[t+i]=r[a+i]}function n(e,t,r,a){for(var n=0;n<a;n++)e[t+n]=r}function i(e){return new Int32Array(e)}function s(e,t){for(var r=[],a=0;a<e;a++)r.push(new t);return r}function o(e,t){var r=[];return function e(r,a,n){for(var i=n[a],s=0;s<i&&(r.push(n.length>a+1?[]:new t),!(n.length<a+1));s++)e(r[s],a+1,n)}(r,0,e),r}var l=function(){var e=this;function l(e,t){for(var r=1<<t-1>>>0;e&r;)r>>>=1;return r?(e&r-1)+r:e}function c(e,r,a,n,i){t(!(n%a));do e[r+(n-=a)]=i;while(0<n)}function d(e,r,a,n,s){if(t(2328>=s),512>=s)var o=i(512);else if(null==(o=i(s)))return 0;return function(e,r,a,n,s,o){var d,h,m=r,p=1<<a,f=i(16),g=i(16);for(t(0!=s),t(null!=n),t(null!=e),t(0<a),h=0;h<s;++h){if(15<n[h])return 0;++f[n[h]]}if(f[0]==s)return 0;for(g[1]=0,d=1;15>d;++d){if(f[d]>1<<d)return 0;g[d+1]=g[d]+f[d]}for(h=0;h<s;++h)d=n[h],0<n[h]&&(o[g[d]++]=h);if(1==g[15])return(n=new u).g=0,n.value=o[0],c(e,m,1,p,n),p;var x,y=-1,v=p-1,b=0,w=1,N=1,j=1<<a;for(h=0,d=1,s=2;d<=a;++d,s<<=1){if(w+=N<<=1,0>(N-=f[d]))return 0;for(;0<f[d];--f[d])(n=new u).g=d,n.value=o[h++],c(e,m+b,s,j,n),b=l(b,d)}for(d=a+1,s=2;15>=d;++d,s<<=1){if(w+=N<<=1,0>(N-=f[d]))return 0;for(;0<f[d];--f[d]){if(n=new u,(b&v)!=y){for(m+=j,x=1<<(y=d)-a;15>y&&!(0>=(x-=f[y]));)++y,x<<=1;p+=j=1<<(x=y-a),e[r+(y=b&v)].g=x+a,e[r+y].value=m-r-y}n.g=d-a,n.value=o[h++],c(e,m+(b>>a),s,j,n),b=l(b,d)}}return w!=2*g[15]-1?0:p}(e,r,a,n,s,o)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function m(){this.G=s(5,u),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(rg,h)}function p(e,r,a,n){t(null!=e),t(null!=r),t(0x80000000>n),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=r,e.pa=a,e.Jd=r,e.Yc=a+n,e.Zc=4<=n?a+n-4+1:a,k(e)}function f(e,t){for(var r=0;0<t--;)r|=L(e,128)<<t;return r}function g(e,t){var r=f(e,t);return C(e)?-r:r}function x(e,r,a,n){var i,s=0;for(t(null!=e),t(null!=r),t(0xfffffff8>n),e.Sb=n,e.Ra=0,e.u=0,e.h=0,4<n&&(n=4),i=0;i<n;++i)s+=r[a+i]<<8*i;e.Ra=s,e.bb=n,e.oa=r,e.pa=a}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<rv-8>>>0,++e.bb,e.u-=8;j(e)&&(e.h=1,e.u=0)}function v(e,r){if(t(0<=r),!e.h&&r<=ry){var a=N(e)&rx[r];return e.u+=r,y(e),a}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function N(e){return e.Ra>>>(e.u&rv-1)>>>0}function j(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>rv}function A(e,t){e.u=t,e.h=j(e)}function S(e){e.u>=rb&&(t(e.u>=rb),y(e))}function k(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function C(e){return f(e,1)}function L(e,t){var r=e.Ca;0>e.b&&k(e);var a=e.b,n=r*t>>>8,i=(e.I>>>a>n)+0;for(i?(r-=n,e.I-=n+1<<a>>>0):r=n+1,a=r,n=0;256<=a;)n+=8,a>>=8;return a=7^n+rw[a],e.b-=a,e.Ca=(r<<a)-1,i}function P(e,t,r){e[t+0]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=(0|r)&255}function _(e,t){return 0|e[t+0]|e[t+1]<<8}function D(e,t){return _(e,t)|e[t+2]<<16}function I(e,t){return _(e,t)|_(e,t+2)<<16}function R(e,r){return t(null!=e),t(0<r),e.X=i(1<<r),null==e.X?0:(e.Mb=32-r,e.Xa=r,1)}function E(e,r){t(null!=e),t(null!=r),t(e.Xa==r.Xa),a(r.X,0,e.X,0,1<<r.Xa)}function T(){this.X=[],this.Xa=this.Mb=0}function M(e,r,a,n){t(null!=a),t(null!=n);var i=a[0],s=n[0];return 0==i&&(i=(e*s+r/2)/r),0==s&&(s=(r*i+e/2)/e),0>=i||0>=s?0:(a[0]=i,n[0]=s,1)}function F(e,t){return e+(1<<t)-1>>>t}function O(e,t){return((0xff00ff00&e)+(0xff00ff00&t)>>>0&0xff00ff00)+((0xff00ff&e)+(0xff00ff&t)>>>0&0xff00ff)>>>0}function B(t,r){e[r]=function(r,a,n,i,s,o,l){var c;for(c=0;c<s;++c){var d=e[t](o[l+c-1],n,i+c);o[l+c]=O(r[a+c],d)}}}function q(){this.ud=this.hd=this.jd=0}function z(e,t){return((0xfefefefe&(e^t))>>>1)+(e&t)>>>0}function U(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function $(e,t){return U(e+(e-t+.5>>1))}function H(e,t,r){return Math.abs(t-r)-Math.abs(e-r)}function W(e,t,r,a,n,i,s){for(a=i[s-1],r=0;r<n;++r)i[s+r]=a=O(e[t+r],a)}function V(e,t,r,a,n){var i;for(i=0;i<r;++i){var s=e[t+i],o=s>>8&255,l=0xff00ff&(l=(l=0xff00ff&s)+((o<<16)+o));a[n+i]=(0xff00ff00&s)+l>>>0}}function G(e,t){t.jd=(0|e)&255,t.hd=e>>8&255,t.ud=e>>16&255}function Z(e,t,r,a,n,i){var s;for(s=0;s<a;++s){var o=t[r+s],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),n[i+s]=(0xff00ff00&o)+(d<<16)+c}}function Y(t,r,a,n,i){e[r]=function(e,t,r,a,s,o,l,c,d){for(a=l;a<c;++a)for(l=0;l<d;++l)s[o++]=i(r[n(e[t++])])},e[t]=function(t,r,s,o,l,c,d){var u=8>>t.b,h=t.Ea,m=t.K[0],p=t.w;if(8>u)for(t=(1<<t.b)-1,p=(1<<u)-1;r<s;++r){var f,g=0;for(f=0;f<h;++f)f&t||(g=n(o[l++])),c[d++]=i(m[g&p]),g>>=u}else e["VP8LMapColor"+a](o,l,m,p,c,d,r,s,h)}}function K(e,t,r,a,n){for(r=t+r;t<r;){var i=e[t++];a[n++]=i>>16&255,a[n++]=i>>8&255,a[n++]=(0|i)&255}}function X(e,t,r,a,n){for(r=t+r;t<r;){var i=e[t++];a[n++]=i>>16&255,a[n++]=i>>8&255,a[n++]=(0|i)&255,a[n++]=i>>24&255}}function J(e,t,r,a,n){for(r=t+r;t<r;){var i=(s=e[t++])>>16&240|s>>12&15,s=(0|s)&240|s>>28&15;a[n++]=i,a[n++]=s}}function Q(e,t,r,a,n){for(r=t+r;t<r;){var i=(s=e[t++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;a[n++]=i,a[n++]=s}}function ee(e,t,r,a,n){for(r=t+r;t<r;){var i=e[t++];a[n++]=(0|i)&255,a[n++]=i>>8&255,a[n++]=i>>16&255}}function et(e,t,r,n,i,s){if(0==s)for(r=t+r;t<r;)P(n,((s=e[t++])[0]>>24|s[1]>>8&65280|s[2]<<8&0xff0000|s[3]<<24)>>>0),i+=32;else a(n,i,e,t,r)}function er(t,r){e[r][0]=e[t+"0"],e[r][1]=e[t+"1"],e[r][2]=e[t+"2"],e[r][3]=e[t+"3"],e[r][4]=e[t+"4"],e[r][5]=e[t+"5"],e[r][6]=e[t+"6"],e[r][7]=e[t+"7"],e[r][8]=e[t+"8"],e[r][9]=e[t+"9"],e[r][10]=e[t+"10"],e[r][11]=e[t+"11"],e[r][12]=e[t+"12"],e[r][13]=e[t+"13"],e[r][14]=e[t+"0"],e[r][15]=e[t+"0"]}function ea(e){return e==ad||e==au||e==ah||e==am}function en(){this.eb=[],this.size=this.A=this.fb=0}function ei(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function es(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new en,this.f.kb=new ei,this.sd=null}function eo(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function el(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ec(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ed(e,t){var r=e.T,n=t.ba.f.RGBA,i=n.eb,s=n.fb+e.ka*n.A,o=aO[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,m=e.W,p=t.cc,f=t.dc,g=t.Mc,x=t.Nc,y=e.ka,v=e.ka+e.T,b=e.U,w=b+1>>1;for(0==y?o(l,c,null,null,d,u,h,m,d,u,h,m,i,s,null,null,b):(o(t.ec,t.fc,l,c,p,f,g,x,d,u,h,m,i,s-n.A,i,s,b),++r);y+2<v;y+=2)p=d,f=u,g=h,x=m,u+=e.Rc,m+=e.Rc,s+=2*n.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,f,g,x,d,u,h,m,i,s-n.A,i,s,b);return c+=e.fa,e.j+v<e.o?(a(t.ec,t.fc,l,c,b),a(t.cc,t.dc,d,u,w),a(t.Mc,t.Nc,h,m,w),r--):1&v||o(l,c,null,null,d,u,h,m,d,u,h,m,i,s+n.A,null,null,b),r}function eu(e,r,a){var n=e.F,i=[e.J];if(null!=n){var s=e.U,o=r.ba.S,l=o==ao||o==ah;r=r.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,i[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=r.eb;d=r.fb+d*r.A,e=r2(n,i[0],e.width,s,c,u,d+3*!l,r.A),t(a==c),e&&ea(o)&&r0(u,d,l,s,c,r.A)}return 0}function eh(e){var t=e.ma,r=t.ba.S,a=11>r,n=r==an||r==as||r==ao||r==al||12==r||ea(r);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!rm(t.Oa,e,n?11:12))return 0;if(n&&ea(r)&&t6(),e.da)alert("todo:use_scaling");else{if(a){if(t.Ib=ec,e.Kb){if(r=e.U+1>>1,t.memory=i(e.U+2*r),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+r,t.Ib=ed,t6()}}else alert("todo:EmitYUV");n&&(t.Jb=eu,a&&t4())}if(a&&!aJ){for(e=0;256>e;++e)aQ[e]=89858*(e-128)+aG>>aV,a2[e]=-22014*(e-128)+aG,a1[e]=-45773*(e-128),a0[e]=113618*(e-128)+aG>>aV;for(e=aZ;e<aY;++e)t=76283*(e-16)+aG>>aV,a5[e-aZ]=eW(t,255),a4[e-aZ]=eW(t+8>>4,15);aJ=1}return 1}function em(e){var r=e.ma,a=e.U,n=e.T;return t(!(1&e.ka)),0>=a||0>=n?0:(a=r.Ib(e,r),null!=r.Jb&&r.Jb(e,r,a),r.Dc+=a,1)}function ep(e){e.ma.memory=null}function ef(e,t,r,a){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,r[0]=v(e,14)+1,a[0]=v(e,1),0!=v(e,3)?0:!e.h)}function eg(e,t){if(4>e)return e+1;var r=e-2>>1;return(2+(1&e)<<r)+v(t,r)+1}function ex(e,t){var r;return 120<t?t-120:1<=(r=((r=av[t-1])>>4)*e+(8-(15&r)))?r:1}function ey(e,t,r){var a=N(r),n=e[t+=255&a].g-8;return 0<n&&(A(r,r.u+8),a=N(r),t+=e[t].value,t+=a&(1<<n)-1),A(r,r.u+e[t].g),e[t].value}function ev(e,r,a){return a.g+=e.g,a.value+=e.value<<r>>>0,t(8>=a.g),e.g}function eb(e,r,a){var n=e.xc;return t((r=0==n?0:e.vc[e.md*(a>>n)+(r>>n)])<e.Wb),e.Ya[r]}function ew(e,r,n,i){var s=e.ab,o=e.c*r,l=e.C;r=l+r;var c=n,d=i;for(i=e.Ta,n=e.Ua;0<s--;){var u=e.gc[s],h=l,m=r,p=c,f=d,g=(d=i,c=n,u.Ea);switch(t(h<m),t(m<=u.nc),u.hc){case 2:rA(p,f,(m-h)*g,d,c);break;case 0:var x=h,y=m,v=d,b=c,w=(k=u).Ea;0==x&&(rN(p,f,null,null,1,v,b),W(p,f+1,0,0,w-1,v,b+1),f+=w,b+=w,++x);for(var N=1<<k.b,j=N-1,A=F(w,k.b),S=k.K,k=k.w+(x>>k.b)*A;x<y;){var C=S,L=k,P=1;for(rj(p,f,v,b-w,1,v,b);P<w;){var _=(P&~j)+N;_>w&&(_=w),(0,rP[C[L++]>>8&15])(p,f+ +P,v,b+P-w,_-P,v,b+P),P=_}f+=w,b+=w,++x&j||(k+=A)}m!=u.nc&&a(d,c-g,d,c+(m-h-1)*g,g);break;case 1:for(g=p,y=f,w=(p=u.Ea)-(b=p&~(v=(f=1<<u.b)-1)),x=F(p,u.b),N=u.K,u=u.w+(h>>u.b)*x;h<m;){for(j=N,A=u,S=new q,k=y+b,C=y+p;y<k;)G(j[A++],S),r_(S,g,y,f,d,c),y+=f,c+=f;y<C&&(G(j[A++],S),r_(S,g,y,w,d,c),y+=w,c+=w),++h&v||(u+=x)}break;case 3:if(p==d&&f==c&&0<u.b){for(y=d,p=g=c+(m-h)*g-(b=(m-h)*F(u.Ea,u.b)),f=d,v=c,x=[],b=(w=b)-1;0<=b;--b)x[b]=f[v+b];for(b=w-1;0<=b;--b)y[p+b]=x[b];rS(u,h,m,d,g,d,c)}else rS(u,h,m,p,f,d,c)}c=i,d=n}d!=n&&a(i,n,c,d,o)}function eN(e,r){var a=e.V,n=e.Ba+e.c*e.C,i=r-e.C;if(t(r<=e.l.o),t(16>=i),0<i){var s=e.l,o=e.Ta,l=e.Ua,c=s.width;if(ew(e,i,a,n),i=l=[l],t((a=e.C)<(n=r)),t(s.v<s.va),n>s.o&&(n=s.o),a<s.j){var d=s.j-a;a=s.j,i[0]+=d*c}if(a>=n?a=0:(i[0]+=4*s.v,s.ka=a-s.j,s.U=s.va-s.v,s.T=n-a,a=1),a){if(l=l[0],11>(a=e.ca).S){var u=a.f.RGBA,h=(n=a.S,i=s.U,s=s.T,d=u.eb,u.A),m=s;for(u=u.fb+e.Ma*u.A;0<m--;){var p=l,f=i,g=d,x=u;switch(n){case aa:rD(o,p,f,g,x);break;case an:rI(o,p,f,g,x);break;case ad:rI(o,p,f,g,x),r0(g,x,0,f,1,0);break;case ai:rT(o,p,f,g,x);break;case as:et(o,p,f,g,x,1);break;case au:et(o,p,f,g,x,1),r0(g,x,0,f,1,0);break;case ao:et(o,p,f,g,x,0);break;case ah:et(o,p,f,g,x,0),r0(g,x,1,f,1,0);break;case al:rR(o,p,f,g,x);break;case am:rR(o,p,f,g,x),r1(g,x,f,1,0);break;case ac:rE(o,p,f,g,x);break;default:t(0)}l+=c,u+=h}e.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=a.height)}}e.C=r,t(e.C<=e.i)}function ej(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var r=e.Ya[t].G,a=e.Ya[t].H;if(0<r[1][a[1]+0].g||0<r[2][a[2]+0].g||0<r[3][a[3]+0].g)return 0}return 1}function eA(e,r,a,n,i,s){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=aF[e.Z]);r<a;++r)aF[e.Z](o,l,n,i,n,i,s),o=n,l=i,i+=s;e.qd=o,e.rd=l}}function eS(e,r){var a=e.l.ma,n=0==a.Z||1==a.Z?e.l.j:e.C;if(n=e.C<n?n:e.C,t(r<=e.l.o),r>n){var i=e.l.width,s=a.ca,o=a.tb+i*n,l=e.V,c=e.Ba+e.c*n,d=e.gc;t(1==e.ab),t(3==d[0].hc),rC(d[0],n,r,l,c,s,o),eA(a,n,r,s,o,i)}e.C=e.Ma=r}function ek(e,r,a,n,i,s,o){var l=e.$/n,c=e.$%n,d=e.m,u=e.s,h=a+e.$,m=h;i=a+n*i;var p=a+n*s,f=280+u.ua,g=e.Pb?l:0x1000000,x=0<u.ua?u.Wa:null,y=u.wc,v=h<p?eb(u,c,l):null;t(e.C<s),t(p<=i);var b=!1;e:for(;;){for(;b||h<p;){var w=0;if(l>=g){var k=h-a;t((g=e).Pb),g.wd=g.m,g.xd=k,0<g.s.ua&&E(g.s.Wa,g.s.vb),g=l+aw}if(c&y||(v=eb(u,c,l)),t(null!=v),v.Qb&&(r[h]=v.qb,b=!0),!b)if(S(d),v.jc){w=d,k=r;var C=h,L=v.pd[N(w)&rg-1];t(v.jc),256>L.g?(A(w,w.u+L.g),k[C]=L.value,w=0):(A(w,w.u+L.g-256),t(256<=L.value),w=L.value),0==w&&(b=!0)}else w=ey(v.G[0],v.H[0],d);if(d.h)break;if(b||256>w){if(!b)if(v.nd)r[h]=(v.qb|w<<8)>>>0;else{if(S(d),b=ey(v.G[1],v.H[1],d),S(d),k=ey(v.G[2],v.H[2],d),C=ey(v.G[3],v.H[3],d),d.h)break;r[h]=(C<<24|b<<16|w<<8|k)>>>0}if(b=!1,++h,++c>=n&&(c=0,++l,null!=o&&l<=s&&!(l%16)&&o(e,l),null!=x))for(;m<h;)w=r[m++],x.X[(0x1e35a7bd*w|0)>>>x.Mb]=w}else if(280>w){if(w=eg(w-256,d),k=ey(v.G[4],v.H[4],d),S(d),k=ex(n,k=eg(k,d)),d.h)break;if(h-a<k||i-h<w)break e;for(C=0;C<w;++C)r[h+C]=r[h+C-k];for(h+=w,c+=w;c>=n;)c-=n,++l,null!=o&&l<=s&&!(l%16)&&o(e,l);if(t(h<=i),c&y&&(v=eb(u,c,l)),null!=x)for(;m<h;)w=r[m++],x.X[(0x1e35a7bd*w|0)>>>x.Mb]=w}else{if(!(w<f))break e;for(b=w-280,t(null!=x);m<h;)w=r[m++],x.X[(0x1e35a7bd*w|0)>>>x.Mb]=w;w=h,t(!(b>>>(k=x).Xa)),r[w]=k.X[b],b=!0}b||t(d.h==j(d))}if(e.Pb&&d.h&&h<i)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&E(e.s.vb,e.s.Wa);else{if(d.h)break;null!=o&&o(e,l>s?s:l),e.a=0,e.$=h-a}return 1}return e.a=3,0}function eC(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var r=e.Wa;null!=r&&(r.X=null),e.vb=null,t(null!=e)}function eL(){var t=new tY;return null==t?null:(t.a=0,t.xb=aM,er("Predictor","VP8LPredictors"),er("Predictor","VP8LPredictors_C"),er("PredictorAdd","VP8LPredictorsAdd"),er("PredictorAdd","VP8LPredictorsAdd_C"),rA=V,r_=Z,rD=K,rI=X,rR=J,rE=Q,rT=ee,e.VP8LMapColor32b=rk,e.VP8LMapColor8b=rL,t)}function eP(e,r,a,o,l){for(var c=1,h=[e],p=[r],f=o.m,g=o.s,x=null,y=0;;){if(a)for(;c&&v(f,1);){var b=h,w=p,j=1,k=o.m,C=o.gc[o.ab],L=v(k,2);if(o.Oc&1<<L)c=0;else{switch(o.Oc|=1<<L,C.hc=L,C.Ea=b[0],C.nc=w[0],C.K=[null],++o.ab,t(4>=o.ab),L){case 0:case 1:C.b=v(k,3)+2,j=eP(F(C.Ea,C.b),F(C.nc,C.b),0,o,C.K),C.K=C.K[0];break;case 3:var P,_=v(k,8)+1,D=16<_?0:4<_?1:2<_?2:3;if(b[0]=F(C.Ea,D),C.b=D,P=j=eP(_,1,0,o,C.K)){var I,E=1<<(8>>C.b),T=i(E);if(null==T)P=0;else{var M=C.K[0],B=C.w;for(T[0]=C.K[0][0],I=1;I<+_;++I)T[I]=O(M[B+I],T[I-1]);for(;I<4*E;++I)T[I]=0;C.K[0]=null,C.K[0]=T,P=1}}j=P;break;case 2:break;default:t(0)}c=j}}if(h=h[0],p=p[0],c&&v(f,1)&&!(c=1<=(y=v(f,4))&&11>=y)){o.a=3;break}if(q=c)t:{var q,z,U,$,H=h,W=p,V=y,G=o.m,Z=o.s,Y=[null],K=1,X=0,J=ab[V];r:for(;;){if(a&&v(G,1)){var Q=v(G,3)+2,ee=F(H,Q),et=F(W,Q),er=ee*et;if(!eP(ee,et,0,o,Y))break;for(Y=Y[0],Z.xc=Q,z=0;z<er;++z){var ea=Y[z]>>8&65535;Y[z]=ea,ea>=K&&(K=ea+1)}}if(G.h)break;for(U=0;5>U;++U){var en=ag[U];!U&&0<V&&(en+=1<<V),X<en&&(X=en)}var ei=s(K*J,u),es=K,eo=s(es,m);if(null==eo)var el=null;else t(65536>=es),el=eo;var ec=i(X);if(null==el||null==ec||null==ei){o.a=1;break}for(z=$=0;z<K;++z){var ed,eu=el[z],eh=eu.G,em=eu.H,ep=0,ef=1,eg=0;for(U=0;5>U;++U){en=ag[U],eh[U]=ei,em[U]=$,!U&&0<V&&(en+=1<<V);a:{var ex,ey=en,eb=$,ew=0,eN=o.m,ej=v(eN,1);if(n(ec,0,0,ey),ej){var eA=v(eN,1)+1,eS=v(eN,1),eL=v(eN,0==eS?1:8);ec[eL]=1,2==eA&&(ec[eL=v(eN,8)]=1);var e_=1}else{var eD=i(19),eI=v(eN,4)+4;if(19<eI){o.a=3;var eR=0;break a}for(ex=0;ex<eI;++ex)eD[ay[ex]]=v(eN,3);var eE=void 0,eT=void 0,eM=0,eF=o.m,eO=8,eB=s(128,u);n:for(;d(eB,0,7,eD,19);){if(v(eF,1)){var eq=2+2*v(eF,3);if((eE=2+v(eF,eq))>ey)break}else eE=ey;for(eT=0;eT<ey&&eE--;){S(eF);var ez=eB[0+(127&N(eF))];A(eF,eF.u+ez.g);var eU=ez.value;if(16>eU)ec[eT++]=eU,0!=eU&&(eO=eU);else{var e$=16==eU,eH=eU-16,eW=af[eH],eV=v(eF,ap[eH])+eW;if(eT+eV>ey)break n;for(var eG=e$?eO:0;0<eV--;)ec[eT++]=eG}}eM=1;break}eM||(o.a=3),e_=eM}(e_=e_&&!eN.h)&&(ew=d(ei,eb,8,ec,ey)),e_&&0!=ew?eR=ew:(o.a=3,eR=0)}if(0==eR)break r;if(ef&&1==ax[U]&&(ef=0==ei[$].g),ep+=ei[$].g,$+=eR,3>=U){var eZ,eY=ec[0];for(eZ=1;eZ<en;++eZ)ec[eZ]>eY&&(eY=ec[eZ]);eg+=eY}}if(eu.nd=ef,eu.Qb=0,ef&&(eu.qb=(eh[3][em[3]+0].value<<24|eh[1][em[1]+0].value<<16|eh[2][em[2]+0].value)>>>0,0==ep&&256>eh[0][em[0]+0].value&&(eu.Qb=1,eu.qb+=eh[0][em[0]+0].value<<8)),eu.jc=!eu.Qb&&6>eg,eu.jc)for(ed=0;ed<rg;++ed){var eK=ed,eX=eu.pd[eK],eJ=eu.G[0][eu.H[0]+eK];256<=eJ.value?(eX.g=eJ.g+256,eX.value=eJ.value):(eX.g=0,eX.value=0,eK>>=ev(eJ,8,eX),eK>>=ev(eu.G[1][eu.H[1]+eK],16,eX),eK>>=ev(eu.G[2][eu.H[2]+eK],0,eX),ev(eu.G[3][eu.H[3]+eK],24,eX))}}Z.vc=Y,Z.Wb=K,Z.Ya=el,Z.yc=ei,q=1;break t}q=0}if(!(c=q)){o.a=3;break}if(0<y){if(g.ua=1<<y,!R(g.Wa,y)){o.a=1,c=0;break}}else g.ua=0;var eQ=h,e0=p,e1=o.s,e2=e1.xc;if(o.c=eQ,o.i=e0,e1.md=F(eQ,e2),e1.wc=0==e2?-1:(1<<e2)-1,a){o.xb=aT;break}if(null==(x=i(h*p))){o.a=1,c=0;break}c=(c=ek(o,x,0,h,p,p,null))&&!f.h;break}return c?(null!=l?l[0]=x:(t(null==x),t(a)),o.$=0,a||eC(g)):eC(g),c}function e_(e,r){var a=e.c*e.i;return t(e.c<=r),e.V=i(a+r+16*r),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+a+r,1)}function eD(e,r){var a=e.C,n=r-a,i=e.V,s=e.Ba+e.c*a;for(t(r<=e.l.o);0<n;){var o=16<n?16:n,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,h=l.tb+c*a,m=e.Ta,p=e.Ua;ew(e,o,i,s),r5(m,p,u,h,d),eA(l,a,a+o,u,h,c),n-=o,i+=o*e.c,a+=o}t(a==r),e.C=e.Ma=r}function eI(){this.ub=this.yd=this.td=this.Rb=0}function eR(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function eE(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function eT(){var e;this.Yb=(function e(t,r,a){for(var n=a[r],i=0;i<n&&(t.push(a.length>r+1?[]:0),!(a.length<r+1));i++)e(t[i],r+1,a)}(e=[],0,[3,11]),e)}function eM(){this.jb=i(3),this.Wc=o([4,8],eT),this.Xc=o([4,17],eT)}function eF(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function eO(){this.ld=this.La=this.dd=this.tc=0}function eB(){this.Na=this.la=0}function eq(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ez(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function eU(){this.uc=this.M=this.Nb=0,this.wa=Array(new eO),this.Y=0,this.ya=Array(new ez),this.aa=0,this.l=new eV}function e$(){this.y=i(16),this.f=i(8),this.ea=i(8)}function eH(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new eI,this.Kc=new eR,this.ed=new eF,this.Qa=new eE,this.Ic=this.$c=this.Aa=0,this.D=new eU,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,b),this.ia=0,this.pb=s(4,eq),this.Pa=new eM,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new e$),this.Hd=0,this.rb=Array(new eB),this.sb=0,this.wa=Array(new eO),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ez),this.L=this.aa=0,this.gd=o([4,2],eO),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function eW(e,t){return 0>e?0:e>t?t:e}function eV(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function eG(){var e=new eH;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,aA||(aA=eX)),e}function eZ(e,t,r){return 0==e.a&&(e.a=t,e.sc=r,e.cb=0),0}function eY(e,t,r){return 3<=r&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function eK(e,r){if(null==e)return 0;if(e.a=0,e.sc="OK",null==r)return eZ(e,2,"null VP8Io passed to VP8GetHeaders()");var a=r.data,i=r.w,s=r.ha;if(4>s)return eZ(e,7,"Truncated header.");var o=a[i+0]|a[i+1]<<8|a[i+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return eZ(e,3,"Incorrect keyframe parameters.");if(!l.yd)return eZ(e,4,"Frame not displayable.");i+=3,s-=3;var c=e.Kc;if(l.Rb){if(7>s)return eZ(e,7,"cannot parse picture header");if(!eY(a,i,s))return eZ(e,3,"Bad code word");c.c=16383&(a[i+4]<<8|a[i+3]),c.Td=a[i+4]>>6,c.i=16383&(a[i+6]<<8|a[i+5]),c.Ud=a[i+6]>>6,i+=7,s-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,r.width=c.c,r.height=c.i,r.Da=0,r.j=0,r.v=0,r.va=r.width,r.o=r.height,r.da=0,r.ib=r.width,r.hb=r.height,r.U=r.width,r.T=r.height,n((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,n(o.Zb,0,0,o.Zb.length),n(o.Lb,0,0,o.Lb)}if(l.ub>s)return eZ(e,7,"bad partition length");p(o=e.m,a,i,l.ub),i+=l.ub,s-=l.ub,l.Rb&&(c.Ld=C(o),c.Kd=C(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=C(o),c.Cb){if(c.Bb=C(o),C(o)){for(c.Fb=C(o),d=0;4>d;++d)c.Zb[d]=C(o)?g(o,7):0;for(d=0;4>d;++d)c.Lb[d]=C(o)?g(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=C(o)?f(o,8):255}else c.Bb=0;if(o.Ka)return eZ(e,3,"cannot parse segment header");if((c=e.ed).zd=C(o),c.Tb=f(o,6),c.wb=f(o,3),c.Pc=C(o),c.Pc&&C(o)){for(u=0;4>u;++u)C(o)&&(c.vd[u]=g(o,6));for(u=0;4>u;++u)C(o)&&(c.od[u]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return eZ(e,3,"cannot parse filter header");var h=s;if(s=d=i,i=d+h,c=h,e.Xb=(1<<f(e.m,2))-1,h<3*(u=e.Xb))a=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var m=a[s+0]|a[s+1]<<8|a[s+2]<<16;m>c&&(m=c),p(e.Jc[+h],a,d,m),d+=m,c-=m,s+=3}p(e.Jc[+u],a,d,c),a=d<i?0:5}if(0!=a)return eZ(e,a,"cannot parse partitions");for(a=f(d=e.m,7),s=C(d)?g(d,4):0,i=C(d)?g(d,4):0,c=C(d)?g(d,4):0,u=C(d)?g(d,4):0,d=C(d)?g(d,4):0,h=e.Qa,m=0;4>m;++m){if(h.Cb){var x=h.Zb[m];h.Fb||(x+=a)}else{if(0<m){e.pb[m]=e.pb[0];continue}x=a}var y=e.pb[m];y.Sc[0]=aN[eW(x+s,127)],y.Sc[1]=aj[eW(x+0,127)],y.Eb[0]=2*aN[eW(x+i,127)],y.Eb[1]=101581*aj[eW(x+c,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=aN[eW(x+u,117)],y.Qc[1]=aj[eW(x+d,127)],y.lc=x+d}if(!l.Rb)return eZ(e,4,"Not a key frame.");for(C(o),l=e.Pa,a=0;4>a;++a){for(s=0;8>s;++s)for(i=0;3>i;++i)for(c=0;11>c;++c)u=L(o,a_[a][s][i][c])?f(o,8):aL[a][s][i][c],l.Wc[a][s].Yb[i][c]=u;for(s=0;17>s;++s)l.Xc[a][s]=l.Wc[a][aD[s]]}return e.kc=C(o),e.kc&&(e.Bd=f(o,8)),e.cb=1}function eX(e,t,r,a,n,i,s){var o=t[n].Yb[r];for(r=0;16>n;++n){if(!L(e,o[r+0]))return n;for(;!L(e,o[r+1]);)if(o=t[++n].Yb[0],r=0,16==n)return 16;var l=t[n+1].Yb;if(L(e,o[r+2])){var c=e,d=0;if(L(c,(h=o)[(u=r)+3]))if(L(c,h[u+6])){for(o=0,u=2*(d=L(c,h[u+8]))+(h=L(c,h[u+9+d])),d=0,h=aS[u];h[o];++o)d+=d+L(c,h[o]);d+=3+(8<<u)}else d=L(c,h[u+7])?7+2*L(c,165)+L(c,145):5+L(c,159);else d=L(c,h[u+4])?3+L(c,h[u+5]):2;o=l[2]}else d=1,o=l[1];l=s+ak[n],0>(c=e).b&&k(c);var u,h=c.b,m=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=m,c.Ca|=1,c.I-=(u+1&m)<<h,i[l]=((d^m)-m)*a[(0<n)+0]}return 16}function eJ(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,n(e.zc,0,0,e.zc.length),e.ja=0}function eQ(e,t,r,a,n){n=e[t+r+32*a]+(n>>3),e[t+r+32*a]=-256&n?0>n?0:255:n}function e0(e,t,r,a,n,i){eQ(e,t,0,r,a+n),eQ(e,t,1,r,a+i),eQ(e,t,2,r,a-i),eQ(e,t,3,r,a-n)}function e1(e){return(20091*e>>16)+e}function e2(e,t,r,a){var n,s=0,o=i(16);for(n=0;4>n;++n){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-e1(e[t+12]),u=e1(e[t+4])+(35468*e[t+12]>>16);o[s+0]=l+u,o[s+1]=c+d,o[s+2]=c-d,o[s+3]=l-u,s+=4,t++}for(n=s=0;4>n;++n)l=(e=o[s+0]+4)+o[s+8],c=e-o[s+8],d=(35468*o[s+4]>>16)-e1(o[s+12]),eQ(r,a,0,0,l+(u=e1(o[s+4])+(35468*o[s+12]>>16))),eQ(r,a,1,0,c+d),eQ(r,a,2,0,c-d),eQ(r,a,3,0,l-u),s++,a+=32}function e5(e,t,r,a){var n=e[t+0]+4,i=35468*e[t+4]>>16,s=e1(e[t+4]),o=35468*e[t+1]>>16;e0(r,a,0,n+s,e=e1(e[t+1]),o),e0(r,a,1,n+i,e,o),e0(r,a,2,n-i,e,o),e0(r,a,3,n-s,e,o)}function e4(e,t,r,a,n){e2(e,t,r,a),n&&e2(e,t+16,r,a+4)}function e3(e,t,r,a){rF(e,t+0,r,a,1),rF(e,t+32,r,a+128,1)}function e6(e,t,r,a){var n;for(e=e[t+0]+4,n=0;4>n;++n)for(t=0;4>t;++t)eQ(r,a,t,n,e)}function e8(e,t,r,a){e[t+0]&&rq(e,t+0,r,a),e[t+16]&&rq(e,t+16,r,a+4),e[t+32]&&rq(e,t+32,r,a+128),e[t+48]&&rq(e,t+48,r,a+128+4)}function e7(e,t,r,a){var n,s=i(16);for(n=0;4>n;++n){var o=e[t+0+n]+e[t+12+n],l=e[t+4+n]+e[t+8+n],c=e[t+4+n]-e[t+8+n],d=e[t+0+n]-e[t+12+n];s[0+n]=o+l,s[8+n]=o-l,s[4+n]=d+c,s[12+n]=d-c}for(n=0;4>n;++n)o=(e=s[0+4*n]+3)+s[3+4*n],l=s[1+4*n]+s[2+4*n],c=s[1+4*n]-s[2+4*n],d=e-s[3+4*n],r[a+0]=o+l>>3,r[a+16]=d+c>>3,r[a+32]=o-l>>3,r[a+48]=d-c>>3,a+=64}function e9(e,t,r){var a,n=t-32,i=255-e[n-1];for(a=0;a<r;++a){var s,o=i+e[t-1];for(s=0;s<r;++s)e[t+s]=at[o+e[n+s]];t+=32}}function te(e,t){e9(e,t,4)}function tt(e,t){e9(e,t,8)}function tr(e,t){e9(e,t,16)}function ta(e,t){var r;for(r=0;16>r;++r)a(e,t+32*r,e,t-32,16)}function tn(e,t){var r;for(r=16;0<r;--r)n(e,t,e[t-1],16),t+=32}function ti(e,t,r){var a;for(a=0;16>a;++a)n(t,r+32*a,e,16)}function ts(e,t){var r,a=16;for(r=0;16>r;++r)a+=e[t-1+32*r]+e[t+r-32];ti(a>>5,e,t)}function to(e,t){var r,a=8;for(r=0;16>r;++r)a+=e[t-1+32*r];ti(a>>4,e,t)}function tl(e,t){var r,a=8;for(r=0;16>r;++r)a+=e[t+r-32];ti(a>>4,e,t)}function tc(e,t){ti(128,e,t)}function td(e,t,r){return e+2*t+r+2>>2}function tu(e,t){var r,n=t-32;for(r=0,n=new Uint8Array([td(e[n-1],e[n+0],e[n+1]),td(e[n+0],e[n+1],e[n+2]),td(e[n+1],e[n+2],e[n+3]),td(e[n+2],e[n+3],e[n+4])]);4>r;++r)a(e,t+32*r,n,0,n.length)}function th(e,t){var r=e[t-1],a=e[t-1+32],n=e[t-1+64],i=e[t-1+96];P(e,t+0,0x1010101*td(e[t-1-32],r,a)),P(e,t+32,0x1010101*td(r,a,n)),P(e,t+64,0x1010101*td(a,n,i)),P(e,t+96,0x1010101*td(n,i,i))}function tm(e,t){var r,a=4;for(r=0;4>r;++r)a+=e[t+r-32]+e[t-1+32*r];for(a>>=3,r=0;4>r;++r)n(e,t+32*r,a,4)}function tp(e,t){var r=e[t-1+0],a=e[t-1+32],n=e[t-1+64],i=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=td(a,n,e[t-1+96]),e[t+1+96]=e[t+0+64]=td(r,a,n),e[t+2+96]=e[t+1+64]=e[t+0+32]=td(i,r,a),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=td(s,i,r),e[t+3+64]=e[t+2+32]=e[t+1+0]=td(o,s,i),e[t+3+32]=e[t+2+0]=td(l,o,s),e[t+3+0]=td(c,l,o)}function tf(e,t){var r=e[t+1-32],a=e[t+2-32],n=e[t+3-32],i=e[t+4-32],s=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=td(e[t+0-32],r,a),e[t+1+0]=e[t+0+32]=td(r,a,n),e[t+2+0]=e[t+1+32]=e[t+0+64]=td(a,n,i),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=td(n,i,s),e[t+3+32]=e[t+2+64]=e[t+1+96]=td(i,s,o),e[t+3+64]=e[t+2+96]=td(s,o,l),e[t+3+96]=td(o,l,l)}function tg(e,t){var r=e[t-1+0],a=e[t-1+32],n=e[t-1+64],i=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=i+s+1>>1,e[t+1+0]=e[t+2+64]=s+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=td(n,a,r),e[t+0+64]=td(a,r,i),e[t+0+32]=e[t+1+96]=td(r,i,s),e[t+1+32]=e[t+2+96]=td(i,s,o),e[t+2+32]=e[t+3+96]=td(s,o,l),e[t+3+32]=td(o,l,c)}function tx(e,t){var r=e[t+0-32],a=e[t+1-32],n=e[t+2-32],i=e[t+3-32],s=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=r+a+1>>1,e[t+1+0]=e[t+0+64]=a+n+1>>1,e[t+2+0]=e[t+1+64]=n+i+1>>1,e[t+3+0]=e[t+2+64]=i+s+1>>1,e[t+0+32]=td(r,a,n),e[t+1+32]=e[t+0+96]=td(a,n,i),e[t+2+32]=e[t+1+96]=td(n,i,s),e[t+3+32]=e[t+2+96]=td(i,s,o),e[t+3+64]=td(s,o,l),e[t+3+96]=td(o,l,c)}function ty(e,t){var r=e[t-1+0],a=e[t-1+32],n=e[t-1+64],i=e[t-1+96];e[t+0+0]=r+a+1>>1,e[t+2+0]=e[t+0+32]=a+n+1>>1,e[t+2+32]=e[t+0+64]=n+i+1>>1,e[t+1+0]=td(r,a,n),e[t+3+0]=e[t+1+32]=td(a,n,i),e[t+3+32]=e[t+1+64]=td(n,i,i),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=i}function tv(e,t){var r=e[t-1+0],a=e[t-1+32],n=e[t-1+64],i=e[t-1+96],s=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=r+s+1>>1,e[t+0+32]=e[t+2+64]=a+r+1>>1,e[t+0+64]=e[t+2+96]=n+a+1>>1,e[t+0+96]=i+n+1>>1,e[t+3+0]=td(o,l,c),e[t+2+0]=td(s,o,l),e[t+1+0]=e[t+3+32]=td(r,s,o),e[t+1+32]=e[t+3+64]=td(a,r,s),e[t+1+64]=e[t+3+96]=td(n,a,r),e[t+1+96]=td(i,n,a)}function tb(e,t){var r;for(r=0;8>r;++r)a(e,t+32*r,e,t-32,8)}function tw(e,t){var r;for(r=0;8>r;++r)n(e,t,e[t-1],8),t+=32}function tN(e,t,r){var a;for(a=0;8>a;++a)n(t,r+32*a,e,8)}function tj(e,t){var r,a=8;for(r=0;8>r;++r)a+=e[t+r-32]+e[t-1+32*r];tN(a>>4,e,t)}function tA(e,t){var r,a=4;for(r=0;8>r;++r)a+=e[t+r-32];tN(a>>3,e,t)}function tS(e,t){var r,a=4;for(r=0;8>r;++r)a+=e[t-1+32*r];tN(a>>3,e,t)}function tk(e,t){tN(128,e,t)}function tC(e,t,r){var a=e[t-r],n=e[t+0],i=3*(n-a)+r9[1020+e[t-2*r]-e[t+r]],s=ae[112+(i+4>>3)];e[t-r]=at[255+a+ae[112+(i+3>>3)]],e[t+0]=at[255+n-s]}function tL(e,t,r,a){var n=e[t+0],i=e[t+r];return ar[255+e[t-2*r]-e[t-r]]>a||ar[255+i-n]>a}function tP(e,t,r,a){return 4*ar[255+e[t-r]-e[t+0]]+ar[255+e[t-2*r]-e[t+r]]<=a}function t_(e,t,r,a,n){var i=e[t-3*r],s=e[t-2*r],o=e[t-r],l=e[t+0],c=e[t+r],d=e[t+2*r],u=e[t+3*r];return 4*ar[255+o-l]+ar[255+s-c]>a?0:ar[255+e[t-4*r]-i]<=n&&ar[255+i-s]<=n&&ar[255+s-o]<=n&&ar[255+u-d]<=n&&ar[255+d-c]<=n&&ar[255+c-l]<=n}function tD(e,t,r,a){var n=2*a+1;for(a=0;16>a;++a)tP(e,t+a,r,n)&&tC(e,t+a,r)}function tI(e,t,r,a){var n=2*a+1;for(a=0;16>a;++a)tP(e,t+a*r,1,n)&&tC(e,t+a*r,1)}function tR(e,t,r,a){var n;for(n=3;0<n;--n)tD(e,t+=4*r,r,a)}function tE(e,t,r,a){var n;for(n=3;0<n;--n)tI(e,t+=4,r,a)}function tT(e,t,r,a,n,i,s,o){for(i=2*i+1;0<n--;){if(t_(e,t,r,i,s))if(tL(e,t,r,o))tC(e,t,r);else{var l=t,c=e[l-2*r],d=e[l-r],u=e[l+0],h=e[l+r],m=e[l+2*r],p=27*(g=r9[1020+3*(u-d)+r9[1020+c-h]])+63>>7,f=18*g+63>>7,g=9*g+63>>7;e[l-3*r]=at[255+e[l-3*r]+g],e[l-2*r]=at[255+c+f],e[l-r]=at[255+d+p],e[l+0]=at[255+u-p],e[l+r]=at[255+h-f],e[l+2*r]=at[255+m-g]}t+=a}}function tM(e,t,r,a,n,i,s,o){for(i=2*i+1;0<n--;){if(t_(e,t,r,i,s))if(tL(e,t,r,o))tC(e,t,r);else{var l=t,c=e[l-r],d=e[l+0],u=e[l+r],h=ae[112+((m=3*(d-c))+4>>3)],m=ae[112+(m+3>>3)],p=h+1>>1;e[l-2*r]=at[255+e[l-2*r]+p],e[l-r]=at[255+c+m],e[l+0]=at[255+d-h],e[l+r]=at[255+u-p]}t+=a}}function tF(e,t,r,a,n,i){tT(e,t,r,1,16,a,n,i)}function tO(e,t,r,a,n,i){tT(e,t,1,r,16,a,n,i)}function tB(e,t,r,a,n,i){var s;for(s=3;0<s;--s)tM(e,t+=4*r,r,1,16,a,n,i)}function tq(e,t,r,a,n,i){var s;for(s=3;0<s;--s)tM(e,t+=4,1,r,16,a,n,i)}function tz(e,t,r,a,n,i,s,o){tT(e,t,n,1,8,i,s,o),tT(r,a,n,1,8,i,s,o)}function tU(e,t,r,a,n,i,s,o){tT(e,t,1,n,8,i,s,o),tT(r,a,1,n,8,i,s,o)}function t$(e,t,r,a,n,i,s,o){tM(e,t+4*n,n,1,8,i,s,o),tM(r,a+4*n,n,1,8,i,s,o)}function tH(e,t,r,a,n,i,s,o){tM(e,t+4,1,n,8,i,s,o),tM(r,a+4,1,n,8,i,s,o)}function tW(){this.ba=new es,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new el,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function tV(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function tG(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tZ(){this.ua=0,this.Wa=new T,this.vb=new T,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new m,this.yc=new u}function tY(){this.xb=this.a=0,this.l=new eV,this.ca=new es,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tZ,this.ab=0,this.gc=s(4,tG),this.Oc=0}function tK(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new eV,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function tX(e,t,r,a,n,i,s){for(e=null==e?0:e[t+0],t=0;t<s;++t)n[i+t]=e+r[a+t]&255,e=n[i+t]}function tJ(e,t,r,a,n,i,s){var o;if(null==e)tX(null,null,r,a,n,i,s);else for(o=0;o<s;++o)n[i+o]=e[t+o]+r[a+o]&255}function tQ(e,t,r,a,n,i,s){if(null==e)tX(null,null,r,a,n,i,s);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<s;++o)c=d+(l=e[t+o])-c,d=r[a+o]+(-256&c?0>c?0:255:c)&255,c=l,n[i+o]=d}}function t0(e,t,r,a,n,i){for(;0<n--;){var s,o=t+ +!!r,l=t+3*!r;for(s=0;s<a;++s){var c=e[l+4*s];255!=c&&(c*=32897,e[o+4*s+0]=e[o+4*s+0]*c>>23,e[o+4*s+1]=e[o+4*s+1]*c>>23,e[o+4*s+2]=e[o+4*s+2]*c>>23)}t+=i}}function t1(e,t,r,a,n){for(;0<a--;){var i;for(i=0;i<r;++i){var s=e[t+2*i+0],o=15&(c=e[t+2*i+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*i+0]=(240&s|s>>4)*l>>16&240|(15&s|s<<4)*l>>16>>4&15,e[t+2*i+1]=240&c|o}t+=n}}function t2(e,t,r,a,n,i,s,o){var l,c,d=255;for(c=0;c<n;++c){for(l=0;l<a;++l){var u=e[t+l];i[s+4*l]=u,d&=u}t+=r,s+=o}return 255!=d}function t5(e,t,r,a,n){var i;for(i=0;i<n;++i)r[a+i]=e[t+i]>>8}function t4(){r0=t0,r1=t1,r2=t2,r5=t5}function t3(r,a,n){e[r]=function(e,r,i,s,o,l,c,d,u,h,m,p,f,g,x,y,v){var b,w=v-1>>1,N=o[l+0]|c[d+0]<<16,j=u[h+0]|m[p+0]<<16;t(null!=e);var A=3*N+j+131074>>2;for(a(e[r+0],255&A,A>>16,f,g),null!=i&&(A=3*j+N+131074>>2,a(i[s+0],255&A,A>>16,x,y)),b=1;b<=w;++b){var S=o[l+b]|c[d+b]<<16,k=u[h+b]|m[p+b]<<16,C=N+S+j+k+524296,L=C+2*(S+j)>>3;A=L+N>>1,N=(C=C+2*(N+k)>>3)+S>>1,a(e[r+2*b-1],255&A,A>>16,f,g+(2*b-1)*n),a(e[r+2*b-0],255&N,N>>16,f,g+(2*b-0)*n),null!=i&&(A=C+j>>1,N=L+k>>1,a(i[s+2*b-1],255&A,A>>16,x,y+(2*b-1)*n),a(i[s+2*b+0],255&N,N>>16,x,y+(2*b+0)*n)),N=S,j=k}1&v||(A=3*N+j+131074>>2,a(e[r+v-1],255&A,A>>16,f,g+(v-1)*n),null!=i&&(A=3*j+N+131074>>2,a(i[s+v-1],255&A,A>>16,x,y+(v-1)*n)))}}function t6(){aO[aa]=aB,aO[an]=az,aO[ai]=aq,aO[as]=aU,aO[ao]=a$,aO[al]=aH,aO[ac]=aW,aO[ad]=az,aO[au]=aU,aO[ah]=a$,aO[am]=aH}function t8(e){return e&~aX?0>e?0:255:e>>aK}function t7(e,t){return t8((19077*e>>8)+(26149*t>>8)-14234)}function t9(e,t,r){return t8((19077*e>>8)-(6419*t>>8)-(13320*r>>8)+8708)}function re(e,t){return t8((19077*e>>8)+(33050*t>>8)-17685)}function rt(e,t,r,a,n){a[n+0]=t7(e,r),a[n+1]=t9(e,t,r),a[n+2]=re(e,t)}function rr(e,t,r,a,n){a[n+0]=re(e,t),a[n+1]=t9(e,t,r),a[n+2]=t7(e,r)}function ra(e,t,r,a,n){var i=t9(e,t,r);t=i<<3&224|re(e,t)>>3,a[n+0]=248&t7(e,r)|i>>5,a[n+1]=t}function rn(e,t,r,a,n){var i=240&re(e,t)|15;a[n+0]=240&t7(e,r)|t9(e,t,r)>>4,a[n+1]=i}function ri(e,t,r,a,n){a[n+0]=255,rt(e,t,r,a,n+1)}function rs(e,t,r,a,n){rr(e,t,r,a,n),a[n+3]=255}function ro(e,t,r,a,n){rt(e,t,r,a,n),a[n+3]=255}function eW(e,t){return 0>e?0:e>t?t:e}function rl(t,r,a){e[t]=function(e,t,n,i,s,o,l,c,d){for(var u=c+(-2&d)*a;c!=u;)r(e[t+0],n[i+0],s[o+0],l,c),r(e[t+1],n[i+0],s[o+0],l,c+a),t+=2,++i,++o,c+=2*a;1&d&&r(e[t+0],n[i+0],s[o+0],l,c)}}function rc(e,t,r){return 0==r?0==e?0==t?6:5:4*(0==t):r}function rd(e,t,r,a,n){switch(e>>>30){case 3:rF(t,r,a,n,0);break;case 2:rO(t,r,a,n);break;case 1:rq(t,r,a,n)}}function ru(e,t){var r,i,s=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,m=e.pc+600;for(r=0;16>r;++r)l[c+32*r-1]=129;for(r=0;8>r;++r)d[u+32*r-1]=129,h[m+32*r-1]=129;for(0<s?l[c-1-32]=d[u-1-32]=h[m-1-32]=129:(n(l,c-32-1,127,21),n(d,u-32-1,127,9),n(h,m-32-1,127,9)),i=0;i<e.za;++i){var p=t.ya[t.aa+i];if(0<i){for(r=-1;16>r;++r)a(l,c+32*r-4,l,c+32*r+12,4);for(r=-1;8>r;++r)a(d,u+32*r-4,d,u+32*r+4,4),a(h,m+32*r-4,h,m+32*r+4,4)}var f=e.Gd,g=e.Hd+i,x=p.ad,y=p.Hc;if(0<s&&(a(l,c-32,f[g].y,0,16),a(d,u-32,f[g].f,0,8),a(h,m-32,f[g].ea,0,8)),p.Za){var v=l,b=c-32+16;for(0<s&&(i>=e.za-1?n(v,b,f[g].y[15],4):a(v,b,f[g+1].y,0,4)),r=0;4>r;r++)v[b+128+r]=v[b+256+r]=v[b+384+r]=v[b+0+r];for(r=0;16>r;++r,y<<=2)v=l,b=c+a3[r],aR[p.Ob[r]](v,b),rd(y,x,16*r,v,b)}else if(aI[v=rc(i,s,p.Ob[0])](l,c),0!=y)for(r=0;16>r;++r,y<<=2)rd(y,x,16*r,l,c+a3[r]);for(r=p.Gc,aE[v=rc(i,s,p.Dd)](d,u),aE[v](h,m),y=x,v=d,b=u,255&(p=0|r)&&(170&p?rB(y,256,v,b):rz(y,256,v,b)),p=h,y=m,255&(r>>=8)&&(170&r?rB(x,320,p,y):rz(x,320,p,y)),s<e.Ub-1&&(a(f[g].y,0,l,c+480,16),a(f[g].f,0,d,u+224,8),a(f[g].ea,0,h,m+224,8)),r=8*o*e.B,f=e.sa,g=e.ta+16*i+16*o*e.R,x=e.qa,p=e.ra+8*i+r,y=e.Ha,v=e.Ia+8*i+r,r=0;16>r;++r)a(f,g+r*e.R,l,c+32*r,16);for(r=0;8>r;++r)a(x,p+r*e.B,d,u+32*r,8),a(y,v+r*e.B,h,m+32*r,8)}}function rh(e,a,n,i,s,o,l,c,d){var u=[0],h=[0],m=0,p=null!=d?d.kd:0,f=null!=d?d:new tV;if(null==e||12>n)return 7;f.data=e,f.w=a,f.ha=n,a=[a],n=[n],f.gb=[f.gb];e:{var g=a,y=n,v=f.gb;if(t(null!=e),t(null!=y),t(null!=v),v[0]=0,12<=y[0]&&!r(e,g[0],"RIFF")){if(r(e,g[0]+8,"WEBP")){v=3;break e}var b=I(e,g[0]+4);if(12>b||0xfffffff6<b){v=3;break e}if(p&&b>y[0]-8){v=7;break e}v[0]=b,g[0]+=12,y[0]-=12}v=0}if(0!=v)return v;for(b=0<f.gb[0],n=n[0];;){e:{var N=e;y=a,v=n;var j=u,A=h,S=g=[0];if((L=m=[m])[0]=0,8>v[0])v=7;else{if(!r(N,y[0],"VP8X")){if(10!=I(N,y[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var k=I(N,y[0]+8),C=1+D(N,y[0]+12);if(0x80000000<=C*(N=1+D(N,y[0]+15))){v=3;break e}null!=S&&(S[0]=k),null!=j&&(j[0]=C),null!=A&&(A[0]=N),y[0]+=18,v[0]-=18,L[0]=1}v=0}}if(m=m[0],g=g[0],0!=v)return v;if(y=!!(2&g),!b&&m)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=y),null!=c&&(c[0]=0),l=u[0],g=h[0],m&&y&&null==d){v=0;break}if(4>n){v=7;break}if(b&&m||!b&&!m&&!r(e,a[0],"ALPH")){n=[n],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{k=e,v=a,b=n;var L=f.gb;j=f.na,A=f.P,S=f.Sa,C=22,t(null!=k),t(null!=b),N=v[0];var P=b[0];for(t(null!=j),t(null!=S),j[0]=null,A[0]=null,S[0]=0;;){if(v[0]=N,b[0]=P,8>P){v=7;break e}var _=I(k,N+4);if(0xfffffff6<_){v=3;break e}var R=8+_+1&-2;if(C+=R,0<L&&C>L){v=3;break e}if(!r(k,N,"VP8 ")||!r(k,N,"VP8L")){v=0;break e}if(P[0]<R){v=7;break e}r(k,N,"ALPH")||(j[0]=k,A[0]=N+8,S[0]=_),N+=R,P-=R}}if(n=n[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=v)break}n=[n],f.Ja=[f.Ja],f.xa=[f.xa];e:if(L=e,v=a,b=n,j=f.gb[0],A=f.Ja,S=f.xa,N=!r(L,k=v[0],"VP8 "),C=!r(L,k,"VP8L"),t(null!=L),t(null!=b),t(null!=A),t(null!=S),8>b[0])v=7;else{if(N||C){if(L=I(L,k+4),12<=j&&L>j-12){v=3;break e}if(p&&L>b[0]-8){v=7;break e}A[0]=L,v[0]+=8,b[0]-=8,S[0]=C}else S[0]=5<=b[0]&&47==L[k+0]&&!(L[k+4]>>5),A[0]=b[0];v=0}if(n=n[0],f.Ja=f.Ja[0],f.xa=f.xa[0],a=a[0],0!=v)break;if(0xfffffff6<f.Ja)return 3;if(null==c||y||(c[0]=f.xa?2:1),l=[l],g=[g],f.xa){if(5>n){v=7;break}c=l,p=g,y=o,null==e||5>n?e=0:5<=n&&47==e[a+0]&&!(e[a+4]>>5)?(b=[0],L=[0],j=[0],x(A=new w,e,a,n),ef(A,b,L,j)?(null!=c&&(c[0]=b[0]),null!=p&&(p[0]=L[0]),null!=y&&(y[0]=j[0]),e=1):e=0):e=0}else{if(10>n){v=7;break}c=g,null==e||10>n||!eY(e,a+3,n-3)?e=0:(p=e[a+0]|e[a+1]<<8|e[a+2]<<16,y=16383&(e[a+7]<<8|e[a+6]),e=16383&(e[a+9]<<8|e[a+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!y||!e?e=0:(l&&(l[0]=y),c&&(c[0]=e),e=1))}if(!e||(l=l[0],g=g[0],m&&(u[0]!=l||h[0]!=g)))return 3;null!=d&&(d[0]=f,d.offset=a-d.w,t(0xfffffff6>a-d.w),t(d.offset==d.ha-n));break}return 0==v||7==v&&m&&null==d?(null!=o&&(o[0]|=null!=f.na&&0<f.na.length),null!=i&&(i[0]=l),null!=s&&(s[0]=g),0):v}function rm(e,t,r){var a=t.width,n=t.height,i=0,s=0,o=a,l=n;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,i=e.v,s=e.j,11>r||(i&=-2,s&=-2),0>i||0>s||0>=o||0>=l||i+o>a||s+l>n))return 0;if(t.v=i,t.j=s,t.va=i+o,t.o=s+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!M(o,l,r=[e.ib],i=[e.hb]))return 0;t.ib=r[0],t.hb=i[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*a/4&&t.hb<3*n/4,t.Kb=0),1}function rp(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function rf(e,t,r,a){if(null==a||0>=e||0>=t)return 2;if(null!=r){if(r.Da){var n=r.cd,s=r.bd,o=-2&r.v,l=-2&r.j;if(0>o||0>l||0>=n||0>=s||o+n>e||l+s>t)return 2;e=n,t=s}if(r.da){if(!M(e,t,n=[r.ib],s=[r.hb]))return 2;e=n[0],t=s[0]}}a.width=e,a.height=t;e:{var c=a.width,d=a.height;if(e=a.S,0>=c||0>=d||!(e>=aa&&13>e))e=2;else{if(0>=a.Rd&&null==a.sd){o=s=n=t=0;var u=(l=c*a7[e])*d;if(11>e||(s=(d+1)/2*(t=(c+1)/2),12==e&&(o=(n=c)*d)),null==(d=i(u+2*s+o))){e=1;break e}a.sd=d,11>e?((c=a.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=a.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=s,c.ea=d,c.W=0+u+s,c.Db=t,c.Ed=s,12==e&&(c.F=d,c.J=0+u+2*s),c.Tc=o,c.lb=n)}if(t=1,n=a.S,s=a.width,o=a.height,n>=aa&&13>n)if(11>n)t&=(l=Math.abs((e=a.f.RGBA).A))*(o-1)+s<=e.size,t&=l>=s*a7[n],t&=null!=e.eb;else{e=a.f.kb,l=(s+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),m=Math.abs(e.lb),p=m*(o-1)+s;t&=c*(o-1)+s<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=s&d>=l&h>=l&null!=e.y&null!=e.f&null!=e.ea,12==n&&(t&=m>=s,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=2*!t}}return 0!=e||null!=r&&r.fd&&(e=rp(a)),e}var rg=64,rx=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,0xffffff],ry=24,rv=32,rb=8,rw=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 0xff000000},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,r){return t[r+0]},e.Predictor3=function(e,t,r){return t[r+1]},e.Predictor4=function(e,t,r){return t[r-1]},e.Predictor5=function(e,t,r){return z(z(e,t[r+1]),t[r+0])},e.Predictor6=function(e,t,r){return z(e,t[r-1])},e.Predictor7=function(e,t,r){return z(e,t[r+0])},e.Predictor8=function(e,t,r){return z(t[r-1],t[r+0])},e.Predictor9=function(e,t,r){return z(t[r+0],t[r+1])},e.Predictor10=function(e,t,r){return z(z(e,t[r-1]),z(t[r+0],t[r+1]))},e.Predictor11=function(e,t,r){var a=t[r+0];return 0>=H(a>>24&255,e>>24&255,(t=t[r-1])>>24&255)+H(a>>16&255,e>>16&255,t>>16&255)+H(a>>8&255,e>>8&255,t>>8&255)+H(255&a,255&e,255&t)?a:e},e.Predictor12=function(e,t,r){var a=t[r+0];return(U((e>>24&255)+(a>>24&255)-((t=t[r-1])>>24&255))<<24|U((e>>16&255)+(a>>16&255)-(t>>16&255))<<16|U((e>>8&255)+(a>>8&255)-(t>>8&255))<<8|U((255&e)+(255&a)-(255&t)))>>>0},e.Predictor13=function(e,t,r){var a=t[r-1];return($((e=z(e,t[r+0]))>>24&255,a>>24&255)<<24|$(e>>16&255,a>>16&255)<<16|$(e>>8&255,a>>8&255)<<8|$((0|e)&255,(0|a)&255))>>>0};var rN=e.PredictorAdd0;e.PredictorAdd1=W,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var rj=e.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var rA,rS=e.ColorIndexInverseTransform,rk=e.MapARGB,rC=e.VP8LColorIndexInverseTransformAlpha,rL=e.MapAlpha,rP=e.VP8LPredictorsAdd=[];rP.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var r_,rD,rI,rR,rE,rT,rM,rF,rO,rB,rq,rz,rU,r$,rH,rW,rV,rG,rZ,rY,rK,rX,rJ,rQ,r0,r1,r2,r5,r4=i(511),r3=i(2041),r6=i(225),r8=i(767),r7=0,r9=r3,ae=r6,at=r8,ar=r4,aa=0,an=1,ai=2,as=3,ao=4,al=5,ac=6,ad=7,au=8,ah=9,am=10,ap=[2,3,7],af=[3,3,11],ag=[280,256,256,256,40],ax=[0,1,1,1,0],ay=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],av=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ab=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],aw=8,aN=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],aj=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],aA=null,aS=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ak=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],aC=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],aL=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],aP=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],a_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],aD=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],aI=[],aR=[],aE=[],aT=1,aM=2,aF=[],aO=[];t3("UpsampleRgbLinePair",rt,3),t3("UpsampleBgrLinePair",rr,3),t3("UpsampleRgbaLinePair",ro,4),t3("UpsampleBgraLinePair",rs,4),t3("UpsampleArgbLinePair",ri,4),t3("UpsampleRgba4444LinePair",rn,2),t3("UpsampleRgb565LinePair",ra,2);var aB=e.UpsampleRgbLinePair,aq=e.UpsampleBgrLinePair,az=e.UpsampleRgbaLinePair,aU=e.UpsampleBgraLinePair,a$=e.UpsampleArgbLinePair,aH=e.UpsampleRgba4444LinePair,aW=e.UpsampleRgb565LinePair,aV=16,aG=32768,aZ=-227,aY=482,aK=6,aX=16383,aJ=0,aQ=i(256),a0=i(256),a1=i(256),a2=i(256),a5=i(aY-aZ),a4=i(aY-aZ);rl("YuvToRgbRow",rt,3),rl("YuvToBgrRow",rr,3),rl("YuvToRgbaRow",ro,4),rl("YuvToBgraRow",rs,4),rl("YuvToArgbRow",ri,4),rl("YuvToRgba4444Row",rn,2),rl("YuvToRgb565Row",ra,2);var a3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],a6=[0,2,8],a8=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,r,o,l,c){var d=an,u=new tW,h=new es;u.ba=h,h.S=d,h.width=[h.width],h.height=[h.height];var m=h.width,p=h.height,f=new eo;if(null==f||null==e)var g=2;else t(null!=f),g=rh(e,r,o,f.width,f.height,f.Pd,f.Qd,f.format,null);if(0!=g?m=0:(null!=m&&(m[0]=f.width[0]),null!=p&&(p[0]=f.height[0]),m=1),m){h.width=h.width[0],h.height=h.height[0],null!=l&&(l[0]=h.width),null!=c&&(c[0]=h.height);e:{if(l=new eV,(c=new tV).data=e,c.w=r,c.ha=o,c.kd=1,r=[0],t(null!=c),(0==(e=rh(c.data,c.w,c.ha,null,null,null,r,null,c))||7==e)&&r[0]&&(e=4),0==(r=e)){if(t(null!=u),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=em,l.ac=eh,l.bc=ep,l.ma=u,c.xa){if(null==(e=eL())){u=1;break e}if(function(e,r){for(var a=[0],n=[0],i=[0];;){if(null==e)return 0;if(null==r)return e.a=2,0;if(e.l=r,e.a=0,x(e.m,r.data,r.w,r.ha),!ef(e.m,a,n,i)){e.a=3;break}if(e.xb=aM,r.width=a[0],r.height=n[0],!eP(a[0],n[0],1,e,null))break;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(r=rf(l.width,l.height,u.Oa,u.ba))){t:{for(l=e;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(o=l.l)),t(null!=(c=o.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!rm(c.Oa,o,as)){l.a=2;break}if(!e_(l,o.width)||o.da)break;if((o.da||ea(l.ca.S))&&t4(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&t4()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!R(l.s.vb,l.s.Wa.Xa)){l.a=1;break}l.xb=0}if(!ek(l,l.V,l.Ba,l.c,l.i,o.o,eN))break;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(r=e.a)}else r=e.a}else if((e=new eG).Fa=c.na,e.P=c.P,e.qc=c.Sa,eK(e,l)){if(0==(r=rf(l.width,l.height,u.Oa,u.ba))){if(e.Aa=0,o=u.Oa,t(null!=(c=e)),null!=o){if(0<(m=0>(m=o.Md)?0:100<m?255:255*m/100)){for(p=f=0;4>p;++p)12>(g=c.pb[p]).lc&&(g.ia=m*a8[0>g.lc?0:g.lc]>>3),f|=g.ia;f&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=o.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,r){if(null==e)return 0;if(null==r)return eZ(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!eK(e,r))return 0;if(t(e.cb),null==r.ac||r.ac(r)){r.ob&&(e.L=0);var o=a6[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=r.v-o>>4,e.zb=r.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=r.o+15+o>>4,e.Hb=r.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l,c=e.ed;for(o=0;4>o;++o){if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=c.Tb)}else d=c.Tb;for(l=0;1>=l;++l){var u=e.gd[o][l],h=d;if(c.Pc&&(h+=c.vd[0],l&&(h+=c.od[0])),0<(h=0>h?0:63<h?63:h)){var m=h;0<c.wb&&(m=4<c.wb?m>>2:m>>1)>9-c.wb&&(m=9-c.wb),1>m&&(m=1),u.dd=m,u.tc=2*h+m,u.ld=40<=h?2:+(15<=h)}else u.tc=0;u.La=l}}}o=0}else eZ(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=1);e:{o=e.Ic,c=4*(m=e.za);var p=32*m,f=m+1,g=0<e.L?m*(0<e.Aa?2:1):0,y=(2==e.Aa?2:1)*m;if((u=c+832+(l=3*(16*o+a6[e.L])/2*p)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=i(u),e.Fc=0,null==e.Ec){o=eZ(e,1,"no memory during frame initialization.");break e}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=c,e.Gd=s(p,e$),e.Hd=0,e.rb=s(f+1,eB),e.sb=1,e.wa=g?s(g,eO):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=m),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=s(y,ez),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=m),e.R=16*m,e.B=8*m,m=(p=a6[e.L])*e.R,p=p/2*e.B,e.sa=u,e.ta=h+m,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,h+=l,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),eJ(e),n(e.Ac,e.Bc,0,c),o=1}}if(o){if(r.ka=0,r.y=e.sa,r.O=e.ta,r.f=e.qa,r.N=e.ra,r.ea=e.Ha,r.Vd=e.Ia,r.fa=e.R,r.Rc=e.B,r.F=null,r.J=0,!r7){for(o=-255;255>=o;++o)r4[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)r3[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)r6[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)r8[255+o]=0>o?0:255<o?255:o;r7=1}rM=e7,rF=e4,rB=e3,rq=e6,rz=e8,rO=e5,rU=tF,r$=tO,rH=tz,rW=tU,rV=tB,rG=tq,rZ=t$,rY=tH,rK=tD,rX=tI,rJ=tR,rQ=tE,aR[0]=tm,aR[1]=te,aR[2]=tu,aR[3]=th,aR[4]=tp,aR[5]=tg,aR[6]=tf,aR[7]=tx,aR[8]=tv,aR[9]=ty,aI[0]=ts,aI[1]=tr,aI[2]=ta,aI[3]=tn,aI[4]=to,aI[5]=tl,aI[6]=tc,aE[0]=tj,aE[1]=tt,aE[2]=tb,aE[3]=tw,aE[4]=tS,aE[5]=tA,aE[6]=tk,o=1}else o=0}o&&(o=function(e,r){for(e.M=0;e.M<e.Va;++e.M){var s,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(s=0;s<c.za;++s){var d=l,u=c,h=u.Ac,m=u.Bc+4*s,p=u.zc,f=u.ya[u.aa+s];if(u.Qa.Bb?f.$b=L(d,u.Pa.jb[0])?2+L(d,u.Pa.jb[2]):L(d,u.Pa.jb[1]):f.$b=0,u.kc&&(f.Ad=L(d,u.Bd)),f.Za=!L(d,145)+0,f.Za){var g=f.Ob,y=0;for(u=0;4>u;++u){var v,b=p[0+u];for(v=0;4>v;++v){b=aP[h[m+v]][b];for(var w=aC[L(d,b[0])];0<w;)w=aC[2*w+L(d,b[w])];b=-w,h[m+v]=b}a(g,y,h,m,4),y+=4,p[0+u]=b}}else b=L(d,156)?L(d,128)?1:3:2*!!L(d,163),f.Ob[0]=b,n(h,m,b,4),n(p,0,b,4);f.Dd=L(d,142)?L(d,114)?L(d,183)?1:3:2:0}if(c.m.Ka)return eZ(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],s=l.ya[l.aa+l.ja],m=l.kc?s.Ad:0)d.la=h.la=0,s.Za||(d.Na=h.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{if(d=h,h=c,m=l.Pa.Xc,p=l.ya[l.aa+l.ja],f=l.pb[p.$b],u=p.ad,g=0,y=l.rb[l.sb-1],b=v=0,n(u,g,0,384),p.Za)var N,A,k=0,C=m[3];else{w=i(16);var P=d.Na+y.Na;if(P=aA(h,m[1],P,f.Eb,0,w,0),d.Na=y.Na=(0<P)+0,1<P)rM(w,0,u,g);else{var _=w[0]+3>>3;for(w=0;256>w;w+=16)u[g+w]=_}k=1,C=m[0]}var D=15&d.la,I=15&y.la;for(w=0;4>w;++w){var R=1&I;for(_=A=0;4>_;++_)D=D>>1|(R=(P=aA(h,C,P=R+(1&D),f.Sc,k,u,g))>k)<<7,A=A<<2|(3<P?3:1<P?2:0!=u[g+0]),g+=16;D>>=4,I=I>>1|R<<7,v=(v<<8|A)>>>0}for(C=D,k=I>>4,N=0;4>N;N+=2){for(A=0,D=d.la>>4+N,I=y.la>>4+N,w=0;2>w;++w){for(R=1&I,_=0;2>_;++_)P=R+(1&D),D=D>>1|(R=0<(P=aA(h,m[2],P,f.Qc,0,u,g)))<<3,A=A<<2|(3<P?3:1<P?2:0!=u[g+0]),g+=16;D>>=2,I=I>>1|R<<5}b|=A<<4*N,C|=D<<4<<N,k|=(240&I)<<N}d.la=C,y.la=k,p.Hc=v,p.Gc=b,p.ia=43690&b?0:f.ia,m=!(v|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[s.$b][s.Za],l.wa[l.Y+l.ja].La|=!m),c.Ka)return eZ(e,7,"Premature end-of-file encountered.")}if(eJ(e),l=r,c=1,s=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(s.M=o.M,s.uc=d,ru(o,s),c=1,s=(A=o.D).Nb,d=(b=a6[o.L])*o.R,h=b/2*o.B,w=16*s*o.R,_=8*s*o.B,m=o.sa,p=o.ta-d+w,f=o.qa,u=o.ra-h+_,g=o.Ha,y=o.Ia-h+_,I=0==(D=A.M),v=D>=o.Va-1,2==o.Aa&&ru(o,A),A.uc)for(R=(P=o).D.M,t(P.D.uc),A=P.yb;A<P.Hb;++A){k=A,C=R;var E=(T=(H=P).D).Nb;N=H.R;var T=T.wa[T.Y+k],M=H.sa,F=H.ta+16*E*N+16*k,O=T.dd,B=T.tc;if(0!=B)if(t(3<=B),1==H.L)0<k&&rX(M,F,N,B+4),T.La&&rQ(M,F,N,B),0<C&&rK(M,F,N,B+4),T.La&&rJ(M,F,N,B);else{var q=H.B,z=H.qa,U=H.ra+8*E*q+8*k,$=H.Ha,H=H.Ia+8*E*q+8*k;E=T.ld,0<k&&(r$(M,F,N,B+4,O,E),rW(z,U,$,H,q,B+4,O,E)),T.La&&(rG(M,F,N,B,O,E),rY(z,U,$,H,q,B,O,E)),0<C&&(rU(M,F,N,B+4,O,E),rH(z,U,$,H,q,B+4,O,E)),T.La&&(rV(M,F,N,B,O,E),rZ(z,U,$,H,q,B,O,E))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(A=16*D,D=16*(D+1),I?(l.y=o.sa,l.O=o.ta+w,l.f=o.qa,l.N=o.ra+_,l.ea=o.Ha,l.W=o.Ia+_):(A-=b,l.y=m,l.O=p,l.f=f,l.N=u,l.ea=g,l.W=y),v||(D-=b),D>l.o&&(D=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&A<D&&(l.J=function(e,r,n,s){var o=r.width,l=r.o;if(t(null!=e&&null!=r),0>n||0>=s||n+s>l)return null;if(!e.Cc){if(null==e.ga){if(e.ga=new tK,(k=null==e.ga)||(k=r.width*r.o,t(0==e.Gb.length),e.Gb=i(k),e.Uc=0,null==e.Gb?k=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,k=1),k=!k),!k){k=e.ga;var c=e.Fa,d=e.P,u=e.qc,h=e.mb,m=e.nb,p=d+1,f=u-1,g=k.l;if(t(null!=c&&null!=h&&null!=r),aF[0]=null,aF[1]=tX,aF[2]=tJ,aF[3]=tQ,k.ca=h,k.tb=m,k.c=r.width,k.i=r.height,t(0<k.c&&0<k.i),1>=u)r=0;else if(k.$a=(0|c[d+0])&3,k.Z=c[d+0]>>2&3,k.Lc=c[d+0]>>4&3,d=c[d+0]>>6&3,0>k.$a||1<k.$a||4<=k.Z||1<k.Lc||d)r=0;else if(g.put=em,g.ac=eh,g.bc=ep,g.ma=k,g.width=r.width,g.height=r.height,g.Da=r.Da,g.v=r.v,g.va=r.va,g.j=r.j,g.o=r.o,k.$a)e:{for(t(1==k.$a),r=eL();;){if(null==r){r=0;break e}if(t(null!=k),k.mc=r,r.c=k.c,r.i=k.i,r.l=k.l,r.l.ma=k,r.l.width=k.c,r.l.height=k.i,r.a=0,x(r.m,c,p,f),!eP(k.c,k.i,1,r,null)||(1==r.ab&&3==r.gc[0].hc&&ej(r.s)?(k.ic=1,c=r.c*r.i,r.Ta=null,r.Ua=0,r.V=i(c),r.Ba=0,null==r.V?(r.a=1,r=0):r=1):(k.ic=0,r=e_(r,k.c)),!r))break;r=1;break e}k.mc=null,r=0}else r=f>=k.c*k.i;k=!r}if(k)return null;1!=e.ga.Lc?e.Ga=0:s=l-n}t(null!=e.ga),t(n+s<=l);e:{if(r=(c=e.ga).c,l=c.l.o,0==c.$a){if(p=e.rc,f=e.Vc,g=e.Fa,d=e.P+1+n*r,u=e.mb,h=e.nb+n*r,t(d<=e.P+e.qc),0!=c.Z)for(t(null!=aF[c.Z]),k=0;k<s;++k)aF[c.Z](p,f,g,d,u,h,r),p=u,f=h,h+=r,d+=r;else for(k=0;k<s;++k)a(u,h,g,d,r),p=u,f=h,h+=r,d+=r;e.rc=p,e.Vc=f}else{if(t(null!=c.mc),r=n+s,t(null!=(k=c.mc)),t(r<=k.i),k.C>=r)r=1;else if(c.ic||t4(),c.ic){c=k.V,p=k.Ba,f=k.c;var y=k.i,v=(g=1,d=k.$/f,u=k.$%f,h=k.m,m=k.s,k.$),b=f*y,w=f*r,N=m.wc,A=v<w?eb(m,u,d):null;t(v<=b),t(r<=y),t(ej(m));t:for(;;){for(;!h.h&&v<w;){if(u&N||(A=eb(m,u,d)),t(null!=A),S(h),256>(y=ey(A.G[0],A.H[0],h)))c[p+v]=y,++v,++u>=f&&(u=0,++d<=r&&!(d%16)&&eS(k,d));else{if(!(280>y)){g=0;break t}y=eg(y-256,h);var k,C,L=ey(A.G[4],A.H[4],h);if(S(h),!(v>=(L=ex(f,L=eg(L,h)))&&b-v>=y)){g=0;break t}for(C=0;C<y;++C)c[p+v+C]=c[p+v+C-L];for(v+=y,u+=y;u>=f;)u-=f,++d<=r&&!(d%16)&&eS(k,d);v<w&&u&N&&(A=eb(m,u,d))}t(h.h==j(h))}eS(k,d>r?r:d);break}!g||h.h&&v<b?(g=0,k.a=h.h?5:3):k.$=v,r=g}else r=ek(k,k.V,k.Ba,k.c,k.i,r,eD);if(!r){s=0;break e}}n+s>=l&&(e.Cc=1),s=1}if(!s)return null;if(e.Cc&&(null!=(s=e.ga)&&(s.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+n*o}(o,l,A,D-A),l.F=o.mb,null==l.F&&0==l.F.length)){c=eZ(o,3,"Could not decode alpha data.");break e}A<l.j&&(b=l.j-A,A=l.j,t(!(1&b)),l.O+=o.R*b,l.N+=o.B*(b>>1),l.W+=o.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),A<D&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=A-l.j,l.U=l.va-l.v,l.T=D-A,c=l.put(l))}s+1!=o.Ic||v||(a(o.sa,o.ta-d,m,p+16*o.R,d),a(o.qa,o.ra-h,f,u+8*o.B,h),a(o.Ha,o.Ia-h,g,y+8*o.B,h))}if(!c)return eZ(e,6,"Output aborted.")}return 1}(e,r)),null!=r.bc&&r.bc(r),o&=1}return o?(e.cb=0,o):0})(e,l)||(r=e.a)}}else r=e.a;0==r&&null!=u.Oa&&u.Oa.fd&&(r=rp(u.ba))}u=r}d=0!=u?null:11>d?h.f.RGBA.eb:h.f.kb.y}else d=null;return d};var a7=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){return(0|e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function d(e,t){return(0|e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var u=[0],h=[0],m=[],p=new l,f=function(e,t){var r={},a=0,n=!1,i=0,s=0;if(r.frames=[],!function(e,t,r,a){for(var n=0;n<4;n++)if(e[t+n]!=r.charCodeAt(n))return!0;return!1}(e,t,"RIFF",0)){for(d(e,t+=4),t+=8;t<e.length;){var o,l,u,h=function(e,t){for(var r="",a=0;a<4;a++)r+=String.fromCharCode(e[t++]);return r}(e,t),m=d(e,t+=4);t+=4;var p=m+(1&m);switch(h){case"VP8 ":case"VP8L":void 0===r.frames[a]&&(r.frames[a]={}),(u=r.frames[a]).src_off=n?s:t-8,u.src_size=i+m+8,a++,n&&(n=!1,i=0,s=0);break;case"VP8X":(u=r.header={}).feature_flags=e[t];var f=t+4;u.canvas_width=1+c(e,f),f+=3,u.canvas_height=1+c(e,f),f+=3;break;case"ALPH":n=!0,i=p+8,s=t-8;break;case"ANIM":(u=r.header).bgcolor=d(e,t),f=t+4,u.loop_count=0|e[(o=f)+0]|e[o+1]<<8,f+=2;break;case"ANMF":(u=r.frames[a]={}).offset_x=2*c(e,t),t+=3,u.offset_y=2*c(e,t),t+=3,u.width=1+c(e,t),t+=3,u.height=1+c(e,t),t+=3,u.duration=c(e,t),t+=3,l=e[t++],u.dispose=1&l,u.blend=l>>1&1}"ANMF"!=h&&(t+=p)}return r}}(e,0);f.response=e,f.rgbaoutput=!0,f.dataurl=!1;var g=f.header?f.header:null,x=f.frames?f.frames:null;if(g){g.loop_counter=g.loop_count,u=[g.canvas_height],h=[g.canvas_width];for(var y=0;y<x.length&&0!=x[y].blend;y++);}var v=x[0],b=p.WebPDecodeRGBA(e,v.src_off,v.src_size,h,u);v.rgba=b,v.imgwidth=h[0],v.imgheight=u[0];for(var w=0;w<h[0]*u[0]*4;w++)m[w]=b[w];return this.width=h,this.height=u,this.data=m,this}!function(e){var t=function(t,a,l,c){var d=4,u=i;switch(c){case e.image_compression.FAST:d=1,u=n;break;case e.image_compression.MEDIUM:d=6,u=s;break;case e.image_compression.SLOW:d=9,u=o}var h=s$(t=r(t,a,l,u),{level:d});return e.__addimage__.arrayBufferToBinaryString(h)},r=function(e,t,r,a){for(var n,i,s,o=e.length/t,l=new Uint8Array(e.length+o),u=c(),h=0;h<o;h+=1){if(s=h*t,n=e.subarray(s,s+t),a)l.set(a(n,r,i),s+h);else{for(var m,p=u.length,f=[];m<p;m+=1)f[m]=u[m](n,r,i);var g=d(f.concat());l.set(f[g],s+h)}i=n}return l},a=function(e){var t=Array.apply([],e);return t.unshift(0),t},n=function(e,t){var r,a=[],n=e.length;a[0]=1;for(var i=0;i<n;i+=1)r=e[i-t]||0,a[i+1]=e[i]-r+256&255;return a},i=function(e,t,r){var a,n=[],i=e.length;n[0]=2;for(var s=0;s<i;s+=1)a=r&&r[s]||0,n[s+1]=e[s]-a+256&255;return n},s=function(e,t,r){var a,n,i=[],s=e.length;i[0]=3;for(var o=0;o<s;o+=1)a=e[o-t]||0,n=r&&r[o]||0,i[o+1]=e[o]+256-(a+n>>>1)&255;return i},o=function(e,t,r){var a,n,i=[],s=e.length;i[0]=4;for(var o=0;o<s;o+=1)a=e[o-t]||0,n=l(a,r&&r[o]||0,r&&r[o-t]||0),i[o+1]=e[o]-n+256&255;return i},l=function(e,t,r){if(e===t&&t===r)return e;var a=Math.abs(t-r),n=Math.abs(e-r),i=Math.abs(e+t-r-r);return a<=n&&a<=i?e:n<=i?t:r},c=function(){return[a,n,i,s,o]},d=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(r,a,n,i){var s,o,l,c,d,u,h,m,p,f,g,x,y,v,b,w=this.decode.FLATE_DECODE,N="";if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){if(r=(l=new lv(r)).imgData,o=l.bits,s=l.colorSpace,d=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){p=(m=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*l.colors),f=new Uint8Array(p);var j,A=l.pixelBitlength-l.bits;for(v=0,b=0;v<p;v++){for(y=m[v],j=0;j<A;)g[b++]=y>>>j&255,j+=l.bits;f[v]=y>>>j&255}}if(16===l.bits){g=new Uint8Array((p=(m=new Uint32Array(l.decodePixels().buffer)).length)*(32/l.pixelBitlength)*l.colors),f=new Uint8Array(p*(32/l.pixelBitlength)),x=l.colors>1,v=0,b=0;for(var S=0;v<p;)y=m[v++],g[b++]=y>>>0&255,x&&(g[b++]=y>>>16&255,y=m[v++],g[b++]=y>>>0&255),f[S++]=y>>>16&255;o=8}i!==e.image_compression.NONE?(r=t(g,l.width*l.colors,l.colors,i),h=t(f,l.width,1,i)):(r=g,h=f,w=void 0)}if(3===l.colorType&&(s=this.color_spaces.INDEXED,u=l.palette,l.transparency.indexed)){var k=l.transparency.indexed,C=0;for(v=0,p=k.length;v<p;++v)C+=k[v];if((C/=255)==p-1&&-1!==k.indexOf(0))c=[k.indexOf(0)];else if(C!==p){for(f=new Uint8Array((m=l.decodePixels()).length),v=0,p=m.length;v<p;v++)f[v]=k[m[v]];h=t(f,l.width,1)}}var L=function(t){var r;switch(t){case e.image_compression.FAST:r=11;break;case e.image_compression.MEDIUM:r=13;break;case e.image_compression.SLOW:r=14;break;default:r=12}return r}(i);return w===this.decode.FLATE_DECODE&&(N="/Predictor "+L+" "),N+="/Colors "+d+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:r,index:a,filter:w,decodeParameters:N,transparency:c,palette:u,sMask:h,predictor:L,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:s}}}}(ov.API),function(e){e.processGIF89A=function(t,r,a,n){var i=new lb(t),s=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c=new lN(100).encode({data:l,width:s,height:o},100);return e.processJPEG.call(this,c,r,a,n)},e.processGIF87A=e.processGIF89A}(ov.API),lj.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},lj.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){sX.log("bit decode error:"+e)}},lj.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),s=a*this.width*4+8*n*4,o=0;o<8&&8*n+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}0!==r&&(this.pos+=4-r)}},lj.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<e;n++){var i=this.datav.getUint8(this.pos++,!0),s=a*this.width*4+2*n*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*n+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}0!==t&&(this.pos+=4-t)}},lj.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(n<this.palette.length){var s=this.palette[n];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}0!==e&&(this.pos+=4-e)}},lj.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,c=i>>15?255:0,d=a*this.width*4+4*n;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=c}this.pos+=e}},lj.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&r)/r*255|0,c=(s>>11)/t*255|0,d=n*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},lj.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=n,this.data[s+2]=a,this.data[s+3]=255}this.pos+=this.width%4}},lj.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=s}},lj.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,a,n){var i=new lj(t,!1),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new lN(100).encode(l,100);return e.processJPEG.call(this,c,r,a,n)}}(ov.API),lA.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,a,n){var i=new lA(t),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new lN(100).encode(l,100);return e.processJPEG.call(this,c,r,a,n)}}(ov.API),ov.API.processRGBA=function(e,t,r){for(var a=e.data,n=a.length,i=new Uint8Array(n/4*3),s=new Uint8Array(n/4),o=0,l=0,c=0;c<n;c+=4){var d=a[c],u=a[c+1],h=a[c+2],m=a[c+3];i[o++]=d,i[o++]=u,i[o++]=h,s[l++]=m}var p=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:p,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ov.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!==({af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"})[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},lf=(lp=ov.API).getCharWidthsArray=function(e,t){var r,a,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:n.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:n.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=!1!==t.doKerning,h=0,m=e.length,p=0,f=o[0]||l,g=[];for(r=0;r<m;r++)a=e.charCodeAt(r),"function"==typeof n.metadata.widthOfString?g.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+1e3/i*s||0)/1e3):(h=u&&"object"===iq()(c[a])&&!isNaN(parseInt(c[a][p],10))?c[a][p]/d:0,g.push((o[a]||f)/l+h)),p=a;return g},lg=lp.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return lp.processArabic&&(e=lp.processArabic(e)),"function"==typeof a.metadata.widthOfString?a.metadata.widthOfString(e,r,n)/r:lf.apply(this,arguments).reduce(function(e,t){return e+t},0)},lx=function(e,t,r,a){for(var n=[],i=0,s=e.length,o=0;i!==s&&o+t[i]<r;)o+=t[i],i++;n.push(e.slice(0,i));var l=i;for(o=0;i!==s;)o+t[i]>a&&(n.push(e.slice(l,i)),o=0,l=i),o+=t[i],i++;return l!==i&&n.push(e.slice(l,i)),n},ly=function(e,t,r){r||(r={});var a,n,i,s,o,l,c,d=[],u=[d],h=r.textIndent||0,m=0,p=0,f=e.split(" "),g=lf.apply(this,[" ",r])[0];if(l=-1===r.lineIndent?f[0].length+2:r.lineIndent||0){var x=Array(l).join(" "),y=[];f.map(function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):y.push(e[0])}),f=y,l=lg.apply(this,[x,r])}for(i=0,s=f.length;i<s;i++){var v=0;if(a=f[i],l&&"\n"==a[0]&&(a=a.substr(1),v=1),h+m+(p=(n=lf.apply(this,[a,r])).reduce(function(e,t){return e+t},0))>t||v){if(p>t){for(o=lx.apply(this,[a,n,t-(h+m),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);p=n.slice(a.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[a];u.push(d),h=p+l,m=g}else d.push(a),h+=m+p,m=g}return c=l?function(e,t){return(t?x:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},lp.splitTextToSize=function(e,t,r){var a,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=this.internal.scaleFactor*t/n;i.textIndent=r.textIndent?r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=a.length;o<l;o++)c=c.concat(ly.apply(this,[a[o],s,i]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},n=0;n<t.length;n++)r[t[n]]="0123456789abcdef"[n],a["0123456789abcdef"[n]]=t[n];var i=function(e){return"0x"+parseInt(e,10).toString(16)},s=e.__fontmetrics__.compress=function(e){var t,r,n,o,l=["{"];for(var c in e){if(t=e[c],r=isNaN(parseInt(c,10))?"'"+c+"'":(r=i(c=parseInt(c,10)).slice(2)).slice(0,-1)+a[r.slice(-1)],"number"==typeof t)t<0?(n=i(t).slice(3),o="-"):(n=i(t).slice(2),o=""),n=o+n.slice(0,-1)+a[n.slice(-1)];else{if("object"!==iq()(t))throw Error("Don't know what to do with value type "+iq()(t)+".");n=s(t)}l.push(r+n)}return l.push("}"),l.join("")},o=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw Error("Invalid argument passed to uncompress.");for(var t,a,n,i,s={},o=1,l=s,c=[],d="",u="",h=e.length-1,m=1;m<h;m+=1)"'"==(i=e[m])?t?(n=t.join(""),t=void 0):t=[]:t?t.push(i):"{"==i?(c.push([l,n]),l={},n=void 0):"}"==i?((a=c.pop())[0][a[1]]=l,n=void 0,l=a[0]):"-"==i?o=-1:void 0===n?r.hasOwnProperty(i)?(d+=r[i],n=parseInt(d,16)*o,o=1,d=""):d+=i:r.hasOwnProperty(i)?(u+=r[i],l[n]=parseInt(u,16)*o,o=1,n=void 0,u=""):u+=i;return s},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,r=d.Unicode[t.postScriptName];r&&(t.metadata.Unicode={},t.metadata.Unicode.widths=r.widths,t.metadata.Unicode.kerning=r.kerning);var a=c[t.postScriptName];a&&(t.metadata.Unicode.encoding=a,t.encoding=a.codePages[0])}])}(ov.API),function(e){var t=function(e){for(var t=e.length,r=new Uint8Array(t),a=0;a<t;a++)r[a]=e.charCodeAt(a);return r};e.API.events.push(["addFont",function(r){var a,n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(void 0===s)throw Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(n=!1===s.existsFileInVFS(i.postScriptName)?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName)))throw Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");a=n,a=/^\x00\x01\x00\x00/.test(a)?t(a):t(s4(a)),i.metadata=e.API.TTFFont.open(a),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]}}])}(ov),ov.API.addSvgAsImage=function(e,t,a,n,i,s,o,l){if(isNaN(t)||isNaN(a))throw sX.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw sX.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(sY.canvg?Promise.resolve(sY.canvg):r.e(584).then(r.bind(r,91584))).catch(function(e){return Promise.reject(Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(d,e,u)},function(){return Promise.reject(Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),t,a,n,i,o,l)})},ov.API.putTotalPages=function(e){var t,r=0;15>parseInt(this.internal.getFont().id.substr(1),10)?(t=RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(t,r);return this},ov.API.viewerPreferences=function(e,t){e=e||{},t=t||!1;var r,a,n,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,d=0,u=0;function h(e,t){var r,a=!1;for(r=0;r<e.length;r+=1)e[r]===t&&(a=!0);return a}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var m=o.length;for(u=0;u<m;u+=1)r[o[u]].value=r[o[u]].defaultValue,r[o[u]].explicitSet=!1}if("object"===iq()(e)){for(n in e)if(i=e[n],h(o,n)&&void 0!==i){if("boolean"===r[n].type&&"boolean"==typeof i)r[n].value=i;else if("name"===r[n].type&&h(r[n].valueSet,i))r[n].value=i;else if("integer"===r[n].type&&Number.isInteger(i))r[n].value=i;else if("array"===r[n].type){for(c=0;c<i.length;c+=1)if(a=!0,1===i[c].length&&"number"==typeof i[c][0])l.push(String(i[c]-1));else if(i[c].length>1){for(d=0;d<i[c].length;d+=1)"number"!=typeof i[c][d]&&(a=!1);!0===a&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}r[n].value="["+l.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in r)!0===r[e].explicitSet&&("name"===r[e].type?t.push("/"+e+" /"+r[e].value):t.push("/"+e+" "+r[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(e)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),s=r.length+a.length+n.length+t.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(t+r+a+n+i),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,a){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(ov.API),function(e){var t=e.API,r=t.pdfEscape16=function(e,t){for(var r,a=t.metadata.Unicode.widths,n=["","0","00","000","0000"],i=[""],s=0,o=e.length;s<o&&(r=t.metadata.characterToGlyph(e.charCodeAt(s)),t.metadata.glyIdsUsed.push(r),t.metadata.toUnicode[r]=e.charCodeAt(s),-1==a.indexOf(r)&&(a.push(r),a.push([parseInt(t.metadata.widthOfGlyph(r),10)])),"0"!=r);++s)r=r.toString(16),i.push(n[4-r.length],r);return i.join("")},a=function(e){var t,r,a,n,i,s,o;for(i="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",a=[],s=0,o=(r=Object.keys(e).sort(function(e,t){return e-t})).length;s<o;s++)t=r[s],a.length>=100&&(i+="\n"+a.length+" beginbfchar\n"+a.join("\n")+"\nendbfchar",a=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(n=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),a.push("<"+t+"><"+n+">"));return a.length&&(i+="\n"+a.length+" beginbfchar\n"+a.join("\n")+"\nendbfchar\n"),i+="endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var r=t.font,n=t.out,i=t.newObject,s=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"Identity-H"===r.encoding){for(var o=r.metadata.Unicode.widths,l=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=i();s({data:c,addLength1:!0,objectId:u}),n("endobj");var h=i();s({data:a(r.metadata.toUnicode),addLength1:!0,objectId:h}),n("endobj");var m=i();n("<<"),n("/Type /FontDescriptor"),n("/FontName /"+om(r.fontName)),n("/FontFile2 "+u+" 0 R"),n("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),n("/Flags "+r.metadata.flags),n("/StemV "+r.metadata.stemV),n("/ItalicAngle "+r.metadata.italicAngle),n("/Ascent "+r.metadata.ascender),n("/Descent "+r.metadata.decender),n("/CapHeight "+r.metadata.capHeight),n(">>"),n("endobj");var p=i();n("<<"),n("/Type /Font"),n("/BaseFont /"+om(r.fontName)),n("/FontDescriptor "+m+" 0 R"),n("/W "+e.API.PDFObject.convert(o)),n("/CIDToGIDMap /Identity"),n("/DW 1000"),n("/Subtype /CIDFontType2"),n("/CIDSystemInfo"),n("<<"),n("/Supplement 0"),n("/Registry (Adobe)"),n("/Ordering ("+r.encoding+")"),n(">>"),n(">>"),n("endobj"),r.objectNumber=i(),n("<<"),n("/Type /Font"),n("/Subtype /Type0"),n("/ToUnicode "+h+" 0 R"),n("/BaseFont /"+om(r.fontName)),n("/Encoding /"+r.encoding),n("/DescendantFonts ["+p+" 0 R]"),n(">>"),n("endobj"),r.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var r=t.font,n=t.out,i=t.newObject,s=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===r.encoding){for(var o=r.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=i();s({data:l,addLength1:!0,objectId:d}),n("endobj");var u=i();s({data:a(r.metadata.toUnicode),addLength1:!0,objectId:u}),n("endobj");var h=i();n("<<"),n("/Descent "+r.metadata.decender),n("/CapHeight "+r.metadata.capHeight),n("/StemV "+r.metadata.stemV),n("/Type /FontDescriptor"),n("/FontFile2 "+d+" 0 R"),n("/Flags 96"),n("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),n("/FontName /"+om(r.fontName)),n("/ItalicAngle "+r.metadata.italicAngle),n("/Ascent "+r.metadata.ascender),n(">>"),n("endobj"),r.objectNumber=i();for(var m=0;m<r.metadata.hmtx.widths.length;m++)r.metadata.hmtx.widths[m]=parseInt(r.metadata.hmtx.widths[m]*(1e3/r.metadata.head.unitsPerEm));n("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+om(r.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),n("endobj"),r.isAlreadyPutted=!0}}(t)}]);var n=function(e){var t,a=e.text||"",n=e.x,i=e.y,s=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,h="",m=0,p="",f=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:a,x:n,y:i,options:s,mutex:o};for(p=a,u=c,Array.isArray(a)&&(p=a[0]),m=0;m<p.length;m+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[p[m].charCodeAt(0)]),t||256>p[m].charCodeAt(0)&&d[u].metadata.hasOwnProperty("Unicode")?h+=p[m]:h+="";var g="";return 14>parseInt(u.slice(1))||"WinAnsiEncoding"===f?g=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===f&&(g=r(h,d[u])),o.isHex=!0,{text:g,x:n,y:i,options:s,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",r=[],a={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var i=0;for(i=0;i<t.length;i+=1)Array.isArray(t[i])&&3===t[i].length?r.push([n(Object.assign({},a,{text:t[i][0]})).text,t[i][1],t[i][2]]):r.push(n(Object.assign({},a,{text:t[i]})).text);e.text=r}else e.text=n(Object.assign({},a,{text:t})).text}])}(ov),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(ov.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var r,a,n,i,s,o,l,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},h={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},m=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),f=!1,g=0;this.__bidiEngine__={};var x=function(e){var r=e.charCodeAt(),a=r>>8,n=h[a];return void 0!==n?t[256*n+(255&r)]:252===a||253===a?"AL":p.test(a)?"L":8===a?"R":"N"},y=function(e){for(var t,r=0;r<e.length&&"L"!==(t=x(e.charAt(r)));r++)if("R"===t)return!0;return!1},v=function(e,t,s,o){var l,c,d,u,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":f=!1;break;case"N":case"AN":break;case"EN":f&&(h="AN");break;case"AL":f=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=s[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":f&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?s[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===s[o-1]){h="EN";break}if(f){h="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(n&&!i){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var m=e[o];if(l=t[d],(m>=1425&&m<=2303||64286===m)&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":s[o-1];break;case"B":f=!1,r=!0,h=g;break;case"S":a=!0,h="N"}return h},b=function(e,t,r){var a=e.split("");return r&&w(a,r,{hiLevel:g}),a.reverse(),t&&t.reverse(),a.join("")},w=function(e,t,n){var i,s,o,l,h,m=-1,p=e.length,y=0,b=[],w=g?d:c,N=[];for(f=!1,r=!1,a=!1,s=0;s<p;s++)N[s]=x(e[s]);for(o=0;o<p;o++){if(h=y,b[o]=v(e,N,b,o),i=240&(y=w[h][u[b[o]]]),y&=15,t[o]=l=w[y][5],i>0)if(16===i){for(s=m;s<o;s++)t[s]=1;m=-1}else m=-1;if(w[y][6])-1===m&&(m=o);else if(m>-1){for(s=m;s<o;s++)t[s]=l;m=-1}"B"===N[o]&&(t[o]=0),n.hiLevel|=l}a&&function(e,t,r){for(var a=0;a<r;a++)if("S"===e[a]){t[a]=g;for(var n=a-1;n>=0&&"WS"===e[n];n--)t[n]=g}}(N,t,p)},N=function(e,t,a,n,i){if(!(i.hiLevel<e)){if(1===e&&1===g&&!r)return t.reverse(),void(a&&a.reverse());for(var s,o,l,c,d=t.length,u=0;u<d;){if(n[u]>=e){for(l=u+1;l<d&&n[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)s=t[c],t[c]=t[o],t[o]=s,a&&(s=a[c],a[c]=a[o],a[o]=s);u=l}u++}}},j=function(e,t,r){var a=e.split(""),n={hiLevel:g};return r||(r=[]),w(a,r,n),function(e,t,r){if(0!==r.hiLevel&&l)for(var a,n=0;n<e.length;n++)1===t[n]&&(a=m.indexOf(e[n]))>=0&&(e[n]=m[a+1])}(a,r,n),N(2,a,t,r,n),N(1,a,t,r,n),a.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,r){if(function(e,t){if(t)for(var r=0;r<e.length;r++)t[r]=r;void 0===i&&(i=y(e)),void 0===o&&(o=y(e))}(e,t),n||!s||o)if(n&&s&&i^o)g=+!!i,e=b(e,t,r);else if(!n&&s&&o)g=+!!i,e=b(e=j(e,t,r),t);else if(!n||i||s||o){if(n&&!s&&i^o)e=b(e,t),i?(g=0,e=j(e,t,r)):(g=1,e=b(e=j(e,t,r),t));else if(n&&i&&!s&&o)g=1,e=b(e=j(e,t,r),t);else if(!n&&!s&&i^o){var a=l;i?(g=1,e=j(e,t,r),g=0,l=!1,e=j(e,t,r),l=a):(g=0,e=b(e=j(e,t,r),t),g=1,l=!1,e=j(e,t,r),l=a,e=b(e,t))}}else g=0,e=j(e,t,r);else g=+!!i,e=j(e,t,r);return e},this.__bidiEngine__.setOptions=function(e){e&&(n=e.isInputVisual,s=e.isOutputVisual,i=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var a=e.options||{};e.mutex,a.lang;var n=[];if(a.isInputVisual="boolean"!=typeof a.isInputVisual||a.isInputVisual,r.setOptions(a),"[object Array]"===Object.prototype.toString.call(t)){var i=0;for(n=[],i=0;i<t.length;i+=1)"[object Array]"===Object.prototype.toString.call(t[i])?n.push([r.doBidiReorder(t[i][0]),t[i][1],t[i][2]]):n.push([r.doBidiReorder(t[i])]);e.text=n}else e.text=r.doBidiReorder(t);r.setOptions({isInputVisual:!0})}])}(ov),ov.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new lk(e),this.contents.pos=4,"ttcf"===t.readString(4))throw Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new lW(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new lC(this.contents),this.head=new l_(this),this.name=new lF(this),this.cmap=new lI(this),this.toUnicode={},this.hhea=new lR(this),this.maxp=new lO(this),this.hmtx=new lB(this),this.post=new lT(this),this.os2=new lE(this),this.loca=new lH(this),this.glyf=new lz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,r,a,n;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var t,r,a,n;for(n=[],t=0,r=(a=this.bbox).length;t<r;t++)e=a[t],n.push(Math.round(e*this.scaleFactor));return n}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),0!=(32768&(t=a>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(n=this.familyClass)||2===n||3===n||4===n||5===n||7===n,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,r){var a,n,i,s;for(i=0,n=0,s=(e=""+e).length;0<=s?n<s:n>s;n=0<=s?++n:--n)a=e.charCodeAt(n),i+=this.widthOfGlyph(this.characterToGlyph(a))+1e3/t*r||0;return t/1e3*i},e.prototype.lineHeight=function(e,t){var r;return null==t&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},e}();var lS,lk=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 0x1000000*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=0x80000000?e-0x100000000:e},e.prototype.writeInt32=function(e){return e<0&&(e+=0x100000000),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(e){var t,r,a;for(a=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,r,a,n,i,s,o;return e=this.readByte(),t=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),128&e?-1*(0x100000000000000*(255^e)+0x1000000000000*(255^t)+0x10000000000*(255^r)+0x100000000*(255^a)+0x1000000*(255^n)+65536*(255^i)+256*(255^s)+(255^o)+1):0x100000000000000*e+0x1000000000000*t+0x10000000000*r+0x100000000*a+0x1000000*n+65536*i+256*s+o},e.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/0x100000000),r=0|e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(e){var t,r,a,n;for(n=[],r=0,a=e.length;r<a;r++)t=e[r],n.push(this.writeByte(t));return n},e}(),lC=function(){var e;function t(e){var t,r,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,a=this.tableCount;0<=a?r<a:r>a;r=0<=a?++r:--r)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var r,a,n,i,s,o,l,c,d,u,h,m,p;for(p in i=Math.floor((d=16*Math.floor(Math.log(h=Object.keys(t).length)/(o=Math.log(2))))/o),c=16*h-d,(a=new lk).writeInt(this.scalarType),a.writeShort(h),a.writeShort(d),a.writeShort(i),a.writeShort(c),n=16*h,l=a.pos+n,s=null,m=[],t)for(u=t[p],a.writeString(p),a.writeInt(e(u)),a.writeInt(l),a.writeInt(u.length),m=m.concat(u),"head"===p&&(s=l),l+=u.length;l%4;)m.push(0),l++;return a.write(m),r=0xb1b0afba-e(a.data),a.pos=s+8,a.writeUInt32(r),a.data},e=function(e){var t,r,a,n;for(e=lq.call(e);e.length%4;)e.push(0);for(a=new lk(e),r=0,t=0,n=e.length;t<n;t=t+=4)r+=a.readUInt32();return 0|r},t}(),lL={}.hasOwnProperty,lP=function(e,t){for(var r in t)lL.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};lS=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var l_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var t;return(t=new lk).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},t}(),lD=function(){function e(e,t){var r,a,n,i,s,o,l,c,d,u,h,m,p,f,g,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(u=e.readUInt16()/2,e.pos+=6,n=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),e.pos+=2,m=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),l=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),c=function(){var t,r;for(r=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)r.push(e.readUInt16());return r}(),a=(this.length-e.pos+this.offset)/2,s=function(){var t,r;for(r=[],o=t=0;0<=a?t<a:t>a;o=0<=a?++t:--t)r.push(e.readUInt16());return r}(),o=f=0,x=n.length;f<x;o=++f)for(p=n[o],r=g=h=m[o];h<=p?g<=p:g>=p;r=h<=p?++g:--g)0===c[o]?i=r+l[o]:0!==(i=s[c[o]/2+(r-h)-(u-o)]||0)&&(i+=l[o]),this.codeMap[r]=65535&i}e.pos=d}return e.encode=function(e,t){var r,a,n,i,s,o,l,c,d,u,h,m,p,f,g,x,y,v,b,w,N,j,A,S,k,C,L,P,_,D,I,R,E,T,M,F,O,B,q,z,U,$,H,W,V,G;switch(P=new lk,i=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,f=function(){var e=[];for(m=0;m<256;++m)e.push(0);return e}(),x={0:0},n={},_=0,E=i.length;_<E;_++)null==x[H=e[a=i[_]]]&&(x[H]=++p),n[a]={old:e[a],new:x[e[a]]},f[a]=x[e[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(f),{charMap:n,subtable:P.data,maxGlyphID:p+1};case"unicode":for(C=[],d=[],y=0,x={},r={},g=l=null,D=0,T=i.length;D<T;D++)null==x[b=e[a=i[D]]]&&(x[b]=++y),r[a]={old:b,new:x[b]},s=x[b]-a,null!=g&&s===l||(g&&d.push(g),C.push(a),l=s),g=a;for(g&&d.push(g),d.push(65535),C.push(65535),S=2*(A=C.length),u=Math.log((j=2*Math.pow(Math.log(A)/Math.LN2,2))/2)/Math.LN2,N=2*A-j,o=[],w=[],h=[],m=I=0,M=C.length;I<M;m=++I){if(k=C[m],c=d[m],65535===k){o.push(0),w.push(0);break}if(k-(L=r[k].new)>=32768)for(o.push(0),w.push(2*(h.length+A-m)),a=R=k;k<=c?R<=c:R>=c;a=k<=c?++R:--R)h.push(r[a].new);else o.push(L-k),w.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*A+2*h.length),P.writeUInt16(0),P.writeUInt16(S),P.writeUInt16(j),P.writeUInt16(u),P.writeUInt16(N),U=0,F=d.length;U<F;U++)a=d[U],P.writeUInt16(a);for(P.writeUInt16(0),$=0,O=C.length;$<O;$++)a=C[$],P.writeUInt16(a);for(W=0,B=o.length;W<B;W++)s=o[W],P.writeUInt16(s);for(V=0,q=w.length;V<q;V++)v=w[V],P.writeUInt16(v);for(G=0,z=h.length;G<z;G++)p=h[G],P.writeUInt16(p);return{charMap:r,subtable:P.data,maxGlyphID:y+1}}},e}(),lI=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="cmap",t.prototype.parse=function(e){var t,r,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)t=new lD(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},t.encode=function(e,t){var r,a;return null==t&&(t="macroman"),r=lD.encode(e,t),(a=new lk).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},t}(),lR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),lE=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r}(),this.charRange=function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),lT=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="post",t.prototype.parse=function(e){var t,r,a,n;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:for(r=e.readUInt16(),this.glyphNameIndex=[],n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var t,r,a;for(a=[],n=t=0,r=this.file.maxp.numGlyphs;0<=r?t<r:t>r;n=0<=r?++t:--t)a.push(e.readUInt32());return a}).call(this)}},t}(),lM=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},lF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="name",t.prototype.parse=function(e){var t,r,a,n,i,s,o,l,c,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(o={},n=l=0,c=r.length;l<c;n=++l)e.pos=(a=r[n]).offset,i=new lM(e.readString(a.length),a),null==o[d=a.nameID]&&(o[d]=[]),o[a.nameID].push(i);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},t}(),lO=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),lB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="hmtx",t.prototype.parse=function(e){var t,r,a,n,i,s,o;for(e.pos=this.offset,this.metrics=[],t=0,s=this.file.hhea.numberOfMetrics;0<=s?t<s:t>s;t=0<=s?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var r,n;for(n=[],t=r=0;0<=a?r<a:r>a;t=0<=a?++r:--r)n.push(e.readInt16());return n}(),this.widths=(function(){var e,t,r,a;for(a=[],e=0,t=(r=this.metrics).length;e<t;e++)n=r[e],a.push(n.advance);return a}).call(this),r=this.widths[this.widths.length-1],o=[],t=i=0;0<=a?i<a:i>a;t=0<=a?++i:--i)o.push(this.widths.push(r));return o},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),lq=[].slice,lz=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var t,r,a,n,i,s,o,l,c,d;return e in this.cache?this.cache[e]:(n=this.file.loca,t=this.file.contents,r=n.indexOf(e),0===(a=n.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+r,i=(s=new lk(t.read(a))).readShort(),l=s.readShort(),d=s.readShort(),o=s.readShort(),c=s.readShort(),this.cache[e]=-1===i?new l$(s,l,d,o,c):new lU(s,i,l,d,o,c),this.cache[e]))},t.prototype.encode=function(e,t,r){var a,n,i,s,o;for(i=[],n=[],s=0,o=t.length;s<o;s++)a=e[t[s]],n.push(i.length),a&&(i=i.concat(a.encode(r)));return n.push(i.length),{table:i,offsets:n}},t}(),lU=function(){function e(e,t,r,a,n,i){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),l$=function(){function e(e,t,r,a,n){var i,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=a,this.yMax=n,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;s=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&s;)i.pos+=1&s?4:2,128&s?i.pos+=8:64&s?i.pos+=4:8&s&&(i.pos+=2)}return e.prototype.encode=function(){var e,t,r;for(t=new lk(lq.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),lH=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lP(t,lS),t.prototype.tag="loca",t.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?(function(){var t,a;for(a=[],r=0,t=this.length;r<t;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var t,a;for(a=[],r=0,t=this.length;r<t;r+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),a=0,n=0,i=0;i<r.length;++i)if(r[i]=a,n<t.length&&t[n]==i){++n,r[i]=a;var s=this.offsets[i],o=this.offsets[i+1]-s;o>0&&(a+=o)}for(var l=Array(4*r.length),c=0;c<r.length;++c)l[4*c+3]=255&r[c],l[4*c+2]=(65280&r[c])>>8,l[4*c+1]=(0xff0000&r[c])>>16,l[4*c]=(0xff000000&r[c])>>24;return l},t}(),lW=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,r,a,n;for(t in a=this.font.cmap.tables[0].codeMap,e={},n=this.subset)r=n[t],e[t]=a[r];return e},e.prototype.glyphsFor=function(e){var t,r,a,n,i,s,o;for(a={},i=0,s=e.length;i<s;i++)a[n=e[i]]=this.font.glyf.glyphFor(n);for(n in t=[],a)(null!=(r=a[n])?r.compound:void 0)&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(n in o=this.glyphsFor(t))r=o[n],a[n]=r;return a},e.prototype.encode=function(e,t){var r,a,n,i,s,o,l,c,d,u,h,m,p,f,g;for(a in r=lI.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),h={0:0},g=r.charMap)h[(o=g[a]).old]=o.new;for(m in u=r.maxGlyphID,i)m in h||(h[m]=u++);return d=Object.keys(c=function(e){var t,r;for(t in r={},e)r[e[t]]=t;return r}(h)).sort(function(e,t){return e-t}),p=function(){var e,t,r;for(r=[],e=0,t=d.length;e<t;e++)s=d[e],r.push(c[s]);return r}(),n=this.font.glyf.encode(i,p,h),l=this.font.loca.encode(n.offsets,p),f={cmap:this.font.cmap.raw(),glyf:n.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();ov.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(r){var a,n,i,s;if(Array.isArray(r))return"["+(function(){var e,n,i;for(i=[],e=0,n=r.length;e<n;e++)a=r[e],i.push(t.convert(a));return i})().join(" ")+"]";if("string"==typeof r)return"/"+r;if(null!=r?r.isString:void 0)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if("[object Object]"===({}).toString.call(r)){for(n in i=["<<"],r)s=r[n],i.push("/"+n+" "+t.convert(s));return i.push(">>"),i.join("\n")}return""+r},t}();let lV={name:"Dr. Medical Practice",address:"123 Health Street, Cape Town, 8001",phone:"+27 21 123 4567",email:"doctor@practice.co.za",registrationNumber:"MP123456",hpcsa:"HPCSA123456"};function lG({patient:e,session:t,onGenerateDocument:r,onEmailDocument:i}){let[s,o]=(0,n.useState)("sick_note"),[l,c]=(0,n.useState)("Dr. John Smith"),[d]=(0,n.useState)(lV),[u,h]=(0,n.useState)(!1),[m,f]=(0,n.useState)(null),[g,y]=(0,n.useState)(!1),[w,N]=(0,n.useState)(""),[A,S]=(0,n.useState)("3"),[k,C]=(0,n.useState)(new Date().toISOString().split("T")[0]),[L,P]=(0,n.useState)(""),[_,D]=(0,n.useState)(""),[I,R]=(0,n.useState)("routine"),[E,T]=(0,n.useState)({name:"",specialty:"",practice:"",address:""}),[M,F]=(0,n.useState)(""),[O,B]=(0,n.useState)(""),[q,z]=(0,n.useState)(""),U=()=>{let t=new Date(k);t.setDate(t.getDate()+parseInt(A));let r=`
MEDICAL CERTIFICATE / SICK NOTE

Patient Details:
Name: ${e.name} ${e.surname}
Date of Birth: ${e.dateOfBirth?new Date(e.dateOfBirth).toLocaleDateString("en-ZA"):"Not specified"}
${e.idNumber?`ID Number: ${e.idNumber}`:""}

Medical Assessment:
Date of Consultation: ${new Date().toLocaleDateString("en-ZA")}
Diagnosis: ${w}

Medical Recommendation:
This patient is medically unfit for work from ${new Date(k).toLocaleDateString("en-ZA")} to ${t.toLocaleDateString("en-ZA")} (${A} day${parseInt(A)>1?"s":""}).

${L?`Work Restrictions: ${L}`:""}

This certificate is issued in accordance with medical assessment and professional judgment.

Doctor: ${l}
Practice: ${d.name}
HPCSA Registration: ${d.hpcsa}
Date Issued: ${new Date().toLocaleDateString("en-ZA")}

Contact Details:
${d.address}
Tel: ${d.phone}
Email: ${d.email}

This is a computer-generated document and is valid without signature.
    `.trim();return{type:"sick_note",title:`Sick Note - ${e.name} ${e.surname}`,content:r,metadata:{patientName:`${e.name} ${e.surname}`,doctorName:l,practiceDetails:d,dateIssued:new Date,validUntil:t}}},$=()=>{let r=`
SPECIALIST REFERRAL LETTER

Date: ${new Date().toLocaleDateString("en-ZA")}

To: ${E.name}
${E.specialty}
${E.practice}
${E.address}

Re: ${e.name} ${e.surname}
${e.dateOfBirth?`DOB: ${new Date(e.dateOfBirth).toLocaleDateString("en-ZA")}`:""}
${e.idNumber?`ID: ${e.idNumber}`:""}
${e.contact?`Contact: ${e.contact}`:""}

Dear Colleague,

I would appreciate your ${"emergency"===I?"URGENT ":"urgent"===I?"urgent ":""}assessment and management of the above patient.

Clinical History:
${t?.content||"Please see attached consultation notes."}

Reason for Referral:
${_}

${"emergency"===I?"This is an EMERGENCY referral requiring immediate attention.":"urgent"===I?"This is an urgent referral. Please see within 24-48 hours.":"Routine referral at your earliest convenience."}

Current Medications:
${t?.templateData?Object.entries(t.templateData).find(([e])=>e.toLowerCase().includes("medication")||e.toLowerCase().includes("treatment"))?.[1]||"None specified":"Please see consultation notes"}

I have discussed this referral with the patient and they understand the need for specialist assessment.

Please let me know if you require any additional information.

Kind regards,

${l}
${d.name}
HPCSA: ${d.hpcsa}
Tel: ${d.phone}
Email: ${d.email}

---
This referral letter was generated electronically and is valid without signature.
Patient copy provided.
    `.trim();return{type:"referral_letter",title:`Referral Letter - ${e.name} ${e.surname}`,content:r,metadata:{patientName:`${e.name} ${e.surname}`,doctorName:l,practiceDetails:d,dateIssued:new Date,recipientDetails:E}}},H=async()=>{h(!0);try{let t;switch(s){case"sick_note":t=U();break;case"referral_letter":t=$();break;default:throw Error(`Document type ${s} not implemented yet`)}f(t),r(t),"sick_note"===s&&e.contact&&(F(e.contact),B(`Medical Certificate - ${e.name} ${e.surname}`),z(`Dear ${e.name},

Please find attached your medical certificate as discussed during your consultation.

If you have any questions, please don't hesitate to contact our practice.

Best regards,
${l}
${d.name}`))}catch(e){console.error("Error generating document:",e)}finally{h(!1)}},W=()=>{if(!m)return;let e=new ov({orientation:"portrait",unit:"mm",format:"A4"}),t=20;e.setFillColor(0,122,255),e.rect(0,0,e.internal.pageSize.width,25,"F"),e.setTextColor(255,255,255),e.setFontSize(16),e.setFont("helvetica","bold"),e.text("AI Medical Scribe Platform",20,15),e.setFontSize(10),e.setFont("helvetica","normal");let r=new Date;e.text(`Generated: ${r.toLocaleDateString("en-ZA")} ${r.toLocaleTimeString("en-ZA")}`,e.internal.pageSize.width-20-50,15),t=35,e.setTextColor(0,0,0),e.setFontSize(18),e.setFont("helvetica","bold"),e.text(m.title.toUpperCase(),20,t),t+=15,e.setFillColor(245,245,245),e.rect(20,t,e.internal.pageSize.width-40,20,"F"),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("PRACTICE INFORMATION",25,t+7),t+=25,e.setFontSize(10),e.setFont("helvetica","normal"),e.text(`Practice: ${d.name}`,25,t),t+=5,e.text(`Address: ${d.address}`,25,t),t+=5,e.text(`Phone: ${d.phone}`,25,t),t+=5,e.text(`Email: ${d.email}`,25,t),t+=5,e.text(`HPCSA: ${d.hpcsa}`,25,t),t+=15,e.setFontSize(10),e.setFont("helvetica","normal"),e.splitTextToSize(m.content,e.internal.pageSize.width-40).forEach(r=>{t>e.internal.pageSize.height-30&&(e.addPage(),t=20),e.text(r,20,t),t+=5});let a=e.getNumberOfPages();for(let t=1;t<=a;t++)e.setPage(t),e.setDrawColor(200,200,200),e.line(20,e.internal.pageSize.height-15,e.internal.pageSize.width-20,e.internal.pageSize.height-15),e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(128,128,128),e.text("AI Medical Scribe Platform - Confidential Medical Document",20,e.internal.pageSize.height-10),e.text(`Page ${t} of ${a}`,e.internal.pageSize.width-20-20,e.internal.pageSize.height-10),e.text("This document contains confidential patient information and should be handled according to POPIA guidelines.",20,e.internal.pageSize.height-5);return e},V=()=>{let t=W();if(t){let r=`${m?.title.replace(/\s+/g,"_")}_${e.surname}_${e.name}_${new Date().toISOString().split("T")[0]}.pdf`;t.save(r)}},G=()=>{if(!m)return;let e=window.open("","_blank");e&&(e.document.write(`
        <html>
          <head>
            <title>${m.title}</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                line-height: 1.6;
                margin: 40px;
                color: #333;
              }
              .header {
                background: #007AFF;
                color: white;
                padding: 20px;
                margin: -40px -40px 20px -40px;
                text-align: center;
              }
              .practice-info {
                background: #f5f5f5;
                padding: 15px;
                margin: 20px 0;
                border-left: 4px solid #007AFF;
              }
              .content {
                white-space: pre-wrap;
                margin: 20px 0;
              }
              .footer {
                margin-top: 40px;
                padding-top: 20px;
                border-top: 1px solid #ddd;
                font-size: 0.8em;
                color: #666;
                text-align: center;
              }
              @media print {
                body { margin: 20px; }
                .header { margin: -20px -20px 20px -20px; }
              }
            </style>
          </head>
          <body>
            <div class="header">
              <h1>AI Medical Scribe Platform</h1>
              <p>Generated: ${new Date().toLocaleDateString("en-ZA")} ${new Date().toLocaleTimeString("en-ZA")}</p>
            </div>
            <h2>${m.title}</h2>
            <div class="practice-info">
              <h3>Practice Information</h3>
              <p><strong>Practice:</strong> ${d.name}</p>
              <p><strong>Address:</strong> ${d.address}</p>
              <p><strong>Phone:</strong> ${d.phone}</p>
              <p><strong>Email:</strong> ${d.email}</p>
              <p><strong>HPCSA:</strong> ${d.hpcsa}</p>
            </div>
            <div class="content">${m.content}</div>
            <div class="footer">
              <p>AI Medical Scribe Platform - Confidential Medical Document</p>
              <p>This document contains confidential patient information and should be handled according to POPIA guidelines.</p>
            </div>
          </body>
        </html>
      `),e.document.close(),e.print())};return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(tO,{className:"w-5 h-5 text-blue-600"}),"Medical Document Generator",(0,a.jsxs)(j,{variant:"outline",className:"ml-auto",children:[e.name," ",e.surname]})]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsxs)(iy,{value:s,onValueChange:e=>o(e),children:[(0,a.jsxs)(iC,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(iL,{value:"sick_note",className:"flex items-center gap-2",children:[(0,a.jsx)(p,{className:"w-4 h-4"}),"Sick Note"]}),(0,a.jsxs)(iL,{value:"referral_letter",className:"flex items-center gap-2",children:[(0,a.jsx)(ri,{className:"w-4 h-4"}),"Referral Letter"]}),(0,a.jsxs)(iL,{value:"discharge_summary",disabled:!0,className:"flex items-center gap-2",children:[(0,a.jsx)(tO,{className:"w-4 h-4"}),"Discharge Summary"]})]}),(0,a.jsxs)(iP,{value:"sick_note",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"diagnosis",children:"Primary Diagnosis"}),(0,a.jsx)(v,{id:"diagnosis",placeholder:"e.g., Upper respiratory tract infection",value:w,onChange:e=>N(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"days-off",children:"Days Off Work"}),(0,a.jsxs)(no,{value:A,onValueChange:S,children:[(0,a.jsx)(nQ,{children:(0,a.jsx)(nu,{})}),(0,a.jsxs)(n2,{children:[(0,a.jsx)(n5,{value:"1",children:"1 day"}),(0,a.jsx)(n5,{value:"2",children:"2 days"}),(0,a.jsx)(n5,{value:"3",children:"3 days"}),(0,a.jsx)(n5,{value:"5",children:"5 days (1 week)"}),(0,a.jsx)(n5,{value:"7",children:"7 days"}),(0,a.jsx)(n5,{value:"14",children:"14 days (2 weeks)"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"start-date",children:"Start Date"}),(0,a.jsx)(v,{id:"start-date",type:"date",value:k,onChange:e=>C(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"doctor-name",children:"Doctor Name"}),(0,a.jsx)(v,{id:"doctor-name",value:l,onChange:e=>c(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"work-restrictions",children:"Work Restrictions (Optional)"}),(0,a.jsx)(tL,{id:"work-restrictions",placeholder:"e.g., Light duties only, No lifting >5kg",value:L,onChange:e=>P(e.target.value),rows:2})]})]}),(0,a.jsxs)(iP,{value:"referral_letter",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"specialist-name",children:"Specialist Name"}),(0,a.jsx)(v,{id:"specialist-name",placeholder:"Dr. Jane Specialist",value:E.name,onChange:e=>T(t=>({...t,name:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"specialty",children:"Specialty"}),(0,a.jsxs)(no,{value:E.specialty,onValueChange:e=>T(t=>({...t,specialty:e})),children:[(0,a.jsx)(nQ,{children:(0,a.jsx)(nu,{placeholder:"Select specialty"})}),(0,a.jsxs)(n2,{children:[(0,a.jsx)(n5,{value:"Cardiology",children:"Cardiology"}),(0,a.jsx)(n5,{value:"Dermatology",children:"Dermatology"}),(0,a.jsx)(n5,{value:"Endocrinology",children:"Endocrinology"}),(0,a.jsx)(n5,{value:"Gastroenterology",children:"Gastroenterology"}),(0,a.jsx)(n5,{value:"Neurology",children:"Neurology"}),(0,a.jsx)(n5,{value:"Oncology",children:"Oncology"}),(0,a.jsx)(n5,{value:"Orthopedics",children:"Orthopedics"}),(0,a.jsx)(n5,{value:"Psychiatry",children:"Psychiatry"}),(0,a.jsx)(n5,{value:"Pulmonology",children:"Pulmonology"}),(0,a.jsx)(n5,{value:"Radiology",children:"Radiology"}),(0,a.jsx)(n5,{value:"Urology",children:"Urology"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"urgency",children:"Urgency Level"}),(0,a.jsxs)(no,{value:I,onValueChange:e=>R(e),children:[(0,a.jsx)(nQ,{children:(0,a.jsx)(nu,{})}),(0,a.jsxs)(n2,{children:[(0,a.jsx)(n5,{value:"routine",children:"Routine"}),(0,a.jsx)(n5,{value:"urgent",children:"Urgent (24-48h)"}),(0,a.jsx)(n5,{value:"emergency",children:"Emergency (Immediate)"})]})]}),(e=>{switch(e){case"emergency":return(0,a.jsx)(j,{variant:"destructive",className:"bg-red-600",children:"EMERGENCY"});case"urgent":return(0,a.jsx)(j,{variant:"destructive",className:"bg-orange-600",children:"URGENT"});default:return(0,a.jsx)(j,{variant:"outline",children:"Routine"})}})(I)]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"practice-name",children:"Practice Name"}),(0,a.jsx)(v,{id:"practice-name",placeholder:"Specialist Medical Centre",value:E.practice,onChange:e=>T(t=>({...t,practice:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"referral-reason",children:"Reason for Referral"}),(0,a.jsx)(tL,{id:"referral-reason",placeholder:"Please assess and advise on management of...",value:_,onChange:e=>D(e.target.value),rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"specialist-address",children:"Specialist Address"}),(0,a.jsx)(tL,{id:"specialist-address",placeholder:"Practice address",value:E.address,onChange:e=>T(t=>({...t,address:e.target.value})),rows:2})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-6 border-t",children:[(0,a.jsxs)(b.$,{onClick:H,disabled:u,className:"flex items-center gap-2",children:[u?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsx)(tO,{className:"w-4 h-4"}),"Generate Document"]}),(0,a.jsxs)(b.$,{variant:"outline",className:"flex items-center gap-2",onClick:V,disabled:!m,children:[(0,a.jsx)(rs,{className:"w-4 h-4"}),"Download PDF"]}),(0,a.jsxs)(b.$,{variant:"outline",className:"flex items-center gap-2",onClick:G,disabled:!m,children:[(0,a.jsx)(ro,{className:"w-4 h-4"}),"Print"]}),(0,a.jsxs)(tv,{open:g,onOpenChange:y,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{variant:"outline",className:"flex items-center gap-2",disabled:!m,children:[(0,a.jsx)(tW,{className:"w-4 h-4"}),"Preview"]})}),(0,a.jsxs)(tj,{className:"sm:max-w-5xl max-h-[95vh] overflow-hidden",children:[(0,a.jsx)(tA,{className:"sticky top-0 bg-white z-10 border-b pb-4",children:(0,a.jsxs)(tS,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Document Preview"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(b.$,{size:"sm",variant:"outline",onClick:V,children:[(0,a.jsx)(rs,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),(0,a.jsxs)(b.$,{size:"sm",variant:"outline",onClick:G,children:[(0,a.jsx)(ro,{className:"w-4 h-4 mr-2"}),"Print"]})]})]})}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-[calc(95vh-8rem)]",children:m&&(0,a.jsx)("div",{className:"bg-white shadow-2xl mx-auto max-w-3xl border border-gray-200",style:{aspectRatio:"210/297"},children:(0,a.jsxs)("div",{className:"p-8 space-y-6 min-h-full bg-white",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 -mx-8 -mt-8 mb-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"AI Medical Scribe Platform"}),(0,a.jsx)("p",{className:"text-blue-100 text-sm",children:"Professional Medical Documentation"})]}),(0,a.jsxs)("div",{className:"text-right text-sm text-blue-100",children:[(0,a.jsxs)("p",{children:["Generated: ",new Date().toLocaleDateString("en-ZA")]}),(0,a.jsx)("p",{children:new Date().toLocaleTimeString("en-ZA")})]})]})}),(0,a.jsxs)("div",{className:"text-center border-b border-gray-200 pb-4",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 uppercase tracking-wide",children:m.title}),(0,a.jsx)("div",{className:"w-24 h-1 bg-blue-600 mx-auto mt-2"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-6 rounded-xl border-l-4 border-blue-600 shadow-sm",children:[(0,a.jsxs)("h3",{className:"font-bold mb-4 text-blue-900 text-lg flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-2"}),"Practice Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:"Practice:"}),(0,a.jsx)("p",{className:"text-gray-900",children:d.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:"HPCSA:"}),(0,a.jsx)("p",{className:"text-gray-900",children:d.hpcsa})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:"Address:"}),(0,a.jsx)("p",{className:"text-gray-900",children:d.address})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:"Contact:"}),(0,a.jsx)("p",{className:"text-gray-900",children:d.phone}),(0,a.jsx)("p",{className:"text-gray-900",children:d.email})]})]})]}),(0,a.jsx)("div",{className:"bg-white border-2 border-gray-100 rounded-xl p-6 shadow-sm",children:(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed text-gray-800 bg-transparent border-0 p-0",children:m.content})})}),(0,a.jsx)("div",{className:"border-t-2 border-gray-200 pt-6 mt-8",children:(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),(0,a.jsx)("span",{className:"font-semibold",children:"AI Medical Scribe Platform"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),(0,a.jsx)("span",{children:"Confidential Medical Document"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-xs text-yellow-800 font-medium",children:"⚠️ This document contains confidential patient information and should be handled according to POPIA guidelines."})})]})})]})})})]})]})]}),i&&(0,a.jsxs)("div",{className:"pt-6 border-t mt-6 space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(rl.A,{className:"w-5 h-5"}),"Email Document to Patient"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"recipient-email",children:"Patient Email"}),(0,a.jsx)(v,{id:"recipient-email",type:"email",placeholder:"patient@email.com",value:M,onChange:e=>F(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"email-subject",children:"Subject"}),(0,a.jsx)(v,{id:"email-subject",placeholder:"Medical Certificate",value:O,onChange:e=>B(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"email-message",children:"Message"}),(0,a.jsx)(tL,{id:"email-message",placeholder:"Email message to patient",value:q,onChange:e=>z(e.target.value),rows:3})]}),(0,a.jsxs)(tv,{children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(rl.A,{className:"w-4 h-4 mr-2"}),"Email Document"]})}),(0,a.jsx)(tj,{className:"sm:max-w-5xl max-h-[90vh] overflow-y-auto",children:(0,a.jsx)(iO,{patient:e,initialTemplate:"general-communication",onSend:e=>{console.log("Document emailed successfully:",e)},onClose:()=>{}})})]})]})]})]})})}let lZ=(0,s.A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),lY=(0,s.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),lK=(0,s.A)("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),lX=(0,s.A)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);class lJ{constructor(){this.files=new Map,this.folders=new Map,this.cameraSettings={resolution:"high",flash:!1,focusMode:"auto",whiteBalance:"auto",imageStabilization:!0,compressionQuality:.8},this.initializeDefaultFolders(),this.loadFromStorage()}initializeDefaultFolders(){[{id:"clinical-photos",name:"Clinical Photos",description:"Patient examination photos and clinical images",color:"#3B82F6",icon:"\uD83D\uDCF8",fileCount:0,createdAt:new Date,updatedAt:new Date},{id:"lab-results",name:"Laboratory Results",description:"Lab reports, test results, and pathology findings",color:"#10B981",icon:"\uD83E\uDDEA",fileCount:0,createdAt:new Date,updatedAt:new Date},{id:"prescriptions",name:"Prescriptions",description:"Prescription documents and medication lists",color:"#F59E0B",icon:"\uD83D\uDC8A",fileCount:0,createdAt:new Date,updatedAt:new Date},{id:"referrals",name:"Referrals",description:"Specialist referral letters and reports",color:"#8B5CF6",icon:"\uD83D\uDCC4",fileCount:0,createdAt:new Date,updatedAt:new Date},{id:"consent-forms",name:"Consent Forms",description:"Patient consent documents and agreements",color:"#EF4444",icon:"\uD83D\uDCCB",fileCount:0,createdAt:new Date,updatedAt:new Date}].forEach(e=>{this.folders.set(e.id,e)})}async capturePhoto(e,t){try{let r=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:this.getResolutionWidth()},height:{ideal:this.getResolutionHeight()},facingMode:"environment"}}),a=document.createElement("video");return a.srcObject=r,a.play(),new Promise((n,i)=>{a.onloadedmetadata=()=>{let s=document.createElement("canvas"),o=s.getContext("2d");s.width=a.videoWidth,s.height=a.videoHeight,o.drawImage(a,0,0),s.toBlob(async a=>{if(!a)return void i(Error("Failed to capture image"));let s=await this.processImageFile(a,e,t);r.getTracks().forEach(e=>e.stop()),n(s)},"image/jpeg",this.cameraSettings.compressionQuality)}})}catch(e){throw console.error("Camera capture failed:",e),Error("Camera access denied or not available")}}async captureMultiplePhotos(e,t,r,a){let n=[];for(let i=0;i<t;i++)try{let s=await this.capturePhoto(e,r);n.push(s),a?.(i+1,t),await new Promise(e=>setTimeout(e,1e3))}catch(e){console.error(`Failed to capture photo ${i+1}:`,e)}return n}async recordVideo(e,t=6e4,r){try{let a=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:this.getResolutionWidth()},height:{ideal:this.getResolutionHeight()},facingMode:"environment"},audio:!0}),n=new MediaRecorder(a,{mimeType:"video/webm;codecs=vp9"}),i=[];return new Promise((s,o)=>{n.ondataavailable=e=>{e.data.size>0&&i.push(e.data)},n.onstop=async()=>{let t=new Blob(i,{type:"video/webm"});try{let n=await this.processVideoFile(t,e,r);a.getTracks().forEach(e=>e.stop()),s(n)}catch(e){o(e)}},n.start(),setTimeout(()=>{"recording"===n.state&&n.stop()},t)})}catch(e){throw console.error("Video recording failed:",e),Error("Camera/microphone access denied or not available")}}async processImageFile(e,t,r){let a=this.generateFileId(),n=URL.createObjectURL(e),i=await this.generateThumbnail(e),s=await this.extractImageMetadata(e),o=await this.performImageAnalysis(e),l={id:a,name:`Clinical_Photo_${new Date().toISOString().slice(0,19)}.jpg`,type:"image",category:"clinical-photo",mimeType:"image/jpeg",size:e.size,url:n,thumbnailUrl:i,uploadDate:new Date,captureDate:new Date,patientId:t,sessionId:r,metadata:{...s,aiAnalysis:o},tags:[],isEncrypted:!0,accessLevel:"confidential"};return this.files.set(a,l),this.saveToStorage(),l}async processVideoFile(e,t,r){let a=this.generateFileId(),n=URL.createObjectURL(e),i=await this.generateVideoThumbnail(e),s={id:a,name:`Clinical_Video_${new Date().toISOString().slice(0,19)}.webm`,type:"video",category:"clinical-photo",mimeType:"video/webm",size:e.size,url:n,thumbnailUrl:i,uploadDate:new Date,captureDate:new Date,patientId:t,sessionId:r,metadata:{duration:0},tags:[],isEncrypted:!0,accessLevel:"confidential"};return this.files.set(a,s),this.saveToStorage(),s}async uploadFile(e,t,r,a){let n,i=this.generateFileId(),s=URL.createObjectURL(e);e.type.startsWith("image/")&&(n=await this.generateThumbnail(e));let o={id:i,name:e.name,type:this.getFileType(e.type),category:r,mimeType:e.type,size:e.size,url:s,thumbnailUrl:n,uploadDate:new Date,patientId:t,sessionId:a,metadata:{},tags:[],isEncrypted:!1,accessLevel:"restricted"};return this.files.set(i,o),this.updateFolderCount(r),this.saveToStorage(),o}async uploadMultipleFiles(e,t,r,a,n){let i=[];for(let s=0;s<e.length;s++)try{let o=await this.uploadFile(e[s],t,r,a);i.push(o),n?.(s+1,e.length)}catch(t){console.error(`Failed to upload file ${e[s].name}:`,t)}return i}getFilesByPatient(e){return Array.from(this.files.values()).filter(t=>t.patientId===e)}getFilesBySession(e){return Array.from(this.files.values()).filter(t=>t.sessionId===e)}getFilesByCategory(e){return Array.from(this.files.values()).filter(t=>t.category===e)}getRecentFiles(e=10){return Array.from(this.files.values()).sort((e,t)=>t.uploadDate.getTime()-e.uploadDate.getTime()).slice(0,e)}searchFiles(e){let t=e.toLowerCase();return Array.from(this.files.values()).filter(e=>e.name.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t))||e.metadata.medicalContext?.condition?.toLowerCase().includes(t))}deleteFile(e){let t=this.files.get(e);return!!t&&(URL.revokeObjectURL(t.url),t.thumbnailUrl&&URL.revokeObjectURL(t.thumbnailUrl),this.files.delete(e),this.updateFolderCount(t.category,-1),this.saveToStorage(),!0)}updateFileMetadata(e,t){let r=this.files.get(e);return!!r&&(r.metadata={...r.metadata,...t},this.saveToStorage(),!0)}addFileAnnotation(e,t){let r=this.files.get(e);if(!r)return!1;r.metadata.medicalContext||(r.metadata.medicalContext={}),r.metadata.medicalContext.annotations||(r.metadata.medicalContext.annotations=[]);let a={...t,id:this.generateFileId(),createdAt:new Date};return r.metadata.medicalContext.annotations.push(a),this.saveToStorage(),!0}async performImageAnalysis(e){let t=new Image,r=URL.createObjectURL(e);return new Promise(e=>{t.onload=()=>{URL.revokeObjectURL(r),e({confidence:.85,findings:["Image quality: Good","Adequate lighting","Clear focus"],recommendations:["Consider multiple angles","Ensure proper patient positioning"],riskFactors:[],qualityMetrics:{sharpness:.8,brightness:.7,contrast:.75,completeness:.9}})},t.src=r})}getResolutionWidth(){return({low:640,medium:1280,high:1920,ultra:3840})[this.cameraSettings.resolution]}getResolutionHeight(){return({low:480,medium:720,high:1080,ultra:2160})[this.cameraSettings.resolution]}async generateThumbnail(e){let t=new Image,r=document.createElement("canvas"),a=r.getContext("2d");return new Promise(n=>{t.onload=()=>{r.width=150,r.height=150;let e=Math.min(r.width/t.width,r.height/t.height),i=r.width/2-t.width/2*e,s=r.height/2-t.height/2*e;a.drawImage(t,i,s,t.width*e,t.height*e),r.toBlob(e=>{e&&n(URL.createObjectURL(e))},"image/jpeg",.7)},t.src=URL.createObjectURL(e)})}async generateVideoThumbnail(e){let t=document.createElement("video"),r=document.createElement("canvas"),a=r.getContext("2d");return new Promise(n=>{t.onloadeddata=()=>{t.currentTime=1},t.onseeked=()=>{r.width=150,r.height=150;let e=Math.min(r.width/t.videoWidth,r.height/t.videoHeight),i=r.width/2-t.videoWidth/2*e,s=r.height/2-t.videoHeight/2*e;a.drawImage(t,i,s,t.videoWidth*e,t.videoHeight*e),r.toBlob(e=>{e&&n(URL.createObjectURL(e))},"image/jpeg",.7)},t.src=URL.createObjectURL(e)})}async extractImageMetadata(e){let t=new Image,r=URL.createObjectURL(e);return new Promise(e=>{t.onload=()=>{let a={width:t.naturalWidth,height:t.naturalHeight,deviceInfo:{orientation:0,timestamp:new Date}};URL.revokeObjectURL(r),e(a)},t.src=r})}getFileType(e){return e.startsWith("image/")?"image":e.startsWith("video/")?"video":e.startsWith("audio/")?"audio":"document"}generateFileId(){return`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}updateFolderCount(e,t=1){let r=this.folders.get(e);r&&(r.fileCount+=t,r.updatedAt=new Date)}saveToStorage(){try{let e={files:Array.from(this.files.entries()),folders:Array.from(this.folders.entries()),settings:this.cameraSettings};localStorage.setItem("medicalFileManager",JSON.stringify(e))}catch(e){console.error("Failed to save file manager data:",e)}}loadFromStorage(){try{let e=localStorage.getItem("medicalFileManager");if(e){let t=JSON.parse(e);this.files=new Map(t.files||[]),this.folders=new Map(t.folders||[]),this.cameraSettings={...this.cameraSettings,...t.settings}}}catch(e){console.error("Failed to load file manager data:",e)}}getCameraSettings(){return{...this.cameraSettings}}updateCameraSettings(e){this.cameraSettings={...this.cameraSettings,...e},this.saveToStorage()}getFolders(){return Array.from(this.folders.values())}getFileOrganization(){return{folders:this.getFolders(),recentFiles:this.getRecentFiles(10),favoriteFiles:[],sharedFiles:[]}}}let lQ=new lJ,l0=(0,s.A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),l1=(0,s.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),l2=(0,s.A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),l5=(0,s.A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),l4=(0,s.A)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),l3=(0,s.A)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),l6=(0,s.A)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),l8=(0,s.A)("flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]),l7=(0,s.A)("flashlight-off",[["path",{d:"M16 16v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4",key:"1r120k"}],["path",{d:"M7 2h11v4c0 2-2 2-2 4v1",key:"dz1920"}],["line",{x1:"11",x2:"18",y1:"6",y2:"6",key:"bi1vpe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),l9=(0,s.A)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);function ce({patient:e,sessionId:t,onCapture:r,onClose:i}){let[s,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)("photo"),[d,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null),[x,y]=(0,n.useState)([]),[v,w]=(0,n.useState)(lQ.getCameraSettings()),[N,A]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[C,L]=(0,n.useState)(1),[P,_]=(0,n.useState)(null),[D,I]=(0,n.useState)(0),R=(0,n.useRef)(null),E=(0,n.useRef)(null),T=(0,n.useRef)(null),M=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0}).then(e=>(e.getTracks().forEach(e=>e.stop()),!0)).catch(()=>!1);if(g(e),!e)return;let t=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1920},height:{ideal:1080},facingMode:"environment"},audio:"video"===l});E.current=t,R.current&&(R.current.srcObject=t,R.current.play())}catch(e){console.error("Camera initialization failed:",e),g(!1)}},F=()=>{E.current&&(E.current.getTracks().forEach(e=>e.stop()),E.current=null),T.current&&(clearInterval(T.current),T.current=null)},O=async()=>{if(R.current&&!m){p(!0);try{P&&await z(P);let a=await lQ.capturePhoto(e.id,t);y(e=>[...e,a]),r?.(a);let n=document.createElement("div");n.className="fixed inset-0 bg-white z-50 pointer-events-none",n.style.animation="flash 0.2s ease-out",document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n)},200)}catch(e){console.error("Photo capture failed:",e)}finally{p(!1)}}},B=async()=>{if(E.current&&!d)try{h(!0)}catch(e){console.error("Video recording failed:",e),h(!1)}},q=async()=>{if(d)try{let a=await lQ.recordVideo(e.id,1e3*D,t);y(e=>[...e,a]),r?.(a),h(!1)}catch(e){console.error("Stop recording failed:",e),h(!1)}},z=e=>new Promise(t=>{let r=e,a=setInterval(()=>{r<=0?(clearInterval(a),t()):r--},1e3)}),U=async()=>{if(E.current)try{let e=E.current.getVideoTracks(),t=e[0]?.getSettings()?.facingMode;F();let r=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1920},height:{ideal:1080},facingMode:"environment"===t?"user":"environment"},audio:"video"===l});E.current=r,R.current&&(R.current.srcObject=r,R.current.play())}catch(e){console.error("Camera switch failed:",e)}},$=e=>{let t=Math.max(1,Math.min(5,C+e));L(t),R.current&&(R.current.style.transform=`scale(${t})`)},H=e=>{let t={...v,...e};w(t),lQ.updateCameraSettings(t)},W=e=>{lQ.deleteFile(e),y(t=>t.filter(t=>t.id!==e))};return!1===f?(0,a.jsxs)(tv,{open:s,onOpenChange:o,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{className:"flex items-center gap-2",children:[(0,a.jsx)(l0,{className:"w-4 h-4"}),"Camera"]})}),(0,a.jsxs)(tj,{className:"sm:max-w-md",children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Camera Permission Required"})}),(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)(l1,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Camera Access Denied"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Please allow camera access to capture clinical photos and videos."}),(0,a.jsx)(b.$,{onClick:M,children:"Request Permission"})]})]})]}):(0,a.jsxs)(tv,{open:s,onOpenChange:o,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{className:"flex items-center gap-2",children:[(0,a.jsx)(l0,{className:"w-4 h-4"}),"Camera"]})}),(0,a.jsxs)(tj,{className:"sm:max-w-6xl max-h-[90vh] overflow-hidden",children:[(0,a.jsx)(tA,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(tS,{className:"flex items-center gap-2",children:[(0,a.jsx)(l0,{className:"w-5 h-5"}),"Clinical Camera"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:e.name}),t&&(0,a.jsxs)(j,{variant:"outline",className:"text-xs",children:["Session ",t.slice(-6)]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 h-[70vh]",children:[(0,a.jsxs)("div",{className:"lg:col-span-3 relative bg-black rounded-lg overflow-hidden",children:[null===f?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)(l0,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Initializing camera..."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("video",{ref:R,className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,muted:!0}),S&&(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,a.jsx)("div",{className:"w-full h-full grid grid-cols-3 grid-rows-3",children:Array.from({length:9},(e,t)=>(0,a.jsx)("div",{className:"border border-white border-opacity-30"},t))})}),d&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-full",children:[(0,a.jsx)(l2,{className:"w-3 h-3 fill-current animate-pulse"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["REC ",(e=>{let t=Math.floor(e/60);return`${t.toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`})(D)]})]}),C>1&&(0,a.jsx)("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded",children:(0,a.jsxs)("span",{className:"text-sm",children:[C.toFixed(1),"x"]})}),P&&(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)("div",{className:"bg-black bg-opacity-70 text-white text-6xl font-bold px-6 py-4 rounded-full",children:P})})]}),(0,a.jsx)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 bg-black bg-opacity-50 backdrop-blur-sm px-6 py-3 rounded-full",children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-800 rounded-full p-1",children:[(0,a.jsxs)(b.$,{size:"sm",variant:"photo"===l?"default":"ghost",onClick:()=>c("photo"),className:"rounded-full px-3 py-1 text-xs",children:[(0,a.jsx)(i_,{className:"w-3 h-3 mr-1"}),"Photo"]}),(0,a.jsxs)(b.$,{size:"sm",variant:"video"===l?"default":"ghost",onClick:()=>c("video"),className:"rounded-full px-3 py-1 text-xs",children:[(0,a.jsx)(iD,{className:"w-3 h-3 mr-1"}),"Video"]})]}),"photo"===l?(0,a.jsx)(b.$,{size:"lg",onClick:O,disabled:m,className:"w-16 h-16 rounded-full bg-white hover:bg-gray-100 text-black border-4 border-gray-300",children:m?(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-black rounded-full animate-spin"}):(0,a.jsx)(l2,{className:"w-8 h-8"})}):(0,a.jsx)(b.$,{size:"lg",onClick:d?q:B,className:`w-16 h-16 rounded-full border-4 border-gray-300 ${d?"bg-red-600 hover:bg-red-700":"bg-white hover:bg-gray-100 text-black"}`,children:d?(0,a.jsx)(l5,{className:"w-6 h-6 fill-current"}):(0,a.jsx)(l2,{className:"w-8 h-8"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:U,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full w-10 h-10",children:(0,a.jsx)(l4,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:[(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>$(.5),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full w-10 h-10",children:(0,a.jsx)(l3,{className:"w-4 h-4"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>$(-.5),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full w-10 h-10",children:(0,a.jsx)(l6,{className:"w-4 h-4"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>k(!S),className:`rounded-full w-10 h-10 ${S?"text-blue-400 bg-blue-400 bg-opacity-20":"text-white hover:bg-white hover:bg-opacity-20"}`,children:(0,a.jsx)(u,{className:"w-4 h-4"})}),"photo"===l&&(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>H({flash:!v.flash}),className:`rounded-full w-10 h-10 ${v.flash?"text-yellow-400 bg-yellow-400 bg-opacity-20":"text-white hover:bg-white hover:bg-opacity-20"}`,children:v.flash?(0,a.jsx)(l8,{className:"w-4 h-4"}):(0,a.jsx)(l7,{className:"w-4 h-4"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>_(3===P?null:3),className:`rounded-full w-10 h-10 ${P?"text-green-400 bg-green-400 bg-opacity-20":"text-white hover:bg-white hover:bg-opacity-20"}`,children:(0,a.jsx)(l9,{className:"w-4 h-4"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>A(!0),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full w-10 h-10",children:(0,a.jsx)(tU,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Captured Files"}),(0,a.jsxs)(j,{variant:"outline",className:"text-xs",children:[x.length," files"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[x.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg p-3 border",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.name,className:"w-16 h-16 object-cover rounded border"}):(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center",children:"video"===e.type?(0,a.jsx)(iD,{className:"w-6 h-6 text-gray-400"}):(0,a.jsx)(i_,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.size/1024/1024).toFixed(1)," MB"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.uploadDate.toLocaleTimeString()})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>{let t=document.createElement("a");t.href=e.url,t.download=e.name,t.click()},className:"w-8 h-8 p-0",children:(0,a.jsx)(rs,{className:"w-3 h-3"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>W(e.id),className:"w-8 h-8 p-0 text-red-600 hover:text-red-700",children:(0,a.jsx)(tR,{className:"w-3 h-3"})})]})]})},e.id)),0===x.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(l0,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),(0,a.jsx)("p",{className:"text-sm",children:"No files captured yet"})]})]})]})]}),(0,a.jsx)(tv,{open:N,onOpenChange:A,children:(0,a.jsxs)(tj,{children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Camera Settings"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Resolution"}),(0,a.jsxs)("select",{value:v.resolution,onChange:e=>H({resolution:e.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-md",children:[(0,a.jsx)("option",{value:"low",children:"Low (640x480)"}),(0,a.jsx)("option",{value:"medium",children:"Medium (1280x720)"}),(0,a.jsx)("option",{value:"high",children:"High (1920x1080)"}),(0,a.jsx)("option",{value:"ultra",children:"Ultra (3840x2160)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Compression Quality"}),(0,a.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:v.compressionQuality,onChange:e=>H({compressionQuality:parseFloat(e.target.value)}),className:"w-full mt-1"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(100*v.compressionQuality),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:v.imageStabilization,onChange:e=>H({imageStabilization:e.target.checked})}),(0,a.jsx)("label",{className:"text-sm",children:"Image Stabilization"})]})]})]})})]})]})}function ct({patient:e,sessionId:t,compact:r=!1}){let[i,s]=(0,n.useState)(null),[o,c]=(0,n.useState)("all"),[d,m]=(0,n.useState)("grid"),[p,f]=(0,n.useState)(""),[g,y]=(0,n.useState)(new Set),[w,N]=(0,n.useState)(null),[A,S]=(0,n.useState)(null),[k,C]=(0,n.useState)("files"),L=()=>{s(lQ.getFileOrganization())},P=async r=>{let a=r.target.files;if(a&&e){S(0);try{await lQ.uploadMultipleFiles(a,e.id,"other",t,(e,t)=>{S(e/t*100)}),L(),S(null)}catch(e){console.error("File upload failed:",e),S(null)}}},_=()=>{if(!i)return[];let r=[];return r="all"===o?[...i.recentFiles,...i.favoriteFiles,...i.sharedFiles]:"recent"===o?i.recentFiles:"favorites"===o?i.favoriteFiles:"shared"===o?i.sharedFiles:lQ.getFilesByCategory(o),e&&(r=r.filter(t=>t.patientId===e.id)),t&&(r=r.filter(e=>e.sessionId===t)),p&&(r=lQ.searchFiles(p).filter(t=>!e||t.patientId===e.id)),Array.from(new Map(r.map(e=>[e.id,e])).values())},D=e=>{lQ.deleteFile(e),y(t=>{let r=new Set(t);return r.delete(e),r}),L()},I=e=>{y(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},R=e=>{switch(e.type){case"image":return(0,a.jsx)(i_,{className:"w-4 h-4"});case"video":return(0,a.jsx)(iD,{className:"w-4 h-4"});case"audio":return(0,a.jsx)(tM,{className:"w-4 h-4"});default:return(0,a.jsx)(tO,{className:"w-4 h-4"})}},E=e=>{let t={"clinical-photo":"bg-blue-100 text-blue-800","lab-result":"bg-green-100 text-green-800",prescription:"bg-orange-100 text-orange-800",referral:"bg-purple-100 text-purple-800",consent:"bg-red-100 text-red-800",other:"bg-gray-100 text-gray-800"};return t[e]||t.other},T=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]};return r?(0,a.jsxs)(x.Zp,{className:"w-full",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(x.ZB,{className:"text-base",children:"Files"}),(0,a.jsx)(ce,{patient:e,sessionId:t,onCapture:L})]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:_().slice(0,8).map(e=>(0,a.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>N(e),children:e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:R(e)})},e.id))}),_().length>8&&(0,a.jsxs)(b.$,{variant:"outline",size:"sm",className:"w-full mt-3",children:["View All ",_().length," Files"]})]})]}):(0,a.jsxs)(x.Zp,{className:"w-full",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(lZ,{className:"w-5 h-5"}),"File Manager",e&&(0,a.jsx)(j,{variant:"outline",className:"ml-2",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e&&(0,a.jsx)(ce,{patient:e,sessionId:t,onCapture:L}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"file",multiple:!0,onChange:P,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,a.jsxs)(b.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(lY,{className:"w-4 h-4 mr-2"}),"Upload"]})]})]})]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsxs)(iy,{value:k,onValueChange:C,children:[(0,a.jsxs)(iC,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(iL,{value:"files",children:"Files"}),(0,a.jsx)(iL,{value:"folders",children:"Folders"}),(0,a.jsx)(iL,{value:"recent",children:"Recent"})]}),(0,a.jsxs)(iP,{value:"files",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(v,{placeholder:"Search files...",value:p,onChange:e=>f(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.$,{variant:"grid"===d?"default":"outline",size:"sm",onClick:()=>m("grid"),children:(0,a.jsx)(u,{className:"w-4 h-4"})}),(0,a.jsx)(b.$,{variant:"list"===d?"default":"outline",size:"sm",onClick:()=>m("list"),children:(0,a.jsx)(h,{className:"w-4 h-4"})})]}),g.size>0&&(0,a.jsxs)(b.$,{variant:"destructive",size:"sm",onClick:()=>{g.forEach(e=>{lQ.deleteFile(e)}),y(new Set),L()},children:[(0,a.jsx)(tR,{className:"w-4 h-4 mr-2"}),"Delete (",g.size,")"]})]}),null!==A&&(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${A}%`}})}),"grid"===d?(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:_().map(e=>(0,a.jsxs)("div",{className:`relative group cursor-pointer border-2 rounded-lg overflow-hidden transition-all ${g.has(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>I(e.id),children:[(0,a.jsx)("div",{className:"aspect-square",children:e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:R(e)})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white p-2 transform translate-y-full group-hover:translate-y-0 transition-transform",children:[(0,a.jsx)("p",{className:"text-xs font-medium truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsx)(j,{className:`text-xs ${E(e.category)}`,children:e.category}),(0,a.jsx)("span",{className:"text-xs",children:T(e.size)})]})]}),(0,a.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),N(e)},className:"w-6 h-6 p-0 bg-black bg-opacity-50 hover:bg-opacity-70 text-white",children:(0,a.jsx)(tW,{className:"w-3 h-3"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),D(e.id)},className:"w-6 h-6 p-0 bg-black bg-opacity-50 hover:bg-opacity-70 text-white",children:(0,a.jsx)(tR,{className:"w-3 h-3"})})]})}),(0,a.jsx)("div",{className:"absolute top-2 left-2",children:(0,a.jsx)(j,{variant:"secondary",className:"text-xs",children:e.type.toUpperCase()})})]},e.id))}):(0,a.jsx)("div",{className:"space-y-2",children:_().map(e=>(0,a.jsxs)("div",{className:`flex items-center gap-4 p-3 rounded-lg border cursor-pointer transition-all ${g.has(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>I(e.id),children:[e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.name,className:"w-12 h-12 object-cover rounded border"}):(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded border flex items-center justify-center",children:R(e)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,a.jsx)(j,{className:`text-xs ${E(e.category)}`,children:e.category})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[(0,a.jsx)("span",{children:T(e.size)}),(0,a.jsx)("span",{children:e.uploadDate.toLocaleDateString()}),e.metadata.aiAnalysis&&(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:"AI Analyzed"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),N(e)},children:(0,a.jsx)(tW,{className:"w-4 h-4"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation();let r=document.createElement("a");r.href=e.url,r.download=e.name,r.click()},children:(0,a.jsx)(rs,{className:"w-4 h-4"})}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),D(e.id)},className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(tR,{className:"w-4 h-4"})})]})]},e.id))}),0===_().length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(lK,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No files found"}),(0,a.jsx)("p",{className:"text-gray-500",children:p?"Try adjusting your search terms":"Upload files or capture photos to get started"})]})]}),(0,a.jsx)(iP,{value:"folders",className:"space-y-4",children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:i?.folders.map(e=>(0,a.jsx)(x.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{c(e.id),C("files")},children:(0,a.jsxs)(x.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-lg mx-auto mb-3 flex items-center justify-center text-2xl",style:{backgroundColor:e.color+"20"},children:e.icon}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,a.jsxs)(j,{variant:"outline",className:"text-xs",children:[e.fileCount," files"]})]})},e.id))})}),(0,a.jsx)(iP,{value:"recent",className:"space-y-4",children:(0,a.jsx)("div",{className:"space-y-3",children:i?.recentFiles.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg border hover:border-gray-300 cursor-pointer",onClick:()=>N(e),children:[e.thumbnailUrl?(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.name,className:"w-10 h-10 object-cover rounded"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:R(e)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.uploadDate.toLocaleString()})]}),(0,a.jsx)(j,{className:`text-xs ${E(e.category)}`,children:e.category})]},e.id))})})]}),(0,a.jsx)(tv,{open:!!w,onOpenChange:()=>N(null),children:(0,a.jsx)(tj,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tA,{children:(0,a.jsxs)(tS,{className:"flex items-center gap-2",children:[R(w),w.name]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 text-center",children:"image"===w.type?(0,a.jsx)("img",{src:w.url,alt:w.name,className:"max-w-full max-h-96 mx-auto rounded"}):"video"===w.type?(0,a.jsx)("video",{src:w.url,controls:!0,className:"max-w-full max-h-96 mx-auto rounded"}):"audio"===w.type?(0,a.jsxs)("div",{className:"py-8",children:[(0,a.jsx)(lX,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("audio",{src:w.url,controls:!0,className:"mx-auto"})]}):(0,a.jsxs)("div",{className:"py-8",children:[(0,a.jsx)(tO,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Preview not available for this file type"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"File Information"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Size:"})," ",T(w.size)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Type:"})," ",w.type]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Category:"})," ",w.category]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Upload Date:"})," ",w.uploadDate.toLocaleString()]}),w.captureDate&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Capture Date:"})," ",w.captureDate.toLocaleString()]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Metadata"}),(0,a.jsxs)("div",{className:"space-y-1",children:[w.metadata.width&&w.metadata.height&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Dimensions:"})," ",w.metadata.width," \xd7 ",w.metadata.height]}),w.metadata.duration&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Duration:"})," ",Math.round(w.metadata.duration),"s"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Access Level:"})," ",w.accessLevel]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Encrypted:"})," ",w.isEncrypted?"Yes":"No"]})]})]})]}),w.metadata.aiAnalysis&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"AI Analysis"}),(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm text-blue-800 mb-2",children:["Confidence: ",Math.round(100*w.metadata.aiAnalysis.confidence),"%"]}),(0,a.jsx)("div",{className:"space-y-1",children:w.metadata.aiAnalysis.findings.map((e,t)=>(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["• ",e]},t))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t",children:[(0,a.jsxs)(b.$,{onClick:()=>{let e=document.createElement("a");e.href=w.url,e.download=w.name,e.click()},children:[(0,a.jsx)(rs,{className:"w-4 h-4 mr-2"}),"Download"]}),(0,a.jsxs)(b.$,{variant:"outline",children:[(0,a.jsx)(t_,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,a.jsxs)(b.$,{variant:"outline",children:[(0,a.jsx)(tB,{className:"w-4 h-4 mr-2"}),"Share"]}),(0,a.jsxs)(b.$,{variant:"destructive",onClick:()=>{D(w.id),N(null)},children:[(0,a.jsx)(tR,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})})})]})]})}let cr=(0,s.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ca=(0,s.A)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),cn=(0,s.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ci=(0,s.A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),cs=(0,s.A)("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]),co=(0,s.A)("forward",[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);function cl({patient:e,onSelectMessage:t}){let[r,i]=(0,n.useState)([]),[s,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(""),[h,m]=(0,n.useState)("all"),[p,g]=(0,n.useState)("inbox"),[y,w]=(0,n.useState)(!1),[N,A]=(0,n.useState)(!1),[S,k]=(0,n.useState)(new Set),C=()=>{let t=iF.getMessages();e&&(t=iF.getMessagesByPatient(e.id)),i(t)},L=async()=>{A(!0),await new Promise(e=>setTimeout(e,1e3)),C(),A(!1)},P=()=>{let e=r;if("all"!==h&&(e=e.filter(e=>e.status===h)),d){let t=d.toLowerCase();e=e.filter(e=>e.subject.toLowerCase().includes(t)||e.body.toLowerCase().includes(t)||e.to.some(e=>e.toLowerCase().includes(t)))}return e.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())},_=e=>{c(e),t?.(e)},D=e=>{S.forEach(t=>{iF.getMessage(t)&&("delete"===e?console.log("Deleting message:",t):"archive"===e&&console.log("Archiving message:",t))}),k(new Set),C()},I=e=>{k(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},R=e=>{switch(e.status){case"sent":return(0,a.jsx)(iR,{className:"w-4 h-4 text-green-600"});case"failed":return(0,a.jsx)(cr,{className:"w-4 h-4 text-red-600"});case"scheduled":return(0,a.jsx)(f,{className:"w-4 h-4 text-blue-600"});case"sending":return(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"});default:return(0,a.jsx)(t_,{className:"w-4 h-4 text-gray-600"})}},E=e=>{switch(e){case"urgent":return"bg-red-600";case"high":return"bg-orange-600";case"normal":return"bg-blue-600";default:return"bg-gray-600"}},T=e=>{let t=(new Date().getTime()-e.getTime())/36e5;return t<24?e.toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit"}):t<168?e.toLocaleDateString("en-ZA",{weekday:"short"}):e.toLocaleDateString("en-ZA",{month:"short",day:"numeric"})};return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)(x.Zp,{className:"h-full",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(ca,{className:"w-5 h-5"}),"Email Inbox",e&&(0,a.jsx)(j,{variant:"outline",className:"ml-2",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.$,{size:"sm",variant:"outline",onClick:L,disabled:N,children:(0,a.jsx)(cn,{className:`w-4 h-4 ${N?"animate-spin":""}`})}),(0,a.jsxs)(b.$,{size:"sm",onClick:()=>w(!0),className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(rl.A,{className:"w-4 h-4 mr-2"}),"Compose"]})]})]})}),(0,a.jsxs)(x.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(v,{placeholder:"Search emails...",value:d,onChange:e=>u(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"sent",children:"Sent"}),(0,a.jsx)("option",{value:"draft",children:"Drafts"}),(0,a.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,a.jsx)("option",{value:"failed",children:"Failed"})]}),S.size>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.$,{size:"sm",variant:"outline",onClick:()=>D("archive"),children:(0,a.jsx)(ci,{className:"w-3 h-3"})}),(0,a.jsx)(b.$,{size:"sm",variant:"outline",onClick:()=>D("delete"),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(tR,{className:"w-3 h-3"})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 pb-2 border-b",children:[(0,a.jsxs)("span",{children:[P().length," messages"]}),(0,a.jsxs)("span",{children:[P().filter(e=>"sent"===e.status).length," sent"]}),(0,a.jsxs)("span",{children:[P().filter(e=>"draft"===e.status).length," drafts"]})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[P().map(e=>(0,a.jsx)("div",{className:`p-3 rounded-lg border cursor-pointer transition-all ${s?.id===e.id?"border-blue-500 bg-blue-50":S.has(e.id)?"border-blue-300 bg-blue-25":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>_(e),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:S.has(e.id),onChange:t=>{t.stopPropagation(),I(e.id)},className:"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[R(e),(0,a.jsx)(j,{className:`text-xs ${E(e.priority)}`,children:e.priority}),e.requiresReadReceipt&&(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:"Read Receipt"})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:T(e.createdAt)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,a.jsx)(o,{className:"w-3 h-3 text-gray-400"}),(0,a.jsxs)("span",{className:"text-xs text-gray-600 truncate",children:[e.to.slice(0,2).join(", "),e.to.length>2&&` +${e.to.length-2} more`]})]}),(0,a.jsx)("h4",{className:"font-medium text-sm text-gray-900 truncate mb-1",children:e.subject}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 line-clamp-2",children:[e.body.substring(0,100),"..."]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:`text-xs ${"appointment"===e.category?"bg-blue-100 text-blue-800":"results"===e.category?"bg-green-100 text-green-800":"referral"===e.category?"bg-purple-100 text-purple-800":"emergency"===e.category?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.category}),e.attachments.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(iE,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.attachments.length})]}),"standard"!==e.securityLevel&&(0,a.jsx)(iI,{className:"w-3 h-3 text-green-600"})]}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation()},className:"w-6 h-6 p-0",children:(0,a.jsx)(iT,{className:"w-3 h-3"})})]})]})]})},e.id)),0===P().length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(rl.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No emails found"}),(0,a.jsx)("p",{className:"text-gray-500",children:d||"all"!==h?"Try adjusting your search or filters":"Start by composing your first email"})]})]})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:s?(0,a.jsxs)(x.Zp,{className:"h-full",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[R(s),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.ZB,{className:"text-lg",children:s.subject}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["To: ",s.to.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:`${E(s.priority)}`,children:s.priority}),"standard"!==s.securityLevel&&(0,a.jsxs)(j,{className:"bg-green-600",children:[(0,a.jsx)(iI,{className:"w-3 h-3 mr-1"}),s.securityLevel]}),(0,a.jsxs)(b.$,{size:"sm",variant:"outline",children:[(0,a.jsx)(cs,{className:"w-4 h-4 mr-2"}),"Reply"]}),(0,a.jsxs)(b.$,{size:"sm",variant:"outline",children:[(0,a.jsx)(co,{className:"w-4 h-4 mr-2"}),"Forward"]})]})]})}),(0,a.jsxs)(x.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"From:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:s.metadata.practiceInfo.doctorName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Date:"}),(0,a.jsx)("span",{className:"ml-2",children:s.createdAt.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Category:"}),(0,a.jsx)(j,{className:`ml-2 text-xs ${"appointment"===s.category?"bg-blue-100 text-blue-800":"results"===s.category?"bg-green-100 text-green-800":"referral"===s.category?"bg-purple-100 text-purple-800":"emergency"===s.category?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.category})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Status:"}),(0,a.jsx)("span",{className:"ml-2 capitalize",children:s.status})]})]}),(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 font-sans",children:s.body})}),s.attachments.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["Attachments (",s.attachments.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:s.attachments.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[(0,a.jsx)(iE,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.size/1024/1024).toFixed(1)," MB"]})]}),(0,a.jsxs)(b.$,{size:"sm",variant:"outline",children:[(0,a.jsx)(tW,{className:"w-4 h-4 mr-2"}),"View"]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Delivery Information"}),(0,a.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg text-sm",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Delivery Status:"}),(0,a.jsx)("span",{className:"ml-2 font-medium capitalize",children:s.metadata.deliveryTracking.deliveryStatus})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Attempts:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:s.metadata.deliveryTracking.attempts})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Read Status:"}),(0,a.jsx)("span",{className:"ml-2 font-medium capitalize",children:s.metadata.deliveryTracking.readStatus})]}),s.metadata.deliveryTracking.readDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Read Date:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:s.metadata.deliveryTracking.readDate.toLocaleString()})]})]})})]}),s.metadata.complianceFlags.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Compliance & Security"}),(0,a.jsx)("div",{className:"space-y-2",children:s.metadata.complianceFlags.map((e,t)=>(0,a.jsxs)("div",{className:`p-3 rounded-lg ${"compliant"===e.status?"bg-green-50 border border-green-200":"warning"===e.status?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(j,{variant:"compliant"===e.status?"default":"destructive",children:e.type}),(0,a.jsx)("span",{className:`text-sm font-medium ${"compliant"===e.status?"text-green-800":"warning"===e.status?"text-yellow-800":"text-red-800"}`,children:e.status.toUpperCase()})]}),(0,a.jsx)("p",{className:`text-sm ${"compliant"===e.status?"text-green-700":"warning"===e.status?"text-yellow-700":"text-red-700"}`,children:e.description})]},t))})]})]})]}):(0,a.jsx)(x.Zp,{className:"h-full",children:(0,a.jsx)(x.Wu,{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(rl.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Email"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Choose an email from the list to view its details"})]})})})}),(0,a.jsx)(tv,{open:y,onOpenChange:w,children:(0,a.jsx)(tj,{className:"sm:max-w-6xl max-h-[90vh] overflow-y-auto",children:(0,a.jsx)(iO,{patient:e,onSend:e=>{w(!1),C()},onSave:e=>{C()},onClose:()=>w(!1)})})})]})}let cc=(0,s.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),cd=(0,s.A)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);class cu{constructor(e={}){let{pageFormat:t="A4",includeHeader:r=!0,includeBranding:a=!0,includeTimestamp:n=!0}=e;this.pdf=new ov({orientation:"portrait",unit:"mm",format:t}),this.margin=20,this.pageHeight=this.pdf.internal.pageSize.height,this.pageWidth=this.pdf.internal.pageSize.width,this.currentY=this.margin}checkPageBreak(e){return this.currentY+e>this.pageHeight-this.margin&&(this.pdf.addPage(),this.currentY=this.margin,!0)}addHeader(e,t){this.pdf.setFillColor(0,122,255),this.pdf.rect(0,0,this.pageWidth,25,"F"),this.pdf.setTextColor(255,255,255),this.pdf.setFontSize(18),this.pdf.setFont("helvetica","bold"),this.pdf.text("AI Medical Scribe Platform",this.margin,15),this.pdf.setFontSize(10),this.pdf.setFont("helvetica","normal");let r=new Date;this.pdf.text(`Generated: ${r.toLocaleDateString("en-ZA")} ${r.toLocaleTimeString("en-ZA")}`,this.pageWidth-this.margin-50,15),this.currentY=35,this.pdf.setTextColor(0,0,0),this.pdf.setFillColor(245,245,245),this.pdf.rect(this.margin,this.currentY,this.pageWidth-2*this.margin,20,"F"),this.pdf.setFontSize(14),this.pdf.setFont("helvetica","bold"),this.pdf.text("PATIENT INFORMATION",this.margin+5,this.currentY+7),this.currentY+=25,this.pdf.setFontSize(10),this.pdf.setFont("helvetica","normal");let a=this.margin+5,n=this.pageWidth/2;this.pdf.text(`Name: ${e.name} ${e.surname}`,a,this.currentY),this.pdf.text(`Age: ${e.age} years`,n,this.currentY),this.currentY+=5,e.contact&&this.pdf.text(`Contact: ${e.contact}`,a,this.currentY),e.medicalAid&&this.pdf.text(`Medical Aid: ${e.medicalAid.provider}`,n,this.currentY),this.currentY+=5,e.idNumber&&this.pdf.text(`ID Number: ${e.idNumber}`,a,this.currentY),e.medicalAid?.memberNumber&&this.pdf.text(`Member No: ${e.medicalAid.memberNumber}`,n,this.currentY),this.currentY+=15}addSessionHeader(e){this.checkPageBreak(25),this.pdf.setFillColor(0,122,255),this.pdf.rect(this.margin,this.currentY,this.pageWidth-2*this.margin,15,"F"),this.pdf.setTextColor(255,255,255),this.pdf.setFontSize(12),this.pdf.setFont("helvetica","bold"),this.pdf.text("MEDICAL SESSION NOTES",this.margin+5,this.currentY+10),this.currentY+=20,this.pdf.setTextColor(0,0,0),this.pdf.setFontSize(10),this.pdf.setFont("helvetica","normal");let t=new Date(e.visitDate?e.visitDate:e.createdAt);this.pdf.text(`Session Title: ${e.title}`,this.margin+5,this.currentY),this.currentY+=5,this.pdf.text(`Visit Date: ${t.toLocaleDateString("en-ZA")} ${t.toLocaleTimeString("en-ZA")}`,this.margin+5,this.currentY),this.currentY+=5,this.pdf.text(`Session Type: ${e.sessionType}`,this.margin+5,this.currentY),this.currentY+=5,e.doctorId&&(this.pdf.text(`Doctor: ${e.doctorId}`,this.margin+5,this.currentY),this.currentY+=5),e.duration&&(this.pdf.text(`Duration: ${e.duration} minutes`,this.margin+5,this.currentY),this.currentY+=5),this.currentY+=5}addDiagnosis(e){e.diagnosis&&0!==e.diagnosis.length&&(this.checkPageBreak(20),this.pdf.setFillColor(220,255,220),this.pdf.rect(this.margin,this.currentY,this.pageWidth-2*this.margin,12,"F"),this.pdf.setFontSize(11),this.pdf.setFont("helvetica","bold"),this.pdf.text("DIAGNOSIS",this.margin+5,this.currentY+8),this.currentY+=17,this.pdf.setFontSize(10),this.pdf.setFont("helvetica","normal"),e.diagnosis.forEach((e,t)=>{this.checkPageBreak(5),this.pdf.text(`${t+1}. ${e}`,this.margin+10,this.currentY),this.currentY+=5}),this.currentY+=5)}addTemplateData(e){e.templateData&&0!==Object.keys(e.templateData).length&&(this.checkPageBreak(20),this.pdf.setFillColor(240,248,255),this.pdf.rect(this.margin,this.currentY,this.pageWidth-2*this.margin,12,"F"),this.pdf.setFontSize(11),this.pdf.setFont("helvetica","bold"),this.pdf.text("STRUCTURED MEDICAL NOTES",this.margin+5,this.currentY+8),this.currentY+=17,Object.entries(e.templateData).forEach(([e,t])=>{let r=null!=t?String(t).trim():"";if(!r)return;this.checkPageBreak(15),this.pdf.setFontSize(10),this.pdf.setFont("helvetica","bold");let a=e.replace(/_/g," ").toUpperCase();this.pdf.text(a,this.margin+5,this.currentY),this.currentY+=7,this.pdf.setFont("helvetica","normal"),this.pdf.splitTextToSize(r,this.pageWidth-2*this.margin-10).forEach(e=>{this.checkPageBreak(5),this.pdf.text(e,this.margin+10,this.currentY),this.currentY+=5}),this.currentY+=3}))}addRawTranscription(e){e.content&&""!==e.content.trim()&&(this.checkPageBreak(20),this.pdf.setFillColor(255,248,220),this.pdf.rect(this.margin,this.currentY,this.pageWidth-2*this.margin,12,"F"),this.pdf.setFontSize(11),this.pdf.setFont("helvetica","bold"),this.pdf.text("RAW TRANSCRIPTION",this.margin+5,this.currentY+8),this.currentY+=17,this.pdf.setFontSize(9),this.pdf.setFont("helvetica","normal"),this.pdf.splitTextToSize(e.content,this.pageWidth-2*this.margin-10).forEach(e=>{this.checkPageBreak(4),this.pdf.text(e,this.margin+10,this.currentY),this.currentY+=4}))}addFooter(){let e=this.pdf.getNumberOfPages();for(let t=1;t<=e;t++)this.pdf.setPage(t),this.pdf.setDrawColor(200,200,200),this.pdf.line(this.margin,this.pageHeight-15,this.pageWidth-this.margin,this.pageHeight-15),this.pdf.setFontSize(8),this.pdf.setFont("helvetica","normal"),this.pdf.setTextColor(128,128,128),this.pdf.text("AI Medical Scribe Platform - Confidential Medical Document",this.margin,this.pageHeight-10),this.pdf.text(`Page ${t} of ${e}`,this.pageWidth-this.margin-20,this.pageHeight-10),this.pdf.text("This document contains confidential patient information and should be handled according to HIPAA/POPIA guidelines.",this.margin,this.pageHeight-5)}generateSessionPDF(e,t){return this.addHeader(e,t),this.addSessionHeader(t),this.addDiagnosis(t),this.addTemplateData(t),this.addRawTranscription(t),this.addFooter(),this.pdf.output("arraybuffer")}downloadSessionPDF(e,t){this.generateSessionPDF(e,t);let r=`${e.surname}_${e.name}_${t.sessionType}_${new Date(t.visitDate||t.createdAt).toISOString().split("T")[0]}.pdf`;this.pdf.save(r)}}let ch=(e,t)=>{new cu().downloadSessionPDF(e,t)},cm=(0,s.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function cp({patient:e,session:t,onShare:r}){let[i,s]=(0,n.useState)(!1),[l,c]=(0,n.useState)("markdown"),[d,u]=(0,n.useState)(""),[h,m]=(0,n.useState)(`Medical Transcription - ${e.name} ${e.surname}`),[g,y]=(0,n.useState)(""),[w,N]=(0,n.useState)(!1),A=()=>{let r=new Date(t.visitDate?t.visitDate:t.createdAt);return`# Medical Transcription Report

## Patient Information
- **Name:** ${e.name} ${e.surname}
- **Age:** ${e.age} years
- **Date of Birth:** ${e.dateOfBirth?new Date(e.dateOfBirth).toLocaleDateString("en-ZA"):"Not specified"}
- **Contact:** ${e.contact||"Not provided"}
- **ID Number:** ${e.idNumber||"Not provided"}

${e.medicalAid?`### Medical Aid Information
- **Provider:** ${e.medicalAid.provider}
- **Member Number:** ${e.medicalAid.memberNumber}
- **Dependent Code:** ${e.medicalAid.dependentCode||"N/A"}

`:""}## Session Details
- **Session Title:** ${t.title}
- **Visit Date:** ${r.toLocaleDateString("en-ZA")} at ${r.toLocaleTimeString("en-ZA")}
- **Session Type:** ${t.sessionType.charAt(0).toUpperCase()+t.sessionType.slice(1).replace("-"," ")}
- **Doctor:** ${t.doctorId||"Current User"}

${t.diagnosis&&t.diagnosis.length>0?`## Diagnosis
${t.diagnosis.map((e,t)=>`${t+1}. ${e}`).join("\n")}

`:""}${t.templateData&&Object.keys(t.templateData).length>0?`## Structured Medical Notes

${Object.entries(t.templateData).map(([e,t])=>{let r=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());return`### ${r}

${t||"No content recorded"}

`}).join("")}`:""}## Raw Transcription

${t.content||"No transcription content available"}

---

### Document Information
- **Generated:** ${new Date().toLocaleDateString("en-ZA")} at ${new Date().toLocaleTimeString("en-ZA")}
- **Platform:** AI Medical Scribe
- **Status:** ${t.isLocked?"Finalized":"Draft"}
- **Last Updated:** ${t.updatedAt?new Date(t.updatedAt).toLocaleDateString("en-ZA"):"Not specified"}

> **Confidentiality Notice:** This document contains confidential patient information and should be handled according to POPIA (Protection of Personal Information Act) guidelines. Distribution should be limited to authorized healthcare providers involved in the patient's care.

### Digital Signature
This transcription has been generated and processed using AI Medical Scribe Platform. For verification or questions, please contact the originating practice.
`},S=()=>{let t=A();return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Transcription - ${e.name} ${e.surname}</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #fff;
        }
        h1 {
            color: #007AFF;
            border-bottom: 3px solid #007AFF;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34C759;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        h3 {
            color: #FF9500;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        .patient-info, .session-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #007AFF;
        }
        .diagnosis {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #34C759;
        }
        .transcription {
            background: #fff8e1;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #FF9500;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            font-size: 0.9em;
            color: #666;
        }
        .confidentiality {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #007AFF;
            color: white;
            border-radius: 4px;
            font-size: 0.8em;
            margin: 2px;
        }
        @media print {
            body { font-size: 12pt; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>
    ${t.replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^\- \*\*(.+):\*\* (.+)$/gm,"<p><strong>$1:</strong> $2</p>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^> (.+)$/gm,'<blockquote class="confidentiality">$1</blockquote>').replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\n\n/g,"</p><p>").replace(/^(.+)$/gm,"<p>$1</p>")}
</body>
</html>`},k=async e=>{try{await navigator.clipboard.writeText(e)}catch(e){console.error("Failed to copy to clipboard:",e)}},C=(e,t,r)=>{let a=new Blob([e],{type:r}),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)},L=()=>"html"===l?S():A();return(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(tB,{className:"w-5 h-5 text-blue-600"}),"Share Transcription",(0,a.jsxs)(j,{variant:"outline",className:"ml-auto",children:[e.name," ",e.surname]})]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>k(A()),className:"flex items-center gap-2",children:[(0,a.jsx)(cm,{className:"w-4 h-4"}),"Copy Markdown"]}),(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>C(A(),`transcription_${e.surname}_${e.name}.md`,"text/markdown"),className:"flex items-center gap-2",children:[(0,a.jsx)(rs,{className:"w-4 h-4"}),"Download MD"]}),(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>C(S(),`transcription_${e.surname}_${e.name}.html`,"text/html"),className:"flex items-center gap-2",children:[(0,a.jsx)(rs,{className:"w-4 h-4"}),"Download HTML"]}),(0,a.jsxs)(tv,{open:i,onOpenChange:s,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{size:"sm",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(rl.A,{className:"w-4 h-4"}),"Email Share"]})}),(0,a.jsxs)(tj,{className:"sm:max-w-md",children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Share Transcription"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"format",children:"Format"}),(0,a.jsxs)("select",{id:"format",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"markdown",children:"Markdown (.md)"}),(0,a.jsx)("option",{value:"html",children:"HTML (.html)"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"recipients",children:"Recipients (comma-separated emails)"}),(0,a.jsx)(v,{id:"recipients",placeholder:"colleague@example.com, specialist@hospital.co.za",value:d,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"subject",children:"Subject"}),(0,a.jsx)(v,{id:"subject",value:h,onChange:e=>m(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{htmlFor:"message",children:"Message"}),(0,a.jsx)(tL,{id:"message",placeholder:"Please find attached the medical transcription for review...",value:g,onChange:e=>y(e.target.value),rows:3})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsx)(b.$,{onClick:()=>{let t,a,n;switch(l){case"markdown":default:t=A(),a=`transcription_${e.surname}_${e.name}_${new Date().toISOString().split("T")[0]}.md`,n="text/markdown";break;case"html":t=S(),a=`transcription_${e.surname}_${e.name}_${new Date().toISOString().split("T")[0]}.html`,n="text/html"}r({format:l,content:t,recipients:d.split(",").map(e=>e.trim()).filter(e=>e),subject:h,message:g}),C(t,a,n),s(!1)},className:"flex-1",children:"Share"}),(0,a.jsxs)(tv,{open:w,onOpenChange:N,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{variant:"outline",children:[(0,a.jsx)(tW,{className:"w-4 h-4 mr-2"}),"Preview"]})}),(0,a.jsxs)(tj,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(tA,{children:(0,a.jsxs)(tS,{children:["Transcription Preview (",l.toUpperCase(),")"]})}),"html"===l?(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:L()}}):(0,a.jsx)("pre",{className:"whitespace-pre-wrap font-mono text-sm bg-gray-50 p-4 rounded-lg",children:L()})]})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("span",{children:[e.name," ",e.surname]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{children:new Date(t.visitDate).toLocaleDateString("en-ZA")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tO,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{children:t.sessionType})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{children:"N/A"})]})]})]})]})})}function cf({session:e,patient:t,open:r,onOpenChange:i,onSessionUpdate:s,onExportPDF:l}){let[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[m,g]=(0,n.useState)({}),[y,v]=(0,n.useState)("structured");if(!e)return null;let w=e.isLocked||!1,N=e=>{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-ZA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)};return(0,a.jsx)(tv,{open:r,onOpenChange:i,children:(0,a.jsxs)(tj,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto bg-white",children:[(0,a.jsx)(tA,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 -mx-6 -mt-6 mb-6 rounded-t-lg",children:(0,a.jsxs)(tS,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)(tO,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:e.title||"Medical Session"}),(0,a.jsxs)("p",{className:"text-blue-100 text-sm",children:[t.name," ",t.surname]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:w?(0,a.jsxs)(j,{className:"bg-red-500 text-white",children:[(0,a.jsx)(cc,{className:"w-3 h-3 mr-1"}),"Locked"]}):(0,a.jsxs)(j,{className:"bg-green-500 text-white",children:[(0,a.jsx)(cd,{className:"w-3 h-3 mr-1"}),"Editable"]})})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsx)(x.ZB,{className:"text-lg",children:"Session Information"})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Visit Date"}),(0,a.jsx)("p",{className:"text-gray-600",children:N(e.visitDate?e.visitDate:e.createdAt)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Duration"}),(0,a.jsx)("p",{className:"text-gray-600",children:"N/A"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Doctor"}),(0,a.jsx)("p",{className:"text-gray-600",children:e.doctorId||"Current User"})]})]})]}),e.diagnosis&&e.diagnosis.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"font-medium mb-2",children:"Diagnosis:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.diagnosis.map((e,t)=>(0,a.jsx)(j,{variant:"outline",children:e},t))})]})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>v("structured"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${"structured"===y?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"\uD83D\uDCCB Structured View"}),(0,a.jsx)("button",{onClick:()=>v("comparison"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${"comparison"===y?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"\uD83D\uDD0D Comparison View"}),(0,a.jsx)("button",{onClick:()=>v("share"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${"share"===y?"bg-green-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"\uD83D\uDCE4 Share"})]})}),"comparison"===y?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(tW,{className:"w-5 h-5"}),"Raw vs Processed Comparison"]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"\uD83D\uDCDD Original Raw Transcription"}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 min-h-[300px]",children:(0,a.jsx)("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-mono",children:e.content||"No raw transcription available"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"\uD83C\uDFAF Processed & Structured"}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 min-h-[300px]",children:e.templateData&&Object.keys(e.templateData).length>0?(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(e.templateData).map(([e,t])=>(0,a.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-blue-300",children:[(0,a.jsx)("h5",{className:"font-medium text-blue-900 mb-2 capitalize text-sm",children:e.replace(/_/g," ")}),(0,a.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:t||"No content"})]},e))}):(0,a.jsxs)("div",{className:"text-gray-500 italic text-center mt-8",children:["No structured data available.",(0,a.jsx)("br",{}),"Content was saved as raw transcription only."]})})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border border-green-200",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:"\uD83E\uDDE0 Processing Analysis"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Raw Length:"}),(0,a.jsxs)("div",{className:"font-semibold",children:[e.content?.length||0," characters"]})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Structured Sections:"}),(0,a.jsxs)("div",{className:"font-semibold",children:[e.templateData?Object.keys(e.templateData).length:0," sections"]})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Processing Status:"}),(0,a.jsx)("div",{className:"font-semibold text-green-600",children:e.templateData&&Object.keys(e.templateData).length>0?"Structured":"Raw Only"})]})]})]})]})]})}):"share"===y?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(cp,{patient:t,session:e,onShare:e=>{console.log("Sharing transcription:",e)}})}):(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(x.ZB,{className:"text-lg",children:"Medical Notes"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!w&&(0,a.jsx)(a.Fragment,{children:c?(0,a.jsxs)(b.$,{size:"sm",onClick:()=>{if(s){s({...e,content:u,templateData:m,updatedAt:new Date});try{let t=localStorage.getItem("medicalSessions");if(t){let r=JSON.parse(t).map(t=>t.id===e.id?{...t,content:u,templateData:m,updatedAt:new Date().toISOString()}:t);localStorage.setItem("medicalSessions",JSON.stringify(r))}}catch(e){console.error("Failed to persist edit:",e)}}d(!1)},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(tV,{className:"w-4 h-4"}),"Save Changes"]}):(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>{d(!0)},className:"flex items-center gap-2",children:[(0,a.jsx)(t_,{className:"w-4 h-4"}),"Edit"]})}),(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>{try{ch(t,e)}catch(e){console.error("PDF export failed:",e)}},className:"flex items-center gap-2",children:[(0,a.jsx)(rs,{className:"w-4 h-4"}),"Export PDF"]}),w?(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>{if(s){s({...e,isLocked:!1,updatedAt:new Date});try{let t=localStorage.getItem("medicalSessions");if(t){let r=JSON.parse(t).map(t=>t.id===e.id?{...t,isLocked:!1,updatedAt:new Date().toISOString()}:t);localStorage.setItem("medicalSessions",JSON.stringify(r))}}catch(e){console.error("Failed to persist unlock state:",e)}}},className:"flex items-center gap-2 text-green-600 hover:text-green-700",children:[(0,a.jsx)(cd,{className:"w-4 h-4"}),"Unlock"]}):(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>{if(s){s({...e,isLocked:!0,updatedAt:new Date});try{let t=localStorage.getItem("medicalSessions");if(t){let r=JSON.parse(t).map(t=>t.id===e.id?{...t,isLocked:!0,updatedAt:new Date().toISOString()}:t);localStorage.setItem("medicalSessions",JSON.stringify(r))}}catch(e){console.error("Failed to persist lock state:",e)}}},className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[(0,a.jsx)(cc,{className:"w-4 h-4"}),"Lock Final"]})]})]})}),(0,a.jsxs)(x.Wu,{className:"space-y-4",children:[e.templateData&&Object.keys(e.templateData).length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Structured Notes:"}),Object.entries(e.templateData).map(([e,t])=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-700 mb-2 capitalize",children:e.replace(/_/g," ")}),c?(0,a.jsx)(tL,{value:m[e]||t,onChange:t=>g(r=>({...r,[e]:t.target.value})),className:"min-h-[80px]",placeholder:`Enter ${e.replace(/_/g," ")}...`}):(0,a.jsx)("div",{className:"text-gray-700 whitespace-pre-wrap bg-gray-50 p-3 rounded",children:t||"No content recorded"})]},e))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Raw Transcription:"}),c?(0,a.jsx)(tL,{value:u,onChange:e=>h(e.target.value),className:"min-h-[200px]",placeholder:"Enter transcription content..."}):(0,a.jsx)("div",{className:"text-gray-700 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg border",children:e.content||"No transcription content"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Last updated: ",N(e.updatedAt||e.createdAt)]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(b.$,{variant:"outline",onClick:()=>i(!1),children:"Close"})})]})]})]})})}let cg=(0,s.A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),cx=(0,s.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var cy="Progress",[cv,cb]=C(cy),[cw,cN]=cv(cy),cj=n.forwardRef((e,t)=>{var r,n;let{__scopeProgress:i,value:s=null,max:o,getValueLabel:l=ck,...c}=e;(o||0===o)&&!cP(o)&&console.error((r=`${o}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let d=cP(o)?o:100;null===s||c_(s,d)||console.error((n=`${s}`,`Invalid prop \`value\` of value \`${n}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let u=c_(s,d)?s:null,h=cL(u)?l(u,d):void 0;return(0,a.jsx)(cw,{scope:i,value:u,max:d,children:(0,a.jsx)(T.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":cL(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":cC(u,d),"data-value":u??void 0,"data-max":d,...c,ref:t})})});cj.displayName=cy;var cA="ProgressIndicator",cS=n.forwardRef((e,t)=>{let{__scopeProgress:r,...n}=e,i=cN(cA,r);return(0,a.jsx)(T.div,{"data-state":cC(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:t})});function ck(e,t){return`${Math.round(e/t*100)}%`}function cC(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function cL(e){return"number"==typeof e}function cP(e){return cL(e)&&!isNaN(e)&&e>0}function c_(e,t){return cL(e)&&!isNaN(e)&&e<=t&&e>=0}cS.displayName=cA;let cD=n.forwardRef(({className:e,value:t,...r},n)=>(0,a.jsx)(cj,{ref:n,className:(0,y.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:(0,a.jsx)(cS,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function cI({completed:e,total:t,urgent:r=0,className:n,showLabels:i=!0,variant:s="default"}){let o=t>0?e/t*100:0,l=r>0;return"minimal"===s?(0,a.jsxs)("div",{className:(0,y.cn)("flex items-center space-x-2",n),children:[(0,a.jsx)(cD,{value:o,className:"h-2 flex-1"}),(0,a.jsxs)("span",{className:"text-xs text-gray-600 whitespace-nowrap",children:[e,"/",t]})]}):"compact"===s?(0,a.jsxs)("div",{className:(0,y.cn)("space-y-1",n),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Tasks"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:[e,"/",t]}),l&&(0,a.jsxs)(j,{variant:"destructive",className:"text-xs px-1 py-0",children:[r," urgent"]})]})]}),(0,a.jsx)(cD,{value:o,className:"h-2"})]}):(0,a.jsxs)("div",{className:(0,y.cn)("space-y-2",n),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Task Progress"}),l&&(0,a.jsxs)(j,{variant:"destructive",className:"text-xs",children:[r," urgent"]})]}),i&&(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e," of ",t," completed"]})]}),(0,a.jsx)(cD,{value:o,className:"h-3"}),i&&(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[Math.round(o),"% complete"]}),(0,a.jsxs)("span",{children:[t-e," remaining"]})]})]})}cD.displayName=cj.displayName;let cR=(0,s.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),cE=(0,s.A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),cT=function({patient:e,consultations:t=[],onStatusUpdate:r,autoRefresh:i=!0,refreshInterval:s=3e5}){let[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(new Date),m=async()=>{d(!0);try{await new Promise(e=>setTimeout(e,1500));let a=p(e,t);l(a),h(new Date),r?.(a)}catch(e){console.error("Status assessment failed:",e)}finally{d(!1)}},p=(e,t)=>{let r=[{id:"bp_systolic",name:"Blood Pressure (Systolic)",value:135,unit:"mmHg",normalRange:{min:90,max:140},trend:"stable",lastUpdated:new Date,status:"normal"},{id:"bp_diastolic",name:"Blood Pressure (Diastolic)",value:85,unit:"mmHg",normalRange:{min:60,max:90},trend:"down",lastUpdated:new Date,status:"normal"},{id:"glucose",name:"Blood Glucose",value:7.2,unit:"mmol/L",normalRange:{min:4,max:7.8},trend:"stable",lastUpdated:new Date,status:"normal"}],a="stable",n="low";if(t.length>0){let e=t[0];e.content.toLowerCase().includes("improving")?a="improving":e.content.toLowerCase().includes("concern")&&(a="monitoring",n="medium")}return{overallStatus:a,riskLevel:n,confidence:.87,lastAssessment:new Date,keyFindings:["Blood pressure within target range","Glucose levels well controlled","No acute concerns identified","Medication compliance good"],recommendations:["Continue current medication regimen","Monitor blood pressure weekly","Follow-up in 4-6 weeks","Maintain current lifestyle modifications"],metrics:r,alertsCount:0}},g=e=>{switch(e){case"normal":return(0,a.jsx)(iR,{className:"w-4 h-4 text-green-600"});case"warning":return(0,a.jsx)(tF.A,{className:"w-4 h-4 text-yellow-600"});case"critical":return(0,a.jsx)(tF.A,{className:"w-4 h-4 text-red-600"});default:return(0,a.jsx)(cR,{className:"w-4 h-4 text-gray-600"})}},y=e=>{switch(e){case"up":return(0,a.jsx)(tq,{className:"w-4 h-4 text-green-600"});case"down":return(0,a.jsx)(cE,{className:"w-4 h-4 text-red-600"});case"stable":return(0,a.jsx)(tT,{className:"w-4 h-4 text-blue-600"});default:return(0,a.jsx)(tT,{className:"w-4 h-4 text-gray-600"})}};return o||c?(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(x.ZB,{className:"text-lg flex items-center space-x-2",children:[(0,a.jsx)(tz,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("span",{children:"AI Health Status Monitor"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{className:(e=>{switch(e){case"stable":return"text-green-600 bg-green-100";case"improving":return"text-blue-600 bg-blue-100";case"monitoring":return"text-yellow-600 bg-yellow-100";case"critical":return"text-red-600 bg-red-100";case"declining":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}})(o.overallStatus),children:o.overallStatus.replace("_"," ").toUpperCase()}),(0,a.jsxs)(j,{className:(e=>{switch(e){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(o.riskLevel),children:[o.riskLevel.toUpperCase()," RISK"]})]}),(0,a.jsx)(b.$,{size:"sm",variant:"outline",onClick:m,disabled:c,children:(0,a.jsx)(tG.A,{className:`w-4 h-4 ${c?"animate-spin":""}`})})]})]})}),(0,a.jsx)(x.Wu,{children:c?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(tz,{className:"w-8 h-8 text-blue-600 mx-auto mb-3 animate-pulse"}),(0,a.jsx)("p",{className:"text-gray-600",children:"AI analyzing patient status..."})]}):o?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[Math.round(100*o.confidence),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Confidence"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.metrics.length}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Metrics Tracked"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.alertsCount}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Active Alerts"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Health Metrics"}),(0,a.jsx)("div",{className:"space-y-3",children:o.metrics.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[g(e.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Normal: ",e.normalRange.min,"-",e.normalRange.max," ",e.unit]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"font-bold text-gray-900",children:[e.value," ",e.unit]}),y(e.trend)]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Key Findings"}),(0,a.jsx)("ul",{className:"space-y-2",children:o.keyFindings.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start space-x-2 text-sm",children:[(0,a.jsx)(iR,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{children:e})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"AI Recommendations"}),(0,a.jsx)("ul",{className:"space-y-2",children:o.recommendations.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start space-x-2 text-sm",children:[(0,a.jsx)(tz,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{children:e})]},t))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-3 border-t",children:[(0,a.jsxs)("span",{children:["Last assessment: ",o.lastAssessment.toLocaleString()]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:["Updated ",Math.round((Date.now()-u.getTime())/6e4)," min ago"]})]})]})]}):null})]}):(0,a.jsx)(x.Zp,{children:(0,a.jsxs)(x.Wu,{className:"p-6 text-center",children:[(0,a.jsx)(tz,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Click to generate AI status assessment"}),(0,a.jsx)(b.$,{onClick:m,className:"mt-3",children:"Generate Assessment"})]})})};function cM({patient:e,sessions:t,tasks:r,onMarkTaskComplete:n,onViewAllTasks:i,nextAppointment:s,patientStatus:o}){let l=r.filter(e=>!e.isCompleted),c=l.filter(e=>e.dueDate&&new Date(e.dueDate)<new Date),d=r.filter(e=>e.isCompleted);r.length>0&&(d.length,r.length);let u=()=>l.filter(e=>"urgent"===e.priority||"high"===e.priority).slice(0,3),h=e=>new Intl.DateTimeFormat("en-ZA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e),m=(()=>{if(!s)return null;let e=new Date;return Math.ceil((new Date(s).getTime()-e.getTime())/864e5)})();return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsx)(x.Zp,{className:"border-l-4 border-l-blue-500",children:(0,a.jsx)(x.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(tT,{className:"w-4 h-4 text-blue-600"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-600",children:"Status"}),(0,a.jsx)(j,{className:`text-xs px-2 py-1 ${(e=>{switch(e){case"stable":return"text-green-600 bg-green-100";case"monitoring":return"text-yellow-600 bg-yellow-100";case"critical":return"text-red-600 bg-red-100";case"follow-up-needed":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}})(o.status)}`,children:o.status.replace("-"," ").toUpperCase()})]})]})})}),(0,a.jsx)(x.Zp,{className:"border-l-4 border-l-orange-500",children:(0,a.jsx)(x.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(cg,{className:"w-4 h-4 text-orange-600"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-600",children:"Tasks"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:l.length}),c.length>0&&(0,a.jsxs)(j,{variant:"destructive",className:"text-xs px-1",children:[c.length," overdue"]})]})]})]})})}),(0,a.jsx)(x.Zp,{className:"border-l-4 border-l-green-500",children:(0,a.jsx)(x.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(tO,{className:"w-4 h-4 text-green-600"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-600",children:"Sessions"}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:t.length})]})]})})}),(0,a.jsx)(x.Zp,{className:"border-l-4 border-l-purple-500",children:(0,a.jsx)(x.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p,{className:"w-4 h-4 text-purple-600"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-600",children:"Next Visit"}),s?(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900",children:null!==m&&m>=0?`${m}d`:"Overdue"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:h(s)})]}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"None scheduled"})]})]})})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(cI,{completed:d.length,total:r.length,urgent:u().length,className:"flex-1 mr-3"}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",onClick:i,className:"text-xs h-8 px-3 shrink-0",children:"View All"})]}),u().length>0&&(0,a.jsx)(x.Zp,{className:"bg-orange-50 border-orange-200",children:(0,a.jsxs)(x.Wu,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(tF.A,{className:"w-4 h-4 text-orange-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-orange-800",children:"Urgent Tasks"})]}),(0,a.jsx)(j,{variant:"secondary",className:"text-xs",children:u().length})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[u().slice(0,2).map(e=>(0,a.jsxs)("div",{className:`flex items-center justify-between p-2 rounded border transition-all duration-200 ${e.isCompleted?"bg-green-50 border-green-200 opacity-75":"bg-white border-orange-200 hover:shadow-sm"}`,children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:`text-xs font-medium truncate ${e.isCompleted?"text-green-700 line-through":"text-gray-900"}`,children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(j,{variant:e.isCompleted?"default":"destructive",className:"text-xs px-1",children:e.isCompleted?"completed":e.priority}),e.dueDate&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Due: ",h(e.dueDate)]})]})]}),(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:()=>n(e.id),className:"h-6 w-6 p-0 text-green-600 hover:bg-green-100",disabled:e.isCompleted,children:(0,a.jsx)(iR,{className:"w-4 h-4"})})]},e.id)),u().length>2&&(0,a.jsxs)("div",{className:"text-xs text-orange-600 mt-2",children:["+",u().length-2," more urgent tasks"]})]})]})})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{className:"pb-2",children:(0,a.jsxs)(x.ZB,{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(f,{className:"w-4 h-4"}),"Recent Activity"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[t.slice(0,2).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg hover:bg-blue-50 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-sm group",style:{animationDelay:`${100*t}ms`},children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 transition-all duration-300 group-hover:scale-125 group-hover:bg-blue-600"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate transition-colors duration-300 group-hover:text-blue-700",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 transition-colors duration-300 group-hover:text-blue-600",children:h(e.visitDate)})]}),(0,a.jsx)(j,{variant:"outline",className:"text-xs transition-all duration-300 group-hover:border-blue-400 group-hover:text-blue-700",children:e.sessionType})]},e.id)),0===t.length&&(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center py-2",children:"No recent activity"})]})})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{className:"pb-2",children:(0,a.jsxs)(x.ZB,{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(cx,{className:"w-4 h-4"}),"Quick Actions"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(b.$,{variant:"outline",size:"sm",className:"text-xs h-8 transition-all duration-300 hover:scale-105 hover:shadow-md hover:border-blue-400 hover:bg-blue-50",children:"Schedule Follow-up"}),(0,a.jsx)(b.$,{variant:"outline",size:"sm",className:"text-xs h-8 transition-all duration-300 hover:scale-105 hover:shadow-md hover:border-green-400 hover:bg-green-50",children:"Add Note"}),(0,a.jsx)(b.$,{variant:"outline",size:"sm",className:"text-xs h-8 transition-all duration-300 hover:scale-105 hover:shadow-md hover:border-orange-400 hover:bg-orange-50",children:"Update Status"}),(0,a.jsx)(b.$,{variant:"outline",size:"sm",className:"text-xs h-8 transition-all duration-300 hover:scale-105 hover:shadow-md hover:border-purple-400 hover:bg-purple-50",onClick:i,children:"Manage Tasks"})]})})]}),(0,a.jsx)(cT,{patient:e,consultations:t,onStatusUpdate:e=>{console.log("Status assessment updated:",e)}})]})}!function(){var e=Error("Cannot find module '../history/InteractiveHistoryView'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '../profile/EnhancedPatientProfile'");throw e.code="MODULE_NOT_FOUND",e}();let cF=()=>({chronicConditions:["Essential Hypertension","Type 2 Diabetes Mellitus","Dyslipidemia"],allergies:["Penicillin","Shellfish"],currentMedications:["Metformin 500mg BD","Lisinopril 10mg daily","Atorvastatin 20mg daily"],familyHistory:["Diabetes - Mother","Hypertension - Father","Heart Disease - Paternal Uncle"],surgicalHistory:["Appendectomy (2010)","Cholecystectomy (2018)"],riskFactors:[]}),cO=()=>({lastUpdate:"Patient stable on current medication regimen. Blood pressure well controlled at 128/82. Diabetes management improving with HbA1c down to 7.1%.",status:"stable",notes:"Excellent compliance with medications. Lost 5kg since last visit. Continue current plan.",nextAppointment:new Date("2024-10-15T09:00:00")});function cB({patient:e,onBack:t,onEditPatient:r,onDeletePatient:i,onStartTranscription:s}){let[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(cF()),[f,g]=(0,n.useState)(cO()),[y,v]=(0,n.useState)("overview"),[w,N]=(0,n.useState)(!1),[S,k]=(0,n.useState)(f.notes),[C,L]=(0,n.useState)(null),[P,_]=(0,n.useState)(!1),[D,I]=(0,n.useState)(!1),[R,E]=(0,n.useState)(null),T=e=>{E(e),I(!0)},M=e=>new Intl.DateTimeFormat("en-ZA",{year:"numeric",month:"long",day:"numeric"}).format(e),F=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/864e5);return 0===t?"Today":1===t?"Yesterday":t<7?`${t} days ago`:t<30?`${Math.floor(t/7)} weeks ago`:`${Math.floor(t/30)} months ago`};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center h-16",children:[(0,a.jsxs)(b.$,{variant:"ghost",size:"sm",onClick:t,className:"mr-4 hover:bg-gray-100",children:[(0,a.jsx)(tI,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Patient Profile"})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200 mb-6",children:[(0,a.jsx)(x.aR,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(x.ZB,{className:"text-lg font-semibold text-gray-900",children:"Patient Information"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(b.$,{size:"sm",variant:"outline",onClick:()=>r?.(e),className:"p-2",children:(0,a.jsx)(t_,{className:"w-3 h-3"})}),(0,a.jsx)(b.$,{size:"sm",variant:"outline",onClick:()=>i?.(e.id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)(tR,{className:"w-3 h-3"})})]})]})}),(0,a.jsxs)(x.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-2xl mx-auto mb-3",children:e.name.split(" ").map(e=>e[0]).join("").slice(0,2)}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-500",children:["Age ",e.age]}),(0,a.jsx)(j,{variant:"stable"===f.status?"default":"critical"===f.status?"destructive":"secondary",className:"mt-2",children:f.status.replace("-"," ").toUpperCase()})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.contact&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.contact})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(o,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Patient since ",M(e.createdAt)]})]}),e.lastVisit&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(p,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Last visit: ",M(e.lastVisit)]})]}),e.medicalAid&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)(tE,{className:"w-4 h-4 text-blue-500"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"font-medium text-blue-900",children:e.medicalAid.provider}),(0,a.jsx)("div",{className:"text-blue-700",children:e.medicalAid.memberNumber})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Total Sessions"}),(0,a.jsx)(j,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:l.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Risk Factors"}),(0,a.jsx)(j,{variant:h.riskFactors.length>0?"destructive":"secondary",children:h.riskFactors.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Medications"}),(0,a.jsx)(j,{variant:"secondary",className:"bg-green-100 text-green-700",children:h.currentMedications.length})]})]})]})]}),(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)(x.ZB,{className:"flex items-center space-x-2 text-sm font-medium",children:[(0,a.jsx)(tT,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Current Status"})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Last Update: ",f.lastUpdate]}),w?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(tL,{value:S,onChange:e=>k(e.target.value),className:"text-sm",rows:3}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(b.$,{size:"sm",onClick:()=>{g(e=>({...e,notes:S,lastUpdate:new Date().toLocaleDateString()})),N(!1)},children:"Save"}),(0,a.jsx)(b.$,{size:"sm",variant:"outline",onClick:()=>{N(!1),k(f.notes)},children:"Cancel"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-700",children:f.notes}),(0,a.jsxs)(b.$,{size:"sm",variant:"ghost",onClick:()=>N(!0),className:"mt-2 text-xs",children:[(0,a.jsx)(t_,{className:"w-3 h-3 mr-1"}),"Update Status"]})]}),f.nextAppointment&&(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-100",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Next Appointment:"}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:M(f.nextAppointment)})]})]})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:["overview","profile","history","timeline","tasks","documents","files","communications"].map(e=>(0,a.jsx)("button",{onClick:()=>v(e),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${y===e?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsxs)(b.$,{className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold px-8 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border-0 relative overflow-hidden group",onClick:()=>s?.(e),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-orange-500 animate-pulse opacity-30 group-hover:opacity-50 transition-opacity"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 relative z-10",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center animate-pulse",children:(0,a.jsx)(tM,{className:"w-4 h-4 text-orange-600"})}),(0,a.jsx)("span",{className:"text-lg",children:"Start Recording"})]}),(0,a.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-orange-400 via-orange-500 to-orange-600 rounded-xl opacity-30 group-hover:opacity-70 blur animate-pulse"})]})]}),"overview"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(tT,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Patient Overview Dashboard"})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)(cM,{patient:e,sessions:l,tasks:d,onMarkTaskComplete:e=>{u(t=>t.map(t=>t.id===e?{...t,isCompleted:!t.isCompleted,completedAt:new Date}:t))},onViewAllTasks:()=>{v("tasks")},nextAppointment:f.nextAppointment,patientStatus:f})})]}),h.riskFactors.length>0&&(0,a.jsxs)(x.Zp,{className:"border-orange-200 bg-orange-50",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center space-x-2 text-orange-800",children:[(0,a.jsx)(tF.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Risk Factors Identified"}),(0,a.jsx)(j,{variant:"destructive",children:h.riskFactors.length})]})}),(0,a.jsx)(x.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.riskFactors.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 bg-white rounded-lg border border-orange-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-orange-900",children:e.factor}),(0,a.jsx)(j,{variant:"high"===e.severity||"critical"===e.severity?"destructive":"secondary",children:e.severity})]}),(0,a.jsx)("p",{className:"text-sm text-orange-700 mb-2",children:e.description}),e.recommendations.length>0&&(0,a.jsxs)("div",{className:"text-xs text-orange-600",children:["• ",e.recommendations.slice(0,2).join(" • ")]})]},t))})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(tO,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Recent Sessions"})]})}),(0,a.jsx)(x.Wu,{children:l.length>0?(0,a.jsx)("div",{className:"space-y-4",children:l.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md hover:border-blue-300 transition-all bg-white hover:bg-blue-50 group",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 cursor-pointer hover:text-blue-600 transition-colors flex-1",onClick:()=>{L(e),_(!0)},children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),T(e)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 h-6 w-6 hover:bg-green-100 hover:text-green-600",title:"Share transcription",children:(0,a.jsx)(tB,{className:"w-3 h-3"})}),(0,a.jsx)(j,{variant:"consultation"===e.sessionType?"default":"secondary",children:e.sessionType}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:F(e.visitDate)})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.content}),e.diagnosis&&(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.diagnosis.map((e,t)=>(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:e},t))})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(tO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sessions yet"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Start by creating your first session with this patient."})]})})]})]}),"profile"===y&&(0,a.jsx)(Object(function(){var e=Error("Cannot find module '../profile/EnhancedPatientProfile'");throw e.code="MODULE_NOT_FOUND",e}()),{patient:e,onUpdate:e=>{console.log("Patient profile updated:",e)},isEditing:!1,onToggleEdit:()=>{console.log("Toggle edit mode")}}),"history"===y&&(0,a.jsx)(Object(function(){var e=Error("Cannot find module '../history/InteractiveHistoryView'");throw e.code="MODULE_NOT_FOUND",e}()),{patient:e,consultations:l,onHistoryUpdate:e=>{console.log("History updated:",e)}}),"timeline"===y&&(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(tq,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Medical Timeline"})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsxs)("div",{className:"flex-shrink-0",children:[(0,a.jsx)("div",{className:`w-3 h-3 rounded-full ${"consultation"===e.sessionType?"bg-blue-500":"follow-up"===e.sessionType?"bg-green-500":"bg-gray-400"}`}),t<l.length-1&&(0,a.jsx)("div",{className:"w-0.5 h-16 bg-gray-200 ml-1 mt-2"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 hover:bg-blue-50 p-3 rounded-lg transition-colors group",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 cursor-pointer hover:text-blue-600 transition-colors flex-1",onClick:()=>{L(e),_(!0)},children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.$,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),T(e)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 h-6 w-6 hover:bg-green-100 hover:text-green-600",title:"Share transcription",children:(0,a.jsx)(tB,{className:"w-3 h-3"})}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:M(e.visitDate)})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.content}),e.diagnosis&&(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.diagnosis.map((e,t)=>(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:e},t))})]})]},e.id))})})]}),"tasks"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[d.length>0&&(0,a.jsxs)(x.Zp,{className:"border-purple-200 bg-purple-50",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center space-x-2 text-purple-800",children:[(0,a.jsx)(tz,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"AI-Generated Tasks"}),(0,a.jsxs)(j,{className:"bg-purple-600 text-white",children:[d.length," suggested"]})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,a.jsx)("div",{className:"p-4 bg-white border border-purple-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,a.jsx)(j,{variant:"urgent"===e.priority||"high"===e.priority?"destructive":"medium"===e.priority?"default":"secondary",children:e.priority}),(0,a.jsx)(j,{variant:"outline",className:"bg-purple-100 text-purple-700",children:e.type}),e.dueDate&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Due: ",M(e.dueDate)]})]}),e.sessionTitle&&(0,a.jsxs)("p",{className:"text-xs text-purple-600 mt-1",children:["From: ",e.sessionTitle]})]}),(0,a.jsx)(b.$,{size:"sm",variant:e.isCompleted?"default":"outline",className:`ml-4 transition-all duration-200 ${e.isCompleted?"bg-green-600 hover:bg-green-700 text-white":"hover:bg-green-50 hover:border-green-600 hover:text-green-700"}`,onClick:()=>{u(t=>t.map(t=>t.id===e.id?{...t,isCompleted:!t.isCompleted,completedAt:new Date}:t))},children:e.isCompleted?"✓ Completed":"Mark Complete"})]})},e.id))})})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(tO,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Session-Specific Tasks"})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[l.flatMap(e=>e.suggestedTasks||[]).map(e=>(0,a.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(j,{variant:"high"===e.priority?"destructive":"secondary",children:e.priority}),(0,a.jsx)(j,{variant:"outline",children:e.type}),e.dueDate&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Due: ",M(e.dueDate)]})]})]}),(0,a.jsx)(b.$,{size:"sm",variant:e.isCompleted?"default":"outline",className:"ml-4",children:e.isCompleted?"Completed":"Mark Complete"})]})},e.id)),0===l.flatMap(e=>e.suggestedTasks||[]).length&&0===d.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(tz,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks yet"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Tasks will appear here based on session content and AI analysis."})]})]})})]})]}),"documents"===y&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(lG,{patient:e,session:l[0],onGenerateDocument:e=>{console.log("Generated document:",e)},onEmailDocument:(e,t)=>{console.log("Emailing document to:",t)}})}),"files"===y&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(ct,{patient:e})}),"communications"===y&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(cl,{patient:e,onSelectMessage:e=>{console.log("Selected email message:",e)}})})]})]})}),(0,a.jsx)(tv,{open:D,onOpenChange:I,children:(0,a.jsxs)(tj,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Share Transcription"})}),R&&(0,a.jsx)(cp,{patient:e,session:R,onShare:e=>{console.log("Sharing session:",e),I(!1)}})]})}),(0,a.jsx)(cf,{session:C,patient:e,open:P,onOpenChange:_,onSessionUpdate:e=>{c(t=>t.map(t=>t.id===e.id?e:t))},onExportPDF:e=>{console.log("Export PDF for session:",e.id)}})]})}let cq=(0,s.A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),cz=(0,s.A)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),cU=(0,s.A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),c$=(0,s.A)("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),cH=[{code:"auto",name:"Auto-Detect",englishName:"Automatic Detection",speakers:"All languages",medical:!0},{code:"en",name:"English",englishName:"English",speakers:"4.8 million",medical:!0},{code:"af",name:"Afrikaans",englishName:"Afrikaans",speakers:"7.2 million",medical:!0},{code:"zu",name:"isiZulu",englishName:"Zulu",speakers:"12.2 million",medical:!1},{code:"xh",name:"isiXhosa",englishName:"Xhosa",speakers:"8.2 million",medical:!1},{code:"st",name:"Sesotho",englishName:"Southern Sotho",speakers:"3.8 million",medical:!1},{code:"nso",name:"Sepedi",englishName:"Northern Sotho",speakers:"4.6 million",medical:!1},{code:"tn",name:"Setswana",englishName:"Tswana",speakers:"4.1 million",medical:!1},{code:"ss",name:"siSwati",englishName:"Swazi",speakers:"1.3 million",medical:!1},{code:"ve",name:"Tshivenda",englishName:"Venda",speakers:"1.2 million",medical:!1},{code:"ts",name:"Xitsonga",englishName:"Tsonga",speakers:"2.3 million",medical:!1},{code:"nr",name:"isiNdebele",englishName:"South Ndebele",speakers:"1.1 million",medical:!1}];function cW(){let[e,t]=(0,n.useState)("auto"),[r,i]=(0,n.useState)(!0),s=e=>{t(e),localStorage.setItem("ai-medic-scribe-language",e)},o=e=>{i(e),localStorage.setItem("ai-medic-scribe-auto-translate",JSON.stringify(e))};return(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(cU,{className:"w-5 h-5 text-green-600"}),"South African Language Support"]})}),(0,a.jsxs)(x.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(tC,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,a.jsx)(c$,{className:"w-4 h-4"}),"Primary Transcription Language"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-64 overflow-y-auto",children:cH.map(t=>(0,a.jsx)("label",{className:`flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-gray-50 ${e===t.code?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"radio",name:"language",value:t.code,checked:e===t.code,onChange:e=>s(e.target.value),className:"text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:t.name}),t.medical&&(0,a.jsx)(j,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:"Medical Ready"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[t.englishName," • ",t.speakers," speakers"]})]})]})},t.code))})]}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(tC,{className:"text-sm font-medium text-gray-700",children:"Auto-translate to English"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically translate non-English transcriptions for medical documentation"})]}),(0,a.jsx)("label",{className:"flex items-center",children:(0,a.jsx)("input",{type:"checkbox",checked:r,onChange:e=>o(e.target.checked),className:"text-blue-600 rounded"})})]})}),(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-green-700 text-sm font-medium mb-2",children:"\uD83C\uDDFF\uD83C\uDDE6 Built for South African Healthcare"}),(0,a.jsxs)("div",{className:"text-xs text-green-600 space-y-1",children:[(0,a.jsx)("p",{children:"• Supports all 11 official SA languages"}),(0,a.jsx)("p",{children:"• Medical terminology optimized for English/Afrikaans"}),(0,a.jsx)("p",{children:"• Ubuntu-centered patient communication"}),(0,a.jsx)("p",{children:"• Culturally aware medical documentation"})]})]}),"auto"!==e&&"en"!==e&&"af"!==e&&(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-amber-700 text-sm font-medium mb-2",children:"⚠️ Limited Medical Support"}),(0,a.jsxs)("div",{className:"text-xs text-amber-600",children:["Medical transcription accuracy may be lower for ",cH.find(t=>t.code===e)?.name,". Auto-translation to English is recommended for clinical documentation."]})]})]})]})}let cV=()=>"auto",cG=(0,s.A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),cZ=(0,s.A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),cY=(0,s.A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),cK={noiseReduction:!0,noiseReductionLevel:"medium",speakerIdentification:!0,voiceCommands:!0,automaticPunctuation:!0,voiceActivityDetection:!0,echoReduction:!0,gainControl:!0};function cX({onSettingsChange:e,onSpeakerProfileAdd:t}){let[r,i]=(0,n.useState)(cK),[s,o]=(0,n.useState)([]),[l,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(!1),h=t=>{try{localStorage.setItem("voiceEnhancementSettings",JSON.stringify(t)),i(t),e(t)}catch(e){console.error("Failed to save voice enhancement settings:",e)}},m=(e,t)=>{h({...r,[e]:t})},p=async e=>{u(!0);try{let r=await navigator.mediaDevices.getUserMedia({audio:!0});await new Promise(e=>setTimeout(e,3e3));let a={name:"doctor"===e?"Dr. Current User":`${e.charAt(0).toUpperCase()+e.slice(1)} User`,role:e,voiceCharacteristics:{pitch:150+100*Math.random(),tempo:120+40*Math.random(),formants:[800,1200,2400],mfcc:Array(13).fill(0).map(()=>2*Math.random()-1)},confidence:.95};t(a);let n={...a,id:`speaker_${Date.now()}`};o(e=>[...e,n]),r.getTracks().forEach(e=>e.stop())}catch(e){console.error("Speaker calibration failed:",e),alert("Microphone access is required for speaker calibration.")}finally{u(!1)}},f=e=>{let t=s.filter(t=>t.id!==e);o(t),localStorage.setItem("voiceEnhancement_speakerProfiles",JSON.stringify(t))};return l?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(tM,{className:"w-5 h-5 text-blue-600"}),"Voice Enhancement Settings",(0,a.jsx)(j,{variant:"secondary",className:"ml-auto",children:"Advanced"})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)(iy,{defaultValue:"audio",className:"w-full",children:[(0,a.jsxs)(iC,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(iL,{value:"audio",className:"flex items-center gap-2",children:[(0,a.jsx)(lX,{className:"w-4 h-4"}),"Audio"]}),(0,a.jsxs)(iL,{value:"speakers",className:"flex items-center gap-2",children:[(0,a.jsx)(cG,{className:"w-4 h-4"}),"Speakers"]}),(0,a.jsxs)(iL,{value:"commands",className:"flex items-center gap-2",children:[(0,a.jsx)(cZ,{className:"w-4 h-4"}),"Commands"]}),(0,a.jsxs)(iL,{value:"text",className:"flex items-center gap-2",children:[(0,a.jsx)(cY,{className:"w-4 h-4"}),"Text"]})]}),(0,a.jsxs)(iP,{value:"audio",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{className:"text-sm font-medium",children:"Noise Reduction"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.noiseReduction,onChange:e=>m("noiseReduction",e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Enable background noise filtering"})]}),r.noiseReduction&&(0,a.jsxs)(no,{value:r.noiseReductionLevel,onValueChange:e=>m("noiseReductionLevel",e),children:[(0,a.jsx)(nQ,{className:"w-full",children:(0,a.jsx)(nu,{})}),(0,a.jsxs)(n2,{children:[(0,a.jsx)(n5,{value:"light",children:"Light (Preserve natural sound)"}),(0,a.jsx)(n5,{value:"medium",children:"Medium (Balanced)"}),(0,a.jsx)(n5,{value:"aggressive",children:"Aggressive (Maximum noise removal)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{className:"text-sm font-medium",children:"Voice Activity Detection"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.voiceActivityDetection,onChange:e=>m("voiceActivityDetection",e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Only record when voice is detected"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{className:"text-sm font-medium",children:"Echo Reduction"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.echoReduction,onChange:e=>m("echoReduction",e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Reduce room echo and reverb"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tC,{className:"text-sm font-medium",children:"Automatic Gain Control"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.gainControl,onChange:e=>m("gainControl",e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Maintain consistent volume levels"})]})]})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(tT,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Audio Quality Optimization"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"These settings optimize audio for medical environments with typical background noise, multiple speakers, and varying microphone distances."})]})]})})]}),(0,a.jsxs)(iP,{value:"speakers",className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(tC,{className:"text-sm font-medium",children:"Speaker Identification"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.speakerIdentification,onChange:e=>m("speakerIdentification",e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Automatically identify speakers"})]})]})}),r.speakerIdentification&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Calibrate Voice Profiles"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:["doctor","patient","nurse","other"].map(e=>(0,a.jsxs)(b.$,{variant:"outline",onClick:()=>p(e),disabled:d,className:"flex items-center gap-2",children:[(0,a.jsx)(cG,{className:"w-4 h-4"}),d?"Calibrating...":`Calibrate ${e.charAt(0).toUpperCase()+e.slice(1)}`]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Existing Voice Profiles"}),0===s.length?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No voice profiles configured. Add profiles above to enable speaker identification."}):(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:e.role}),(0,a.jsxs)(j,{variant:"secondary",className:"text-xs",children:[Math.round(100*e.confidence),"% accuracy"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Pitch: ",Math.round(e.voiceCharacteristics.pitch),"Hz • Tempo: ",Math.round(e.voiceCharacteristics.tempo),"WPM"]})]}),(0,a.jsx)(b.$,{variant:"outline",size:"sm",onClick:()=>f(e.id),children:"Remove"})]},e.id))})]})]})]}),(0,a.jsxs)(iP,{value:"commands",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.voiceCommands,onChange:e=>m("voiceCommands",e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)(tC,{className:"text-sm font-medium",children:"Enable Voice Commands"})]}),r.voiceCommands&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Available Voice Commands"}),(0,a.jsx)("div",{className:"grid gap-3",children:[{command:'"Add follow-up in 2 weeks"',action:"Schedules a follow-up appointment"},{command:'"Mark as urgent"',action:"Sets the session priority to urgent"},{command:'"Send to pharmacy"',action:"Sends prescription to pharmacy"},{command:'"Schedule blood work"',action:"Schedules laboratory tests"},{command:'"New section"',action:"Creates a new template section"},{command:'"Save note"',action:"Saves the current medical note"}].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(cZ,{className:"w-4 h-4 text-green-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-green-800",children:e.command}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.action})]})]},t))})]})]}),(0,a.jsxs)(iP,{value:"text",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.automaticPunctuation,onChange:e=>m("automaticPunctuation",e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)(tC,{className:"text-sm font-medium",children:"Automatic Punctuation"})]}),r.automaticPunctuation&&(0,a.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Automatic Text Enhancements"}),(0,a.jsxs)("ul",{className:"text-sm text-green-700 space-y-1",children:[(0,a.jsx)("li",{children:"• Adds periods, commas, and sentence capitalization"}),(0,a.jsx)("li",{children:"• Formats medical terminology and abbreviations"}),(0,a.jsx)("li",{children:'• Standardizes "Patient reports..." format'}),(0,a.jsx)("li",{children:'• Capitalizes "Diagnosis:" and "Treatment:" sections'})]})]})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(cY,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Medical Text Optimization"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Text enhancement is specifically tuned for medical dictation, improving readability and ensuring professional formatting of clinical notes."})]})]})})]})]})})]}),(0,a.jsx)(x.Zp,{children:(0,a.jsx)(x.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Test Voice Enhancement"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Test your current settings with a short recording"})]}),(0,a.jsxs)(b.$,{variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(tM,{className:"w-4 h-4"}),"Test Recording"]})]})})})]}):(0,a.jsx)(x.Zp,{className:"border-orange-200 bg-orange-50",children:(0,a.jsxs)(x.Wu,{className:"p-6 text-center",children:[(0,a.jsx)(iI,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-orange-900 mb-2",children:"Voice Enhancement Not Supported"}),(0,a.jsx)("p",{className:"text-orange-700",children:"Your browser doesn't support advanced audio processing features. Basic recording will still work, but enhanced features are unavailable."})]})})}let cJ=(0,s.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),cQ=(e,t,r,a=!1,n,i)=>({id:`${e}_${r}`,title:t,type:e,placeholder:n||`Enter ${t.toLowerCase()}...`,required:a,order:r,keywords:i}),c0={id:"general-consultation",name:"General Consultation",description:"Standard template for routine medical consultations",category:"consultation",specialty:"General Practice",isDefault:!0,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[cQ("symptoms","Chief Complaint & Symptoms",1,!0,"What brings the patient in today? Describe presenting symptoms..."),cQ("history","Medical History",2,!1,"Relevant medical history, allergies, current medications..."),cQ("vitals","Vital Signs",3,!1,"Blood pressure, heart rate, temperature, weight, etc..."),cQ("examination","Physical Examination",4,!1,"Examination findings and observations..."),cQ("diagnosis","Assessment & Diagnosis",5,!0,"Clinical assessment and working diagnosis..."),cQ("treatment","Treatment Plan",6,!0,"Prescribed medications, procedures, and treatment approach..."),cQ("plan","Follow-up Plan",7,!1,"Next steps, follow-up appointments, monitoring instructions...")]},c1={id:"physical-exam",name:"Comprehensive Physical Examination",description:"Detailed template for thorough physical examinations",category:"examination",specialty:"General Practice",isDefault:!0,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[cQ("vitals","Vital Signs",1,!0,"BP, HR, RR, Temp, O2 Sat, Weight, Height..."),cQ("examination","General Appearance",2,!0,"Overall appearance, demeanor, distress level..."),cQ("examination","Head & Neck",3,!1,"HEENT examination findings..."),cQ("examination","Cardiovascular",4,!1,"Heart sounds, rhythm, murmurs, peripheral pulses..."),cQ("examination","Respiratory",5,!1,"Lung sounds, breathing pattern, chest movement..."),cQ("examination","Abdominal",6,!1,"Inspection, palpation, bowel sounds, tenderness..."),cQ("examination","Neurological",7,!1,"Mental status, reflexes, sensation, motor function..."),cQ("examination","Musculoskeletal",8,!1,"Range of motion, strength, deformities..."),cQ("notes","Additional Findings",9,!1,"Any other relevant examination findings...")]},c2={id:"follow-up",name:"Follow-up Visit",description:"Template for follow-up appointments and progress reviews",category:"follow-up",specialty:"General Practice",isDefault:!0,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[cQ("symptoms","Current Status",1,!0,"How is the patient feeling since last visit? Any changes in symptoms?"),cQ("treatment","Treatment Compliance",2,!0,"Medication adherence, side effects, treatment response..."),cQ("vitals","Current Vital Signs",3,!1,"Updated vital signs and measurements..."),cQ("examination","Focused Examination",4,!1,"Targeted examination based on condition..."),cQ("diagnosis","Progress Assessment",5,!0,"Clinical progress, improvement, or concerns..."),cQ("treatment","Treatment Adjustments",6,!1,"Any changes to medications or treatment plan..."),cQ("plan","Next Steps",7,!0,"Follow-up schedule, monitoring, patient education...")]},c5={id:"emergency",name:"Emergency Consultation",description:"Quick template for urgent medical situations",category:"emergency",specialty:"Emergency Medicine",isDefault:!0,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[cQ("symptoms","Presenting Complaint",1,!0,"Primary emergency complaint and timeline..."),cQ("vitals","Emergency Vitals",2,!0,"Critical vital signs and triage assessment..."),cQ("history","Relevant History",3,!0,"Pertinent medical history and medications..."),cQ("examination","Focused Assessment",4,!0,"Targeted examination findings..."),cQ("diagnosis","Emergency Diagnosis",5,!0,"Working diagnosis and differential..."),cQ("treatment","Immediate Treatment",6,!0,"Emergency interventions and medications..."),cQ("plan","Disposition",7,!0,"Discharge, admission, or transfer plans...")]},c4={id:"procedure",name:"Procedure Note",description:"Documentation template for medical procedures",category:"procedure",specialty:"General Practice",isDefault:!0,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[cQ("text","Procedure Details",1,!0,"Name of procedure, indication, and consent..."),cQ("text","Pre-procedure Assessment",2,!0,"Patient preparation and pre-procedure vitals..."),cQ("text","Procedure Steps",3,!0,"Detailed description of procedure performed..."),cQ("text","Findings",4,!1,"Procedure findings and observations..."),cQ("text","Complications",5,!1,"Any complications or adverse events..."),cQ("treatment","Post-procedure Care",6,!0,"Post-procedure instructions and medications..."),cQ("plan","Follow-up Instructions",7,!0,"When to return, warning signs, activity restrictions...")]},c3=[{id:"basic",name:"Basic Consultation",description:"Simple template for quick consultations",category:"general",isDefault:!0,createdAt:new Date,updatedAt:new Date,sections:[cQ("symptoms","Symptoms",1,!0,"What symptoms is the patient experiencing?"),cQ("examination","Examination",2,!1,"Key examination findings..."),cQ("diagnosis","Diagnosis",3,!0,"Clinical diagnosis or assessment..."),cQ("treatment","Treatment",4,!0,"Prescribed treatment and medications..."),cQ("notes","Notes",5,!1,"Any additional notes or observations...")]},c0,c1,c2,c5,c4],c6=(e,t,r,a=!1,n,i)=>({id:`${e}_${r}`,title:t,type:e,placeholder:n||`Enter ${t.toLowerCase()}...`,required:a,order:r,keywords:i}),c8={id:"hpcsa-consultation",name:"HPCSA General Consultation",description:"Health Professions Council of South Africa compliant consultation template",category:"consultation",isDefault:!0,createdAt:new Date,updatedAt:new Date,sections:[c6("symptoms","Presenting Complaint",1,!0,"Chief complaint and duration. What brings the patient in today?"),c6("history","History of Present Illness",2,!0,"Detailed history of current symptoms, timeline, aggravating/relieving factors..."),c6("history","Past Medical History",3,!1,"Previous illnesses, surgeries, hospitalizations, chronic conditions..."),c6("history","Current Medications",4,!1,"All current medications including chronic medication, dosages, compliance..."),c6("history","Allergies",5,!1,"Drug allergies, food allergies, environmental allergies..."),c6("history","Social History",6,!1,"Smoking, alcohol, recreational drugs, occupation, living conditions..."),c6("history","Family History",7,!1,"Relevant family medical history, genetic conditions..."),c6("vitals","Vital Signs",8,!0,"BP, Pulse, Temperature, Respiratory Rate, O2 Saturation, Weight, Height..."),c6("examination","Physical Examination",9,!0,"Systematic examination findings - general appearance, systems examination..."),c6("diagnosis","Clinical Assessment",10,!0,"Working diagnosis, differential diagnoses, clinical reasoning..."),c6("treatment","Management Plan",11,!0,"Treatment prescribed, medications with dosages, non-pharmacological management..."),c6("plan","Follow-up & Monitoring",12,!1,"Follow-up instructions, when to return, warning signs, monitoring requirements...")]},c7={id:"discovery-health",name:"Discovery Health Consultation",description:"Discovery Health medical aid compliant consultation notes with procedure codes",category:"consultation",isDefault:!0,createdAt:new Date,updatedAt:new Date,sections:[c6("text","Patient Details",1,!0,"Discovery member number, ID number, scheme details..."),c6("symptoms","Chief Complaint",2,!0,"Primary reason for consultation with ICD-10 codes..."),c6("history","Clinical History",3,!0,"Relevant medical history for billing purposes..."),c6("examination","Clinical Examination",4,!0,"Examination findings supporting clinical decisions..."),c6("diagnosis","Diagnosis & ICD-10 Codes",5,!0,"Primary and secondary diagnoses with ICD-10-AM codes..."),c6("treatment","Treatment & Procedure Codes",6,!0,"Treatments provided with Discovery procedure codes (NHRPL codes)..."),c6("text","Billing Information",7,!0,"Procedure codes, modifier codes, consultation level, PMB conditions..."),c6("plan","Treatment Plan",8,!1,"Ongoing management plan and follow-up requirements...")]},c9={id:"doh-clinic",name:"Department of Health Clinic",description:"South African Department of Health public clinic consultation template",category:"consultation",isDefault:!0,createdAt:new Date,updatedAt:new Date,sections:[c6("text","Patient Registration",1,!0,"Folder number, ID number, address, next of kin, language preference..."),c6("symptoms","Presenting Complaints",2,!0,"Main complaints, duration, severity (1-10 scale)..."),c6("history","HIV Status & TB Screening",3,!0,"HIV status (if known), TB symptoms screening, previous TB treatment..."),c6("history","Pregnancy Status",4,!1,"For women of childbearing age - pregnancy status, LMP, contraception..."),c6("vitals","Vital Signs & Anthropometry",5,!0,"BP, Pulse, Temp, RR, Weight, Height, BMI, MUAC (if indicated)..."),c6("examination","Clinical Assessment",6,!0,"Focused examination based on presenting complaint..."),c6("diagnosis","Diagnosis (ICD-10)",7,!0,"Primary diagnosis with ICD-10 code, co-morbidities..."),c6("treatment","Management",8,!0,"Medications prescribed (generic names), dosages, duration..."),c6("plan","Follow-up & Referral",9,!0,"Return date, referrals to specialists/higher level care, health education...")]},de={id:"occupational-health",name:"Occupational Health Assessment",description:"Department of Labour compliant occupational health consultation",category:"examination",isDefault:!0,createdAt:new Date,updatedAt:new Date,sections:[c6("text","Employment Details",1,!0,"Employer name, job title, nature of work, workplace hazards, years of service..."),c6("history","Occupational History",2,!0,"Previous occupations, exposure history, occupational injuries/illnesses..."),c6("symptoms","Work-Related Symptoms",3,!0,"Symptoms related to work exposure, timing, aggravating factors..."),c6("examination","Fitness Assessment",4,!0,"Physical fitness for specific job requirements, functional capacity..."),c6("examination","Respiratory Assessment",5,!1,"Lung function tests, chest X-ray results, respiratory symptoms..."),c6("examination","Audiometric Assessment",6,!1,"Hearing test results, noise exposure assessment..."),c6("diagnosis","Medical Findings",7,!0,"Medical conditions identified, work-relatedness assessment..."),c6("text","Fitness Certificate",8,!0,"Fit for work/restrictions/limitations, recommendations to employer...")]},dt=[c8,c7,c9,de,{id:"chronic-disease-sa",name:"Chronic Disease Management (SA)",description:"South African chronic disease management focusing on HIV, TB, Diabetes, Hypertension",category:"follow-up",isDefault:!0,createdAt:new Date,updatedAt:new Date,sections:[c6("history","Chronic Condition Status",1,!0,"HIV status, TB treatment, diabetes control, hypertension management..."),c6("history","Medication Adherence",2,!0,"ARV adherence, TB treatment compliance, chronic medication compliance..."),c6("symptoms","Current Symptoms",3,!0,"New symptoms, side effects, opportunistic infections..."),c6("vitals","Monitoring Parameters",4,!0,"BP, weight, BMI, CD4 count, viral load, blood glucose, HbA1c..."),c6("examination","Clinical Assessment",5,!0,"Focused examination, signs of disease progression..."),c6("diagnosis","Disease Status",6,!0,"Disease control status, complications, co-morbidities..."),c6("treatment","Treatment Adjustments",7,!0,"Medication changes, dosage adjustments, new prescriptions..."),c6("plan","Monitoring Plan",8,!0,"Next visit date, laboratory tests required, referrals needed...")]},{id:"emergency-sa",name:"Emergency Department (SA)",description:"South African emergency department consultation with triage integration",category:"emergency",isDefault:!0,createdAt:new Date,updatedAt:new Date,sections:[c6("text","Triage Information",1,!0,"Triage category (Red/Orange/Yellow/Green/Blue), time of arrival, vital signs..."),c6("symptoms","Emergency Complaint",2,!0,"Chief complaint, onset, severity, associated symptoms..."),c6("history","Relevant History",3,!0,"Pertinent past medical history, current medications, allergies..."),c6("vitals","Emergency Vitals",4,!0,"Full vital signs, GCS, pain score, blood glucose if indicated..."),c6("examination","Emergency Examination",5,!0,"Focused examination based on chief complaint and triage category..."),c6("text","Investigations",6,!1,"Blood tests, X-rays, ECG, other investigations performed..."),c6("diagnosis","Emergency Diagnosis",7,!0,"Working diagnosis, differential diagnoses, severity assessment..."),c6("treatment","Emergency Management",8,!0,"Immediate treatment given, procedures performed, response to treatment..."),c6("plan","Disposition",9,!0,"Discharge home/admit/transfer, follow-up instructions, return precautions...")]}],dr=(e,t,r,a=!1,n,i)=>({id:`${e}_${r}`,title:t,type:e,placeholder:n||`Enter ${t.toLowerCase()}...`,required:a,order:r,keywords:i}),da={id:"cardiology-consultation",name:"Cardiology Consultation",description:"Comprehensive cardiac assessment and management template",category:"specialist",specialty:"Cardiology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","Cardiac Symptoms",1,!0,"Chest pain, shortness of breath, palpitations, syncope, fatigue...",["chest pain","dyspnea","palpitations","syncope"]),dr("history","Cardiac Risk Factors",2,!0,"Hypertension, diabetes, smoking, family history, hyperlipidemia..."),dr("examination","Cardiovascular Examination",3,!0,"Heart sounds, murmurs, peripheral pulses, JVP, peripheral edema..."),dr("vitals","Cardiac Vitals",4,!0,"BP (lying/standing), HR, rhythm, oxygen saturation..."),dr("diagnosis","Cardiac Assessment",5,!0,"ECG findings, echo results, working diagnosis..."),dr("treatment","Cardiac Management",6,!0,"Medications, lifestyle modifications, interventions..."),dr("plan","Cardiac Follow-up",7,!0,"Serial ECGs, echo surveillance, risk stratification...")]},dn={id:"echocardiogram-report",name:"Echocardiogram Report",description:"Structured echocardiographic examination report",category:"diagnostic",specialty:"Cardiology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("text","Clinical Indication",1,!0,"Reason for echocardiogram..."),dr("text","Technical Quality",2,!0,"Image quality, acoustic windows, limitations..."),dr("text","Left Ventricle",3,!0,"LV size, wall thickness, systolic function, LVEF..."),dr("text","Right Heart",4,!0,"RV size and function, RA assessment, estimated RVSP..."),dr("text","Valvular Assessment",5,!0,"Mitral, aortic, tricuspid, pulmonary valve function..."),dr("text","Other Findings",6,!1,"Pericardium, aorta, masses, thrombi..."),dr("diagnosis","Echo Conclusion",7,!0,"Summary of key findings and clinical significance...")]},di={id:"orthopedic-consultation",name:"Orthopedic Consultation",description:"Musculoskeletal assessment and surgical evaluation",category:"specialist",specialty:"Orthopedic Surgery",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","Musculoskeletal Complaint",1,!0,"Pain location, mechanism of injury, functional limitations...",["pain","injury","fracture","mobility"]),dr("history","Injury History",2,!0,"Mechanism, timing, previous injuries, treatments attempted..."),dr("examination","Orthopedic Examination",3,!0,"Inspection, palpation, range of motion, strength, special tests..."),dr("text","Imaging Review",4,!1,"X-ray, MRI, CT findings and interpretation..."),dr("diagnosis","Orthopedic Diagnosis",5,!0,"Primary diagnosis, fracture classification, stability..."),dr("treatment","Treatment Plan",6,!0,"Conservative vs surgical management, specific interventions..."),dr("plan","Rehabilitation Plan",7,!0,"Physical therapy, weight-bearing status, follow-up schedule...")]},ds={id:"preop-assessment",name:"Pre-operative Assessment",description:"Comprehensive pre-surgical evaluation template",category:"procedure",specialty:"Orthopedic Surgery",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("text","Planned Procedure",1,!0,"Surgical procedure planned, indications, risks discussed..."),dr("history","Anesthetic History",2,!0,"Previous anesthetics, complications, airway assessment..."),dr("examination","Pre-op Examination",3,!0,"Cardiovascular, respiratory, airway assessment..."),dr("text","Risk Stratification",4,!0,"ASA classification, cardiac risk, bleeding risk..."),dr("text","Laboratory Results",5,!1,"FBC, U&E, coagulation studies, other relevant tests..."),dr("treatment","Pre-op Optimization",6,!1,"Medical optimization, medication adjustments..."),dr("plan","Anesthetic Plan",7,!0,"Type of anesthesia, monitoring, post-op plan...")]},dl={id:"dermatology-consultation",name:"Dermatology Consultation",description:"Comprehensive dermatological assessment template",category:"specialist",specialty:"Dermatology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","Dermatological Complaint",1,!0,"Skin lesions, rash, itching, changes over time...",["rash","lesion","itching","pigmentation"]),dr("history","Dermatological History",2,!0,"Duration, evolution, triggers, previous treatments..."),dr("examination","Skin Examination",3,!0,"Distribution, morphology, color, size, texture of lesions..."),dr("text","Dermoscopy Findings",4,!1,"Dermoscopic features, patterns, concerning features..."),dr("diagnosis","Dermatological Diagnosis",5,!0,"Primary diagnosis, differential diagnoses, malignancy risk..."),dr("treatment","Dermatological Treatment",6,!0,"Topical treatments, systemic therapy, procedures..."),dr("plan","Dermatology Follow-up",7,!0,"Biopsy results, treatment response, surveillance plan...")]},dc={id:"skin-cancer-screening",name:"Skin Cancer Screening",description:"Systematic skin cancer detection and monitoring",category:"screening",specialty:"Dermatology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("history","Melanoma Risk Factors",1,!0,"Family history, sun exposure, moles, previous skin cancers..."),dr("examination","Full Body Skin Exam",2,!0,"Systematic examination of all skin surfaces..."),dr("text","Suspicious Lesions",3,!1,"Location, ABCDE criteria, dermoscopy features..."),dr("text","Photography/Mapping",4,!1,"Lesion documentation, mole mapping, serial photography..."),dr("diagnosis","Risk Assessment",5,!0,"Overall melanoma risk, concerning lesions identified..."),dr("treatment","Management Plan",6,!0,"Biopsy recommendations, excision plans, patient education..."),dr("plan","Surveillance Schedule",7,!0,"Follow-up interval, self-examination education, sun protection...")]},dd={id:"psychiatry-consultation",name:"Psychiatry Consultation",description:"Comprehensive psychiatric assessment and management",category:"specialist",specialty:"Psychiatry",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","Presenting Symptoms",1,!0,"Mood, anxiety, psychosis, cognition, behavior changes...",["depression","anxiety","psychosis","mood"]),dr("history","Psychiatric History",2,!0,"Previous episodes, hospitalizations, treatments, family history..."),dr("examination","Mental State Exam",3,!0,"Appearance, behavior, speech, mood, thought, perception, cognition..."),dr("text","Risk Assessment",4,!0,"Suicide risk, self-harm, violence risk, capacity assessment..."),dr("diagnosis","Psychiatric Diagnosis",5,!0,"Primary diagnosis (DSM-5/ICD-11), differential diagnoses..."),dr("treatment","Treatment Plan",6,!0,"Medication, psychotherapy, social interventions..."),dr("plan","Psychiatric Follow-up",7,!0,"Monitoring plan, therapy referrals, crisis management...")]},du={id:"mental-health-screening",name:"Mental Health Screening",description:"Standardized mental health assessment and screening",category:"screening",specialty:"Psychiatry",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("text","Screening Tools",1,!0,"PHQ-9, GAD-7, AUDIT, other validated screening instruments..."),dr("symptoms","Current Symptoms",2,!0,"Mood, anxiety, sleep, appetite, energy, concentration..."),dr("history","Psychosocial History",3,!0,"Stressors, support systems, coping mechanisms, trauma history..."),dr("examination","Brief Mental State",4,!0,"Appearance, mood, thought process, risk factors..."),dr("diagnosis","Screening Results",5,!0,"Positive screens, severity assessment, need for referral..."),dr("treatment","Immediate Interventions",6,!1,"Crisis intervention, safety planning, brief counseling..."),dr("plan","Referral and Follow-up",7,!0,"Specialist referral, community resources, follow-up plan...")]},dh={id:"pediatric-consultation",name:"Pediatric Consultation",description:"Comprehensive pediatric assessment template",category:"specialist",specialty:"Pediatrics",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","Chief Complaint",1,!0,"Parental concerns, symptoms, behavioral changes...",["fever","feeding","development","behavior"]),dr("history","Birth and Development",2,!0,"Birth history, milestones, immunizations, growth charts..."),dr("examination","Pediatric Examination",3,!0,"Age-appropriate examination, growth parameters, development..."),dr("vitals","Pediatric Vitals",4,!0,"Age-appropriate vital signs, percentiles, head circumference..."),dr("diagnosis","Pediatric Assessment",5,!0,"Diagnosis, developmental concerns, growth issues..."),dr("treatment","Pediatric Treatment",6,!0,"Age-appropriate medications, dosing, interventions..."),dr("plan","Pediatric Follow-up",7,!0,"Immunization schedule, development monitoring, parent education...")]},dm={id:"well-child-visit",name:"Well Child Visit",description:"Routine pediatric health maintenance visit",category:"preventive",specialty:"Pediatrics",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("text","Interval History",1,!0,"Health since last visit, parental concerns, feeding, sleep..."),dr("examination","Physical Examination",2,!0,"Complete age-appropriate physical examination..."),dr("text","Growth Assessment",3,!0,"Height, weight, head circumference plotted on growth charts..."),dr("text","Development Assessment",4,!0,"Age-appropriate milestones, developmental screening tools..."),dr("text","Immunizations",5,!0,"Vaccines given, schedule discussed, adverse reactions..."),dr("text","Anticipatory Guidance",6,!0,"Safety, nutrition, development, behavior, screen time..."),dr("plan","Next Visit",7,!0,"Follow-up schedule, concerns to monitor, referrals if needed...")]},dp={id:"gastroenterology-consultation",name:"Gastroenterology Consultation",description:"Comprehensive GI assessment and management",category:"specialist",specialty:"Gastroenterology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","GI Symptoms",1,!0,"Abdominal pain, nausea, vomiting, diarrhea, constipation, bleeding...",["abdominal pain","diarrhea","constipation","bleeding"]),dr("history","GI History",2,!0,"Symptom timeline, dietary factors, medications, family history..."),dr("examination","Abdominal Examination",3,!0,"Inspection, auscultation, palpation, percussion, rectal exam..."),dr("text","Endoscopy Findings",4,!1,"Upper endoscopy, colonoscopy, biopsy results..."),dr("diagnosis","GI Diagnosis",5,!0,"Primary diagnosis, functional vs organic, severity assessment..."),dr("treatment","GI Treatment",6,!0,"Dietary modifications, medications, procedures..."),dr("plan","GI Follow-up",7,!0,"Monitoring plan, surveillance endoscopy, lifestyle modifications...")]},df={id:"endoscopy-report",name:"Endoscopy Report",description:"Detailed endoscopic procedure documentation",category:"procedure",specialty:"Gastroenterology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("text","Procedure Details",1,!0,"Type of endoscopy, indication, medications used..."),dr("text","Technical Aspects",2,!0,"Scope used, sedation, patient tolerance, complications..."),dr("text","Endoscopic Findings",3,!0,"Systematic description of findings from insertion to withdrawal..."),dr("text","Interventions",4,!1,"Biopsies, polypectomy, hemostasis, therapeutic procedures..."),dr("text","Pathology Correlation",5,!1,"Histology results, correlation with endoscopic findings..."),dr("diagnosis","Endoscopic Diagnosis",6,!0,"Final diagnosis based on endoscopic and histologic findings..."),dr("plan","Post-procedure Plan",7,!0,"Follow-up endoscopy, surveillance, treatment recommendations...")]},dg={id:"gynecology-consultation",name:"Gynecology Consultation",description:"Comprehensive gynecological assessment",category:"specialist",specialty:"Gynecology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","Gynecological Symptoms",1,!0,"Menstrual history, pelvic pain, discharge, bleeding patterns...",["menstrual","pelvic pain","discharge","bleeding"]),dr("history","Obstetric History",2,!0,"Gravida, para, pregnancies, deliveries, complications..."),dr("examination","Pelvic Examination",3,!0,"External genitalia, speculum exam, bimanual exam, cervix assessment..."),dr("text","Imaging Results",4,!1,"Pelvic ultrasound, MRI findings, other imaging studies..."),dr("diagnosis","Gynecological Diagnosis",5,!0,"Primary diagnosis, staging if malignancy, fertility assessment..."),dr("treatment","Gynecological Treatment",6,!0,"Medical management, surgical options, hormonal therapy..."),dr("plan","Gynecology Follow-up",7,!0,"Surveillance plan, fertility counseling, contraception discussion...")]},dx={id:"cervical-screening",name:"Cervical Cancer Screening",description:"Pap smear and HPV testing documentation",category:"screening",specialty:"Gynecology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("history","Screening History",1,!0,"Previous Pap smears, HPV history, risk factors..."),dr("examination","Cervical Assessment",2,!0,"Cervical appearance, adequacy of specimen, colposcopy findings..."),dr("text","Cytology Results",3,!0,"Pap smear results, HPV testing, adequacy of specimen..."),dr("text","Risk Stratification",4,!0,"Risk category based on results, guidelines followed..."),dr("diagnosis","Screening Interpretation",5,!0,"Clinical significance of results, need for further testing..."),dr("treatment","Management Plan",6,!1,"Colposcopy referral, treatment of abnormalities..."),dr("plan","Screening Schedule",7,!0,"Next screening interval, patient education, follow-up plan...")]},dy={id:"ophthalmology-consultation",name:"Ophthalmology Consultation",description:"Comprehensive eye examination and assessment",category:"specialist",specialty:"Ophthalmology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","Visual Symptoms",1,!0,"Visual acuity changes, pain, redness, flashing lights, field defects...",["vision loss","pain","redness","flashes"]),dr("history","Ophthalmic History",2,!0,"Previous eye problems, surgeries, medications, family history..."),dr("examination","Eye Examination",3,!0,"Visual acuity, pupils, external exam, slit lamp, fundoscopy..."),dr("text","Special Tests",4,!1,"Visual fields, OCT, fluorescein angiography, tonometry..."),dr("diagnosis","Ophthalmic Diagnosis",5,!0,"Primary diagnosis, severity, visual prognosis..."),dr("treatment","Eye Treatment",6,!0,"Medications, laser treatment, surgical options..."),dr("plan","Ophthalmology Follow-up",7,!0,"Monitoring plan, visual rehabilitation, emergency signs...")]},dv={id:"diabetic-retinopathy",name:"Diabetic Retinopathy Screening",description:"Systematic diabetic eye disease assessment",category:"screening",specialty:"Ophthalmology",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("history","Diabetes History",1,!0,"Duration of diabetes, HbA1c control, previous eye exams..."),dr("examination","Retinal Examination",2,!0,"Fundoscopy findings, microaneurysms, hemorrhages, exudates..."),dr("text","Retinopathy Grading",3,!0,"ETDRS classification, severity level, macular involvement..."),dr("text","Macular Assessment",4,!0,"Macular edema, thickness, OCT findings..."),dr("diagnosis","DR Classification",5,!0,"Stage of diabetic retinopathy, risk of progression..."),dr("treatment","DR Management",6,!1,"Laser treatment, anti-VEGF injections, vitrectomy..."),dr("plan","DR Surveillance",7,!0,"Follow-up interval, patient education, glycemic control...")]},db={id:"emergency-trauma",name:"Emergency Trauma Assessment",description:"Systematic trauma evaluation and management",category:"emergency",specialty:"Emergency Medicine",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("text","Mechanism of Injury",1,!0,"Details of trauma, forces involved, time of injury..."),dr("vitals","Trauma Vitals",2,!0,"GCS, vitals, hemodynamic status, oxygen saturation..."),dr("examination","Primary Survey",3,!0,"ABCDE assessment, immediate life threats..."),dr("examination","Secondary Survey",4,!0,"Head-to-toe examination, neurological assessment..."),dr("text","Imaging Studies",5,!1,"CT scans, X-rays, FAST exam, findings..."),dr("diagnosis","Trauma Diagnoses",6,!0,"Injuries identified, severity, ISS score..."),dr("treatment","Trauma Management",7,!0,"Resuscitation, procedures, medications, disposition...")]},dw=Object.values({cardiology:[da,dn],orthopedics:[di,ds],dermatology:[dl,dc],psychiatry:[dd,du],pediatrics:[dh,dm],gastroenterology:[dp,df],gynecology:[dg,dx],ophthalmology:[dy,dv],emergency:[db,{id:"emergency-chest-pain",name:"Emergency Chest Pain Evaluation",description:"Acute chest pain assessment and risk stratification",category:"emergency",specialty:"Emergency Medicine",isDefault:!1,usage:{totalUses:0,lastUsed:null,averageCompletionTime:0,userRating:0},createdAt:new Date,updatedAt:new Date,sections:[dr("symptoms","Chest Pain Characteristics",1,!0,"Location, quality, radiation, timing, severity, triggers...",["chest pain","cardiac","ischemia"]),dr("history","Cardiac Risk Factors",2,!0,"Age, gender, smoking, diabetes, hypertension, family history..."),dr("examination","Cardiac Examination",3,!0,"Heart sounds, murmurs, peripheral pulses, signs of heart failure..."),dr("text","ECG Findings",4,!0,"Rhythm, ST changes, Q waves, comparison with previous ECGs..."),dr("text","Laboratory Results",5,!0,"Troponin, BNP, D-dimer, CBC, basic metabolic panel..."),dr("diagnosis","Risk Stratification",6,!0,"HEART score, TIMI risk, differential diagnoses..."),dr("treatment","Emergency Management",7,!0,"Medications, monitoring, disposition, cardiology consultation...")]}]}).flat(),dN={cardiology:{name:"Cardiology",description:"Heart and cardiovascular system disorders",icon:"\uD83E\uDEC0",color:"red"},orthopedics:{name:"Orthopedic Surgery",description:"Musculoskeletal injuries and disorders",icon:"\uD83E\uDDB4",color:"blue"},dermatology:{name:"Dermatology",description:"Skin, hair, and nail conditions",icon:"\uD83E\uDDF4",color:"pink"},psychiatry:{name:"Psychiatry",description:"Mental health and behavioral disorders",icon:"\uD83E\uDDE0",color:"purple"},pediatrics:{name:"Pediatrics",description:"Medical care of infants, children, and adolescents",icon:"\uD83D\uDC76",color:"green"},gastroenterology:{name:"Gastroenterology",description:"Digestive system disorders",icon:"\uD83C\uDF7D️",color:"orange"},gynecology:{name:"Gynecology",description:"Female reproductive health",icon:"\uD83C\uDF38",color:"cyan"},ophthalmology:{name:"Ophthalmology",description:"Eye and vision disorders",icon:"\uD83D\uDC41️",color:"indigo"},emergency:{name:"Emergency Medicine",description:"Acute care and trauma management",icon:"\uD83D\uDEA8",color:"red"}},dj={general:"bg-gray-100 text-gray-700",consultation:"bg-blue-100 text-blue-700",examination:"bg-green-100 text-green-700",procedure:"bg-purple-100 text-purple-700","follow-up":"bg-orange-100 text-orange-700",emergency:"bg-red-100 text-red-700",specialist:"bg-indigo-100 text-indigo-700",diagnostic:"bg-cyan-100 text-cyan-700",screening:"bg-teal-100 text-teal-700",preventive:"bg-emerald-100 text-emerald-700"},dA={general:"General",consultation:"Consultation",examination:"Examination",procedure:"Procedure","follow-up":"Follow-up",emergency:"Emergency",specialist:"Specialist",diagnostic:"Diagnostic",screening:"Screening",preventive:"Preventive"};function dS({onTemplateSelect:e,selectedTemplateId:t,className:r}){let[i,s]=(0,n.useState)(""),[o,d]=(0,n.useState)("all"),[u,h]=(0,n.useState)("south-africa"),[m,p]=(0,n.useState)("all"),[f,g]=(0,n.useState)(null),y="south-africa"===u?dt:"specialty"===u?dw:c3,w=y.filter(e=>{let t=e.name.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase())||e.specialty?.toLowerCase().includes(i.toLowerCase()),r="all"===o||e.category===o,a="all"===m||e.specialty?.toLowerCase()===m.toLowerCase();return t&&r&&a}),N=Array.from(new Set(y.map(e=>e.category)));return(0,a.jsxs)("div",{className:`space-y-6 bg-white p-8 rounded-2xl shadow-xl border-0 ${r}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select Template"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Choose a template to structure your medical notes with precision"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-50 border border-gray-300 rounded-xl p-1.5 shadow-lg backdrop-blur-sm",children:[(0,a.jsx)("button",{onClick:()=>h("south-africa"),className:`px-5 py-3 text-sm font-semibold rounded-lg transition-all duration-300 ${"south-africa"===u?"bg-green-600 text-white shadow-lg scale-105 transform":"text-gray-700 hover:text-green-700 hover:bg-green-100 backdrop-blur-sm"}`,children:"\uD83C\uDDFF\uD83C\uDDE6 SA Templates"}),(0,a.jsx)("button",{onClick:()=>h("specialty"),className:`px-5 py-3 text-sm font-semibold rounded-lg transition-all duration-300 ${"specialty"===u?"bg-purple-600 text-white shadow-lg scale-105 transform":"text-gray-700 hover:text-purple-700 hover:bg-purple-100 backdrop-blur-sm"}`,children:"\uD83E\uDE7A Specialty"}),(0,a.jsx)("button",{onClick:()=>h("international"),className:`px-5 py-3 text-sm font-semibold rounded-lg transition-all duration-300 ${"international"===u?"bg-blue-600 text-white shadow-lg scale-105 transform":"text-gray-700 hover:text-blue-700 hover:bg-blue-100 backdrop-blur-sm"}`,children:"\uD83C\uDF0D International"})]}),(0,a.jsxs)(j,{variant:"outline",className:"text-sm font-medium px-3 py-1 bg-white border-gray-300 text-gray-700",children:[w.length," templates"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 bg-gray-50 p-4 rounded-xl border border-gray-200",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(l,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),(0,a.jsx)(v,{placeholder:"Search templates by name, description, or specialty...",value:i,onChange:e=>s(e.target.value),className:"pl-12 h-12 text-base bg-white border-2 border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg shadow-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-gray-300 shadow-sm",children:[(0,a.jsx)(c,{className:"w-5 h-5 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Filters:"})]}),"specialty"===u&&(0,a.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"px-4 py-3 border-2 border-gray-300 rounded-lg text-sm font-medium bg-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 shadow-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Specialties"}),Object.entries(dN).map(([e,t])=>(0,a.jsxs)("option",{value:t.name,children:[t.icon," ",t.name]},e))]}),(0,a.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"px-4 py-3 border-2 border-gray-300 rounded-lg text-sm font-medium bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),N.map(e=>(0,a.jsx)("option",{value:e,children:dA[e]},e))]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(r=>(0,a.jsxs)(x.Zp,{className:`cursor-pointer transition-all duration-300 hover:shadow-2xl hover:scale-105 transform bg-white backdrop-blur-lg border-2 ${t===r.id?"ring-4 ring-blue-500/30 border-blue-400 shadow-2xl bg-gradient-to-br from-blue-50 to-white scale-105":"border-gray-300 hover:border-blue-400 hover:bg-gradient-to-br hover:from-blue-50 hover:to-white shadow-lg"} rounded-2xl overflow-hidden`,onClick:()=>e(r),children:[(0,a.jsx)(x.aR,{className:"pb-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,a.jsx)(tO,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.ZB,{className:"text-base font-bold text-gray-900 leading-tight",children:r.name}),r.isDefault&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,a.jsx)(cJ,{className:"w-4 h-4 text-yellow-500 fill-current"}),(0,a.jsx)("span",{className:"text-xs font-medium text-yellow-600",children:"Recommended"})]})]})]}),t===r.id&&(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:(0,a.jsx)(nJ,{className:"w-4 h-4 text-white font-bold"})})]})}),(0,a.jsxs)(x.Wu,{className:"space-y-4 p-6 bg-white",children:[(0,a.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3 leading-relaxed font-medium",children:r.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(j,{className:`text-xs font-semibold px-3 py-1 ${dj[r.category]} rounded-full border-0`,children:dA[r.category]}),r.specialty&&(0,a.jsxs)(j,{className:"text-xs font-medium px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full border-0",children:[Object.entries(dN).find(([e,t])=>t.name===r.specialty)?.[1]?.icon," ",r.specialty]})]}),(0,a.jsxs)("div",{className:"text-xs font-bold text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[r.sections.length," sections"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,a.jsxs)(b.$,{variant:"outline",size:"sm",className:"text-xs font-semibold border-2 border-gray-300 hover:border-blue-500 hover:bg-blue-50 transition-all duration-200",onClick:e=>{e.stopPropagation(),g(r)},children:[(0,a.jsx)(tW,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,a.jsx)(b.$,{size:"sm",className:`text-xs font-bold px-6 transition-all duration-300 ${t===r.id?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-lg":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl"} rounded-lg`,onClick:t=>{t.stopPropagation(),e(r)},children:t===r.id?"✓ Selected":"Use Template"})]})]})]},r.id))}),0===w.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(tO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search terms or category filter."})]}),(0,a.jsx)(tv,{open:!!f,onOpenChange:()=>g(null),children:(0,a.jsxs)(tj,{className:"sm:max-w-5xl max-h-[90vh] bg-white border-0 shadow-2xl backdrop-blur-lg rounded-2xl overflow-hidden",children:[(0,a.jsxs)(tA,{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 text-white p-8 -mx-6 -mt-6 mb-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/90 via-purple-600/90 to-indigo-700/90"}),(0,a.jsxs)(tS,{className:"relative flex items-center gap-4 text-2xl font-bold",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center shadow-lg backdrop-blur-sm",children:(0,a.jsx)(tO,{className:"w-7 h-7 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-2xl font-bold leading-tight",children:f?.name}),(0,a.jsx)("div",{className:"text-blue-100 text-sm font-medium mt-2",children:"Medical Template Preview"})]})]})]}),f&&(0,a.jsxs)("div",{className:"space-y-8 bg-white overflow-y-auto max-h-[70vh] px-2",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 via-purple-50 to-indigo-50 p-8 rounded-2xl border-2 border-blue-100 shadow-lg",children:[(0,a.jsx)("p",{className:"text-gray-800 font-semibold text-lg leading-relaxed break-words",children:f.description}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-6",children:[(0,a.jsx)(j,{className:"bg-blue-600 text-white font-semibold px-4 py-2 rounded-full",children:dA[f.category]}),f.specialty&&(0,a.jsxs)(j,{className:"bg-purple-600 text-white font-semibold px-4 py-2 rounded-full",children:[Object.entries(dN).find(([e,t])=>t.name===f.specialty)?.[1]?.icon," ",f.specialty]}),(0,a.jsxs)("div",{className:"text-sm font-bold text-gray-600 bg-gray-200 px-4 py-2 rounded-full",children:[f.sections.length," sections"]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h4",{className:"font-bold text-gray-900 text-2xl flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg"}),"Template Sections"]}),(0,a.jsx)("div",{className:"space-y-6",children:f.sections.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-6 p-8 bg-gradient-to-r from-white to-gray-50 border-2 border-gray-200 rounded-2xl hover:shadow-xl transition-all duration-300 hover:scale-[1.01]",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center text-xl font-bold text-white shadow-lg flex-shrink-0",children:t+1}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,a.jsx)("span",{className:"font-bold text-gray-900 text-lg leading-tight flex-1",children:e.title}),e.required&&(0,a.jsx)(j,{className:"bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full flex-shrink-0",children:"Required"})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-5 rounded-xl border border-gray-200",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700 font-medium italic leading-relaxed break-words",children:['"',e.placeholder,'"']})})]})]},e.id))})]})]})]})})]})}let dk=(0,s.A)("sliders-vertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]),dC={aggressiveness:"balanced",autoTaggingIntensity:"medium",blankFieldHandling:"mark_not_discussed",confidenceThreshold:.7,sectionSpecificSettings:{symptoms:{fillBehavior:"reasonable_inference",confidenceRequired:.6},diagnosis:{fillBehavior:"explicit_only",confidenceRequired:.8},treatment:{fillBehavior:"explicit_only",confidenceRequired:.8},vitals:{fillBehavior:"explicit_only",confidenceRequired:.9},history:{fillBehavior:"reasonable_inference",confidenceRequired:.7},examination:{fillBehavior:"reasonable_inference",confidenceRequired:.7},plan:{fillBehavior:"explicit_only",confidenceRequired:.8},notes:{fillBehavior:"medical_knowledge",confidenceRequired:.5}},medicalTermExpansion:!0,icd10AutoSuggestion:!0,dosageValidation:!0,criticalFlagging:!0};function dL({currentConfig:e,onConfigChange:t,className:r}){let[i,s]=(0,n.useState)(e||dC),[o,l]=(0,n.useState)(!1),c=e=>{s(e),localStorage.setItem("ai-behavior-config",JSON.stringify(e)),t?.(e)},d=e=>{let t={...i,aggressiveness:e};"conservative"===e?(t.autoTaggingIntensity="low",t.blankFieldHandling="leave_blank",t.confidenceThreshold=.8,Object.keys(t.sectionSpecificSettings).forEach(e=>{t.sectionSpecificSettings[e].fillBehavior="explicit_only",t.sectionSpecificSettings[e].confidenceRequired=.8})):"aggressive"===e?(t.autoTaggingIntensity="high",t.blankFieldHandling="auto_na",t.confidenceThreshold=.5,Object.keys(t.sectionSpecificSettings).forEach(e=>{"diagnosis"!==e&&"treatment"!==e&&(t.sectionSpecificSettings[e].fillBehavior="medical_knowledge",t.sectionSpecificSettings[e].confidenceRequired=.5)})):(t.autoTaggingIntensity="medium",t.blankFieldHandling="mark_not_discussed",t.confidenceThreshold=.7),c(t)},u=e=>{switch(e){case"conservative":return"bg-blue-100 text-blue-700 border-blue-300";case"balanced":return"bg-green-100 text-green-700 border-green-300";case"aggressive":return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},h=e=>{switch(e){case"conservative":return(0,a.jsx)(iI,{className:"w-5 h-5"});case"balanced":return(0,a.jsx)(cg,{className:"w-5 h-5"});case"aggressive":return(0,a.jsx)(cZ,{className:"w-5 h-5"});default:return(0,a.jsx)(tU,{className:"w-5 h-5"})}};return(0,a.jsxs)(tv,{open:o,onOpenChange:l,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{variant:"outline",className:`flex items-center gap-2 ${r}`,children:[(0,a.jsx)(tz,{className:"w-4 h-4"}),"AI Behavior",(0,a.jsx)(j,{className:`ml-2 ${u(i.aggressiveness)}`,children:i.aggressiveness})]})}),(0,a.jsxs)(tj,{className:"sm:max-w-4xl max-h-[90vh] bg-white border-0 shadow-2xl rounded-2xl overflow-hidden",children:[(0,a.jsx)(tA,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 -mx-6 -mt-6 mb-6",children:(0,a.jsxs)(tS,{className:"flex items-center gap-3 text-2xl font-bold",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(tz,{className:"w-6 h-6 text-white"})}),"AI Behavior Settings",(0,a.jsx)(j,{className:"bg-white/20 text-white",children:"Goldilocks Mode"})]})}),(0,a.jsxs)("div",{className:"space-y-6 overflow-y-auto max-h-[70vh] px-2",children:[(0,a.jsxs)(x.Zp,{className:"border-2 border-blue-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,a.jsxs)(x.aR,{children:[(0,a.jsxs)(x.ZB,{className:"flex items-center gap-3 text-lg",children:[(0,a.jsx)(dk,{className:"w-5 h-5 text-blue-600"}),"AI Aggressiveness Level"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Control how aggressive the AI is in filling template sections and making inferences"})]}),(0,a.jsx)(x.Wu,{className:"space-y-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{level:"conservative",title:"\uD83D\uDEE1️ Conservative",description:"Only include explicitly mentioned information",details:"Perfect for legal documentation where accuracy is paramount"},{level:"balanced",title:"\uD83C\uDFAF Balanced",description:"Reasonable medical inference with high confidence",details:"Ideal for most clinical documentation scenarios"},{level:"aggressive",title:"⚡ Aggressive",description:"Fill gaps with medical knowledge and context",details:"Best for experienced practitioners who want comprehensive notes"}].map(e=>(0,a.jsx)(x.Zp,{className:`cursor-pointer transition-all duration-300 hover:shadow-lg ${i.aggressiveness===e.level?"ring-2 ring-blue-500 bg-blue-50 scale-105":"hover:bg-gray-50"}`,onClick:()=>d(e.level),children:(0,a.jsx)(x.Wu,{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,a.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${u(e.level)}`,children:h(e.level)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:e.details})]}),i.aggressiveness===e.level&&(0,a.jsx)(iR,{className:"w-5 h-5 text-green-600"})]})})},e.level))})})]}),(0,a.jsxs)(x.Zp,{className:"border border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-3",children:[(0,a.jsx)(cg,{className:"w-5 h-5 text-green-600"}),"Auto-Tagging Intensity"]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:["low","medium","high"].map(e=>(0,a.jsx)(b.$,{variant:i.autoTaggingIntensity===e?"default":"outline",size:"sm",onClick:()=>c({...i,autoTaggingIntensity:e}),className:"capitalize",children:e},e))}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Controls how aggressively the AI tags medical terms, medications, and conditions"})]})]}),(0,a.jsxs)(x.Zp,{className:"border border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-3",children:[(0,a.jsx)(tF.A,{className:"w-5 h-5 text-orange-600"}),"Blank Field Handling"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{value:"leave_blank",label:"Leave Blank",description:"Keep fields empty if not mentioned"},{value:"mark_not_discussed",label:'Mark "Not Discussed"',description:"Add placeholder text for empty fields"},{value:"auto_na",label:"Auto N/A",description:'Automatically fill with "N/A"'}].map(e=>(0,a.jsxs)(b.$,{variant:i.blankFieldHandling===e.value?"default":"outline",size:"sm",onClick:()=>c({...i,blankFieldHandling:e.value}),className:"h-auto p-3 text-left flex flex-col items-start",children:[(0,a.jsx)("span",{className:"font-medium",children:e.label}),(0,a.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:e.description})]},e.value))})})]}),(0,a.jsxs)(x.Zp,{className:"border border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-3",children:[(0,a.jsx)(cZ,{className:"w-5 h-5 text-purple-600"}),"Advanced AI Features"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{key:"medicalTermExpansion",label:"Medical Term Expansion",description:"Expand abbreviations and medical terms"},{key:"icd10AutoSuggestion",label:"ICD-10 Auto-Suggestion",description:"Automatically suggest relevant diagnostic codes"},{key:"dosageValidation",label:"Dosage Validation",description:"Validate medication dosages and flag concerns"},{key:"criticalFlagging",label:"Critical Information Flagging",description:"Highlight urgent or critical findings"}].map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border",children:[(0,a.jsx)("input",{type:"checkbox",checked:i[e.key],onChange:t=>c({...i,[e.key]:t.target.checked}),className:"mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"font-medium text-sm",children:e.label}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})]},e.key))})})]}),(0,a.jsxs)(x.Zp,{className:"border border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-3",children:[(0,a.jsx)(iR,{className:"w-5 h-5 text-green-600"}),"Confidence Threshold"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Minimum Confidence:"}),(0,a.jsx)("input",{type:"range",min:"0.3",max:"0.9",step:"0.1",value:i.confidenceThreshold,onChange:e=>c({...i,confidenceThreshold:parseFloat(e.target.value)}),className:"flex-1"}),(0,a.jsxs)(j,{className:"bg-blue-100 text-blue-700",children:[Math.round(100*i.confidenceThreshold),"%"]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"AI will only auto-fill content when confidence exceeds this threshold"})]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t",children:[(0,a.jsx)(b.$,{variant:"outline",onClick:()=>c(dC),children:"Reset to Defaults"}),(0,a.jsx)(b.$,{onClick:()=>l(!1),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:"Save Settings"})]})]})]})}async function dP(e,t,r,a){let n=t7();if(!n)throw Error("OpenAI API key not configured");let i=t9(),s=function(e,t,r,a){let n=t.sections.map(e=>`- ${e.title} (${e.type}): ${e.placeholder}`).join("\n"),i=function(e){switch(e?.aggressiveness||"balanced"){case"conservative":return'- CONSERVATIVE MODE: Only include information that is explicitly mentioned in the transcription. Do NOT infer, extrapolate, or add medical knowledge. If something is not clearly stated, leave the section blank or mark as "Not discussed".';case"aggressive":return"- AGGRESSIVE MODE: Use medical knowledge to fill gaps and provide comprehensive documentation. Infer reasonable medical information where appropriate. Expand on abbreviated terms and provide context where it adds clinical value.";default:return"- BALANCED MODE: Include explicitly mentioned information and make reasonable medical inferences where there is high confidence. Strike a balance between accuracy and completeness."}}(a),s=function(e){switch(e?.blankFieldHandling||"mark_not_discussed"){case"leave_blank":return"- BLANK FIELDS: Leave sections completely empty if no relevant information is mentioned.";case"auto_na":return'- BLANK FIELDS: Fill empty sections with "N/A" or "Not applicable" where appropriate.';default:return'- BLANK FIELDS: Mark sections as "Not discussed" or "Information not provided" when no relevant content is available.'}}(a);return`
You are an expert South African medical scribe AI with configurable behavior. Transform this raw medical transcription into a beautifully formatted, professionally structured medical note.

TRANSCRIPTION TO ANALYZE:
"${e}"

TEMPLATE STRUCTURE:
${n}

${r?`PATIENT CONTEXT:
${r}
`:""}

AI BEHAVIOR CONFIGURATION:
${i}
${s}
- Auto-tagging intensity: ${a?.autoTaggingIntensity||"medium"}
- Medical term expansion: ${a?.medicalTermExpansion?"enabled":"disabled"}
- ICD-10 suggestions: ${a?.icd10AutoSuggestion?"enabled":"disabled"}
- Dosage validation: ${a?.dosageValidation?"enabled":"disabled"}
- Critical flagging: ${a?.criticalFlagging?"enabled":"disabled"}

INSTRUCTIONS:
1. **Intelligent Content Allocation**: Analyze each sentence and allocate content to the most appropriate template sections
2. **Professional Medical Formatting**: 
   - Use proper medical terminology
   - Structure content with clear headings and bullet points
   - Highlight critical information
   - Format vital signs, medications, and dosages properly
3. **South African Medical Context**:
   - Include relevant ICD-10-AM codes
   - Consider local disease patterns (TB, HIV, diabetes, hypertension)
   - Use South African medical terminology and standards
4. **Clinical Intelligence**:
   - Identify and highlight critical findings
   - Suggest medical terms where lay language is used
   - Extract and format vital signs, medications, allergies
   - Assess urgency and completeness
5. **Beautiful Formatting**:
   - Use markdown formatting for readability
   - Create structured lists for medications, symptoms, findings
   - Highlight important medical information
   - Ensure professional presentation

⚠️ CRITICAL: Return ONLY valid JSON. No markdown code blocks, no extra text, no explanation. Start directly with { and end with }.

JSON FORMAT:
{
  "formattedSections": [
    {
      "sectionId": "section_id_from_template",
      "sectionTitle": "Section Title",
      "content": "**Beautifully formatted content with:**\\n\\n• Proper bullet points\\n• **Bold critical findings**\\n• Clear structure\\n• Professional terminology",
      "confidence": 0.95,
      "formatting": {
        "highlighted": ["critical findings", "important symptoms"],
        "icd10Codes": [
          {
            "code": "R50.9",
            "description": "Fever, unspecified"
          }
        ],
        "medicalTerms": ["hypertension", "tachycardia"],
        "dosages": ["20mg daily", "500mg BD"],
        "vitals": ["BP 140/90", "HR 85", "Temp 37.2\xb0C"]
      }
    }
  ],
  "clinicalSummary": "Brief professional summary of key clinical findings and management",
  "urgencyLevel": "medium",
  "completeness": 0.85,
  "suggestedActions": [
    "Follow-up blood pressure monitoring required",
    "Consider ECG if chest pain persists"
  ]
}

CRITICAL REQUIREMENTS:
- Extract ALL medical information from the transcription
- Format content professionally with proper medical structure
- Include relevant ICD-10 codes for diagnoses and symptoms
- Highlight critical findings and important information
- Ensure content flows logically within each section
- Use South African medical standards and terminology
- Make the output look like a professional medical document
- Only include content that clearly belongs to each section
- Preserve exact medical details while enhancing presentation
`}(e,t,r,a||dC);try{let t,r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({model:i,messages:[{role:"system",content:"You are an expert South African medical AI assistant specialized in creating beautifully formatted, clinically accurate medical documentation. You understand South African medical standards, ICD-10-AM coding, and local healthcare context including common conditions like TB, HIV, diabetes, and hypertension."},{role:"user",content:s}],temperature:.1,max_tokens:"gpt-3.5-turbo"===i?2e3:2500})});if(!r.ok)throw Error(`OpenAI API error: ${r.statusText}`);let a=(await r.json()).choices[0].message.content;a.includes("```json")&&(a=a.replace(/```json\s*/g,"").replace(/\s*```/g,"")),a.includes("```")&&(a=a.replace(/```\s*/g,"").replace(/\s*```/g,"")),a=a.trim();try{t=JSON.parse(a)}catch(r){console.error("JSON parse error:",r),console.error("Content received:",a),t={formattedSections:[{sectionId:"notes_1",sectionTitle:"Clinical Notes",content:e,confidence:.8,formatting:{highlighted:[],icd10Codes:[],medicalTerms:[],dosages:[],vitals:[]}}],clinicalSummary:"Transcription processed with basic formatting due to parsing error.",urgencyLevel:"medium",completeness:.7,suggestedActions:["Review and edit content as needed"]}}return t0(e.length),t}catch(e){throw console.error("Intelligent formatting failed:",e),e}}let d_=(0,s.A)("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);function dD({analysis:e,isGenerating:t,onSectionEdit:r,onRegenerate:i,manualNotes:s="",onManualNotesChange:o}){let[l,c]=(0,n.useState)(null),d=e?{...e,formattedSections:e.formattedSections||[],suggestedActions:e.suggestedActions||[],clinicalSummary:e.clinicalSummary||"",urgencyLevel:e.urgencyLevel||"low",completeness:e.completeness||0}:null;if(t)return(0,a.jsx)(x.Zp,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:(0,a.jsx)(x.Wu,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full animate-pulse shadow-lg"}),(0,a.jsx)("div",{className:"absolute inset-0 w-20 h-20 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full animate-ping opacity-20"}),(0,a.jsx)("div",{className:"absolute inset-4 w-12 h-12 bg-white rounded-full flex items-center justify-center",children:(0,a.jsx)(tz,{className:"w-6 h-6 text-blue-600 animate-pulse"})})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-800 mb-2",children:"AI Medical Analysis in Progress"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsx)("p",{children:"\uD83E\uDDE0 Analyzing clinical content..."}),(0,a.jsx)("p",{children:"\uD83D\uDCCB Structuring medical sections..."}),(0,a.jsx)("p",{children:"\uD83C\uDFE5 Adding ICD-10 codes..."}),(0,a.jsx)("p",{children:"✨ Creating professional formatting..."})]})]})]})})});if(!d)return(0,a.jsx)(x.Zp,{className:"bg-white border-gray-200",children:(0,a.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,a.jsx)(tz,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"AI Medical Analysis Ready"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Record audio to generate an intelligent, beautifully formatted medical note"})]})});let u=d?.formattedSections||[],h=d?.suggestedActions||[],m=d?.clinicalSummary||"",p=d?.urgencyLevel||"low",f=d?.completeness||0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(x.Zp,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2 text-blue-800",children:[(0,a.jsx)(d_,{className:"w-5 h-5"}),"Clinical Intelligence Dashboard"]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(tF.A,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Urgency"})]}),(0,a.jsx)(j,{className:`${(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}})(p)} capitalize`,children:p})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(iR,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Complete"})]}),(0,a.jsxs)("div",{className:`text-lg font-bold ${f>=.8?"text-green-600":f>=.6?"text-yellow-600":"text-red-600"}`,children:[Math.round(100*f),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(tO,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Sections"})]}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-600",children:u.length})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(tq,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Enhanced"})]}),(0,a.jsx)(j,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"AI Powered"})]})]}),m&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-white rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(tz,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Clinical Summary"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:m})]}),h.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(cZ,{className:"w-4 h-4 text-amber-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-amber-800",children:"Suggested Actions"})]}),(0,a.jsx)("ul",{className:"text-sm text-amber-700 space-y-1",children:h.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-amber-500 mt-1",children:"•"}),e]},t))})]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200 hover:shadow-md transition-shadow",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(x.ZB,{className:"text-lg text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(tO,{className:"w-4 h-4 text-blue-600"}),e.sectionTitle]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(j,{variant:"outline",className:`text-xs ${e.confidence>.8?"border-green-300 text-green-700":"border-yellow-300 text-yellow-700"}`,children:[Math.round(100*e.confidence),"% confident"]}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",onClick:()=>c(l===e.sectionId?null:e.sectionId),className:"h-8 w-8 p-0",children:"✏️"})]})]})}),(0,a.jsx)(x.Wu,{children:l===e.sectionId?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(tL,{value:e.content,onChange:t=>r(e.sectionId,t.target.value),className:"min-h-[120px] font-mono text-sm"}),(0,a.jsx)(b.$,{size:"sm",onClick:()=>c(null),className:"bg-blue-500 hover:bg-blue-600",children:"Save Changes"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"prose prose-sm max-w-none text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content.replace(/\*\*(.*?)\*\*/g,'<strong class="text-gray-900 font-semibold">$1</strong>').replace(/\*(.*?)\*/g,'<em class="text-blue-700">$1</em>').replace(/\n/g,"<br>").replace(/•/g,'<span class="text-blue-500">•</span>')}}),((e.formatting?.icd10Codes?.length||0)>0||(e.formatting?.medicalTerms?.length||0)>0||(e.formatting?.vitals?.length||0)>0||(e.formatting?.dosages?.length||0)>0)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-3 border-t border-gray-100",children:[(e.formatting?.icd10Codes?.length||0)>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-xs font-medium text-blue-600",children:"\uD83D\uDCCB ICD-10 Codes:"})}),(0,a.jsx)("div",{className:"space-y-1",children:e.formatting?.icd10Codes?.map((e,t)=>(0,a.jsxs)(j,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:[e.code,": ",e.description]},t))})]}),(e.formatting?.medicalTerms?.length||0)>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-xs font-medium text-green-600",children:"\uD83C\uDFE5 Medical Terms:"})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.formatting?.medicalTerms?.map((e,t)=>(0,a.jsx)(j,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:e},t))})]}),(e.formatting?.vitals?.length||0)>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-xs font-medium text-purple-600",children:"\uD83D\uDCCA Vital Signs:"})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.formatting?.vitals?.map((e,t)=>(0,a.jsx)(j,{variant:"outline",className:"text-xs bg-purple-50 text-purple-700 border-purple-200",children:e},t))})]}),(e.formatting?.dosages?.length||0)>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-xs font-medium text-orange-600",children:"\uD83D\uDC8A Dosages:"})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.formatting?.dosages?.map((e,t)=>(0,a.jsx)(j,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:e},t))})]})]})]})})]},e.sectionId))}),o&&(0,a.jsxs)(x.Zp,{className:"border-purple-200 bg-purple-50/30",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2 text-sm font-medium text-purple-900",children:[(0,a.jsx)(tO,{className:"w-4 h-4 text-purple-600"}),"Manual Notes & Additional Observations",(0,a.jsx)(j,{variant:"outline",className:"text-xs bg-purple-100 border-purple-300 text-purple-800",children:"manual"})]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)(tL,{placeholder:"Add any additional notes, observations, or free-form text that complements the AI analysis above...",value:s,onChange:e=>o(e.target.value),className:"min-h-[100px] border-purple-200 focus:border-purple-500 focus:ring-purple-500 font-medium leading-relaxed bg-white/70"}),(0,a.jsx)("div",{className:"text-xs text-purple-600 mt-2 flex items-center gap-2",children:(0,a.jsx)("span",{children:"\uD83D\uDCA1 This section combines with the AI analysis for complete documentation"})})]})]}),(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsxs)(b.$,{onClick:i,variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(tz,{className:"w-4 h-4"}),"Regenerate AI Analysis"]})})]})}let dI=(0,s.A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),dR=(0,s.A)("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),dE=(0,s.A)("waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);function dT({stream:e,isRecording:t}){let r=(0,n.useRef)(null);return(0,n.useRef)(),(0,n.useRef)(),(0,n.useRef)(),(0,a.jsx)("canvas",{ref:r,width:"400",height:"100",className:"w-full h-20 rounded-lg border border-gray-200 bg-gray-50"})}function dM({recordingState:e,duration:t,isTranscribing:r,onStartRecording:i,onStopRecording:s,onPauseRecording:l,onResumeRecording:c,onResetRecording:d,formatDuration:u,voiceCommands:h=[],streamRef:m,className:p}){let[f,g]=(0,n.useState)("none"),[y,v]=(0,n.useState)(85),[w,N]=(0,n.useState)("low"),[A,S]=(0,n.useState)(!1),[k,C]=(0,n.useState)("");return(0,a.jsxs)("div",{className:`space-y-6 ${p}`,children:[(0,a.jsx)(x.Zp,{className:"border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50 shadow-xl backdrop-blur-lg",children:(0,a.jsx)(x.Wu,{className:"p-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full animate-ping opacity-30"}),(0,a.jsx)(b.$,{onClick:()=>{switch(e){case"idle":i();break;case"recording":s();break;case"paused":c();break;case"stopped":d()}},className:(()=>{let t="w-20 h-20 rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg";switch(e){case"recording":return`${t} bg-gradient-to-r from-red-500 to-red-600 text-white animate-pulse`;case"paused":return`${t} bg-gradient-to-r from-orange-500 to-orange-600 text-white`;case"stopped":return`${t} bg-gradient-to-r from-blue-500 to-blue-600 text-white`;default:return`${t} bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700`}})(),disabled:r,children:(()=>{switch(e){case"recording":case"stopped":default:return(0,a.jsx)(tM,{className:"w-8 h-8"});case"paused":return(0,a.jsx)(dI,{className:"w-8 h-8"})}})()}),"recording"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute -top-3 -right-3 animate-bounce",children:(0,a.jsx)("div",{className:"w-7 h-7 bg-red-500 rounded-full animate-pulse flex items-center justify-center shadow-lg",children:(0,a.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"})})}),(0,a.jsxs)("div",{className:"absolute inset-0 rounded-full",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-red-400 rounded-full animate-ping opacity-20"}),(0,a.jsx)("div",{className:"absolute inset-2 bg-red-300 rounded-full animate-ping opacity-10 animation-delay-100"})]})]})]}),(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900 font-mono",children:u(t)}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)(j,{className:`${"recording"===e?"bg-red-100 text-red-700":"paused"===e?"bg-orange-100 text-orange-700":"stopped"===e?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:["idle"===e&&"Ready to Record","recording"===e&&"Recording","paused"===e&&"Paused","stopped"===e&&"Stopped"]}),r&&(0,a.jsxs)(j,{className:"bg-purple-100 text-purple-700 animate-pulse",children:[(0,a.jsx)(tz,{className:"w-3 h-3 mr-1"}),"Transcribing"]})]})]}),"idle"!==e&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["recording"===e&&(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:l,className:"flex items-center gap-2",children:[(0,a.jsx)(dR,{className:"w-4 h-4"}),"Pause"]}),(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:s,className:"flex items-center gap-2",children:[(0,a.jsx)(l5,{className:"w-4 h-4"}),"Stop"]}),"stopped"===e&&(0,a.jsx)(b.$,{variant:"outline",size:"sm",onClick:d,className:"flex items-center gap-2",children:"Reset"})]})]})})}),"recording"===e&&(0,a.jsxs)(x.Zp,{className:"border border-gray-200",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(dE,{className:"w-5 h-5 text-blue-600"}),"Audio Visualization"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)(dT,{stream:m?.current||null,isRecording:"recording"===e})})]}),"recording"===e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(x.Zp,{className:"border border-gray-200",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(cG,{className:"w-4 h-4 text-purple-600"}),"Speaker Detection"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${"doctor"===f?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}`,children:[(0,a.jsx)(o,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Doctor"}),"doctor"===f&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"})]}),(0,a.jsxs)("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${"patient"===f?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[(0,a.jsx)(o,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Patient"}),"patient"===f&&(0,a.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"})]})]})})})]}),(0,a.jsxs)(x.Zp,{className:"border border-gray-200",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(lX,{className:"w-4 h-4 text-green-600"}),"Audio Quality"]})}),(0,a.jsxs)(x.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Transcription Quality"}),(0,a.jsxs)(j,{className:y>=80?"text-green-600 bg-green-50":y>=60?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",children:[Math.round(y),"%"]})]}),(0,a.jsx)(cD,{value:y,className:"h-2"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Background Noise"}),(0,a.jsx)(j,{className:(e=>{switch(e){case"low":return"text-green-600 bg-green-50";case"medium":return"text-orange-600 bg-orange-50";case"high":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(w),children:w})]})]})]})]}),h.length>0&&(0,a.jsxs)(x.Zp,{className:"border-2 border-purple-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(cZ,{className:"w-5 h-5 text-purple-600"}),"Voice Commands",A&&(0,a.jsxs)(j,{className:"bg-purple-100 text-purple-700 animate-pulse",children:[(0,a.jsx)(tz,{className:"w-3 h-3 mr-1"}),"Processing"]})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[k&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-white rounded-lg border border-purple-200",children:[(0,a.jsx)(iR,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Latest command:"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:['"',k,'"']})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:'Try saying: "Go to symptoms", "Add diagnosis", "Save notes", or "New section"'})]})})]}),"recording"===e&&(0,a.jsxs)(x.Zp,{className:"border border-gray-200",children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(cZ,{className:"w-4 h-4 text-orange-600"}),"Quick Actions"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(j,{className:"bg-blue-100 text-blue-700 cursor-pointer hover:bg-blue-200 transition-colors",children:"Mark timestamp"}),(0,a.jsx)(j,{className:"bg-green-100 text-green-700 cursor-pointer hover:bg-green-200 transition-colors",children:"Flag important"}),(0,a.jsx)(j,{className:"bg-orange-100 text-orange-700 cursor-pointer hover:bg-orange-200 transition-colors",children:"Add note"}),(0,a.jsx)(j,{className:"bg-purple-100 text-purple-700 cursor-pointer hover:bg-purple-200 transition-colors",children:"Change section"})]})})]})]})}let dF={headerColor:"#007AFF",accentColor:"#34C759",fontFamily:"Inter",fontSize:"14px",showWatermark:!1,showConfidenceScores:!0};function dO({analysis:e,patient:t,template:r,isGenerating:i,onSectionEdit:s,onExportPdf:l,onEmailDocument:c,onPrintDocument:d,className:u}){let[h,m]=(0,n.useState)(null),[g,y]=(0,n.useState)(""),[v,w]=(0,n.useState)(dF),[N,A]=(0,n.useState)(!1),S=(0,n.useRef)(null),k=(e,t)=>{m(e),y(t)},C=()=>{h&&(s(h,g),m(null),y(""))},L=()=>{m(null),y("")},P=e=>e>=.8?"text-green-600 bg-green-50 border-green-200":e>=.6?"text-orange-600 bg-orange-50 border-orange-200":"text-red-600 bg-red-50 border-red-200",_=e=>e>=.8?(0,a.jsx)(iR,{className:"w-4 h-4"}):e>=.6?(0,a.jsx)(tF.A,{className:"w-4 h-4"}):(0,a.jsx)(f,{className:"w-4 h-4"});return i?(0,a.jsx)(x.Zp,{className:`bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200 ${u}`,children:(0,a.jsx)(x.Wu,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full animate-pulse shadow-lg"}),(0,a.jsx)("div",{className:"absolute inset-0 w-24 h-24 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full animate-ping opacity-20"}),(0,a.jsx)("div",{className:"absolute inset-6 w-12 h-12 bg-white rounded-full flex items-center justify-center",children:(0,a.jsx)(tO,{className:"w-6 h-6 text-blue-600 animate-pulse"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Creating Beautiful Medical Document"}),(0,a.jsx)("p",{className:"text-gray-600",children:"AI is analyzing and formatting your transcription..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-blue-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]})})}):e?(0,a.jsxs)("div",{className:`space-y-6 ${u}`,children:[(0,a.jsxs)(x.Zp,{className:"border-2 border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:[(0,a.jsx)(x.aR,{className:"pb-4",children:(0,a.jsxs)(x.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(tO,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Medical Document"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:r.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>A(!N),children:[(0,a.jsx)(tW,{className:"w-4 h-4 mr-2"}),"Style"]}),(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:d,children:[(0,a.jsx)(ro,{className:"w-4 h-4 mr-2"}),"Print"]}),(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:c,children:[(0,a.jsx)(rl.A,{className:"w-4 h-4 mr-2"}),"Email"]}),(0,a.jsxs)(b.$,{size:"sm",onClick:l,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[(0,a.jsx)(rs,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})]})}),(0,a.jsx)(x.Wu,{className:"pt-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(j,{className:`flex items-center gap-2 ${"critical"===e.urgencyLevel?"bg-red-100 text-red-700":"high"===e.urgencyLevel?"bg-orange-100 text-orange-700":"medium"===e.urgencyLevel?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:["critical"===e.urgencyLevel&&(0,a.jsx)(tF.A,{className:"w-4 h-4"}),"critical"!==e.urgencyLevel&&(0,a.jsx)(iR,{className:"w-4 h-4"}),e.urgencyLevel.charAt(0).toUpperCase()+e.urgencyLevel.slice(1)," Priority"]}),(0,a.jsxs)(j,{className:"bg-blue-100 text-blue-700",children:[Math.round(100*e.completeness),"% Complete"]}),(0,a.jsxs)(j,{className:"bg-purple-100 text-purple-700",children:[e.formattedSections.length," Sections"]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Generated ",new Date().toLocaleString()]})]})})]}),(0,a.jsxs)(x.Zp,{ref:S,className:"border-2 border-gray-200 bg-white shadow-lg print:shadow-none print:border-none",style:{fontFamily:v.fontFamily,fontSize:v.fontSize},children:[(0,a.jsx)("div",{className:"p-8 border-b-4 print:p-6",style:{borderColor:v.headerColor},children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Medical Consultation"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Patient:"}),(0,a.jsxs)("span",{children:[t.name," ",t.surname]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Date:"}),(0,a.jsx)("span",{children:new Date().toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tO,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Age:"}),(0,a.jsxs)("span",{children:[(()=>{if(t.dateOfBirth){let e=new Date,r=new Date(t.dateOfBirth),a=e.getFullYear()-r.getFullYear(),n=e.getMonth()-r.getMonth();return n<0||0===n&&e.getDate()<r.getDate()?a-1:a}return t.age})()," years"]})]}),t.medicalAid&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Medical Aid:"}),(0,a.jsxs)("span",{children:[t.medicalAid.provider," - ",t.medicalAid.memberNumber]})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-lg font-bold",style:{color:v.headerColor},children:"AI Medical Scribe"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Smart Healthcare Documentation"}),v.showWatermark&&(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-2 opacity-50",children:"DRAFT - REVIEW REQUIRED"})]})]})}),e.clinicalSummary&&(0,a.jsxs)("div",{className:"p-8 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:v.accentColor},children:"✓"}),"Clinical Summary"]}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:e.clinicalSummary})]}),(0,a.jsx)("div",{className:"p-8 space-y-8",children:e.formattedSections.map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg text-white text-sm font-bold flex items-center justify-center",style:{backgroundColor:v.headerColor},children:t+1}),e.sectionTitle]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[v.showConfidenceScores&&(0,a.jsxs)(j,{className:`text-xs ${P(e.confidence)} border`,children:[_(e.confidence),Math.round(100*e.confidence),"%"]}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",onClick:()=>k(e.sectionId,e.content),className:"text-gray-500 hover:text-blue-600",children:(0,a.jsx)(t_,{className:"w-4 h-4"})})]})]}),h===e.sectionId?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(tL,{value:g,onChange:e=>y(e.target.value),rows:6,className:"w-full border-2 border-blue-300 focus:border-blue-500"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(b.$,{size:"sm",onClick:C,className:"bg-green-600 text-white hover:bg-green-700",children:[(0,a.jsx)(tV,{className:"w-4 h-4 mr-2"}),"Save"]}),(0,a.jsx)(b.$,{variant:"outline",size:"sm",onClick:L,children:"Cancel"})]})]}):(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:e.content.split("\n").map((e,t)=>(0,a.jsx)("p",{className:"mb-3 last:mb-0 text-gray-700 leading-relaxed",children:e},t))}),e.formatting&&(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.formatting.medicalTerms?.slice(0,3).map((e,t)=>(0,a.jsx)(j,{className:"bg-blue-100 text-blue-700 text-xs",children:e},t)),e.formatting.icd10Codes?.slice(0,2).map((e,t)=>(0,a.jsxs)(j,{className:"bg-purple-100 text-purple-700 text-xs",children:[e.code,": ",e.description]},t))]})]})]},e.sectionId))}),e.suggestedActions.length>0&&(0,a.jsxs)("div",{className:"p-8 bg-gradient-to-r from-orange-50 to-yellow-50 border-t border-gray-200",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(tF.A,{className:"w-5 h-5 text-orange-600"}),"Suggested Actions"]}),(0,a.jsx)("ul",{className:"space-y-2",children:e.suggestedActions.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full text-white text-xs font-bold flex items-center justify-center mt-0.5",style:{backgroundColor:v.accentColor},children:t+1}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]},t))})]}),(0,a.jsx)("div",{className:"p-6 bg-gray-50 border-t border-gray-200 text-center",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["Generated by AI Medical Scribe on ",new Date().toLocaleString()]}),(0,a.jsx)("p",{className:"mt-1",children:"This document was generated using artificial intelligence and should be reviewed by a qualified healthcare professional."})]})})]}),N&&(0,a.jsxs)(x.Zp,{className:"border-2 border-purple-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[(0,a.jsx)(x.aR,{children:(0,a.jsx)(x.ZB,{className:"text-lg",children:"Document Styling"})}),(0,a.jsxs)(x.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Header Color"}),(0,a.jsx)("input",{type:"color",value:v.headerColor,onChange:e=>w({...v,headerColor:e.target.value}),className:"w-full h-10 rounded border"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Accent Color"}),(0,a.jsx)("input",{type:"color",value:v.accentColor,onChange:e=>w({...v,accentColor:e.target.value}),className:"w-full h-10 rounded border"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:v.showWatermark,onChange:e=>w({...v,showWatermark:e.target.checked})}),(0,a.jsx)("span",{className:"text-sm",children:"Show draft watermark"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:v.showConfidenceScores,onChange:e=>w({...v,showConfidenceScores:e.target.checked})}),(0,a.jsx)("span",{className:"text-sm",children:"Show confidence scores"})]})]})]})]})]}):(0,a.jsx)(x.Zp,{className:`border-2 border-gray-200 ${u}`,children:(0,a.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,a.jsx)(tO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No document generated"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Start recording to generate a medical document"})]})})}let dB=(0,s.A)("file-audio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);function dq({onFileUpload:e,onTranscribeFile:t,isTranscribing:r,transcriptionProgress:i=0,className:s}){let[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(!1),[g,y]=(0,n.useState)(0),[v,w]=(0,n.useState)(0),N=(0,n.useRef)(null),j=(0,n.useRef)(null),A=(0,n.useRef)(0),S=["audio/mp3","audio/wav","audio/m4a","audio/aac","audio/ogg","audio/webm"],k=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},C=e=>{let t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`},L=e=>new Promise(t=>{let r=new Audio;r.onloadedmetadata=()=>{t(r.duration)},r.onerror=()=>{t(0)},r.src=URL.createObjectURL(e)}),P=e=>S.includes(e.type)?e.size>0x6400000?`File too large. Maximum size is ${k(0x6400000)}`:null:`Unsupported format. Please upload: ${S.map(e=>e.split("/")[1].toUpperCase()).join(", ")}`,_=async t=>{let r=P(t);if(r)return void h(r);h(null);try{let r=await L(t),a=URL.createObjectURL(t),n={file:t,duration:r,size:k(t.size),format:t.type.split("/")[1].toUpperCase(),url:a};l(n),e(t)}catch(e){h("Failed to process audio file")}},D=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),A.current++,d(!0)},[]),I=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),A.current--,0===A.current&&d(!1)},[]),R=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),E=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d(!1),A.current=0;let t=Array.from(e.dataTransfer.files);t.length>0&&_(t[0])},[]),T=async()=>{if(o)try{await t(o.file)}catch(e){h("Transcription failed. Please try again.")}};return(0,a.jsxs)("div",{className:`space-y-4 ${s}`,children:[(0,a.jsx)(x.Zp,{className:`border-2 border-dashed transition-all duration-300 ${c?"border-blue-500 bg-blue-50 scale-[1.02]":o?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"}`,onDragEnter:D,onDragLeave:I,onDragOver:R,onDrop:E,children:(0,a.jsx)(x.Wu,{className:"p-8",children:o?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl flex items-center justify-center",children:(0,a.jsx)(dB,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:o.file.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsx)("span",{children:o.size}),(0,a.jsx)("span",{children:o.format}),(0,a.jsx)("span",{children:C(o.duration)})]})]})]}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",onClick:()=>{o&&URL.revokeObjectURL(o.url),l(null),h(null),f(!1),y(0),w(0),N.current&&(N.current.value="")},className:"text-gray-500 hover:text-red-600",children:(0,a.jsx)(m,{className:"w-4 h-4"})})]}),(0,a.jsx)(x.Zp,{className:"border border-gray-200 bg-gray-50",children:(0,a.jsx)(x.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(b.$,{variant:"outline",size:"sm",onClick:()=>{j.current&&o&&(p?j.current.pause():j.current.play(),f(!p))},className:"w-10 h-10 rounded-full p-0",children:p?(0,a.jsx)(dR,{className:"w-4 h-4"}):(0,a.jsx)(dI,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(cD,{value:v,className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,a.jsx)("span",{children:C(g)}),(0,a.jsx)("span",{children:C(o.duration)})]})]}),(0,a.jsx)(lX,{className:"w-4 h-4 text-gray-500"})]})})}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)(b.$,{onClick:T,disabled:r,className:"bg-gradient-to-r from-green-600 to-blue-600 text-white hover:scale-105 transition-transform",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Transcribing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(dB,{className:"w-4 h-4 mr-2"}),"Transcribe Audio"]})}),(0,a.jsxs)(b.$,{variant:"outline",onClick:()=>N.current?.click(),children:[(0,a.jsx)(lY,{className:"w-4 h-4 mr-2"}),"Upload Different File"]})]})]}):(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:`w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 ${c?"bg-blue-500 scale-110":"bg-gray-100"}`,children:(0,a.jsx)(lY,{className:`w-8 h-8 ${c?"text-white":"text-gray-500"}`})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c?"Drop your audio file here":"Upload Audio Recording"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop an audio file or click to browse"}),(0,a.jsxs)(b.$,{onClick:()=>N.current?.click(),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:scale-105 transition-transform",children:[(0,a.jsx)(lY,{className:"w-4 h-4 mr-2"}),"Browse Files"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-500 border-t pt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Supported formats:"}),(0,a.jsx)("br",{}),"MP3, WAV, M4A, AAC, OGG"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Maximum size:"}),(0,a.jsx)("br",{}),k(0x6400000)]})]})]})})}),r&&(0,a.jsx)(x.Zp,{className:"border-2 border-blue-200 bg-gradient-to-r from-blue-50 to-purple-50",children:(0,a.jsxs)(x.Wu,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full animate-pulse flex items-center justify-center",children:(0,a.jsx)(dB,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Transcribing Audio File"}),(0,a.jsx)(cD,{value:i,className:"h-3"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[(0,a.jsx)("span",{children:"Processing audio content..."}),(0,a.jsxs)("span",{children:[Math.round(i),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-blue-700 bg-blue-100 rounded-lg p-3",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"})," Large files may take a few minutes to process. You can continue working while transcription runs in the background."]})]})}),u&&(0,a.jsx)(x.Zp,{className:"border-2 border-red-200 bg-red-50",children:(0,a.jsx)(x.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(cr,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-red-900",children:"Upload Error"}),(0,a.jsx)("p",{className:"text-red-700 text-sm",children:u})]}),(0,a.jsx)(b.$,{variant:"ghost",size:"sm",onClick:()=>h(null),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(m,{className:"w-4 h-4"})})]})})}),(0,a.jsx)("input",{ref:N,type:"file",accept:S.join(","),onChange:e=>{let t=e.target.files;t&&t.length>0&&_(t[0])},className:"hidden"}),o&&(0,a.jsx)("audio",{ref:j,src:o.url,onTimeUpdate:()=>{if(!j.current||!o)return;let e=j.current.currentTime,t=j.current.duration;y(e),w(e/t*100)},onEnded:()=>{f(!1),y(0),w(0)},onPlay:()=>f(!0),onPause:()=>f(!1)})]})}let dz={symptoms:{title:"Symptoms",placeholder:"Describe the patient's presenting symptoms...",keywords:["pain","ache","hurt","feel","symptom","complaint","problem","issue","discomfort","nausea","fever","headache","cough","fatigue","dizzy"],color:"bg-red-50 border-red-200 text-red-800"},diagnosis:{title:"Diagnosis",placeholder:"Enter preliminary or confirmed diagnosis...",keywords:["diagnosis","diagnosed","condition","disease","disorder","syndrome","infection","inflammation","injury"],color:"bg-blue-50 border-blue-200 text-blue-800"},treatment:{title:"Treatment Plan",placeholder:"Outline the treatment approach and medications...",keywords:["treatment","medication","prescription","therapy","procedure","surgery","recommend","advise","prescribe","dose","mg","tablets"],color:"bg-green-50 border-green-200 text-green-800"},vitals:{title:"Vital Signs",placeholder:"Record blood pressure, heart rate, temperature, etc...",keywords:["blood pressure","bp","heart rate","pulse","temperature","temp","respiratory rate","oxygen","weight","height","bmi"],color:"bg-purple-50 border-purple-200 text-purple-800"},history:{title:"Medical History",placeholder:"Document relevant medical history...",keywords:["history","previous","past","family history","allergies","medications","surgery","hospitalization","chronic"],color:"bg-yellow-50 border-yellow-200 text-yellow-800"},examination:{title:"Physical Examination",placeholder:"Record examination findings...",keywords:["examination","inspect","palpation","auscultation","percussion","normal","abnormal","findings","observe"],color:"bg-indigo-50 border-indigo-200 text-indigo-800"},plan:{title:"Plan",placeholder:"Outline next steps and follow-up plans...",keywords:["plan","follow-up","return","schedule","next","continue","monitor","review","appointment"],color:"bg-gray-50 border-gray-200 text-gray-800"},notes:{title:"Additional Notes",placeholder:"Any additional observations or notes...",keywords:["note","comment","observation","additional","other","miscellaneous"],color:"bg-orange-50 border-orange-200 text-orange-800"},text:{title:"General Text",placeholder:"Enter general information...",keywords:[],color:"bg-gray-50 border-gray-200 text-gray-800"}};function dU({patient:e,onBack:t,onSaveSession:r}){let{recordingState:i,duration:s,audioBlob:o,isTranscribing:l,currentSession:c,voiceCommands:d,startRecording:u,stopRecording:h,pauseRecording:m,resumeRecording:p,resetRecording:g,transcribeAudio:y,enhanceTranscribedText:v,clearVoiceCommands:w,formatDuration:N,formatTimestamp:A,streamRef:S}=function(e){let[t,r]=(0,n.useState)("idle"),[a,i]=(0,n.useState)(0),[s,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(null),[p,f]=(0,n.useState)([]),g=(0,n.useRef)(null),x=(0,n.useRef)([]),y=(0,n.useRef)(null),v=(0,n.useRef)(null),b=(0,n.useRef)(0),w=(0,n.useRef)(0),N=(0,n.useRef)(null),j=(0,n.useCallback)(async()=>{try{console.log("Requesting microphone access...");let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});console.log("Microphone access granted, stream:",e),v.current=e;let t=new MediaRecorder(e,{mimeType:MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm"});return t.ondataavailable=e=>{e.data.size>0&&x.current.push(e.data)},t.onstop=()=>{let e=new Blob(x.current,{type:"audio/webm"});o(e),x.current=[],v.current&&(v.current.getTracks().forEach(e=>e.stop()),v.current=null)},g.current=t,!0}catch(e){return console.error("Error initializing recording:",e),!1}},[]),A=(0,n.useCallback)(async()=>{if(!await j()||!g.current)return!1;try{let e=Date.now();b.current=e,w.current=e;let t=`session_${e}`,a={id:`segment_${e}_1`,startTime:e,duration:0},n={id:t,startTime:new Date(e),totalDuration:0,segments:[a],fullTranscription:""};return u(n),m(a),g.current.start(1e3),r("recording"),i(0),o(null),y.current=setInterval(()=>{i(e=>e+1)},1e3),!0}catch(e){return console.error("Error starting recording:",e),!1}},[j]),S=(0,n.useCallback)(()=>{if(g.current&&("recording"===t||"paused"===t)&&h&&d){let e=Date.now(),a={...h,endTime:e,duration:"recording"===t?Math.floor((e-h.startTime)/1e3):h.duration};return u({...d,endTime:new Date(e),totalDuration:Math.floor((e-b.current)/1e3),segments:d.segments.map(e=>e.id===h.id?a:e)}),m(a),g.current.stop(),r("stopped"),y.current&&(clearInterval(y.current),y.current=null),!0}return!1},[t,h,d]),k=(0,n.useCallback)(()=>{if(g.current&&"recording"===t&&h&&d){g.current.pause(),r("paused");let e=Date.now(),t={...h,endTime:e,duration:Math.floor((e-h.startTime)/1e3)},a={...d,segments:d.segments.map(e=>e.id===h.id?t:e)};return m(t),u(a),y.current&&(clearInterval(y.current),y.current=null),!0}return!1},[t,h,d]),C=(0,n.useCallback)(()=>{if(g.current&&"paused"===t&&d){let e=Date.now();w.current=e;let t={id:`segment_${e}_${d.segments.length+1}`,startTime:e,duration:0},a={...d,segments:[...d.segments,t]};return m(t),u(a),g.current.resume(),r("recording"),y.current=setInterval(()=>{i(e=>e+1)},1e3),!0}return!1},[t,d]),L=(0,n.useCallback)(()=>{g.current&&"idle"!==t&&g.current.stop(),y.current&&(clearInterval(y.current),y.current=null),r("idle"),i(0),o(null),c(!1),u(null),m(null),x.current=[],b.current=0,w.current=0,v.current&&(v.current.getTracks().forEach(e=>e.stop()),v.current=null)},[t]),P=(0,n.useCallback)(async(e,t,r="auto")=>{if(!e||!t)throw Error("Audio blob and API key are required");c(!0);try{let a=new FormData;a.append("file",e,"audio.webm"),a.append("model","whisper-1"),"auto"!==r&&a.append("language",r);let n=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:a});if(!n.ok)throw Error(`Transcription failed: ${n.statusText}`);let i=await n.json();tQ(e);let s=i.language||"unknown";return{text:i.text,detectedLanguage:s,duration:i.duration||0}}catch(e){throw console.error("Transcription error:",e),e}finally{c(!1)}},[]),_=(0,n.useCallback)(e=>{let t=Math.floor(e/60);return`${t.toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`},[]),D=(0,n.useCallback)(()=>{L()},[L]),I=(0,n.useCallback)(e=>new Date(e).toLocaleTimeString("en-ZA",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),[]),R=(0,n.useCallback)(()=>d?{...d,formattedStartTime:I(d.startTime.getTime()),formattedEndTime:d.endTime?I(d.endTime.getTime()):null,formattedDuration:_(d.totalDuration),segmentSummaries:d.segments.map(e=>({...e,formattedStartTime:I(e.startTime),formattedEndTime:e.endTime?I(e.endTime):null,formattedDuration:_(e.duration)}))}:null,[d,I,_]),E=(0,n.useCallback)(e=>{if(!N.current)return e;let t=N.current.enhanceTextWithPunctuation(e),r=N.current.detectVoiceCommands(e);return r.length>0&&f(e=>[...e,...r.map(e=>e.command)]),t},[]),T=(0,n.useCallback)(e=>{N.current&&N.current.updateSettings(e)},[]);return{recordingState:t,duration:a,audioBlob:s,isTranscribing:l,currentSession:d,currentSegment:h,voiceCommands:p,startRecording:A,stopRecording:S,pauseRecording:k,resumeRecording:C,resetRecording:L,transcribeAudio:P,enhanceTranscribedText:E,updateVoiceSettings:T,detectVoiceActivity:(0,n.useCallback)(()=>!N.current||N.current.detectVoiceActivity(),[]),clearVoiceCommands:(0,n.useCallback)(()=>{f([])},[]),formatDuration:_,formatTimestamp:I,getSessionSummary:R,cleanup:D,mediaRecorderRef:g,streamRef:v}}(),[k,C]=(0,n.useState)(null),[L,P]=(0,n.useState)(""),[_,D]=(0,n.useState)({}),[I,R]=(0,n.useState)(null),[E,T]=(0,n.useState)(!1),[M,F]=(0,n.useState)(!1),[O]=(0,n.useState)(!0),[B,q]=(0,n.useState)(!1),[z,U]=(0,n.useState)(null),[$,H]=(0,n.useState)(null),[W,V]=(0,n.useState)(!1),[G,Z]=(0,n.useState)(!0),[Y,K]=(0,n.useState)(""),[X,J]=(0,n.useState)(!1),[Q,ee]=(0,n.useState)(!1),[et,er]=(0,n.useState)("recording"),[ea,en]=(0,n.useState)(0),ei=(0,n.useRef)(null),es=(0,n.useRef)(null),eo=(0,n.useRef)(null);(0,n.useCallback)(()=>{if(!ei.current||!es.current)return;let e=ei.current,t=e.getContext("2d");if(!t)return;let r=es.current,a=r.frequencyBinCount,n=new Uint8Array(a),s=()=>{let o;if("recording"!==i)return;r.getByteFrequencyData(n),t.fillStyle="#f9fafb",t.fillRect(0,0,e.width,e.height);let l=e.width/a*3,c=0;for(let r=0;r<a;r++)o=n[r]/255*e.height*.8,t.fillStyle="#3b82f6",t.fillRect(c,e.height-o,l-1,o),c+=l;eo.current=requestAnimationFrame(s)};s()},[i]),(0,n.useCallback)(async()=>{if(!o)return;let e=t7();if(!e)return void R("OpenAI API key not configured. Please set it up in settings.");R(null);try{let t=cV(),r=await y(o,e,t),a="string"==typeof r?r:r.text,n=v(a);if(P(n),!k&&O){let e=function(e,t){if(!e||!t.length)return null;let r=e.toLowerCase(),a={templateId:"",confidence:0,reasoning:""};for(let e of t){let t=0,n=[];switch(e.id){case"emergency":(r.includes("emergency")||r.includes("urgent")||r.includes("severe")||r.includes("acute"))&&(t+=.4,n.push("emergency keywords detected"));break;case"follow-up":(r.includes("follow")||r.includes("return")||r.includes("progress")||r.includes("better"))&&(t+=.4,n.push("follow-up indicators found"));break;case"physical-exam":(r.includes("examination")||r.includes("physical")||r.includes("inspect")||r.includes("palpat"))&&(t+=.4,n.push("examination terminology present"));break;case"procedure":(r.includes("procedure")||r.includes("surgery")||r.includes("operation")||r.includes("inject"))&&(t+=.4,n.push("procedure-related content"))}let i=e.sections.filter(e=>{let t=e.type;return(t in rr?rr[t]:[]).some(e=>r.includes(e.toLowerCase()))});t+=i.length/e.sections.length*.3,i.length>2&&n.push(`matches ${i.length} sections`),t>a.confidence&&(a={templateId:e.id,confidence:t,reasoning:n.join(", ")})}return a.confidence>.2?a:null}(n,c3);if(e&&e.confidence>.4){let t=c3.find(t=>t.id===e.templateId);t&&C(t)}}k&&O&&(G?await ec(n,k):await ed(n,k))}catch(e){console.error("Transcription failed:",e),R("Transcription failed. Please check your API key and try again.")}},[o,k,O,G]);let el=(e,t)=>{let r=function(e,t){if(!e||!e.trim())return[];let r=e.split(/[.!?]+/).map(e=>e.trim()).filter(e=>e.length>10),a=[];for(let e of r){let r=function(e,t){let r=e.toLowerCase().trim();if(!r)return null;let a={sectionId:"",confidence:0,suggestedContent:e};for(let n of t){let t=function(e,t){let r=0,a=t.type,n=[...a in rr?rr[a]:[],...t.keywords||[]];for(let t of n){let a=t.toLowerCase();e.includes(a)&&(e.includes(` ${a} `)||e.startsWith(a)||e.endsWith(a)?r+=ra.exactKeywordMatch:r+=ra.partialKeywordMatch)}return Math.min((r+=function(e,t){let r=0;switch(t){case"symptoms":(e.includes("complain")||e.includes("report")||e.includes("feel")||e.includes("experience"))&&(r+=ra.contextualClues);break;case"diagnosis":(e.includes("assess")||e.includes("diagnos")||e.includes("condition")||e.includes("impression"))&&(r+=ra.contextualClues);break;case"treatment":(e.includes("recommend")||e.includes("prescrib")||e.includes("treat")||e.includes("therapy"))&&(r+=ra.contextualClues);break;case"vitals":(/\d+\/\d+/.test(e)||/\d+\s*(bpm|mmhg|degrees|kg|lbs)/.test(e))&&(r+=ra.contextualClues);break;case"examination":(e.includes("exam")||e.includes("find")||e.includes("appear")||e.includes("normal"))&&(r+=ra.contextualClues);break;case"plan":(e.includes("follow")||e.includes("return")||e.includes("next")||e.includes("continue"))&&(r+=ra.contextualClues)}return r}(e,a))/Math.max(.1*n.length,1),1)}(r,n);t>a.confidence&&(a={sectionId:n.id,confidence:t,suggestedContent:e})}return a.confidence>0?a:null}(e,t);r&&r.confidence>.3&&a.push(r)}var n=a;let i=new Map;for(let e of n){let t=i.get(e.sectionId);t?(t.content.push(e.suggestedContent),t.confidence=Math.max(t.confidence,e.confidence)):i.set(e.sectionId,{sectionId:e.sectionId,confidence:e.confidence,content:[e.suggestedContent]})}return Array.from(i.values()).map(e=>({sectionId:e.sectionId,confidence:e.confidence,suggestedContent:e.content.join(" ")}))}(e,t.sections),a={..._};for(let e of r)if(e.confidence>.4){let t=a[e.sectionId]||"";a[e.sectionId]=t?`${t}

${e.suggestedContent}`:e.suggestedContent}D(a)},ec=async(t,r)=>{V(!0),U(null);try{let a=`Patient: ${e.name}, Age: ${e.age}`,n=await dP(t,r,a,dC);H(n);let i={..._};if(n.formattedSections){for(let e of n.formattedSections)i[e.sectionId]=e.content;D(i)}}catch(e){console.error("Intelligent note generation failed:",e),U("AI analysis failed. Using basic categorization..."),await ed(t,r)}finally{V(!1)}},ed=async(e,t)=>{q(!0),U(null);try{let r=await rn(e,t),a={..._};for(let e of r.categorizations)if(e.confidence>.6){let t=a[e.sectionId]||"",r=e.content;if(e.icd10Codes&&e.icd10Codes.length>0){let t=e.icd10Codes.map(e=>`• ${e.code}: ${e.description}`).join("\n");r=`${e.content}

📅 Related ICD-10 Codes:
${t}`}a[e.sectionId]=t?`${t}

${r}`:r}D(a)}catch(r){console.error("AI categorization failed:",r),U("AI analysis failed. Using basic categorization..."),el(e,t)}finally{q(!1)}},eu=(e,t)=>{D(r=>({...r,[e]:t}))},eh=()=>{g(),P(""),D({}),R(null),C(null),H(null),V(!1),en(0)},em=async e=>{let t=t7();if(!t)throw Error("OpenAI API key not configured");en(0),R(null);try{let r=new FormData;r.append("file",e),r.append("model","whisper-1"),r.append("language",cV());let a=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:r});if(!a.ok)throw Error(`Transcription failed: ${a.statusText}`);let n=(await a.json()).text||"";return en(100),P(n),k&&O&&(G?await ec(n,k):await ed(n,k)),er("recording"),n}catch(e){throw console.error("File transcription error:",e),R(e instanceof Error?e.message:"Transcription failed"),e}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(b.$,{variant:"ghost",size:"sm",onClick:t,className:"mr-4 hover:bg-gray-100",children:[(0,a.jsx)(tI,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-white font-semibold text-sm",children:e.name.split(" ").map(e=>e[0]).join("").slice(0,2)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Age ",e.age]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[k&&(0,a.jsxs)(j,{variant:"outline",className:"text-xs flex items-center gap-1",children:[(0,a.jsx)(tO,{className:"w-3 h-3"}),k.name]}),(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,a.jsxs)(b.$,{variant:"recording"===et?"default":"ghost",size:"sm",onClick:()=>er("recording"),className:"text-xs",children:[(0,a.jsx)(tM,{className:"w-3 h-3 mr-1"}),"Live"]}),(0,a.jsxs)(b.$,{variant:"upload"===et?"default":"ghost",size:"sm",onClick:()=>er("upload"),className:"text-xs",children:[(0,a.jsx)(lY,{className:"w-3 h-3 mr-1"}),"Upload"]}),(0,a.jsxs)(b.$,{variant:"document"===et?"default":"ghost",size:"sm",onClick:()=>er("document"),className:"text-xs",children:[(0,a.jsx)(tO,{className:"w-3 h-3 mr-1"}),"Document"]})]}),(0,a.jsx)(dL,{currentConfig:dC,onConfigChange:e=>{L&&k&&ec(L,k)}}),(0,a.jsxs)(tv,{open:E,onOpenChange:T,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(tU,{className:"w-4 h-4 mr-2"}),"Settings"]})}),(0,a.jsxs)(tj,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Settings"})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(t8,{}),(0,a.jsx)(cW,{}),(0,a.jsx)(cX,{onSettingsChange:()=>{},onSpeakerProfileAdd:e=>{console.log("Speaker profile added:",e)}})]})]})]}),(0,a.jsxs)(tv,{open:M,onOpenChange:F,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(tO,{className:"w-4 h-4 mr-2"}),k?"Change Template":"Select Template"]})}),(0,a.jsxs)(tj,{className:"sm:max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Choose Template"})}),(0,a.jsx)(dS,{onTemplateSelect:e=>{C(e),F(!1),L&&O&&(G?ec(L,e):ed(L,e))},selectedTemplateId:k?.id})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString()})]})]})})}),(0,a.jsx)("main",{className:"flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8",children:"recording"===et?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 h-full",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(dM,{recordingState:i,duration:s,isTranscribing:l,onStartRecording:u,onStopRecording:h,onPauseRecording:m,onResumeRecording:p,onResetRecording:eh,formatDuration:N,voiceCommands:d,streamRef:S}),"stopped"===i&&(0,a.jsx)(x.Zp,{className:"border-2 border-green-200 bg-gradient-to-r from-green-50 to-blue-50",children:(0,a.jsx)(x.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsxs)(b.$,{onClick:eh,variant:"outline",size:"sm",children:[(0,a.jsx)(cn,{className:"w-4 h-4 mr-2"}),"New"]}),(0,a.jsxs)(b.$,{onClick:()=>{if(r){let t="";k?(t=Object.entries(_).map(([e,t])=>{let r=k.sections.find(t=>t.id===e);return t?`**${r?.title||"Section"}:**
${t}`:""}).filter(Boolean).join("\n\n"),Y.trim()&&(t+=t?"\n\n**Manual Notes & Additional Observations:**\n"+Y:Y)):(t=L,Y.trim()&&(t+=t?"\n\n**Additional Notes:**\n"+Y:Y));let a={..._,...Y.trim()&&{manual_notes:Y},patient_name:e.name,patient_age:e.age,session_date:new Date().toISOString(),duration:N(s)};console.log("Session saved successfully for patient:",e.name),r(t,o||void 0,a)}},size:"sm",disabled:!L.trim()&&!Object.values(_).some(e=>e.trim()),className:"bg-gradient-to-r from-green-600 to-blue-600 text-white",children:[(0,a.jsx)(tV,{className:"w-4 h-4 mr-2"}),"Save"]}),(0,a.jsxs)(tv,{open:X,onOpenChange:J,children:[(0,a.jsx)(tb,{asChild:!0,children:(0,a.jsxs)(b.$,{variant:"outline",size:"sm",disabled:!L.trim()&&!Object.values(_).some(e=>e.trim()),children:[(0,a.jsx)(rl.A,{className:"w-4 h-4 mr-2"}),"Email"]})}),(0,a.jsxs)(tj,{className:"sm:max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Email Medical Notes"})}),(0,a.jsx)(iO,{patient:e,initialTemplate:"follow-up-care",onSend:e=>{console.log("Session notes emailed:",e),J(!1)},onClose:()=>J(!1)})]})]})]})})}),(I||z)&&(0,a.jsx)(x.Zp,{className:"bg-red-50 border-red-200",children:(0,a.jsx)(x.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-red-700 text-sm",children:I||z}),(0,a.jsx)(b.$,{size:"sm",variant:"outline",onClick:()=>T(!0),className:"text-red-600 border-red-300 hover:bg-red-100",children:"Configure API"})]})})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[k?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>Z(!0),className:`px-3 py-1 text-xs rounded-md transition-colors ${G?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"\uD83E\uDDE0 Intelligent View"}),(0,a.jsx)("button",{onClick:()=>Z(!1),className:`px-3 py-1 text-xs rounded-md transition-colors ${!G?"bg-gray-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"\uD83D\uDCDD Template View"})]}),O&&L&&(0,a.jsxs)(b.$,{size:"sm",variant:"outline",onClick:()=>G?ec(L,k):ed(L,k),disabled:B||W,className:"text-xs",children:[(0,a.jsx)(cq,{className:"w-3 h-3 mr-1"}),B||W?"Analyzing...":"AI Analysis"]})]}),G?(0,a.jsx)(dD,{analysis:$,isGenerating:W,manualNotes:Y,onManualNotesChange:K,onSectionEdit:(e,t)=>{$&&$.formattedSections&&(H({...$,formattedSections:$.formattedSections.map(r=>r.sectionId===e?{...r,content:t}:r)}),D(r=>({...r,[e]:t})))},onRegenerate:()=>{L&&k&&ec(L,k)}}):(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsx)(x.ZB,{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tO,{className:"w-5 h-5 text-blue-600"}),k.name]})})}),(0,a.jsxs)(x.Wu,{className:"space-y-4",children:[k.sections.map(e=>{let t=dz[e.type];return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[e.title,e.required&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(j,{variant:"outline",className:`text-xs ${t?.color||"bg-gray-50 border-gray-200 text-gray-800"}`,children:e.type})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(tL,{placeholder:e.placeholder,value:_[e.id]||"",onChange:t=>eu(e.id,t.target.value),className:"min-h-[80px] border-gray-200 focus:border-blue-500 focus:ring-blue-500 font-medium leading-relaxed"}),_[e.id]?.includes("\uD83D\uDCC5 Related ICD-10 Codes:")&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-blue-700 text-sm font-medium mb-2",children:[(0,a.jsx)(cz,{className:"w-4 h-4"}),"Suggested ICD-10 Codes"]}),(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"\uD83D\uDCA1 These codes were automatically suggested based on the transcribed content"})]})]})]},e.id)}),(0,a.jsxs)("div",{className:"mt-6 space-y-2 border-t border-gray-200 pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(t_,{className:"w-4 h-4 text-purple-600"}),"Manual Notes & Additional Observations"]}),(0,a.jsx)(j,{variant:"outline",className:"text-xs bg-purple-50 border-purple-200 text-purple-800",children:"manual"})]}),(0,a.jsx)(tL,{placeholder:"Add any additional notes, observations, or free-form text here. This section allows you to type or dictate additional information that may not fit into the template sections above...",value:Y,onChange:e=>K(e.target.value),className:"min-h-[120px] border-gray-200 focus:border-purple-500 focus:ring-purple-500 font-medium leading-relaxed bg-purple-50/30"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:(0,a.jsx)("span",{children:"\uD83D\uDCA1 Tip: You can combine voice dictation with manual typing for complete documentation"})})]})]})]})]}):(0,a.jsx)(x.Zp,{className:"bg-white border-gray-200",children:(0,a.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,a.jsx)(tO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Template Selected"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Choose a template to structure your medical notes, or continue with free-form transcription."}),(0,a.jsxs)(b.$,{onClick:()=>F(!0),className:"bg-blue-500 hover:bg-blue-600",children:[(0,a.jsx)(tO,{className:"w-4 h-4 mr-2"}),"Select Template"]})]})}),c&&(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[(0,a.jsx)(f,{className:"w-4 h-4"}),"Recording Timeline"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Started:"}),(0,a.jsx)("div",{className:"font-medium",children:A(c.startTime.getTime())})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Total Duration:"}),(0,a.jsx)("div",{className:"font-medium",children:N(s)})]})]}),c.segments.length>1&&(0,a.jsxs)("div",{className:"border-t pt-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Recording Segments:"}),(0,a.jsx)("div",{className:"space-y-1",children:c.segments.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs bg-gray-50 rounded p-2",children:[(0,a.jsxs)("span",{children:["Segment ",t+1]}),(0,a.jsxs)("span",{className:"text-gray-600",children:[A(e.startTime)," - ",e.endTime?A(e.endTime):"Recording..."]}),(0,a.jsx)("span",{className:"font-medium",children:N(e.duration)})]},e.id))})]})]})})]}),L&&(0,a.jsxs)(x.Zp,{className:"bg-white border-gray-200",children:[(0,a.jsx)(x.aR,{children:(0,a.jsx)(x.ZB,{className:"text-sm font-medium text-gray-900",children:"Raw Transcription"})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(tL,{value:L,onChange:e=>P(e.target.value),className:"min-h-[120px] border-gray-200 focus:border-blue-500 focus:ring-blue-500 font-medium leading-relaxed text-gray-800",placeholder:"Transcribed text will appear here..."}),L&&k&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,a.jsx)(cr,{className:"w-4 h-4 text-amber-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-xs text-amber-700",children:'Use "AI Analysis" to automatically categorize this content into the template sections above.'})]})]})})]}),(0,a.jsx)(ct,{patient:e,sessionId:c?.id,compact:!0})]})]}):"upload"===et?(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(x.Zp,{className:"border-2 border-blue-200 bg-gradient-to-r from-blue-50 to-purple-50",children:(0,a.jsxs)(x.aR,{children:[(0,a.jsxs)(x.ZB,{className:"flex items-center gap-3 text-xl",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(lY,{className:"w-5 h-5 text-white"})}),"Upload Audio Recording"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Upload pre-recorded audio files for transcription. Perfect for when you have poor signal or recorded offline."})]})}),(0,a.jsx)(dq,{onFileUpload:e=>{console.log("File uploaded:",e.name,e.size,e.type),en(0)},onTranscribeFile:em,isTranscribing:l,transcriptionProgress:ea}),L&&(0,a.jsxs)(x.Zp,{className:"border-2 border-green-200 bg-gradient-to-r from-green-50 to-blue-50",children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-3",children:[(0,a.jsx)(iR,{className:"w-5 h-5 text-green-600"}),"Transcription Complete"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Transcribed Text:"}),(0,a.jsx)("div",{className:"text-gray-900 leading-relaxed",children:L})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsxs)(b.$,{onClick:()=>er("recording"),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[(0,a.jsx)(t_,{className:"w-4 h-4 mr-2"}),"Edit & Process"]}),k&&(0,a.jsxs)(b.$,{onClick:()=>er("document"),variant:"outline",children:[(0,a.jsx)(tO,{className:"w-4 h-4 mr-2"}),"View Document"]})]})]})})]}),!k&&(0,a.jsx)(x.Zp,{className:"border border-gray-200",children:(0,a.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,a.jsx)(tO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Template"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Choose a template to structure your transcribed content into a professional medical note."}),(0,a.jsxs)(b.$,{onClick:()=>F(!0),className:"bg-blue-500 hover:bg-blue-600",children:[(0,a.jsx)(tO,{className:"w-4 h-4 mr-2"}),"Select Template"]})]})})]})}):(0,a.jsxs)("div",{className:"w-full",children:[k&&$?(0,a.jsx)(dO,{analysis:$,patient:e,template:k,isGenerating:W,onSectionEdit:(e,t)=>{$&&$.formattedSections&&(H({...$,formattedSections:$.formattedSections.map(r=>r.sectionId===e?{...r,content:t}:r)}),D(r=>({...r,[e]:t})))},onExportPdf:()=>{console.log("Exporting PDF...")},onEmailDocument:()=>{J(!0)},onPrintDocument:()=>{window.print()}}):(0,a.jsx)(x.Zp,{className:"border-2 border-gray-200",children:(0,a.jsxs)(x.Wu,{className:"p-12 text-center",children:[(0,a.jsx)(tO,{className:"w-16 h-16 text-gray-400 mx-auto mb-6"}),(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-4",children:"No Document Generated"}),(0,a.jsx)("p",{className:"text-gray-500 mb-8",children:"Start a recording session and select a template to generate a beautiful medical document."}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsxs)(b.$,{onClick:()=>er("recording"),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[(0,a.jsx)(tM,{className:"w-4 h-4 mr-2"}),"Start Recording"]}),(0,a.jsxs)(b.$,{onClick:()=>F(!0),variant:"outline",children:[(0,a.jsx)(tO,{className:"w-4 h-4 mr-2"}),"Select Template"]})]})]})}),(0,a.jsx)(tv,{open:X,onOpenChange:J,children:(0,a.jsxs)(tj,{className:"sm:max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(tA,{children:(0,a.jsx)(tS,{children:"Email Medical Document"})}),(0,a.jsx)(iO,{patient:e,initialTemplate:"follow-up-care",onSend:e=>{console.log("Document emailed:",e),J(!1)},onClose:()=>J(!1)})]})})]})})]})}function d$(){let{patients:e,addPatient:t,updatePatient:r,deletePatient:i,searchPatients:s,getTotalSessions:y,getTodaySessions:w}=function(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(!0);return{patients:e.filter(e=>!e.isArchived),allPatients:e,isLoading:r,addPatient:e=>{t(t=>[e,...t])},updatePatient:(e,r)=>{t(t=>t.map(t=>t.id===e?{...t,...r}:t))},deletePatient:e=>{t(t=>t.filter(t=>t.id!==e))},getPatientById:t=>e.find(e=>e.id===t),searchPatients:t=>t.trim()?e.filter(e=>{if(e.isArchived)return!1;let r=`${e.name} ${e.surname}`.toLowerCase(),a=t.toLowerCase();if(r.includes(a)||e.contact&&e.contact.includes(t)||e.medicalAid?.provider.toLowerCase().includes(a)||e.medicalAid?.memberNumber.includes(t)||e.idNumber&&e.idNumber.includes(t))return!0;try{let t=localStorage.getItem("medicalSessions");if(t)return JSON.parse(t).filter(t=>t.patientId===e.id).some(e=>!!(e.content&&e.content.toLowerCase().includes(a)||e.templateData&&Object.values(e.templateData).join(" ").toLowerCase().includes(a))||!!(e.diagnosis&&Array.isArray(e.diagnosis))&&e.diagnosis.some(e=>e.toLowerCase().includes(a)))}catch(e){console.error("Error searching session content:",e)}return!1}):e.filter(e=>!e.isArchived),archivePatient:e=>{t(t=>t.map(t=>t.id===e?{...t,isArchived:!0}:t))},unarchivePatient:e=>{t(t=>t.map(t=>t.id===e?{...t,isArchived:!1}:t))},getArchivedPatients:()=>e.filter(e=>e.isArchived),addDoctorToPatient:(e,r)=>{t(t=>t.map(t=>{if(t.id===e){let e=t.assignedDoctors||[];if(!e.includes(r))return{...t,assignedDoctors:[...e,r]}}return t}))},getTotalSessions:()=>e.reduce((e,t)=>e+t.sessionCount,0),getTodaySessions:()=>0}}(),[N,A]=(0,n.useState)(""),[S,k]=(0,n.useState)(null),[C,L]=(0,n.useState)("dashboard"),[P,_]=(0,n.useState)("cards"),[D,I]=(0,n.useState)(null),[R,E]=(0,n.useState)(!1),[T,M]=(0,n.useState)(!1),[F,O]=(0,n.useState)(null),[B,q]=(0,n.useState)(""),[z,U]=(0,n.useState)(!1),$=s(N).filter(e=>!(F&&(e.age<F.min||e.age>F.max)||B&&e.medicalAid?.provider.toLowerCase()!==B.toLowerCase()||z&&(!e.lastVisit||Math.floor((new Date().getTime()-e.lastVisit.getTime())/864e5)>30))&&!0),H=e=>{A(e)},W=e=>new Intl.DateTimeFormat("en-ZA",{month:"short",day:"numeric"}).format(e),V=e=>Math.ceil(Math.abs(new Date().getTime()-e.getTime())/864e5),G=e=>{k(e),L("profile")};return"transcription"===C&&S?(0,a.jsx)(dU,{patient:S,onBack:()=>{L("profile")},onSaveSession:(e,t,r)=>{if(S)try{let a={id:`session_${Date.now()}`,patientId:S.id,content:e,templateData:r||{},date:new Date().toISOString(),duration:0,audioBlob:t?URL.createObjectURL(t):void 0},n=localStorage.getItem("medicalSessions"),i=n?JSON.parse(n):[];i.push(a),localStorage.setItem("medicalSessions",JSON.stringify(i));let s={...S,lastSession:new Date().toISOString(),sessionCount:(S.sessionCount||0)+1},o=localStorage.getItem("medicalPatients"),l=o?JSON.parse(o):[],c=l.findIndex(e=>e.id===S.id);-1!==c&&(l[c]=s,localStorage.setItem("medicalPatients",JSON.stringify(l))),console.log("Session saved successfully:",a),L("profile")}catch(e){console.error("Error saving session:",e),L("profile")}}}):"profile"===C&&S?(0,a.jsx)(cB,{patient:S,onBack:()=>{k(null),L("dashboard")},onEditPatient:e=>{I(e),E(!0)},onDeletePatient:e=>{confirm("Are you sure you want to delete this patient?")&&(i(e),k(null),L("dashboard"))},onStartTranscription:e=>{k(e),L("transcription")}}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"AI Medical Scribe"})}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(o,{className:"w-4 h-4 text-white"})})})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)(v,{placeholder:"Search patients by name, condition, medication, diagnosis...",value:N,onChange:e=>H(e.target.value),className:"pl-12 pr-4 py-3 bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500 w-96"})]}),(0,a.jsxs)(b.$,{variant:"outline",onClick:()=>M(!T),className:"flex items-center gap-2",children:[(0,a.jsx)(c,{className:"w-4 h-4"}),"Filters",(F||B||z)&&(0,a.jsx)(j,{variant:"secondary",className:"ml-1",children:[F,B,z].filter(Boolean).length})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-white rounded-lg border border-gray-200 p-1 shadow-sm",children:[(0,a.jsx)("button",{onClick:()=>_("cards"),className:`p-2 rounded-md transition-colors ${"cards"===P?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Card View",children:(0,a.jsx)(d,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>_("grid"),className:`p-2 rounded-md transition-colors ${"grid"===P?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Grid View",children:(0,a.jsx)(u,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>_("list"),className:`p-2 rounded-md transition-colors ${"list"===P?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"List View",children:(0,a.jsx)(h,{className:"w-4 h-4"})})]}),(0,a.jsxs)(j,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[$.length," patients"]})]})]}),T&&(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Advanced Filters"}),(0,a.jsxs)(b.$,{variant:"ghost",size:"sm",onClick:()=>{O(null),q(""),U(!1)},children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-2"}),"Clear All"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Age Range"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(v,{type:"number",placeholder:"Min",value:F?.min||"",onChange:e=>O(t=>({min:parseInt(e.target.value)||0,max:t?.max||100})),className:"w-20"}),(0,a.jsx)("span",{className:"flex items-center text-gray-500",children:"to"}),(0,a.jsx)(v,{type:"number",placeholder:"Max",value:F?.max||"",onChange:e=>O(t=>({min:t?.min||0,max:parseInt(e.target.value)||100})),className:"w-20"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Medical Aid"}),(0,a.jsxs)("select",{value:B,onChange:e=>q(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Medical Aids"}),(0,a.jsx)("option",{value:"Discovery Health",children:"Discovery Health"}),(0,a.jsx)("option",{value:"Bonitas",children:"Bonitas"}),(0,a.jsx)("option",{value:"Momentum Health",children:"Momentum Health"}),(0,a.jsx)("option",{value:"Medscheme",children:"Medscheme"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Visit Recency"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"recentVisits",checked:z,onChange:e=>U(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:"recentVisits",className:"text-sm text-gray-600",children:"Visited in last 30 days"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)(x.Zp,{className:"bg-white border-gray-200 hover:shadow-md transition-shadow duration-300",children:(0,a.jsx)(x.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Patients"}),(0,a.jsx)("p",{className:"text-3xl font-semibold text-gray-900",children:e.length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(o,{className:"w-6 h-6 text-blue-600"})})]})})}),(0,a.jsx)(x.Zp,{className:"bg-white border-gray-200 hover:shadow-md transition-shadow duration-300",children:(0,a.jsx)(x.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Today's Sessions"}),(0,a.jsx)("p",{className:"text-3xl font-semibold text-gray-900",children:w()})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(p,{className:"w-6 h-6 text-green-600"})})]})})}),(0,a.jsx)(x.Zp,{className:"bg-white border-gray-200 hover:shadow-md transition-shadow duration-300",children:(0,a.jsx)(x.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Sessions"}),(0,a.jsx)("p",{className:"text-3xl font-semibold text-gray-900",children:y()})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(f,{className:"w-6 h-6 text-orange-600"})})]})})})]}),(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Patients"})}),"cards"===P&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:$.map(e=>(0,a.jsx)(x.Zp,{className:"bg-white border-gray-200 hover:shadow-lg hover:border-blue-200 hover:scale-[1.02] transition-all duration-300 ease-out cursor-pointer group",onClick:()=>G(e),children:(0,a.jsxs)(x.Wu,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-semibold text-lg",children:e.name.split(" ").map(e=>e[0]).join("").slice(0,2)}),(0,a.jsxs)(j,{variant:"secondary",className:"text-xs",children:[e.sessionCount," sessions"]})]}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1 group-hover:text-blue-600 transition-colors",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["Age ",e.age]}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.lastVisit&&(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,a.jsx)(p,{className:"w-3 h-3 mr-1"}),"Last visit: ",W(e.lastVisit)," (",V(e.lastVisit)," days ago)"]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,a.jsx)(f,{className:"w-3 h-3 mr-1"}),"Patient since ",W(e.createdAt)]})]})]})},e.id))}),"grid"===P&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4",children:$.map(e=>(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-blue-200 hover:scale-105 transition-all duration-300 cursor-pointer group text-center",onClick:()=>G(e),children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-lg mx-auto mb-3",children:e.name.split(" ").map(e=>e[0]).join("").slice(0,2)}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 text-sm mb-1 group-hover:text-blue-600 transition-colors truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Age ",e.age]}),(0,a.jsx)(j,{variant:"secondary",className:"text-xs",children:e.sessionCount})]},e.id))}),"list"===P&&(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-4 p-4 bg-gray-50 border-b border-gray-200 font-medium text-sm text-gray-700",children:[(0,a.jsx)("div",{children:"Patient"}),(0,a.jsx)("div",{children:"Age"}),(0,a.jsx)("div",{children:"Last Visit"}),(0,a.jsx)("div",{children:"Sessions"}),(0,a.jsx)("div",{children:"Status"})]}),$.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-4 p-4 border-b border-gray-100 hover:bg-blue-50 cursor-pointer group transition-colors",onClick:()=>G(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-white font-semibold text-sm",children:e.name.split(" ").map(e=>e[0]).join("").slice(0,2)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:e.name}),e.contact&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.contact})]})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[e.age," years"]}),(0,a.jsx)("div",{className:"flex items-center text-sm text-gray-700",children:e.lastVisit?W(e.lastVisit):"No visits"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(j,{variant:"secondary",className:"text-xs",children:[e.sessionCount," sessions"]})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(j,{variant:"outline",className:"text-xs",children:"Active"})})]},e.id))]}),0===$.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(o,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No patients found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:N?"Try adjusting your search terms":"Get started by adding your first patient"})]})]}),(0,a.jsx)(tP,{onPatientCreated:t,children:(0,a.jsx)(b.$,{size:"lg",className:"fixed bottom-8 right-8 w-14 h-14 rounded-full bg-blue-500 hover:bg-blue-600 hover:scale-105 active:scale-95 transition-all duration-200 ease-out shadow-lg hover:shadow-xl border-0",style:{boxShadow:"0 8px 32px rgba(0, 122, 255, 0.3)"},children:(0,a.jsx)(g,{className:"w-6 h-6"})})}),(0,a.jsx)(tD,{patient:D,open:R,onOpenChange:E,onPatientUpdated:e=>{r(e.id,e),S?.id===e.id&&k(e)}})]})}function dH(){return console.log("✅ SUCCESS: Loading REAL Dashboard from /ai-medic-scribe/src/app/page.tsx"),console.log("✅ Timestamp: ",new Date().toISOString()),(0,a.jsx)(d$,{})}},6246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return n}});let a=r(76423);function n(e){let{re:t,groups:r}=e;return e=>{let n=t.exec(e);if(!n)return!1;let i=e=>{try{return decodeURIComponent(e)}catch(e){throw Object.defineProperty(new a.DecodeError("failed to decode param"),"__NEXT_ERROR_CODE",{value:"E528",enumerable:!1,configurable:!0})}},s={};for(let[e,t]of Object.entries(r)){let r=n[t.pos];void 0!==r&&(t.repeat?s[e]=r.split("/").map(e=>i(e)):s[e]=i(r))}return s}}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10962:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},13332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_METADATA_ROUTE_EXTENSIONS:function(){return o},STATIC_METADATA_IMAGES:function(){return s},getExtensionRegexString:function(){return l},isMetadataPage:function(){return u},isMetadataRoute:function(){return h},isMetadataRouteFile:function(){return c},isStaticMetadataRoute:function(){return d}});let a=r(60890),n=r(64198),i=r(74638),s={icon:{filename:"icon",extensions:["ico","jpg","jpeg","png","svg"]},apple:{filename:"apple-icon",extensions:["jpg","jpeg","png"]},favicon:{filename:"favicon",extensions:["ico"]},openGraph:{filename:"opengraph-image",extensions:["jpg","jpeg","png","gif"]},twitter:{filename:"twitter-image",extensions:["jpg","jpeg","png","gif"]}},o=["js","jsx","ts","tsx"],l=(e,t)=>t&&0!==t.length?`(?:\\.(${e.join("|")})|(\\.(${t.join("|")})))`:`(\\.(?:${e.join("|")}))`;function c(e,t,r){let n=(r?"":"?")+"$",i=`\\d?${r?"":"(-\\w{6})?"}`,o=[RegExp(`^[\\\\/]robots${l(t.concat("txt"),null)}${n}`),RegExp(`^[\\\\/]manifest${l(t.concat("webmanifest","json"),null)}${n}`),RegExp("^[\\\\/]favicon\\.ico$"),RegExp(`[\\\\/]sitemap${l(["xml"],t)}${n}`),RegExp(`[\\\\/]${s.icon.filename}${i}${l(s.icon.extensions,t)}${n}`),RegExp(`[\\\\/]${s.apple.filename}${i}${l(s.apple.extensions,t)}${n}`),RegExp(`[\\\\/]${s.openGraph.filename}${i}${l(s.openGraph.extensions,t)}${n}`),RegExp(`[\\\\/]${s.twitter.filename}${i}${l(s.twitter.extensions,t)}${n}`)],c=(0,a.normalizePathSep)(e);return o.some(e=>e.test(c))}function d(e){let t=e.replace(/\/route$/,"");return(0,i.isAppRouteRoute)(e)&&c(t,[],!0)&&"/robots.txt"!==t&&"/manifest.webmanifest"!==t&&!t.endsWith("/sitemap.xml")}function u(e){return!(0,i.isAppRouteRoute)(e)&&c(e,[],!1)}function h(e){let t=(0,n.normalizeAppPath)(e).replace(/^\/?app\//,"").replace("/[__metadata_id__]","").replace(/\/route$/,"");return"/"!==t[0]&&(t="/"+t),(0,i.isAppRouteRoute)(e)&&c(t,[],!1)}},18445:(e,t,r)=>{Promise.resolve().then(r.bind(r,5230))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19958:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{function e(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var a=e[r];if("*"===a||"+"===a||"?"===a){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===a){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===a){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===a){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===a){for(var n="",i=r+1;i<e.length;){var s=e.charCodeAt(i);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s){n+=e[i++];continue}break}if(!n)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:n}),r=i;continue}if("("===a){var o=1,l="",i=r+1;if("?"===e[i])throw TypeError('Pattern cannot start with "?" at '+i);for(;i<e.length;){if("\\"===e[i]){l+=e[i++]+e[i++];continue}if(")"===e[i]){if(0==--o){i++;break}}else if("("===e[i]&&(o++,"?"!==e[i+1]))throw TypeError("Capturing groups are not allowed at "+i);l+=e[i++]}if(o)throw TypeError("Unbalanced pattern at "+r);if(!l)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:l}),r=i;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),a=t.prefixes,i=void 0===a?"./":a,s="[^"+n(t.delimiter||"/#?")+"]+?",o=[],l=0,c=0,d="",u=function(e){if(c<r.length&&r[c].type===e)return r[c++].value},h=function(e){var t=u(e);if(void 0!==t)return t;var a=r[c];throw TypeError("Unexpected "+a.type+" at "+a.index+", expected "+e)},m=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t};c<r.length;){var p=u("CHAR"),f=u("NAME"),g=u("PATTERN");if(f||g){var x=p||"";-1===i.indexOf(x)&&(d+=x,x=""),d&&(o.push(d),d=""),o.push({name:f||l++,prefix:x,suffix:"",pattern:g||s,modifier:u("MODIFIER")||""});continue}var y=p||u("ESCAPED_CHAR");if(y){d+=y;continue}if(d&&(o.push(d),d=""),u("OPEN")){var x=m(),v=u("NAME")||"",b=u("PATTERN")||"",w=m();h("CLOSE"),o.push({name:v||(b?l++:""),pattern:v&&!b?s:b,prefix:x,suffix:w,modifier:u("MODIFIER")||""});continue}h("END")}return o}function r(e,t){void 0===t&&(t={});var r=i(t),a=t.encode,n=void 0===a?function(e){return e}:a,s=t.validate,o=void 0===s||s,l=e.map(function(e){if("object"==typeof e)return RegExp("^(?:"+e.pattern+")$",r)});return function(t){for(var r="",a=0;a<e.length;a++){var i=e[a];if("string"==typeof i){r+=i;continue}var s=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,d="*"===i.modifier||"+"===i.modifier;if(Array.isArray(s)){if(!d)throw TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===s.length){if(c)continue;throw TypeError('Expected "'+i.name+'" to not be empty')}for(var u=0;u<s.length;u++){var h=n(s[u],i);if(o&&!l[a].test(h))throw TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+h+'"');r+=i.prefix+h+i.suffix}continue}if("string"==typeof s||"number"==typeof s){var h=n(String(s),i);if(o&&!l[a].test(h))throw TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+h+'"');r+=i.prefix+h+i.suffix;continue}if(!c){var m=d?"an array":"a string";throw TypeError('Expected "'+i.name+'" to be '+m)}}return r}}function a(e,t,r){void 0===r&&(r={});var a=r.decode,n=void 0===a?function(e){return e}:a;return function(r){var a=e.exec(r);if(!a)return!1;for(var i=a[0],s=a.index,o=Object.create(null),l=1;l<a.length;l++)!function(e){if(void 0!==a[e]){var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=a[e].split(r.prefix+r.suffix).map(function(e){return n(e,r)}):o[r.name]=n(a[e],r)}}(l);return{path:i,index:s,params:o}}}function n(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function i(e){return e&&e.sensitive?"":"i"}function s(e,t,r){void 0===r&&(r={});for(var a=r.strict,s=void 0!==a&&a,o=r.start,l=r.end,c=r.encode,d=void 0===c?function(e){return e}:c,u="["+n(r.endsWith||"")+"]|$",h="["+n(r.delimiter||"/#?")+"]",m=void 0===o||o?"^":"",p=0;p<e.length;p++){var f=e[p];if("string"==typeof f)m+=n(d(f));else{var g=n(d(f.prefix)),x=n(d(f.suffix));if(f.pattern)if(t&&t.push(f),g||x)if("+"===f.modifier||"*"===f.modifier){var y="*"===f.modifier?"?":"";m+="(?:"+g+"((?:"+f.pattern+")(?:"+x+g+"(?:"+f.pattern+"))*)"+x+")"+y}else m+="(?:"+g+"("+f.pattern+")"+x+")"+f.modifier;else m+="("+f.pattern+")"+f.modifier;else m+="(?:"+g+x+")"+f.modifier}}if(void 0===l||l)s||(m+=h+"?"),m+=r.endsWith?"(?="+u+")":"$";else{var v=e[e.length-1],b="string"==typeof v?h.indexOf(v[v.length-1])>-1:void 0===v;s||(m+="(?:"+h+"(?="+u+"))?"),b||(m+="(?="+h+"|"+u+")")}return new RegExp(m,i(r))}function o(t,r,a){if(t instanceof RegExp){if(!r)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var l=0;l<n.length;l++)r.push({name:l,prefix:"",suffix:"",modifier:"",pattern:""});return t}return Array.isArray(t)?RegExp("(?:"+t.map(function(e){return o(e,r,a).source}).join("|")+")",i(a)):s(e(t,a),r,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=e,t.compile=function(t,a){return r(e(t,a),a)},t.tokensToFunction=r,t.match=function(e,t){var r=[];return a(o(e,r,t),r,t)},t.regexpToFunction=a,t.tokensToRegexp=s,t.pathToRegexp=o})(),e.exports=t})()},21293:(e,t)=>{"use strict";function r(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function a(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function n(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,a(e));else t.set(r,a(n));return t}function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];for(let t of r){for(let r of t.keys())e.delete(r);for(let[r,a]of t.entries())e.append(r,a)}return e}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return i},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return n}})},25076:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(35070);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getPreviouslyRevalidatedTags:function(){return x},getUtils:function(){return g},interpolateDynamicPath:function(){return p},normalizeDynamicRouteParams:function(){return f},normalizeVercelUrl:function(){return m}});let a=r(1932),n=r(72003),i=r(49153),s=r(76627),o=r(6246),l=r(59482),c=r(83051),d=r(64198),u=r(61835),h=r(67028);function m(e,t,r){let n=(0,a.parse)(e.url,!0);for(let e of(delete n.search,Object.keys(n.query))){let a=e!==u.NEXT_QUERY_PARAM_PREFIX&&e.startsWith(u.NEXT_QUERY_PARAM_PREFIX),i=e!==u.NEXT_INTERCEPTION_MARKER_PREFIX&&e.startsWith(u.NEXT_INTERCEPTION_MARKER_PREFIX);(a||i||t.includes(e)||r&&Object.keys(r.groups).includes(e))&&delete n.query[e]}e.url=(0,a.format)(n)}function p(e,t,r){if(!r)return e;for(let a of Object.keys(r.groups)){let n,{optional:i,repeat:s}=r.groups[a],o=`[${s?"...":""}${a}]`;i&&(o=`[${o}]`);let l=t[a];n=Array.isArray(l)?l.map(e=>e&&encodeURIComponent(e)).join("/"):l?encodeURIComponent(l):"",e=e.replaceAll(o,n)}return e}function f(e,t,r,a){let n={};for(let i of Object.keys(t.groups)){let s=e[i];"string"==typeof s?s=(0,d.normalizeRscURL)(s):Array.isArray(s)&&(s=s.map(d.normalizeRscURL));let o=r[i],l=t.groups[i].optional;if((Array.isArray(o)?o.some(e=>Array.isArray(s)?s.some(t=>t.includes(e)):null==s?void 0:s.includes(e)):null==s?void 0:s.includes(o))||void 0===s&&!(l&&a))return{params:{},hasValidParams:!1};l&&(!s||Array.isArray(s)&&1===s.length&&("index"===s[0]||s[0]===`[[...${i}]]`))&&(s=void 0,delete e[i]),s&&"string"==typeof s&&t.groups[i].repeat&&(s=s.split("/")),s&&(n[i]=s)}return{params:n,hasValidParams:!0}}function g({page:e,i18n:t,basePath:r,rewrites:a,pageIsDynamic:d,trailingSlash:u,caseSensitive:g}){let x,y,v;return d&&(x=(0,s.getNamedRouteRegex)(e,{prefixRouteKeys:!1}),v=(y=(0,o.getRouteMatcher)(x))(e)),{handleRewrites:function(s,o){let h={},m=o.pathname,p=a=>{let c=(0,i.getPathMatch)(a.source+(u?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!g});if(!o.pathname)return!1;let p=c(o.pathname);if((a.has||a.missing)&&p){let e=(0,l.matchHas)(s,o.query,a.has,a.missing);e?Object.assign(p,e):p=!1}if(p){let{parsedDestination:i,destQuery:s}=(0,l.prepareDestination)({appendParamsToQuery:!0,destination:a.destination,params:p,query:o.query});if(i.protocol)return!0;if(Object.assign(h,s,p),Object.assign(o.query,i.query),delete i.query,Object.assign(o,i),!(m=o.pathname))return!1;if(r&&(m=m.replace(RegExp(`^${r}`),"")||"/"),t){let e=(0,n.normalizeLocalePath)(m,t.locales);m=e.pathname,o.query.nextInternalLocale=e.detectedLocale||p.nextInternalLocale}if(m===e)return!0;if(d&&y){let e=y(m);if(e)return o.query={...o.query,...e},!0}}return!1};for(let e of a.beforeFiles||[])p(e);if(m!==e){let t=!1;for(let e of a.afterFiles||[])if(t=p(e))break;if(!t&&!(()=>{let t=(0,c.removeTrailingSlash)(m||"");return t===(0,c.removeTrailingSlash)(e)||(null==y?void 0:y(t))})()){for(let e of a.fallback||[])if(t=p(e))break}}return h},defaultRouteRegex:x,dynamicRouteMatcher:y,defaultRouteMatches:v,getParamsFromRouteMatches:function(e){if(!x)return null;let{groups:t,routeKeys:r}=x,a=(0,o.getRouteMatcher)({re:{exec:e=>{let a=Object.fromEntries(new URLSearchParams(e));for(let[e,t]of Object.entries(a)){let r=(0,h.normalizeNextQueryParam)(e);r&&(a[r]=t,delete a[e])}let n={};for(let e of Object.keys(r)){let i=r[e];if(!i)continue;let s=t[i],o=a[e];if(!s.optional&&!o)return null;n[s.pos]=o}return n}},groups:t})(e);return a||null},normalizeDynamicRouteParams:(e,t)=>x&&v?f(e,x,v,t):{params:{},hasValidParams:!1},normalizeVercelUrl:(e,t)=>m(e,t,x),interpolateDynamicPath:(e,t)=>p(e,t,x)}}function x(e,t){return"string"==typeof e[u.NEXT_CACHE_REVALIDATED_TAGS_HEADER]&&e[u.NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER]===t?e[u.NEXT_CACHE_REVALIDATED_TAGS_HEADER].split(","):[]}},35070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fillMetadataSegment:function(){return h},normalizeMetadataPageToRoute:function(){return p},normalizeMetadataRoute:function(){return m}});let a=r(13332),n=function(e){return e&&e.__esModule?e:{default:e}}(r(87131)),i=r(34865),s=r(76627),o=r(89856),l=r(64198),c=r(60890),d=r(91839);function u(e){let t=n.default.dirname(e);if(e.endsWith("/sitemap"))return"";let r="";return t.split("/").some(e=>(0,d.isGroupSegment)(e)||(0,d.isParallelRouteSegment)(e))&&(r=(0,o.djb2Hash)(t).toString(36).slice(0,6)),r}function h(e,t,r){let a=(0,l.normalizeAppPath)(e),o=(0,s.getNamedRouteRegex)(a,{prefixRouteKeys:!1}),d=(0,i.interpolateDynamicPath)(a,t,o),{name:h,ext:m}=n.default.parse(r),p=u(n.default.posix.join(e,h)),f=p?`-${p}`:"";return(0,c.normalizePathSep)(n.default.join(d,`${h}${f}${m}`))}function m(e){if(!(0,a.isMetadataPage)(e))return e;let t=e,r="";if("/robots"===e?t+=".txt":"/manifest"===e?t+=".webmanifest":r=u(e),!t.endsWith("/route")){let{dir:e,name:a,ext:i}=n.default.parse(t);t=n.default.posix.join(e,`${a}${r?`-${r}`:""}${i}`,"route")}return t}function p(e,t){let r=e.endsWith("/route"),a=r?e.slice(0,-6):e,n=a.endsWith("/sitemap")?".xml":"";return(t?`${a}/[__metadata_id__]`:`${a}${n}`)+(r?"/route":"")}},42363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return i}});let a=r(21293),n=r(47220);function i(e){if(e.startsWith("/"))return(0,n.parseRelativeUrl)(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:(0,a.searchParamsToUrlQuery)(t.searchParams),search:t.search}}},47220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseRelativeUrl",{enumerable:!0,get:function(){return n}}),r(76423);let a=r(21293);function n(e,t,r){void 0===r&&(r=!0);let n=new URL("http://n"),i=t?new URL(t,n):e.startsWith(".")?new URL("http://n"):n,{pathname:s,searchParams:o,search:l,hash:c,href:d,origin:u}=new URL(e,i);if(u!==n.origin)throw Object.defineProperty(Error("invariant: invalid relative URL, router received "+e),"__NEXT_ERROR_CODE",{value:"E159",enumerable:!1,configurable:!0});return{pathname:s,query:r?(0,a.searchParamsToUrlQuery)(o):void 0,search:l,hash:c,href:d.slice(u.length)}}},49153:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getPathMatch",{enumerable:!0,get:function(){return n}});let a=r(19958);function n(e,t){let r=[],n=(0,a.pathToRegexp)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),i=(0,a.regexpToFunction)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(n.source),n.flags):n,r);return(e,a)=>{if("string"!=typeof e)return!1;let n=i(e);if(!n)return!1;if(null==t?void 0:t.removeUnnamedParams)for(let e of r)"number"==typeof e.name&&delete n.params[e.name];return{...a,...n.params}}}},50641:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return n}});let r=/[|\\{}()[\]^$+*?.-]/,a=/[|\\{}()[\]^$+*?.-]/g;function n(e){return r.test(e)?e.replace(a,"\\$&"):e}},50924:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(16007).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\donov\\\\Music\\\\ai-medic-scribe-stable-backup\\\\ai-medic-scribe\\\\src\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\donov\\Music\\ai-medic-scribe-stable-backup\\ai-medic-scribe\\src\\app\\page.tsx","default")},59482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{compileNonPath:function(){return d},matchHas:function(){return c},parseDestination:function(){return u},prepareDestination:function(){return h}});let a=r(19958),n=r(50641),i=r(42363),s=r(94673),o=r(84400);function l(e){return e.replace(/__ESC_COLON_/gi,":")}function c(e,t,r,a){void 0===r&&(r=[]),void 0===a&&(a=[]);let n={},i=r=>{let a,i=r.key;switch(r.type){case"header":i=i.toLowerCase(),a=e.headers[i];break;case"cookie":a="cookies"in e?e.cookies[r.key]:(0,o.getCookieParser)(e.headers)()[r.key];break;case"query":a=t[i];break;case"host":{let{host:t}=(null==e?void 0:e.headers)||{};a=null==t?void 0:t.split(":",1)[0].toLowerCase()}}if(!r.value&&a)return n[function(e){let t="";for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);(a>64&&a<91||a>96&&a<123)&&(t+=e[r])}return t}(i)]=a,!0;if(a){let e=RegExp("^"+r.value+"$"),t=Array.isArray(a)?a.slice(-1)[0].match(e):a.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{n[e]=t.groups[e]}):"host"===r.type&&t[0]&&(n.host=t[0])),!0}return!1};return!(!r.every(e=>i(e))||a.some(e=>i(e)))&&n}function d(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,a.compile)("/"+e,{validate:!1})(t).slice(1)}function u(e){let t=e.destination;for(let r of Object.keys({...e.params,...e.query}))r&&(t=t.replace(RegExp(":"+(0,n.escapeStringRegexp)(r),"g"),"__ESC_COLON_"+r));let r=(0,i.parseUrl)(t),a=r.pathname;a&&(a=l(a));let s=r.href;s&&(s=l(s));let o=r.hostname;o&&(o=l(o));let c=r.hash;return c&&(c=l(c)),{...r,pathname:a,hostname:o,href:s,hash:c}}function h(e){let t,r,n=Object.assign({},e.query),i=u(e),{hostname:o,query:c}=i,h=i.pathname;i.hash&&(h=""+h+i.hash);let m=[],p=[];for(let e of((0,a.pathToRegexp)(h,p),p))m.push(e.name);if(o){let e=[];for(let t of((0,a.pathToRegexp)(o,e),e))m.push(t.name)}let f=(0,a.compile)(h,{validate:!1});for(let[r,n]of(o&&(t=(0,a.compile)(o,{validate:!1})),Object.entries(c)))Array.isArray(n)?c[r]=n.map(t=>d(l(t),e.params)):"string"==typeof n&&(c[r]=d(l(n),e.params));let g=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!g.some(e=>m.includes(e)))for(let t of g)t in c||(c[t]=e.params[t]);if((0,s.isInterceptionRouteAppPath)(h))for(let t of h.split("/")){let r=s.INTERCEPTION_ROUTE_MARKERS.find(e=>t.startsWith(e));if(r){"(..)(..)"===r?(e.params["0"]="(..)",e.params["1"]="(..)"):e.params["0"]=r;break}}try{let[a,n]=(r=f(e.params)).split("#",2);t&&(i.hostname=t(e.params)),i.pathname=a,i.hash=(n?"#":"")+(n||""),delete i.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Object.defineProperty(Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match"),"__NEXT_ERROR_CODE",{value:"E329",enumerable:!1,configurable:!0});throw e}return i.query={...n,...i.query},{newUrl:r,destQuery:c,parsedDestination:i}}},60890:(e,t)=>{"use strict";function r(e){return e.replace(/\\/g,"/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathSep",{enumerable:!0,get:function(){return r}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return i},normalizeRscURL:function(){return s}});let a=r(83551),n=r(91839);function i(e){return(0,a.ensureLeadingSlash)(e.split("/").reduce((e,t,r,a)=>!t||(0,n.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===a.length-1?e:e+"/"+t,""))}function s(e){return e.replace(/\.rsc($|\?)/,"$1")}},67451:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var n={},i=t.split(a),s=(r||{}).decode||e,o=0;o<i.length;o++){var l=i[o],c=l.indexOf("=");if(!(c<0)){var d=l.substr(0,c).trim(),u=l.substr(++c,l.length).trim();'"'==u[0]&&(u=u.slice(1,-1)),void 0==n[d]&&(n[d]=function(e,t){try{return t(e)}catch(t){return e}}(u,s))}}return n},t.serialize=function(e,t,a){var i=a||{},s=i.encode||r;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var o=s(t);if(o&&!n.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(i.domain){if(!n.test(i.domain))throw TypeError("option domain is invalid");l+="; Domain="+i.domain}if(i.path){if(!n.test(i.path))throw TypeError("option path is invalid");l+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(l+="; HttpOnly"),i.secure&&(l+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var e=decodeURIComponent,r=encodeURIComponent,a=/; */,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},68941:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=r(38139),n=r(15924),i=r(35702),s=r.n(i),o=r(29985),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,50924)),"C:\\Users\\donov\\Music\\ai-medic-scribe-stable-backup\\ai-medic-scribe\\src\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,25076))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,10375)),"C:\\Users\\donov\\Music\\ai-medic-scribe-stable-backup\\ai-medic-scribe\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,41554,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,90899,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,82088,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,25076))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["C:\\Users\\donov\\Music\\ai-medic-scribe-stable-backup\\ai-medic-scribe\\src\\app\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},71181:(e,t,r)=>{Promise.resolve().then(r.bind(r,50924))},74638:(e,t)=>{"use strict";function r(e){return e.endsWith("/route")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isAppRouteRoute",{enumerable:!0,get:function(){return r}})},76423:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return p},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return x},NormalizeError:function(){return f},PageNotFoundError:function(){return g},SP:function(){return h},ST:function(){return m},WEB_VITALS:function(){return r},execOnce:function(){return a},getDisplayName:function(){return l},getLocationOrigin:function(){return s},getURL:function(){return o},isAbsoluteUrl:function(){return i},isResSent:function(){return c},loadGetInitialProps:function(){return u},normalizeRepeatedSlashes:function(){return d},stringifyError:function(){return v}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function a(e){let t,r=!1;return function(){for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];return r||(r=!0,t=e(...n)),t}}let n=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>n.test(e);function s(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function o(){let{href:e}=window.location,t=s();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function c(e){return e.finished||e.headersSent}function d(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function u(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await u(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&c(r))return a;if(!a)throw Object.defineProperty(Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+a+'" instead.'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let h="undefined"!=typeof performance,m=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class f extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class x extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function v(e){return JSON.stringify({message:e.message,stack:e.stack})}},76627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getNamedMiddlewareRegex:function(){return f},getNamedRouteRegex:function(){return p},getRouteRegex:function(){return u},parseParameter:function(){return l}});let a=r(61835),n=r(94673),i=r(50641),s=r(83051),o=/^([^[]*)\[((?:\[[^\]]*\])|[^\]]+)\](.*)$/;function l(e){let t=e.match(o);return t?c(t[2]):c(e)}function c(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function d(e,t,r){let a={},l=1,d=[];for(let u of(0,s.removeTrailingSlash)(e).slice(1).split("/")){let e=n.INTERCEPTION_ROUTE_MARKERS.find(e=>u.startsWith(e)),s=u.match(o);if(e&&s&&s[2]){let{key:t,optional:r,repeat:n}=c(s[2]);a[t]={pos:l++,repeat:n,optional:r},d.push("/"+(0,i.escapeStringRegexp)(e)+"([^/]+?)")}else if(s&&s[2]){let{key:e,repeat:t,optional:n}=c(s[2]);a[e]={pos:l++,repeat:t,optional:n},r&&s[1]&&d.push("/"+(0,i.escapeStringRegexp)(s[1]));let o=t?n?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)";r&&s[1]&&(o=o.substring(1)),d.push(o)}else d.push("/"+(0,i.escapeStringRegexp)(u));t&&s&&s[3]&&d.push((0,i.escapeStringRegexp)(s[3]))}return{parameterizedRoute:d.join(""),groups:a}}function u(e,t){let{includeSuffix:r=!1,includePrefix:a=!1,excludeOptionalTrailingSlash:n=!1}=void 0===t?{}:t,{parameterizedRoute:i,groups:s}=d(e,r,a),o=i;return n||(o+="(?:/)?"),{re:RegExp("^"+o+"$"),groups:s}}function h(e){let t,{interceptionMarker:r,getSafeRouteKey:a,segment:n,routeKeys:s,keyPrefix:o,backreferenceDuplicateKeys:l}=e,{key:d,optional:u,repeat:h}=c(n),m=d.replace(/\W/g,"");o&&(m=""+o+m);let p=!1;(0===m.length||m.length>30)&&(p=!0),isNaN(parseInt(m.slice(0,1)))||(p=!0),p&&(m=a());let f=m in s;o?s[m]=""+o+d:s[m]=d;let g=r?(0,i.escapeStringRegexp)(r):"";return t=f&&l?"\\k<"+m+">":h?"(?<"+m+">.+?)":"(?<"+m+">[^/]+?)",u?"(?:/"+g+t+")?":"/"+g+t}function m(e,t,r,l,c){let d,u=(d=0,()=>{let e="",t=++d;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),m={},p=[];for(let d of(0,s.removeTrailingSlash)(e).slice(1).split("/")){let e=n.INTERCEPTION_ROUTE_MARKERS.some(e=>d.startsWith(e)),s=d.match(o);if(e&&s&&s[2])p.push(h({getSafeRouteKey:u,interceptionMarker:s[1],segment:s[2],routeKeys:m,keyPrefix:t?a.NEXT_INTERCEPTION_MARKER_PREFIX:void 0,backreferenceDuplicateKeys:c}));else if(s&&s[2]){l&&s[1]&&p.push("/"+(0,i.escapeStringRegexp)(s[1]));let e=h({getSafeRouteKey:u,segment:s[2],routeKeys:m,keyPrefix:t?a.NEXT_QUERY_PARAM_PREFIX:void 0,backreferenceDuplicateKeys:c});l&&s[1]&&(e=e.substring(1)),p.push(e)}else p.push("/"+(0,i.escapeStringRegexp)(d));r&&s&&s[3]&&p.push((0,i.escapeStringRegexp)(s[3]))}return{namedParameterizedRoute:p.join(""),routeKeys:m}}function p(e,t){var r,a,n;let i=m(e,t.prefixRouteKeys,null!=(r=t.includeSuffix)&&r,null!=(a=t.includePrefix)&&a,null!=(n=t.backreferenceDuplicateKeys)&&n),s=i.namedParameterizedRoute;return t.excludeOptionalTrailingSlash||(s+="(?:/)?"),{...u(e,t),namedRegex:"^"+s+"$",routeKeys:i.routeKeys}}function f(e,t){let{parameterizedRoute:r}=d(e,!1,!1),{catchAll:a=!0}=t;if("/"===r)return{namedRegex:"^/"+(a?".*":"")+"$"};let{namedParameterizedRoute:n}=m(e,!1,!1,!1,!1);return{namedRegex:"^"+n+(a?"(?:(/.*)?)":"")+"$"}}},83551:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},84400:(e,t,r)=>{"use strict";function a(e){return function(){let{cookie:t}=e;if(!t)return{};let{parse:a}=r(67451);return a(Array.isArray(t)?t.join("; "):t)}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getCookieParser",{enumerable:!0,get:function(){return a}})},89856:(e,t)=>{"use strict";function r(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)|0;return t>>>0}function a(e){return r(e).toString(36).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{djb2Hash:function(){return r},hexHash:function(){return a}})},94673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return n},extractInterceptionRouteInformation:function(){return s},isInterceptionRouteAppPath:function(){return i}});let a=r(64198),n=["(..)(..)","(.)","(..)","(...)"];function i(e){return void 0!==e.split("/").find(e=>n.find(t=>e.startsWith(t)))}function s(e){let t,r,i;for(let a of e.split("/"))if(r=n.find(e=>a.startsWith(e))){[t,i]=e.split(r,2);break}if(!t||!r||!i)throw Object.defineProperty(Error("Invalid interception route: "+e+". Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>"),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(t=(0,a.normalizeAppPath)(t),r){case"(.)":i="/"===t?"/"+i:t+"/"+i;break;case"(..)":if("/"===t)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..) marker at the root level, use (.) instead."),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});i=t.split("/").slice(0,-1).concat(i).join("/");break;case"(...)":i="/"+i;break;case"(..)(..)":let s=t.split("/");if(s.length<=2)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..)(..) marker at the root level or one level up."),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});i=s.slice(0,-2).concat(i).join("/");break;default:throw Object.defineProperty(Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:t,interceptedRoute:i}}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[247,13,575],()=>r(68941));module.exports=a})();